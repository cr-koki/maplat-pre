var mU=Object.defineProperty;var CU=(n,e,t)=>e in n?mU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var re=(n,e,t)=>CU(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();class Mf{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function IU(n,e,t){let i,r;t=t||xs;let s=0,a=n.length,o=!1;for(;s<a;)i=s+(a-s>>1),r=+t(n[i],e),r<0?s=i+1:(a=i,o=!r);return o?s:~s}function xs(n,e){return n>e?1:n<e?-1:0}function vU(n,e){return n<e?1:n>e?-1:0}function LI(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function yU(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function PI(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function Va(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function wU(n,e,t){const i=e||xs;return n.every(function(r,s){if(s===0)return!0;const a=i(n[s-1],r);return!(a>0||a===0)})}function Hh(){return!0}function Rf(){return!1}function Xh(){}function Ox(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!Va(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function EU(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Fu(n){for(const e in n)delete n[e]}function Ac(n){let e;for(e in n)return!1;return!e}class zs{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Bu extends Mf{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new zs(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,o[i]=0),++a[i];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[i]===0){let c=o[i];for(delete o[i];c--;)this.removeEventListener(i,Xh);delete a[i]}return l}disposeInternal(){this.listeners_&&Fu(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Xh,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const Mo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",bU=Mo.includes("safari")&&!Mo.includes("chrom");bU&&(Mo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Mo));const _U=Mo.includes("webkit")&&!Mo.includes("edge"),Vx=Mo.includes("macintosh"),xU=typeof devicePixelRatio<"u"?devicePixelRatio:1,hr=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,zx=typeof Image<"u"&&Image.prototype.decode,Gx=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();function xi(n,e,t,i){let r;return t&&t.length?r=t.shift():hr?r=new class extends OffscreenCanvas{constructor(){super(...arguments);re(this,"style",{})}}(n??300,e??150):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}let yp;function Wg(){return yp||(yp=xi(1,1)),yp}function Tf(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function Nv(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function SU(n){for(;n.lastChild;)n.lastChild.remove()}function MU(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}function Wx(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const i=this.childNodes.indexOf(t);if(i===-1)throw new Error("Reference node not found");return this.childNodes.splice(i,0,e),e},style:{}},{get(e,t,i){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,i)}})}function _a(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}function oi(n,e,t){return Math.min(Math.max(n,e),t)}function RU(n,e,t,i,r,s){const a=r-t,o=s-i;if(a!==0||o!==0){const l=((n-t)*a+(e-i)*o)/(a*a+o*o);l>1?(t=r,i=s):l>0&&(t+=a*l,i+=o*l)}return $l(n,e,t,i)}function $l(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function TU(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let o=i+1;o<e;o++){const l=Math.abs(n[o][i]);l>s&&(s=l,r=o)}if(s===0)return null;const a=n[r];n[r]=n[i],n[i]=a;for(let o=i+1;o<e;o++){const l=-n[o][i]/n[i][i];for(let c=i;c<e+1;c++)i==c?n[o][c]=0:n[o][c]+=l*n[i][c]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function kv(n){return n*180/Math.PI}function Ua(n){return n*Math.PI/180}function yo(n,e){const t=n%e;return t*e<0?t+e:t}function sr(n,e,t){return n+t*(e-n)}function Uf(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function gd(n,e){return Math.floor(Uf(n,e))}function fd(n,e){return Math.ceil(Uf(n,e))}function km(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}const NI=[NaN,NaN,NaN,0];let wp;function UU(){return wp||(wp=xi(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),wp}const FU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,BU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,DU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,LU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function pd(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function kh(n){throw new Error('failed to parse "'+n+'" as color')}function Zx(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(BU)||n.match(FU)||n.match(DU);if(s){const a=s[4],o=100/255;return[oi(pd(s[1],o)+.5|0,0,255),oi(pd(s[2],o)+.5|0,0,255),oi(pd(s[3],o)+.5|0,0,255),a!==void 0?oi(pd(a,100),0,1):1]}kh(n)}if(n.startsWith("#")){if(LU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=a){let h=parseInt(s.substring(l,l+a),16);a===1&&(h+=h<<4),o[l/a]=h}return o[3]=o[3]/255,o}kh(n)}const e=UU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&kh(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return Zx(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const r=Array.from(e.getImageData(0,0,1,1).data);return r[3]=Uf(r[3]/255,3),r}function PU(n){return typeof n=="string"?n:QI(n)}const NU=1024,Jc={};let Ep=0;function kU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function bp(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function _p(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function xp(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function Sp(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function Qv(n){const e=xp(n[0]),t=xp(n[1]),i=xp(n[2]),r=Sp(e*.222488403+t*.716873169+i*.06060791),s=500*(Sp(e*.452247074+t*.399439023+i*.148375274)-r),a=200*(r-Sp(e*.016863605+t*.117638439+i*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function QU(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,r=_p(e),s=_p(e+t/500*Math.cos(i)),a=_p(e-t/200*Math.sin(i)),o=bp(s*3.021973625-r*1.617392459-a*.404875592),l=bp(s*-.943766287+r*1.916279586+a*.027607165),c=bp(s*.069407491-r*.22898585+a*1.159737864);return[oi(o+.5|0,0,255),oi(l+.5|0,0,255),oi(c+.5|0,0,255),n[3]]}function kI(n){if(n==="none")return NI;if(Jc.hasOwnProperty(n))return Jc[n];if(Ep>=NU){let t=0;for(const i in Jc)(t++&3)===0&&(delete Jc[i],--Ep)}const e=Zx(n);e.length!==4&&kh(n);for(const t of e)isNaN(t)&&kh(n);return Jc[n]=e,++Ep,e}function Ro(n){return Array.isArray(n)?n:kI(n)}function QI(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+r+")"}function Ov(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function OI(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(function(t){typeof n[t]>"u"?n[t]=e[t]:Ov(e[t])&&Ov(n[t])&&Object.keys(e[t]).length>0&&OI(n[t],e[t])})}var Hx={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Gn(){var n=typeof document<"u"?document:{};return OI(n,Hx),n}var OU={document:Hx,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame:function(n){typeof setTimeout>"u"||clearTimeout(n)}};function Mi(){var n=typeof window<"u"?window:{};return OI(n,OU),n}function VU(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}function Qm(n){return Qm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qm(n)}function Zg(n,e){return Zg=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Zg(n,e)}function zU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Cg(n,e,t){return zU()?Cg=Reflect.construct:Cg=function(r,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(r,o),c=new l;return a&&Zg(c,a.prototype),c},Cg.apply(null,arguments)}function GU(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Om(n){var e=typeof Map=="function"?new Map:void 0;return Om=function(i){if(i===null||!GU(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return Cg(i,arguments,Qm(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Zg(r,i)},Om(n)}function WU(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ZU(n){var e=n.__proto__;Object.defineProperty(n,"__proto__",{get:function(){return e},set:function(i){e.__proto__=i}})}var xa=(function(n){VU(e,n);function e(t){var i;return i=n.call.apply(n,[this].concat(t))||this,ZU(WU(i)),i}return e})(Om(Array));function Du(n){n===void 0&&(n=[]);var e=[];return n.forEach(function(t){Array.isArray(t)?e.push.apply(e,Du(t)):e.push(t)}),e}function Xx(n,e){return Array.prototype.filter.call(n,e)}function HU(n){for(var e=[],t=0;t<n.length;t+=1)e.indexOf(n[t])===-1&&e.push(n[t]);return e}function XU(n,e){if(typeof n!="string")return[n];for(var t=[],i=e.querySelectorAll(n),r=0;r<i.length;r+=1)t.push(i[r]);return t}function ke(n,e){var t=Mi(),i=Gn(),r=[];if(!e&&n instanceof xa)return n;if(!n)return new xa(r);if(typeof n=="string"){var s=n.trim();if(s.indexOf("<")>=0&&s.indexOf(">")>=0){var a="div";s.indexOf("<li")===0&&(a="ul"),s.indexOf("<tr")===0&&(a="tbody"),(s.indexOf("<td")===0||s.indexOf("<th")===0)&&(a="tr"),s.indexOf("<tbody")===0&&(a="table"),s.indexOf("<option")===0&&(a="select");var o=i.createElement(a);o.innerHTML=s;for(var l=0;l<o.childNodes.length;l+=1)r.push(o.childNodes[l])}else r=XU(n.trim(),e||i)}else if(n.nodeType||n===t||n===i)r.push(n);else if(Array.isArray(n)){if(n instanceof xa)return n;r=n}return new xa(HU(r))}ke.fn=xa.prototype;function JU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=Du(e.map(function(r){return r.split(" ")}));return this.forEach(function(r){var s;(s=r.classList).add.apply(s,i)}),this}function jU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=Du(e.map(function(r){return r.split(" ")}));return this.forEach(function(r){var s;(s=r.classList).remove.apply(s,i)}),this}function YU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=Du(e.map(function(r){return r.split(" ")}));this.forEach(function(r){i.forEach(function(s){r.classList.toggle(s)})})}function KU(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=Du(e.map(function(r){return r.split(" ")}));return Xx(this,function(r){return i.filter(function(s){return r.classList.contains(s)}).length>0}).length>0}function qU(n,e){if(arguments.length===1&&typeof n=="string")return this[0]?this[0].getAttribute(n):void 0;for(var t=0;t<this.length;t+=1)if(arguments.length===2)this[t].setAttribute(n,e);else for(var i in n)this[t][i]=n[i],this[t].setAttribute(i,n[i]);return this}function $U(n){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(n);return this}function eF(n){for(var e=0;e<this.length;e+=1)this[e].style.transform=n;return this}function tF(n){for(var e=0;e<this.length;e+=1)this[e].style.transitionDuration=typeof n!="string"?n+"ms":n;return this}function iF(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],a=e[3];typeof e[1]=="function"&&(i=e[0],s=e[1],a=e[2],r=void 0),a||(a=!1);function o(m){var p=m.target;if(p){var A=m.target.dom7EventData||[];if(A.indexOf(m)<0&&A.unshift(m),ke(p).is(r))s.apply(p,A);else for(var C=ke(p).parents(),v=0;v<C.length;v+=1)ke(C[v]).is(r)&&s.apply(C[v],A)}}function l(m){var p=m&&m.target?m.target.dom7EventData||[]:[];p.indexOf(m)<0&&p.unshift(m),s.apply(this,p)}for(var c=i.split(" "),h,u=0;u<this.length;u+=1){var d=this[u];if(r)for(h=0;h<c.length;h+=1){var f=c[h];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[f]||(d.dom7LiveListeners[f]=[]),d.dom7LiveListeners[f].push({listener:s,proxyListener:o}),d.addEventListener(f,o,a)}else for(h=0;h<c.length;h+=1){var g=c[h];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[g]||(d.dom7Listeners[g]=[]),d.dom7Listeners[g].push({listener:s,proxyListener:l}),d.addEventListener(g,l,a)}}return this}function nF(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=e[0],r=e[1],s=e[2],a=e[3];typeof e[1]=="function"&&(i=e[0],s=e[1],a=e[2],r=void 0),a||(a=!1);for(var o=i.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],h=0;h<this.length;h+=1){var u=this[h],d=void 0;if(!r&&u.dom7Listeners?d=u.dom7Listeners[c]:r&&u.dom7LiveListeners&&(d=u.dom7LiveListeners[c]),d&&d.length)for(var g=d.length-1;g>=0;g-=1){var f=d[g];s&&f.listener===s||s&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===s?(u.removeEventListener(c,f.proxyListener,a),d.splice(g,1)):s||(u.removeEventListener(c,f.proxyListener,a),d.splice(g,1))}}return this}function rF(){for(var n=Mi(),e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var r=t[0].split(" "),s=t[1],a=0;a<r.length;a+=1)for(var o=r[a],l=0;l<this.length;l+=1){var c=this[l];if(n.CustomEvent){var h=new n.CustomEvent(o,{detail:s,bubbles:!0,cancelable:!0});c.dom7EventData=t.filter(function(u,d){return d>0}),c.dispatchEvent(h),c.dom7EventData=[],delete c.dom7EventData}}return this}function sF(n){var e=this;function t(i){i.target===this&&(n.call(this,i),e.off("transitionend",t))}return n&&e.on("transitionend",t),this}function aF(n){if(this.length>0){if(n){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function oF(n){if(this.length>0){if(n){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function lF(){if(this.length>0){var n=Mi(),e=Gn(),t=this[0],i=t.getBoundingClientRect(),r=e.body,s=t.clientTop||r.clientTop||0,a=t.clientLeft||r.clientLeft||0,o=t===n?n.scrollY:t.scrollTop,l=t===n?n.scrollX:t.scrollLeft;return{top:i.top+o-s,left:i.left+l-a}}return null}function cF(){var n=Mi();return this[0]?n.getComputedStyle(this[0],null):{}}function hF(n,e){var t=Mi(),i;if(arguments.length===1)if(typeof n=="string"){if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(n)}else{for(i=0;i<this.length;i+=1)for(var r in n)this[i].style[r]=n[r];return this}if(arguments.length===2&&typeof n=="string"){for(i=0;i<this.length;i+=1)this[i].style[n]=e;return this}return this}function uF(n){return n?(this.forEach(function(e,t){n.apply(e,[e,t])}),this):this}function dF(n){var e=Xx(this,n);return ke(e)}function gF(n){if(typeof n>"u")return this[0]?this[0].innerHTML:null;for(var e=0;e<this.length;e+=1)this[e].innerHTML=n;return this}function fF(n){if(typeof n>"u")return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=n;return this}function pF(n){var e=Mi(),t=Gn(),i=this[0],r,s;if(!i||typeof n>"u")return!1;if(typeof n=="string"){if(i.matches)return i.matches(n);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(n);if(i.msMatchesSelector)return i.msMatchesSelector(n);for(r=ke(n),s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}if(n===t)return i===t;if(n===e)return i===e;if(n.nodeType||n instanceof xa){for(r=n.nodeType?[n]:n,s=0;s<r.length;s+=1)if(r[s]===i)return!0;return!1}return!1}function AF(){var n=this[0],e;if(n){for(e=0;(n=n.previousSibling)!==null;)n.nodeType===1&&(e+=1);return e}}function mF(n){if(typeof n>"u")return this;var e=this.length;if(n>e-1)return ke([]);if(n<0){var t=e+n;return t<0?ke([]):ke([this[t]])}return ke([this[n]])}function CF(){for(var n,e=Gn(),t=0;t<arguments.length;t+=1){n=t<0||arguments.length<=t?void 0:arguments[t];for(var i=0;i<this.length;i+=1)if(typeof n=="string"){var r=e.createElement("div");for(r.innerHTML=n;r.firstChild;)this[i].appendChild(r.firstChild)}else if(n instanceof xa)for(var s=0;s<n.length;s+=1)this[i].appendChild(n[s]);else this[i].appendChild(n)}return this}function IF(n){var e=Gn(),t,i;for(t=0;t<this.length;t+=1)if(typeof n=="string"){var r=e.createElement("div");for(r.innerHTML=n,i=r.childNodes.length-1;i>=0;i-=1)this[t].insertBefore(r.childNodes[i],this[t].childNodes[0])}else if(n instanceof xa)for(i=0;i<n.length;i+=1)this[t].insertBefore(n[i],this[t].childNodes[0]);else this[t].insertBefore(n,this[t].childNodes[0]);return this}function vF(n){return this.length>0?n?this[0].nextElementSibling&&ke(this[0].nextElementSibling).is(n)?ke([this[0].nextElementSibling]):ke([]):this[0].nextElementSibling?ke([this[0].nextElementSibling]):ke([]):ke([])}function yF(n){var e=[],t=this[0];if(!t)return ke([]);for(;t.nextElementSibling;){var i=t.nextElementSibling;n?ke(i).is(n)&&e.push(i):e.push(i),t=i}return ke(e)}function wF(n){if(this.length>0){var e=this[0];return n?e.previousElementSibling&&ke(e.previousElementSibling).is(n)?ke([e.previousElementSibling]):ke([]):e.previousElementSibling?ke([e.previousElementSibling]):ke([])}return ke([])}function EF(n){var e=[],t=this[0];if(!t)return ke([]);for(;t.previousElementSibling;){var i=t.previousElementSibling;n?ke(i).is(n)&&e.push(i):e.push(i),t=i}return ke(e)}function bF(n){for(var e=[],t=0;t<this.length;t+=1)this[t].parentNode!==null&&(n?ke(this[t].parentNode).is(n)&&e.push(this[t].parentNode):e.push(this[t].parentNode));return ke(e)}function _F(n){for(var e=[],t=0;t<this.length;t+=1)for(var i=this[t].parentNode;i;)n?ke(i).is(n)&&e.push(i):e.push(i),i=i.parentNode;return ke(e)}function xF(n){var e=this;return typeof n>"u"?ke([]):(e.is(n)||(e=e.parents(n).eq(0)),e)}function SF(n){for(var e=[],t=0;t<this.length;t+=1)for(var i=this[t].querySelectorAll(n),r=0;r<i.length;r+=1)e.push(i[r]);return ke(e)}function MF(n){for(var e=[],t=0;t<this.length;t+=1)for(var i=this[t].children,r=0;r<i.length;r+=1)(!n||ke(i[r]).is(n))&&e.push(i[r]);return ke(e)}function RF(){for(var n=0;n<this.length;n+=1)this[n].parentNode&&this[n].parentNode.removeChild(this[n]);return this}var Vv={addClass:JU,removeClass:jU,hasClass:KU,toggleClass:YU,attr:qU,removeAttr:$U,transform:eF,transition:tF,on:iF,off:nF,trigger:rF,transitionEnd:sF,outerWidth:aF,outerHeight:oF,styles:cF,offset:lF,css:hF,each:uF,html:gF,text:fF,is:pF,index:AF,eq:mF,append:CF,prepend:IF,next:vF,nextAll:yF,prev:wF,prevAll:EF,parent:bF,parents:_F,closest:xF,find:SF,children:MF,filter:dF,remove:RF};Object.keys(Vv).forEach(function(n){Object.defineProperty(ke.fn,n,{value:Vv[n],writable:!0})});function TF(n){var e=n;Object.keys(e).forEach(function(t){try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Vm(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Fa(){return Date.now()}function UF(n){var e=Mi(),t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function FF(n,e){e===void 0&&(e="x");var t=Mi(),i,r,s,a=UF(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(function(o){return o.replace(",",".")}).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function vh(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function BF(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function si(){for(var n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"],t=1;t<arguments.length;t+=1){var i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!BF(i))for(var r=Object.keys(Object(i)).filter(function(c){return e.indexOf(c)<0}),s=0,a=r.length;s<a;s+=1){var o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(vh(n[o])&&vh(i[o])?i[o].__swiper__?n[o]=i[o]:si(n[o],i[o]):!vh(n[o])&&vh(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:si(n[o],i[o])):n[o]=i[o])}}return n}function VI(n,e){Object.keys(e).forEach(function(t){vh(e[t])&&Object.keys(e[t]).forEach(function(i){typeof e[t][i]=="function"&&(e[t][i]=e[t][i].bind(n))}),n[t]=e[t]})}function il(n){return n===void 0&&(n=""),"."+n.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function Jx(n,e,t,i){var r=Gn();return t&&Object.keys(i).forEach(function(s){if(!e[s]&&e.auto===!0){var a=r.createElement("div");a.className=i[s],n.append(a),e[s]=a}}),e}var Mp;function DF(){var n=Mi(),e=Gn();return{touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch),pointerEvents:!!n.PointerEvent&&"maxTouchPoints"in n.navigator&&n.navigator.maxTouchPoints>=0,observer:(function(){return"MutationObserver"in n||"WebkitMutationObserver"in n})(),passiveListener:(function(){var i=!1;try{var r=Object.defineProperty({},"passive",{get:function(){i=!0}});n.addEventListener("testPassiveListener",null,r)}catch{}return i})(),gestures:(function(){return"ongesturestart"in n})()}}function jx(){return Mp||(Mp=DF()),Mp}var Rp;function LF(n){var e=n===void 0?{}:n,t=e.userAgent,i=jx(),r=Mi(),s=r.navigator.platform,a=t||r.navigator.userAgent,o={ios:!1,android:!1},l=r.screen.width,c=r.screen.height,h=a.match(/(Android);?[\s\/]+([\d.]+)?/),u=a.match(/(iPad).*OS\s([\d_]+)/),d=a.match(/(iPod)(.*OS\s([\d_]+))?/),g=!u&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=s==="Win32",m=s==="MacIntel",p=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&m&&i.touch&&p.indexOf(l+"x"+c)>=0&&(u=a.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),m=!1),h&&!f&&(o.os="android",o.android=!0),(u||g||d)&&(o.os="ios",o.ios=!0),o}function PF(n){return n===void 0&&(n={}),Rp||(Rp=LF(n)),Rp}var Tp;function NF(){var n=Mi();function e(){var t=n.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}return{isEdge:!!n.navigator.userAgent.match(/Edge/g),isSafari:e(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function kF(){return Tp||(Tp=NF()),Tp}var QF=function(){var e=Mi();return typeof e.ResizeObserver<"u"};const OF={name:"resize",create:function(){var e=this;si(e,{resize:{observer:null,createObserver:function(){!e||e.destroyed||!e.initialized||(e.resize.observer=new ResizeObserver(function(i){var r=e.width,s=e.height,a=r,o=s;i.forEach(function(l){var c=l.contentBoxSize,h=l.contentRect,u=l.target;u&&u!==e.el||(a=h?h.width:(c[0]||c).inlineSize,o=h?h.height:(c[0]||c).blockSize)}),(a!==r||o!==s)&&e.resize.resizeHandler()}),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){!e||e.destroyed||!e.initialized||(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){!e||e.destroyed||!e.initialized||e.emit("orientationchange")}}})},on:{init:function(e){var t=Mi();if(e.params.resizeObserver&&QF()){e.resize.createObserver();return}t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler)},destroy:function(e){var t=Mi();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function zm(){return zm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},zm.apply(this,arguments)}var VF={attach:function(e,t){t===void 0&&(t={});var i=Mi(),r=this,s=i.MutationObserver||i.WebkitMutationObserver,a=new s(function(o){if(o.length===1){r.emit("observerUpdate",o[0]);return}var l=function(){r.emit("observerUpdate",o[0])};i.requestAnimationFrame?i.requestAnimationFrame(l):i.setTimeout(l,0)});a.observe(e,{attributes:typeof t.attributes>"u"?!0:t.attributes,childList:typeof t.childList>"u"?!0:t.childList,characterData:typeof t.characterData>"u"?!0:t.characterData}),r.observer.observers.push(a)},init:function(){var e=this;if(!(!e.support.observer||!e.params.observer)){if(e.params.observeParents)for(var t=e.$el.parents(),i=0;i<t.length;i+=1)e.observer.attach(t[i]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){var e=this;e.observer.observers.forEach(function(t){t.disconnect()}),e.observer.observers=[]}};const zF={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var e=this;VI(e,{observer:zm({},VF,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}},GF={useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var r=t.modules[i];r.params&&si(e,r.params)})},useModules:function(e){e===void 0&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var r=t.modules[i],s=e[i]||{};r.on&&t.on&&Object.keys(r.on).forEach(function(a){t.on(a,r.on[a])}),r.create&&r.create.bind(t)(s)})}},WF={on:function(e,t,i){var r=this;if(typeof t!="function")return r;var s=i?"unshift":"push";return e.split(" ").forEach(function(a){r.eventsListeners[a]||(r.eventsListeners[a]=[]),r.eventsListeners[a][s](t)}),r},once:function(e,t,i){var r=this;if(typeof t!="function")return r;function s(){r.off(e,s),s.__emitterProxy&&delete s.__emitterProxy;for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];t.apply(r,o)}return s.__emitterProxy=t,r.on(e,s,i)},onAny:function(e,t){var i=this;if(typeof e!="function")return i;var r=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[r](e),i},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off:function(e,t){var i=this;return i.eventsListeners&&e.split(" ").forEach(function(r){typeof t>"u"?i.eventsListeners[r]=[]:i.eventsListeners[r]&&i.eventsListeners[r].forEach(function(s,a){(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[r].splice(a,1)})}),i},emit:function(){var e=this;if(!e.eventsListeners)return e;for(var t,i,r,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];typeof a[0]=="string"||Array.isArray(a[0])?(t=a[0],i=a.slice(1,a.length),r=e):(t=a[0].events,i=a[0].data,r=a[0].context||e),i.unshift(r);var l=Array.isArray(t)?t:t.split(" ");return l.forEach(function(c){e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(function(h){h.apply(r,[c].concat(i))}),e.eventsListeners&&e.eventsListeners[c]&&e.eventsListeners[c].forEach(function(h){h.apply(r,i)})}),e}};function ZF(){var n=this,e,t,i=n.$el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i[0].clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i[0].clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),t=t-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),si(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function HF(){var n=this;function e(pe){return n.isHorizontal()?pe:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[pe]}function t(pe,D){return parseFloat(pe.getPropertyValue(e(D))||0)}var i=n.params,r=n.$wrapperEl,s=n.size,a=n.rtlTranslate,o=n.wrongRTL,l=n.virtual&&i.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,h=r.children("."+n.params.slideClass),u=l?n.virtual.slides.length:h.length,d=[],g=[],f=[],m=i.slidesOffsetBefore;typeof m=="function"&&(m=i.slidesOffsetBefore.call(n));var p=i.slidesOffsetAfter;typeof p=="function"&&(p=i.slidesOffsetAfter.call(n));var A=n.snapGrid.length,C=n.slidesGrid.length,v=i.spaceBetween,I=-m,w=0,b=0;if(!(typeof s>"u")){typeof v=="string"&&v.indexOf("%")>=0&&(v=parseFloat(v.replace("%",""))/100*s),n.virtualSize=-v,a?h.css({marginLeft:"",marginBottom:"",marginTop:""}):h.css({marginRight:"",marginBottom:"",marginTop:""});var _;i.slidesPerColumn>1&&(Math.floor(u/i.slidesPerColumn)===u/n.params.slidesPerColumn?_=u:_=Math.ceil(u/i.slidesPerColumn)*i.slidesPerColumn,i.slidesPerView!=="auto"&&i.slidesPerColumnFill==="row"&&(_=Math.max(_,i.slidesPerView*i.slidesPerColumn)));for(var x,y=i.slidesPerColumn,E=_/y,S=Math.floor(u/i.slidesPerColumn),R=0;R<u;R+=1){x=0;var M=h.eq(R);if(i.slidesPerColumn>1){var T=void 0,P=void 0,F=void 0;if(i.slidesPerColumnFill==="row"&&i.slidesPerGroup>1){var N=Math.floor(R/(i.slidesPerGroup*i.slidesPerColumn)),L=R-i.slidesPerColumn*i.slidesPerGroup*N,W=N===0?i.slidesPerGroup:Math.min(Math.ceil((u-N*y*i.slidesPerGroup)/y),i.slidesPerGroup);F=Math.floor(L/W),P=L-F*W+N*i.slidesPerGroup,T=P+F*_/y,M.css({"-webkit-box-ordinal-group":T,"-moz-box-ordinal-group":T,"-ms-flex-order":T,"-webkit-order":T,order:T})}else i.slidesPerColumnFill==="column"?(P=Math.floor(R/y),F=R-P*y,(P>S||P===S&&F===y-1)&&(F+=1,F>=y&&(F=0,P+=1))):(F=Math.floor(R/E),P=R-F*E);M.css(e("margin-top"),F!==0?i.spaceBetween&&i.spaceBetween+"px":"")}if(M.css("display")!=="none"){if(i.slidesPerView==="auto"){var ne=getComputedStyle(M[0]),de=M[0].style.transform,ee=M[0].style.webkitTransform;if(de&&(M[0].style.transform="none"),ee&&(M[0].style.webkitTransform="none"),i.roundLengths)x=n.isHorizontal()?M.outerWidth(!0):M.outerHeight(!0);else{var Me=t(ne,"width"),G=t(ne,"padding-left"),te=t(ne,"padding-right"),we=t(ne,"margin-left"),le=t(ne,"margin-right"),xe=ne.getPropertyValue("box-sizing");if(xe&&xe==="border-box")x=Me+we+le;else{var Re=M[0],Fe=Re.clientWidth,Ve=Re.offsetWidth;x=Me+G+te+we+le+(Ve-Fe)}}de&&(M[0].style.transform=de),ee&&(M[0].style.webkitTransform=ee),i.roundLengths&&(x=Math.floor(x))}else x=(s-(i.slidesPerView-1)*v)/i.slidesPerView,i.roundLengths&&(x=Math.floor(x)),h[R]&&(h[R].style[e("width")]=x+"px");h[R]&&(h[R].swiperSlideSize=x),f.push(x),i.centeredSlides?(I=I+x/2+w/2+v,w===0&&R!==0&&(I=I-s/2-v),R===0&&(I=I-s/2-v),Math.abs(I)<1/1e3&&(I=0),i.roundLengths&&(I=Math.floor(I)),b%i.slidesPerGroup===0&&d.push(I),g.push(I)):(i.roundLengths&&(I=Math.floor(I)),(b-Math.min(n.params.slidesPerGroupSkip,b))%n.params.slidesPerGroup===0&&d.push(I),g.push(I),I=I+x+v),n.virtualSize+=x+v,w=x,b+=1}}n.virtualSize=Math.max(n.virtualSize,s)+p;var $e;if(a&&o&&(i.effect==="slide"||i.effect==="coverflow")&&r.css({width:n.virtualSize+i.spaceBetween+"px"}),i.setWrapperSize){var xt;r.css((xt={},xt[e("width")]=n.virtualSize+i.spaceBetween+"px",xt))}if(i.slidesPerColumn>1){var z;if(n.virtualSize=(x+i.spaceBetween)*_,n.virtualSize=Math.ceil(n.virtualSize/i.slidesPerColumn)-i.spaceBetween,r.css((z={},z[e("width")]=n.virtualSize+i.spaceBetween+"px",z)),i.centeredSlides){$e=[];for(var St=0;St<d.length;St+=1){var Ze=d[St];i.roundLengths&&(Ze=Math.floor(Ze)),d[St]<n.virtualSize+d[0]&&$e.push(Ze)}d=$e}}if(!i.centeredSlides){$e=[];for(var We=0;We<d.length;We+=1){var Le=d[We];i.roundLengths&&(Le=Math.floor(Le)),d[We]<=n.virtualSize-s&&$e.push(Le)}d=$e,Math.floor(n.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(n.virtualSize-s)}if(d.length===0&&(d=[0]),i.spaceBetween!==0){var ht,Pe=n.isHorizontal()&&a?"marginLeft":e("marginRight");h.filter(function(pe,D){return i.cssMode?D!==h.length-1:!0}).css((ht={},ht[Pe]=v+"px",ht))}if(i.centeredSlides&&i.centeredSlidesBounds){var k=0;f.forEach(function(pe){k+=pe+(i.spaceBetween?i.spaceBetween:0)}),k-=i.spaceBetween;var U=k-s;d=d.map(function(pe){return pe<0?-m:pe>U?U+p:pe})}if(i.centerInsufficientSlides){var Y=0;if(f.forEach(function(pe){Y+=pe+(i.spaceBetween?i.spaceBetween:0)}),Y-=i.spaceBetween,Y<s){var ge=(s-Y)/2;d.forEach(function(pe,D){d[D]=pe-ge}),g.forEach(function(pe,D){g[D]=pe+ge})}}si(n,{slides:h,snapGrid:d,slidesGrid:g,slidesSizesGrid:f}),u!==c&&n.emit("slidesLengthChange"),d.length!==A&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),g.length!==C&&n.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&n.updateSlidesOffset()}}function XF(n){var e=this,t=[],i=e.virtual&&e.params.virtual.enabled,r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);var a=function(h){return i?e.slides.filter(function(u){return parseInt(u.getAttribute("data-swiper-slide-index"),10)===h})[0]:e.slides.eq(h)[0]};if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)e.visibleSlides.each(function(c){t.push(c)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){var o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){var l=t[s].offsetHeight;r=l>r?l:r}r&&e.$wrapperEl.css("height",r+"px")}function JF(){for(var n=this,e=n.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=n.isHorizontal()?e[t].offsetLeft:e[t].offsetTop}function jF(n){n===void 0&&(n=this&&this.translate||0);var e=this,t=e.params,i=e.slides,r=e.rtlTranslate;if(i.length!==0){typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();var s=-n;r&&(s=n),i.removeClass(t.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var a=0;a<i.length;a+=1){var o=i[a],l=(s+(t.centeredSlides?e.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+t.spaceBetween);if(t.watchSlidesVisibility||t.centeredSlides&&t.autoHeight){var c=-(s-o.swiperSlideOffset),h=c+e.slidesSizesGrid[a],u=c>=0&&c<e.size-1||h>1&&h<=e.size||c<=0&&h>=e.size;u&&(e.visibleSlides.push(o),e.visibleSlidesIndexes.push(a),i.eq(a).addClass(t.slideVisibleClass))}o.progress=r?-l:l}e.visibleSlides=ke(e.visibleSlides)}}function YF(n){var e=this;if(typeof n>"u"){var t=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*t||0}var i=e.params,r=e.maxTranslate()-e.minTranslate(),s=e.progress,a=e.isBeginning,o=e.isEnd,l=a,c=o;r===0?(s=0,a=!0,o=!0):(s=(n-e.minTranslate())/r,a=s<=0,o=s>=1),si(e,{progress:s,isBeginning:a,isEnd:o}),(i.watchSlidesProgress||i.watchSlidesVisibility||i.centeredSlides&&i.autoHeight)&&e.updateSlidesProgress(n),a&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!a||c&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}function KF(){var n=this,e=n.slides,t=n.params,i=n.$wrapperEl,r=n.activeIndex,s=n.realIndex,a=n.virtual&&t.virtual.enabled;e.removeClass(t.slideActiveClass+" "+t.slideNextClass+" "+t.slidePrevClass+" "+t.slideDuplicateActiveClass+" "+t.slideDuplicateNextClass+" "+t.slideDuplicatePrevClass);var o;a?o=n.$wrapperEl.find("."+t.slideClass+'[data-swiper-slide-index="'+r+'"]'):o=e.eq(r),o.addClass(t.slideActiveClass),t.loop&&(o.hasClass(t.slideDuplicateClass)?i.children("."+t.slideClass+":not(."+t.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(t.slideDuplicateActiveClass):i.children("."+t.slideClass+"."+t.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(t.slideDuplicateActiveClass));var l=o.nextAll("."+t.slideClass).eq(0).addClass(t.slideNextClass);t.loop&&l.length===0&&(l=e.eq(0),l.addClass(t.slideNextClass));var c=o.prevAll("."+t.slideClass).eq(0).addClass(t.slidePrevClass);t.loop&&c.length===0&&(c=e.eq(-1),c.addClass(t.slidePrevClass)),t.loop&&(l.hasClass(t.slideDuplicateClass)?i.children("."+t.slideClass+":not(."+t.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(t.slideDuplicateNextClass):i.children("."+t.slideClass+"."+t.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(t.slideDuplicateNextClass),c.hasClass(t.slideDuplicateClass)?i.children("."+t.slideClass+":not(."+t.slideDuplicateClass+')[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(t.slideDuplicatePrevClass):i.children("."+t.slideClass+"."+t.slideDuplicateClass+'[data-swiper-slide-index="'+c.attr("data-swiper-slide-index")+'"]').addClass(t.slideDuplicatePrevClass)),n.emitSlidesClasses()}function qF(n){var e=this,t=e.rtlTranslate?e.translate:-e.translate,i=e.slidesGrid,r=e.snapGrid,s=e.params,a=e.activeIndex,o=e.realIndex,l=e.snapIndex,c=n,h;if(typeof c>"u"){for(var u=0;u<i.length;u+=1)typeof i[u+1]<"u"?t>=i[u]&&t<i[u+1]-(i[u+1]-i[u])/2?c=u:t>=i[u]&&t<i[u+1]&&(c=u+1):t>=i[u]&&(c=u);s.normalizeSlideIndex&&(c<0||typeof c>"u")&&(c=0)}if(r.indexOf(t)>=0)h=r.indexOf(t);else{var d=Math.min(s.slidesPerGroupSkip,c);h=d+Math.floor((c-d)/s.slidesPerGroup)}if(h>=r.length&&(h=r.length-1),c===a){h!==l&&(e.snapIndex=h,e.emit("snapIndexChange"));return}var g=parseInt(e.slides.eq(c).attr("data-swiper-slide-index")||c,10);si(e,{snapIndex:h,realIndex:g,previousIndex:a,activeIndex:c}),e.emit("activeIndexChange"),e.emit("snapIndexChange"),o!==g&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function $F(n){var e=this,t=e.params,i=ke(n.target).closest("."+t.slideClass)[0],r=!1,s;if(i){for(var a=0;a<e.slides.length;a+=1)if(e.slides[a]===i){r=!0,s=a;break}}if(i&&r)e.clickedSlide=i,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(ke(i).attr("data-swiper-slide-index"),10):e.clickedIndex=s;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}t.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}const e2={updateSize:ZF,updateSlides:HF,updateAutoHeight:XF,updateSlidesOffset:JF,updateSlidesProgress:jF,updateProgress:YF,updateSlidesClasses:KF,updateActiveIndex:qF,updateClickedSlide:$F};function t2(n){n===void 0&&(n=this.isHorizontal()?"x":"y");var e=this,t=e.params,i=e.rtlTranslate,r=e.translate,s=e.$wrapperEl;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;var a=FF(s[0],n);return i&&(a=-a),a||0}function i2(n,e){var t=this,i=t.rtlTranslate,r=t.params,s=t.$wrapperEl,a=t.wrapperEl,o=t.progress,l=0,c=0,h=0;t.isHorizontal()?l=i?-n:n:c=n,r.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),r.cssMode?a[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-l:-c:r.virtualTranslate||s.transform("translate3d("+l+"px, "+c+"px, "+h+"px)"),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?l:c;var u,d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function n2(){return-this.snapGrid[0]}function r2(){return-this.snapGrid[this.snapGrid.length-1]}function s2(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);var s=this,a=s.params,o=s.wrapperEl;if(s.animating&&a.preventInteractionOnTransition)return!1;var l=s.minTranslate(),c=s.maxTranslate(),h;if(i&&n>l?h=l:i&&n<c?h=c:h=n,s.updateProgress(h),a.cssMode){var u=s.isHorizontal();if(e===0)o[u?"scrollLeft":"scrollTop"]=-h;else if(o.scrollTo){var d;o.scrollTo((d={},d[u?"left":"top"]=-h,d.behavior="smooth",d))}else o[u?"scrollLeft":"scrollTop"]=-h;return!0}return e===0?(s.setTransition(0),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.$wrapperEl[0].addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onTranslateToWrapperTransitionEnd))),!0}const a2={getTranslate:t2,setTranslate:i2,minTranslate:n2,maxTranslate:r2,translateTo:s2};function o2(n,e){var t=this;t.params.cssMode||t.$wrapperEl.transition(n),t.emit("setTransition",n,e)}function l2(n,e){n===void 0&&(n=!0);var t=this,i=t.activeIndex,r=t.params,s=t.previousIndex;if(!r.cssMode){r.autoHeight&&t.updateAutoHeight();var a=e;if(a||(i>s?a="next":i<s?a="prev":a="reset"),t.emit("transitionStart"),n&&i!==s){if(a==="reset"){t.emit("slideResetTransitionStart");return}t.emit("slideChangeTransitionStart"),a==="next"?t.emit("slideNextTransitionStart"):t.emit("slidePrevTransitionStart")}}}function c2(n,e){n===void 0&&(n=!0);var t=this,i=t.activeIndex,r=t.previousIndex,s=t.params;if(t.animating=!1,!s.cssMode){t.setTransition(0);var a=e;if(a||(i>r?a="next":i<r?a="prev":a="reset"),t.emit("transitionEnd"),n&&i!==r){if(a==="reset"){t.emit("slideResetTransitionEnd");return}t.emit("slideChangeTransitionEnd"),a==="next"?t.emit("slideNextTransitionEnd"):t.emit("slidePrevTransitionEnd")}}}const h2={setTransition:o2,transitionStart:l2,transitionEnd:c2};function u2(n,e,t,i,r){if(n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n!="number"&&typeof n!="string")throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof n+"] given.");if(typeof n=="string"){var s=parseInt(n,10),a=isFinite(s);if(!a)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+n+"] given.");n=s}var o=this,l=n;l<0&&(l=0);var c=o.params,h=o.snapGrid,u=o.slidesGrid,d=o.previousIndex,g=o.activeIndex,f=o.rtlTranslate,m=o.wrapperEl,p=o.enabled;if(o.animating&&c.preventInteractionOnTransition||!p&&!i&&!r)return!1;var A=Math.min(o.params.slidesPerGroupSkip,l),C=A+Math.floor((l-A)/o.params.slidesPerGroup);C>=h.length&&(C=h.length-1),(g||c.initialSlide||0)===(d||0)&&t&&o.emit("beforeSlideChangeStart");var v=-h[C];if(o.updateProgress(v),c.normalizeSlideIndex)for(var I=0;I<u.length;I+=1){var w=-Math.floor(v*100),b=Math.floor(u[I]*100),_=Math.floor(u[I+1]*100);typeof u[I+1]<"u"?w>=b&&w<_-(_-b)/2?l=I:w>=b&&w<_&&(l=I+1):w>=b&&(l=I)}if(o.initialized&&l!==g&&(!o.allowSlideNext&&v<o.translate&&v<o.minTranslate()||!o.allowSlidePrev&&v>o.translate&&v>o.maxTranslate()&&(g||0)!==l))return!1;var x;if(l>g?x="next":l<g?x="prev":x="reset",f&&-v===o.translate||!f&&v===o.translate)return o.updateActiveIndex(l),c.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),c.effect!=="slide"&&o.setTranslate(v),x!=="reset"&&(o.transitionStart(t,x),o.transitionEnd(t,x)),!1;if(c.cssMode){var y=o.isHorizontal(),E=-v;if(f&&(E=m.scrollWidth-m.offsetWidth-E),e===0)m[y?"scrollLeft":"scrollTop"]=E;else if(m.scrollTo){var S;m.scrollTo((S={},S[y?"left":"top"]=E,S.behavior="smooth",S))}else m[y?"scrollLeft":"scrollTop"]=E;return!0}return e===0?(o.setTransition(0),o.setTranslate(v),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(t,x),o.transitionEnd(t,x)):(o.setTransition(e),o.setTranslate(v),o.updateActiveIndex(l),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(t,x),o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(M){!o||o.destroyed||M.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(t,x))}),o.$wrapperEl[0].addEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onSlideToWrapperTransitionEnd))),!0}function d2(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0);var r=this,s=n;return r.params.loop&&(s+=r.loopedSlides),r.slideTo(s,e,t,i)}function g2(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);var i=this,r=i.params,s=i.animating,a=i.enabled;if(!a)return i;var o=i.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return i.slideTo(i.activeIndex+o,n,e,t)}function f2(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);var i=this,r=i.params,s=i.animating,a=i.snapGrid,o=i.slidesGrid,l=i.rtlTranslate,c=i.enabled;if(!c)return i;if(r.loop){if(s&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}var h=l?i.translate:-i.translate;function u(p){return p<0?-Math.floor(Math.abs(p)):Math.floor(p)}var d=u(h),g=a.map(function(p){return u(p)}),f=a[g.indexOf(d)-1];typeof f>"u"&&r.cssMode&&a.forEach(function(p){!f&&d>=p&&(f=p)});var m;return typeof f<"u"&&(m=o.indexOf(f),m<0&&(m=i.activeIndex-1)),i.slideTo(m,n,e,t)}function p2(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);var i=this;return i.slideTo(i.activeIndex,n,e,t)}function A2(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);var r=this,s=r.activeIndex,a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){var c=r.snapGrid[o],h=r.snapGrid[o+1];l-c>(h-c)*i&&(s+=r.params.slidesPerGroup)}else{var u=r.snapGrid[o-1],d=r.snapGrid[o];l-u<=(d-u)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function m2(){var n=this,e=n.params,t=n.$wrapperEl,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView,r=n.clickedIndex,s;if(e.loop){if(n.animating)return;s=parseInt(ke(n.clickedSlide).attr("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=t.children("."+e.slideClass+'[data-swiper-slide-index="'+s+'"]:not(.'+e.slideDuplicateClass+")").eq(0).index(),Vm(function(){n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=t.children("."+e.slideClass+'[data-swiper-slide-index="'+s+'"]:not(.'+e.slideDuplicateClass+")").eq(0).index(),Vm(function(){n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}const C2={slideTo:u2,slideToLoop:d2,slideNext:g2,slidePrev:f2,slideReset:p2,slideToClosest:A2,slideToClickedSlide:m2};function I2(){var n=this,e=Gn(),t=n.params,i=n.$wrapperEl;i.children("."+t.slideClass+"."+t.slideDuplicateClass).remove();var r=i.children("."+t.slideClass);if(t.loopFillGroupWithBlank){var s=t.slidesPerGroup-r.length%t.slidesPerGroup;if(s!==t.slidesPerGroup){for(var a=0;a<s;a+=1){var o=ke(e.createElement("div")).addClass(t.slideClass+" "+t.slideBlankClass);i.append(o)}r=i.children("."+t.slideClass)}}t.slidesPerView==="auto"&&!t.loopedSlides&&(t.loopedSlides=r.length),n.loopedSlides=Math.ceil(parseFloat(t.loopedSlides||t.slidesPerView,10)),n.loopedSlides+=t.loopAdditionalSlides,n.loopedSlides>r.length&&(n.loopedSlides=r.length);var l=[],c=[];r.each(function(d,g){var f=ke(d);g<n.loopedSlides&&c.push(d),g<r.length&&g>=r.length-n.loopedSlides&&l.push(d),f.attr("data-swiper-slide-index",g)});for(var h=0;h<c.length;h+=1)i.append(ke(c[h].cloneNode(!0)).addClass(t.slideDuplicateClass));for(var u=l.length-1;u>=0;u-=1)i.prepend(ke(l[u].cloneNode(!0)).addClass(t.slideDuplicateClass))}function v2(){var n=this;n.emit("beforeLoopFix");var e=n.activeIndex,t=n.slides,i=n.loopedSlides,r=n.allowSlidePrev,s=n.allowSlideNext,a=n.snapGrid,o=n.rtlTranslate,l;n.allowSlidePrev=!0,n.allowSlideNext=!0;var c=-a[e],h=c-n.getTranslate();if(e<i){l=t.length-i*3+e,l+=i;var u=n.slideTo(l,0,!1,!0);u&&h!==0&&n.setTranslate((o?-n.translate:n.translate)-h)}else if(e>=t.length-i){l=-t.length+e+i,l+=i;var d=n.slideTo(l,0,!1,!0);d&&h!==0&&n.setTranslate((o?-n.translate:n.translate)-h)}n.allowSlidePrev=r,n.allowSlideNext=s,n.emit("loopFix")}function y2(){var n=this,e=n.$wrapperEl,t=n.params,i=n.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass+",."+t.slideClass+"."+t.slideBlankClass).remove(),i.removeAttr("data-swiper-slide-index")}const w2={loopCreate:I2,loopFix:v2,loopDestroy:y2};function E2(n){var e=this;if(!(e.support.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)){var t=e.el;t.style.cursor="move",t.style.cursor=n?"-webkit-grabbing":"-webkit-grab",t.style.cursor=n?"-moz-grabbin":"-moz-grab",t.style.cursor=n?"grabbing":"grab"}}function b2(){var n=this;n.support.touch||n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.el.style.cursor="")}const _2={setGrabCursor:E2,unsetGrabCursor:b2};function x2(n){var e=this,t=e.$wrapperEl,i=e.params;if(i.loop&&e.loopDestroy(),typeof n=="object"&&"length"in n)for(var r=0;r<n.length;r+=1)n[r]&&t.append(n[r]);else t.append(n);i.loop&&e.loopCreate(),i.observer&&e.support.observer||e.update()}function S2(n){var e=this,t=e.params,i=e.$wrapperEl,r=e.activeIndex;t.loop&&e.loopDestroy();var s=r+1;if(typeof n=="object"&&"length"in n){for(var a=0;a<n.length;a+=1)n[a]&&i.prepend(n[a]);s=r+n.length}else i.prepend(n);t.loop&&e.loopCreate(),t.observer&&e.support.observer||e.update(),e.slideTo(s,0,!1)}function M2(n,e){var t=this,i=t.$wrapperEl,r=t.params,s=t.activeIndex,a=s;r.loop&&(a-=t.loopedSlides,t.loopDestroy(),t.slides=i.children("."+r.slideClass));var o=t.slides.length;if(n<=0){t.prependSlide(e);return}if(n>=o){t.appendSlide(e);return}for(var l=a>n?a+1:a,c=[],h=o-1;h>=n;h-=1){var u=t.slides.eq(h);u.remove(),c.unshift(u)}if(typeof e=="object"&&"length"in e){for(var d=0;d<e.length;d+=1)e[d]&&i.append(e[d]);l=a>n?a+e.length:a}else i.append(e);for(var g=0;g<c.length;g+=1)i.append(c[g]);r.loop&&t.loopCreate(),r.observer&&t.support.observer||t.update(),r.loop?t.slideTo(l+t.loopedSlides,0,!1):t.slideTo(l,0,!1)}function R2(n){var e=this,t=e.params,i=e.$wrapperEl,r=e.activeIndex,s=r;t.loop&&(s-=e.loopedSlides,e.loopDestroy(),e.slides=i.children("."+t.slideClass));var a=s,o;if(typeof n=="object"&&"length"in n){for(var l=0;l<n.length;l+=1)o=n[l],e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=n,e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1),a=Math.max(a,0);t.loop&&e.loopCreate(),t.observer&&e.support.observer||e.update(),t.loop?e.slideTo(a+e.loopedSlides,0,!1):e.slideTo(a,0,!1)}function T2(){for(var n=this,e=[],t=0;t<n.slides.length;t+=1)e.push(t);n.removeSlide(e)}const U2={appendSlide:x2,prependSlide:S2,addSlide:M2,removeSlide:R2,removeAllSlides:T2};function F2(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Gn()||i===Mi())return null;i.assignedSlot&&(i=i.assignedSlot);var r=i.closest(n);return r||t(i.getRootNode().host)}return t(e)}function B2(n){var e=this,t=Gn(),i=Mi(),r=e.touchEventsData,s=e.params,a=e.touches,o=e.enabled;if(o&&!(e.animating&&s.preventInteractionOnTransition)){var l=n;l.originalEvent&&(l=l.originalEvent);var c=ke(l.target);if(!(s.touchEventsTarget==="wrapper"&&!c.closest(e.wrapperEl).length)&&(r.isTouchEvent=l.type==="touchstart",!(!r.isTouchEvent&&"which"in l&&l.which===3)&&!(!r.isTouchEvent&&"button"in l&&l.button>0)&&!(r.isTouched&&r.isMoved))){var h=!!s.noSwipingClass&&s.noSwipingClass!=="";h&&l.target&&l.target.shadowRoot&&n.path&&n.path[0]&&(c=ke(n.path[0]));var u=s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass,d=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(d?F2(u,l.target):c.closest(u)[0])){e.allowClick=!0;return}if(!(s.swipeHandler&&!c.closest(s.swipeHandler)[0])){a.currentX=l.type==="touchstart"?l.targetTouches[0].pageX:l.pageX,a.currentY=l.type==="touchstart"?l.targetTouches[0].pageY:l.pageY;var g=a.currentX,f=a.currentY,m=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,p=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(m&&(g<=p||g>=i.innerWidth-p))if(m==="prevent")n.preventDefault();else return;if(si(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=g,a.startY=f,r.touchStartTime=Fa(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1),l.type!=="touchstart"){var A=!0;c.is(r.focusableElements)&&(A=!1),t.activeElement&&ke(t.activeElement).is(r.focusableElements)&&t.activeElement!==c[0]&&t.activeElement.blur();var C=A&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||C)&&!c[0].isContentEditable&&l.preventDefault()}e.emit("touchStart",l)}}}}function D2(n){var e=Gn(),t=this,i=t.touchEventsData,r=t.params,s=t.touches,a=t.rtlTranslate,o=t.enabled;if(o){var l=n;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}if(!(i.isTouchEvent&&l.type!=="touchmove")){var c=l.type==="touchmove"&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),h=l.type==="touchmove"?c.pageX:l.pageX,u=l.type==="touchmove"?c.pageY:l.pageY;if(l.preventedByNestedSwiper){s.startX=h,s.startY=u;return}if(!t.allowTouchMove){t.allowClick=!1,i.isTouched&&(si(s,{startX:h,startY:u,currentX:h,currentY:u}),i.touchStartTime=Fa());return}if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(u<s.startY&&t.translate<=t.maxTranslate()||u>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(h<s.startX&&t.translate<=t.maxTranslate()||h>s.startX&&t.translate>=t.minTranslate())return}if(i.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&ke(l.target).is(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){s.currentX=h,s.currentY=u;var d=s.currentX-s.startX,g=s.currentY-s.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(d,2)+Math.pow(g,2))<t.params.threshold)){if(typeof i.isScrolling>"u"){var f;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:d*d+g*g>=25&&(f=Math.atan2(Math.abs(g),Math.abs(d))*180/Math.PI,i.isScrolling=t.isHorizontal()?f>r.touchAngle:90-f>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(i.startMoving){t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&t.loopFix(),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)),t.emit("sliderMove",l),i.isMoved=!0;var m=t.isHorizontal()?d:g;s.diff=m,m*=r.touchRatio,a&&(m=-m),t.swipeDirection=m>0?"prev":"next",i.currentTranslate=m+i.startTranslate;var p=!0,A=r.resistanceRatio;if(r.touchReleaseOnEdges&&(A=0),m>0&&i.currentTranslate>t.minTranslate()?(p=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+i.startTranslate+m,A))):m<0&&i.currentTranslate<t.maxTranslate()&&(p=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-i.startTranslate-m,A))),p&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&(i.velocities.length===0&&i.velocities.push({position:s[t.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:s[t.isHorizontal()?"currentX":"currentY"],time:Fa()})),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}}}}}}function L2(n){var e=this,t=e.touchEventsData,i=e.params,r=e.touches,s=e.rtlTranslate,a=e.$wrapperEl,o=e.slidesGrid,l=e.snapGrid,c=e.enabled;if(c){var h=n;if(h.originalEvent&&(h=h.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",h),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&i.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}i.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);var u=Fa(),d=u-t.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(h),e.emit("tap click",h),d<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",h)),t.lastClickTime=Fa(),Vm(function(){e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||r.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;var g;if(i.followFinger?g=s?e.translate:-e.translate:g=-t.currentTranslate,!i.cssMode){if(i.freeMode){if(g<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(g>-e.maxTranslate()){e.slides.length<l.length?e.slideTo(l.length-1):e.slideTo(e.slides.length-1);return}if(i.freeModeMomentum){if(t.velocities.length>1){var f=t.velocities.pop(),m=t.velocities.pop(),p=f.position-m.position,A=f.time-m.time;e.velocity=p/A,e.velocity/=2,Math.abs(e.velocity)<i.freeModeMinimumVelocity&&(e.velocity=0),(A>150||Fa()-f.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=i.freeModeMomentumVelocityRatio,t.velocities.length=0;var C=1e3*i.freeModeMomentumRatio,v=e.velocity*C,I=e.translate+v;s&&(I=-I);var w=!1,b,_=Math.abs(e.velocity)*20*i.freeModeMomentumBounceRatio,x;if(I<e.maxTranslate())i.freeModeMomentumBounce?(I+e.maxTranslate()<-_&&(I=e.maxTranslate()-_),b=e.maxTranslate(),w=!0,t.allowMomentumBounce=!0):I=e.maxTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(I>e.minTranslate())i.freeModeMomentumBounce?(I-e.minTranslate()>_&&(I=e.minTranslate()+_),b=e.minTranslate(),w=!0,t.allowMomentumBounce=!0):I=e.minTranslate(),i.loop&&i.centeredSlides&&(x=!0);else if(i.freeModeSticky){for(var y,E=0;E<l.length;E+=1)if(l[E]>-I){y=E;break}Math.abs(l[y]-I)<Math.abs(l[y-1]-I)||e.swipeDirection==="next"?I=l[y]:I=l[y-1],I=-I}if(x&&e.once("transitionEnd",function(){e.loopFix()}),e.velocity!==0){if(s?C=Math.abs((-I-e.translate)/e.velocity):C=Math.abs((I-e.translate)/e.velocity),i.freeModeSticky){var S=Math.abs((s?-I:I)-e.translate),R=e.slidesSizesGrid[e.activeIndex];S<R?C=i.speed:S<2*R?C=i.speed*1.5:C=i.speed*2.5}}else if(i.freeModeSticky){e.slideToClosest();return}i.freeModeMomentumBounce&&w?(e.updateProgress(b),e.setTransition(C),e.setTranslate(I),e.transitionStart(!0,e.swipeDirection),e.animating=!0,a.transitionEnd(function(){!e||e.destroyed||!t.allowMomentumBounce||(e.emit("momentumBounce"),e.setTransition(i.speed),setTimeout(function(){e.setTranslate(b),a.transitionEnd(function(){!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(e.updateProgress(I),e.setTransition(C),e.setTranslate(I),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,a.transitionEnd(function(){!e||e.destroyed||e.transitionEnd()}))):(e.emit("_freeModeNoMomentumRelease"),e.updateProgress(I)),e.updateActiveIndex(),e.updateSlidesClasses()}else if(i.freeModeSticky){e.slideToClosest();return}else i.freeMode&&e.emit("_freeModeNoMomentumRelease");(!i.freeModeMomentum||d>=i.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses());return}for(var M=0,T=e.slidesSizesGrid[0],P=0;P<o.length;P+=P<i.slidesPerGroupSkip?1:i.slidesPerGroup){var F=P<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;typeof o[P+F]<"u"?g>=o[P]&&g<o[P+F]&&(M=P,T=o[P+F]-o[P]):g>=o[P]&&(M=P,T=o[o.length-1]-o[o.length-2])}var N=(g-o[M])/T,L=M<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(d>i.longSwipesMs){if(!i.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(N>=i.longSwipesRatio?e.slideTo(M+L):e.slideTo(M)),e.swipeDirection==="prev"&&(N>1-i.longSwipesRatio?e.slideTo(M+L):e.slideTo(M))}else{if(!i.shortSwipes){e.slideTo(e.activeIndex);return}var W=e.navigation&&(h.target===e.navigation.nextEl||h.target===e.navigation.prevEl);W?h.target===e.navigation.nextEl?e.slideTo(M+L):e.slideTo(M):(e.swipeDirection==="next"&&e.slideTo(M+L),e.swipeDirection==="prev"&&e.slideTo(M))}}}}function Gm(){var n=this,e=n.params,t=n.el;if(!(t&&t.offsetWidth===0)){e.breakpoints&&n.setBreakpoint();var i=n.allowSlideNext,r=n.allowSlidePrev,s=n.snapGrid;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses(),(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides?n.slideTo(n.slides.length-1,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.run(),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}}function P2(n){var e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function N2(){var n=this,e=n.wrapperEl,t=n.rtlTranslate,i=n.enabled;if(i){n.previousTranslate=n.translate,n.isHorizontal()?t?n.translate=e.scrollWidth-e.offsetWidth-e.scrollLeft:n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===-0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();var r,s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}}var zv=!1;function k2(){}function Q2(){var n=this,e=Gn(),t=n.params,i=n.touchEvents,r=n.el,s=n.wrapperEl,a=n.device,o=n.support;n.onTouchStart=B2.bind(n),n.onTouchMove=D2.bind(n),n.onTouchEnd=L2.bind(n),t.cssMode&&(n.onScroll=N2.bind(n)),n.onClick=P2.bind(n);var l=!!t.nested;if(!o.touch&&o.pointerEvents)r.addEventListener(i.start,n.onTouchStart,!1),e.addEventListener(i.move,n.onTouchMove,l),e.addEventListener(i.end,n.onTouchEnd,!1);else{if(o.touch){var c=i.start==="touchstart"&&o.passiveListener&&t.passiveListeners?{passive:!0,capture:!1}:!1;r.addEventListener(i.start,n.onTouchStart,c),r.addEventListener(i.move,n.onTouchMove,o.passiveListener?{passive:!1,capture:l}:l),r.addEventListener(i.end,n.onTouchEnd,c),i.cancel&&r.addEventListener(i.cancel,n.onTouchEnd,c),zv||(e.addEventListener("touchstart",k2),zv=!0)}(t.simulateTouch&&!a.ios&&!a.android||t.simulateTouch&&!o.touch&&a.ios)&&(r.addEventListener("mousedown",n.onTouchStart,!1),e.addEventListener("mousemove",n.onTouchMove,l),e.addEventListener("mouseup",n.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&r.addEventListener("click",n.onClick,!0),t.cssMode&&s.addEventListener("scroll",n.onScroll),t.updateOnWindowResize?n.on(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Gm,!0):n.on("observerUpdate",Gm,!0)}function O2(){var n=this,e=Gn(),t=n.params,i=n.touchEvents,r=n.el,s=n.wrapperEl,a=n.device,o=n.support,l=!!t.nested;if(!o.touch&&o.pointerEvents)r.removeEventListener(i.start,n.onTouchStart,!1),e.removeEventListener(i.move,n.onTouchMove,l),e.removeEventListener(i.end,n.onTouchEnd,!1);else{if(o.touch){var c=i.start==="onTouchStart"&&o.passiveListener&&t.passiveListeners?{passive:!0,capture:!1}:!1;r.removeEventListener(i.start,n.onTouchStart,c),r.removeEventListener(i.move,n.onTouchMove,l),r.removeEventListener(i.end,n.onTouchEnd,c),i.cancel&&r.removeEventListener(i.cancel,n.onTouchEnd,c)}(t.simulateTouch&&!a.ios&&!a.android||t.simulateTouch&&!o.touch&&a.ios)&&(r.removeEventListener("mousedown",n.onTouchStart,!1),e.removeEventListener("mousemove",n.onTouchMove,l),e.removeEventListener("mouseup",n.onTouchEnd,!1))}(t.preventClicks||t.preventClicksPropagation)&&r.removeEventListener("click",n.onClick,!0),t.cssMode&&s.removeEventListener("scroll",n.onScroll),n.off(a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Gm)}const V2={attachEvents:Q2,detachEvents:O2};function z2(){var n=this,e=n.activeIndex,t=n.initialized,i=n.loopedSlides,r=i===void 0?0:i,s=n.params,a=n.$el,o=s.breakpoints;if(!(!o||o&&Object.keys(o).length===0)){var l=n.getBreakpoint(o,n.params.breakpointsBase,n.el);if(!(!l||n.currentBreakpoint===l)){var c=l in o?o[l]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach(function(A){var C=c[A];typeof C>"u"||(A==="slidesPerView"&&(C==="AUTO"||C==="auto")?c[A]="auto":A==="slidesPerView"?c[A]=parseFloat(C):c[A]=parseInt(C,10))});var h=c||n.originalParams,u=s.slidesPerColumn>1,d=h.slidesPerColumn>1,g=s.enabled;u&&!d?(a.removeClass(s.containerModifierClass+"multirow "+s.containerModifierClass+"multirow-column"),n.emitContainerClasses()):!u&&d&&(a.addClass(s.containerModifierClass+"multirow"),(h.slidesPerColumnFill&&h.slidesPerColumnFill==="column"||!h.slidesPerColumnFill&&s.slidesPerColumnFill==="column")&&a.addClass(s.containerModifierClass+"multirow-column"),n.emitContainerClasses());var f=h.direction&&h.direction!==s.direction,m=s.loop&&(h.slidesPerView!==s.slidesPerView||f);f&&t&&n.changeDirection(),si(n.params,h);var p=n.params.enabled;si(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),g&&!p?n.disable():!g&&p&&n.enable(),n.currentBreakpoint=l,n.emit("_beforeBreakpoint",h),m&&t&&(n.loopDestroy(),n.loopCreate(),n.updateSlides(),n.slideTo(e-r+n.loopedSlides,0,!1)),n.emit("breakpoint",h)}}}function G2(n,e,t){if(e===void 0&&(e="window"),!(!n||e==="container"&&!t)){var i=!1,r=Mi(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(function(u){if(typeof u=="string"&&u.indexOf("@")===0){var d=parseFloat(u.substr(1)),g=s*d;return{value:g,point:u}}return{value:u,point:u}});a.sort(function(u,d){return parseInt(u.value,10)-parseInt(d.value,10)});for(var o=0;o<a.length;o+=1){var l=a[o],c=l.point,h=l.value;e==="window"?r.matchMedia("(min-width: "+h+"px)").matches&&(i=c):h<=t.clientWidth&&(i=c)}return i||"max"}}const W2={setBreakpoint:z2,getBreakpoint:G2};function Z2(n,e){var t=[];return n.forEach(function(i){typeof i=="object"?Object.keys(i).forEach(function(r){i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function H2(){var n=this,e=n.classNames,t=n.params,i=n.rtl,r=n.$el,s=n.device,a=n.support,o=Z2(["initialized",t.direction,{"pointer-events":a.pointerEvents&&!a.touch},{"free-mode":t.freeMode},{autoheight:t.autoHeight},{rtl:i},{multirow:t.slidesPerColumn>1},{"multirow-column":t.slidesPerColumn>1&&t.slidesPerColumnFill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode}],t.containerModifierClass);e.push.apply(e,o),r.addClass([].concat(e).join(" ")),n.emitContainerClasses()}function X2(){var n=this,e=n.$el,t=n.classNames;e.removeClass(t.join(" ")),n.emitContainerClasses()}const J2={addClasses:H2,removeClasses:X2};function j2(n,e,t,i,r,s){var a=Mi(),o;function l(){s&&s()}var c=ke(n).parent("picture")[0];!c&&(!n.complete||!r)&&e?(o=new a.Image,o.onload=l,o.onerror=l,i&&(o.sizes=i),t&&(o.srcset=t),e&&(o.src=e)):l()}function Y2(){var n=this;n.imagesToLoad=n.$el.find("img");function e(){typeof n>"u"||n===null||!n||n.destroyed||(n.imagesLoaded!==void 0&&(n.imagesLoaded+=1),n.imagesLoaded===n.imagesToLoad.length&&(n.params.updateOnImagesReady&&n.update(),n.emit("imagesReady")))}for(var t=0;t<n.imagesToLoad.length;t+=1){var i=n.imagesToLoad[t];n.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,e)}}const K2={loadImage:j2,preloadImages:Y2};function q2(){var n=this,e=n.params,t=n.isLocked,i=n.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(n.slides.length-1)+n.slides[0].offsetWidth*n.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&i?n.isLocked=i<=n.size:n.isLocked=n.snapGrid.length===1,n.allowSlideNext=!n.isLocked,n.allowSlidePrev=!n.isLocked,t!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock"),t&&t!==n.isLocked&&(n.isEnd=!1,n.navigation&&n.navigation.update())}const $2={checkOverflow:q2},Gv={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function eB(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function tB(n,e,t){return t&&eB(n,t),n}var Up={modular:GF,eventsEmitter:WF,update:e2,translate:a2,transition:h2,slide:C2,loop:w2,grabCursor:_2,manipulation:U2,events:V2,breakpoints:W2,checkOverflow:$2,classes:J2,images:K2},Fp={},mr=(function(){function n(){for(var t,i,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];if(s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?i=s[0]:(t=s[0],i=s[1]),i||(i={}),i=si({},i),t&&!i.el&&(i.el=t),i.el&&ke(i.el).length>1){var o=[];return ke(i.el).each(function(h){var u=si({},i,{el:h});o.push(new n(u))}),o}var l=this;l.__swiper__=!0,l.support=jx(),l.device=PF({userAgent:i.userAgent}),l.browser=kF(),l.eventsListeners={},l.eventsAnyListeners=[],typeof l.modules>"u"&&(l.modules={}),Object.keys(l.modules).forEach(function(h){var u=l.modules[h];if(u.params){var d=Object.keys(u.params)[0],g=u.params[d];if(typeof g!="object"||g===null||(["navigation","pagination","scrollbar"].indexOf(d)>=0&&i[d]===!0&&(i[d]={auto:!0}),!(d in i&&"enabled"in g)))return;i[d]===!0&&(i[d]={enabled:!0}),typeof i[d]=="object"&&!("enabled"in i[d])&&(i[d].enabled=!0),i[d]||(i[d]={enabled:!1})}});var c=si({},Gv);return l.useParams(c),l.params=si({},c,Fp,i),l.originalParams=si({},l.params),l.passedParams=si({},i),l.params&&l.params.on&&Object.keys(l.params.on).forEach(function(h){l.on(h,l.params.on[h])}),l.params&&l.params.onAny&&l.onAny(l.params.onAny),l.$=ke,si(l,{enabled:l.params.enabled,el:t,classNames:[],slides:ke(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return l.params.direction==="horizontal"},isVertical:function(){return l.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:(function(){var u=["touchstart","touchmove","touchend","touchcancel"],d=["mousedown","mousemove","mouseup"];return l.support.pointerEvents&&(d=["pointerdown","pointermove","pointerup"]),l.touchEventsTouch={start:u[0],move:u[1],end:u[2],cancel:u[3]},l.touchEventsDesktop={start:d[0],move:d[1],end:d[2]},l.support.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop})(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:l.params.focusableElements,lastClickTime:Fa(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.emit("_swiper"),l.params.init&&l.init(),l}var e=n.prototype;return e.enable=function(){var i=this;i.enabled||(i.enabled=!0,i.params.grabCursor&&i.setGrabCursor(),i.emit("enable"))},e.disable=function(){var i=this;i.enabled&&(i.enabled=!1,i.params.grabCursor&&i.unsetGrabCursor(),i.emit("disable"))},e.setProgress=function(i,r){var s=this;i=Math.min(Math.max(i,0),1);var a=s.minTranslate(),o=s.maxTranslate(),l=(o-a)*i+a;s.translateTo(l,typeof r>"u"?0:r),s.updateActiveIndex(),s.updateSlidesClasses()},e.emitContainerClasses=function(){var i=this;if(!(!i.params._emitClasses||!i.el)){var r=i.el.className.split(" ").filter(function(s){return s.indexOf("swiper-container")===0||s.indexOf(i.params.containerModifierClass)===0});i.emit("_containerClasses",r.join(" "))}},e.getSlideClasses=function(i){var r=this;return i.className.split(" ").filter(function(s){return s.indexOf("swiper-slide")===0||s.indexOf(r.params.slideClass)===0}).join(" ")},e.emitSlidesClasses=function(){var i=this;if(!(!i.params._emitClasses||!i.el)){var r=[];i.slides.each(function(s){var a=i.getSlideClasses(s);r.push({slideEl:s,classNames:a}),i.emit("_slideClass",s,a)}),i.emit("_slideClasses",r)}},e.slidesPerViewDynamic=function(){var i=this,r=i.params,s=i.slides,a=i.slidesGrid,o=i.size,l=i.activeIndex,c=1;if(r.centeredSlides){for(var h=s[l].swiperSlideSize,u,d=l+1;d<s.length;d+=1)s[d]&&!u&&(h+=s[d].swiperSlideSize,c+=1,h>o&&(u=!0));for(var g=l-1;g>=0;g-=1)s[g]&&!u&&(h+=s[g].swiperSlideSize,c+=1,h>o&&(u=!0))}else for(var f=l+1;f<s.length;f+=1)a[f]-a[l]<o&&(c+=1);return c},e.update=function(){var i=this;if(!i||i.destroyed)return;var r=i.snapGrid,s=i.params;s.breakpoints&&i.setBreakpoint(),i.updateSize(),i.updateSlides(),i.updateProgress(),i.updateSlidesClasses();function a(){var l=i.rtlTranslate?i.translate*-1:i.translate,c=Math.min(Math.max(l,i.maxTranslate()),i.minTranslate());i.setTranslate(c),i.updateActiveIndex(),i.updateSlidesClasses()}var o;i.params.freeMode?(a(),i.params.autoHeight&&i.updateAutoHeight()):((i.params.slidesPerView==="auto"||i.params.slidesPerView>1)&&i.isEnd&&!i.params.centeredSlides?o=i.slideTo(i.slides.length-1,0,!1,!0):o=i.slideTo(i.activeIndex,0,!1,!0),o||a()),s.watchOverflow&&r!==i.snapGrid&&i.checkOverflow(),i.emit("update")},e.changeDirection=function(i,r){r===void 0&&(r=!0);var s=this,a=s.params.direction;return i||(i=a==="horizontal"?"vertical":"horizontal"),i===a||i!=="horizontal"&&i!=="vertical"||(s.$el.removeClass(""+s.params.containerModifierClass+a).addClass(""+s.params.containerModifierClass+i),s.emitContainerClasses(),s.params.direction=i,s.slides.each(function(o){i==="vertical"?o.style.width="":o.style.height=""}),s.emit("changeDirection"),r&&s.update()),s},e.mount=function(i){var r=this;if(r.mounted)return!0;var s=ke(i||r.params.el);if(i=s[0],!i)return!1;i.swiper=r;var a=function(){return"."+(r.params.wrapperClass||"").trim().split(" ").join(".")},o=function(){if(i&&i.shadowRoot&&i.shadowRoot.querySelector){var d=ke(i.shadowRoot.querySelector(a()));return d.children=function(g){return s.children(g)},d}return s.children(a())},l=o();if(l.length===0&&r.params.createElements){var c=Gn(),h=c.createElement("div");l=ke(h),h.className=r.params.wrapperClass,s.append(h),s.children("."+r.params.slideClass).each(function(u){l.append(u)})}return si(r,{$el:s,el:i,$wrapperEl:l,wrapperEl:l[0],mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl",rtlTranslate:r.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||s.css("direction")==="rtl"),wrongRTL:l.css("display")==="-webkit-box"}),!0},e.init=function(i){var r=this;if(r.initialized)return r;var s=r.mount(i);return s===!1||(r.emit("beforeInit"),r.params.breakpoints&&r.setBreakpoint(),r.addClasses(),r.params.loop&&r.loopCreate(),r.updateSize(),r.updateSlides(),r.params.watchOverflow&&r.checkOverflow(),r.params.grabCursor&&r.enabled&&r.setGrabCursor(),r.params.preloadImages&&r.preloadImages(),r.params.loop?r.slideTo(r.params.initialSlide+r.loopedSlides,0,r.params.runCallbacksOnInit,!1,!0):r.slideTo(r.params.initialSlide,0,r.params.runCallbacksOnInit,!1,!0),r.attachEvents(),r.initialized=!0,r.emit("init"),r.emit("afterInit")),r},e.destroy=function(i,r){i===void 0&&(i=!0),r===void 0&&(r=!0);var s=this,a=s.params,o=s.$el,l=s.$wrapperEl,c=s.slides;return typeof s.params>"u"||s.destroyed||(s.emit("beforeDestroy"),s.initialized=!1,s.detachEvents(),a.loop&&s.loopDestroy(),r&&(s.removeClasses(),o.removeAttr("style"),l.removeAttr("style"),c&&c.length&&c.removeClass([a.slideVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),s.emit("destroy"),Object.keys(s.eventsListeners).forEach(function(h){s.off(h)}),i!==!1&&(s.$el[0].swiper=null,TF(s)),s.destroyed=!0),null},n.extendDefaults=function(i){si(Fp,i)},n.installModule=function(i){n.prototype.modules||(n.prototype.modules={});var r=i.name||Object.keys(n.prototype.modules).length+"_"+Fa();n.prototype.modules[r]=i},n.use=function(i){return Array.isArray(i)?(i.forEach(function(r){return n.installModule(r)}),n):(n.installModule(i),n)},tB(n,null,[{key:"extendedDefaults",get:function(){return Fp}},{key:"defaults",get:function(){return Gv}}]),n})();Object.keys(Up).forEach(function(n){Object.keys(Up[n]).forEach(function(e){mr.prototype[e]=Up[n][e]})});mr.use([OF,zF]);function Wm(){return Wm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Wm.apply(this,arguments)}var iB={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&e[0].tagName==="BUTTON"&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,i=e.navigation.toggleEl;if(!e.params.loop){var r=e.navigation,s=r.$nextEl,a=r.$prevEl;a&&a.length>0&&(e.isBeginning?i(a,!0):i(a,!1),e.params.watchOverflow&&e.enabled&&a[e.isLocked?"addClass":"removeClass"](t.lockClass)),s&&s.length>0&&(e.isEnd?i(s,!0):i(s,!1),e.params.watchOverflow&&e.enabled&&s[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),!(t.isBeginning&&!t.params.loop)&&t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),!(t.isEnd&&!t.params.loop)&&t.slideNext()},init:function(){var e=this,t=e.params.navigation;if(e.params.navigation=Jx(e.$el,e.params.navigation,e.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!!(t.nextEl||t.prevEl)){var i,r;t.nextEl&&(i=ke(t.nextEl),e.params.uniqueNavElements&&typeof t.nextEl=="string"&&i.length>1&&e.$el.find(t.nextEl).length===1&&(i=e.$el.find(t.nextEl))),t.prevEl&&(r=ke(t.prevEl),e.params.uniqueNavElements&&typeof t.prevEl=="string"&&r.length>1&&e.$el.find(t.prevEl).length===1&&(r=e.$el.find(t.prevEl))),i&&i.length>0&&i.on("click",e.navigation.onNextClick),r&&r.length>0&&r.on("click",e.navigation.onPrevClick),si(e.navigation,{$nextEl:i,nextEl:i&&i[0],$prevEl:r,prevEl:r&&r[0]}),e.enabled||(i&&i.addClass(t.lockClass),r&&r.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.navigation,i=t.$nextEl,r=t.$prevEl;i&&i.length&&(i.off("click",e.navigation.onNextClick),i.removeClass(e.params.navigation.disabledClass)),r&&r.length&&(r.off("click",e.navigation.onPrevClick),r.removeClass(e.params.navigation.disabledClass))}};const Yx={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var e=this;VI(e,{navigation:Wm({},iB)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,i=t.$nextEl,r=t.$prevEl;i&&i[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),r&&r[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var i=e.navigation,r=i.$nextEl,s=i.$prevEl,a=t.target;if(e.params.navigation.hideOnClick&&!ke(a).is(s)&&!ke(a).is(r)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===a||e.pagination.el.contains(a)))return;var o;r?o=r.hasClass(e.params.navigation.hiddenClass):s&&(o=s.hasClass(e.params.navigation.hiddenClass)),o===!0?e.emit("navigationShow"):e.emit("navigationHide"),r&&r.toggleClass(e.params.navigation.hiddenClass),s&&s.toggleClass(e.params.navigation.hiddenClass)}}}};function Zm(){return Zm=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Zm.apply(this,arguments)}var nB={update:function(){var e=this,t=e.rtl,i=e.params.pagination;if(!(!i.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,s=e.pagination.$el,a,o=e.params.loop?Math.ceil((r-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(a=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup),a>r-1-e.loopedSlides*2&&(a-=r-e.loopedSlides*2),a>o-1&&(a-=o),a<0&&e.params.paginationType!=="bullets"&&(a=o+a)):typeof e.snapIndex<"u"?a=e.snapIndex:a=e.activeIndex||0,i.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){var l=e.pagination.bullets,c,h,u;if(i.dynamicBullets&&(e.pagination.bulletSize=l.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),s.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),i.dynamicMainBullets>1&&e.previousIndex!==void 0&&(e.pagination.dynamicBulletIndex+=a-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),c=a-e.pagination.dynamicBulletIndex,h=c+(Math.min(l.length,i.dynamicMainBullets)-1),u=(h+c)/2),l.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),s.length>1)l.each(function(y){var E=ke(y),S=E.index();S===a&&E.addClass(i.bulletActiveClass),i.dynamicBullets&&(S>=c&&S<=h&&E.addClass(i.bulletActiveClass+"-main"),S===c&&E.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),S===h&&E.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else{var d=l.eq(a),g=d.index();if(d.addClass(i.bulletActiveClass),i.dynamicBullets){for(var f=l.eq(c),m=l.eq(h),p=c;p<=h;p+=1)l.eq(p).addClass(i.bulletActiveClass+"-main");if(e.params.loop)if(g>=l.length-i.dynamicMainBullets){for(var A=i.dynamicMainBullets;A>=0;A-=1)l.eq(l.length-A).addClass(i.bulletActiveClass+"-main");l.eq(l.length-i.dynamicMainBullets-1).addClass(i.bulletActiveClass+"-prev")}else f.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),m.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next");else f.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),m.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}}if(i.dynamicBullets){var C=Math.min(l.length,i.dynamicMainBullets+4),v=(e.pagination.bulletSize*C-e.pagination.bulletSize)/2-u*e.pagination.bulletSize,I=t?"right":"left";l.css(e.isHorizontal()?I:"top",v+"px")}}if(i.type==="fraction"&&(s.find(il(i.currentClass)).text(i.formatFractionCurrent(a+1)),s.find(il(i.totalClass)).text(i.formatFractionTotal(o))),i.type==="progressbar"){var w;i.progressbarOpposite?w=e.isHorizontal()?"vertical":"horizontal":w=e.isHorizontal()?"horizontal":"vertical";var b=(a+1)/o,_=1,x=1;w==="horizontal"?_=b:x=b,s.find(il(i.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+_+") scaleY("+x+")").transition(e.params.speed)}i.type==="custom"&&i.renderCustom?(s.html(i.renderCustom(e,a+1,o)),e.emit("paginationRender",s[0])):e.emit("paginationUpdate",s[0]),e.params.watchOverflow&&e.enabled&&s[e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(!(!t.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,r=e.pagination.$el,s="";if(t.type==="bullets"){var a=e.params.loop?Math.ceil((i-e.loopedSlides*2)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&a>i&&(a=i);for(var o=0;o<a;o+=1)t.renderBullet?s+=t.renderBullet.call(e,o,t.bulletClass):s+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";r.html(s),e.pagination.bullets=r.find(il(t.bulletClass))}t.type==="fraction"&&(t.renderFraction?s=t.renderFraction.call(e,t.currentClass,t.totalClass):s='<span class="'+t.currentClass+'"></span> / '+('<span class="'+t.totalClass+'"></span>'),r.html(s)),t.type==="progressbar"&&(t.renderProgressbar?s=t.renderProgressbar.call(e,t.progressbarFillClass):s='<span class="'+t.progressbarFillClass+'"></span>',r.html(s)),t.type!=="custom"&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=Jx(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var i=ke(t.el);i.length!==0&&(e.params.uniqueNavElements&&typeof t.el=="string"&&i.length>1&&(i=e.$el.find(t.el)),t.type==="bullets"&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),t.type==="bullets"&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click",il(t.bulletClass),function(s){s.preventDefault();var a=ke(this).index()*e.params.slidesPerGroup;e.params.loop&&(a+=e.loopedSlides),e.slideTo(a)}),si(e.pagination,{$el:i,el:i[0]}),e.enabled||i.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(!(!t.el||!e.pagination.el||!e.pagination.$el||e.pagination.$el.length===0)){var i=e.pagination.$el;i.removeClass(t.hiddenClass),i.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&i.off("click",il(t.bulletClass))}}};const Kx={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var e=this;VI(e,{pagination:Zm({dynamicBulletIndex:0},nB)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||typeof e.snapIndex>"u")&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var i=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!ke(i).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;var r=e.pagination.$el.hasClass(e.params.pagination.hiddenClass);r===!0?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};mr.prototype.slideToMapID=function(n){const e=this.$el[0].querySelector(".swiper-slide-active");if(e&&e.getAttribute("data")==n)return;const t=this.$el[0].querySelectorAll(".swiper-slide");for(let i=0;i<t.length;i++){const r=t[i];if(r.getAttribute("data")==n)return this.slideToLoop(parseInt(r.getAttribute("data-swiper-slide-index")||"0"))}};mr.prototype.slideToIndex=function(n){const e=this.$el[0].querySelector(".swiper-slide-active");e&&parseInt(e.getAttribute("data-swiper-slide-index")||"0")==n||this.slideToLoop(n)};mr.prototype.setSlideMapID=function(n){this.slideToMapID(n),this.setSlideMapIDAsSelected(n)};mr.prototype.setSlideIndex=function(n){this.slideToIndex(n),this.setSlideIndexAsSelected(n)};mr.prototype.setSlideIndexAsSelected=function(n){const e=this.$el[0].querySelectorAll(".swiper-slide");for(let t=0;t<e.length;t++){const i=e[t];i.getAttribute("data-swiper-slide-index")==n.toString()?i.classList.add("selected"):i.classList.remove("selected")}};mr.prototype.setSlideMapIDAsSelected=function(n){const e=this.$el[0].querySelectorAll(".swiper-slide");for(let t=0;t<e.length;t++){const i=e[t];i.getAttribute("data")==n?i.classList.add("selected"):i.classList.remove("selected")}};var Hm=Array.isArray||function(n){return Object.prototype.toString.call(n)=="[object Array]"},Lu=tS,rB=zI,sB=cB,aB=qx,oB=eS,lB=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function zI(n){for(var e=[],t=0,i=0,r="",s;(s=lB.exec(n))!=null;){var a=s[0],o=s[1],l=s.index;if(r+=n.slice(i,l),i=l+a.length,o){r+=o[1];continue}r&&(e.push(r),r="");var c=s[2],h=s[3],u=s[4],d=s[5],g=s[6],f=s[7],m=g==="+"||g==="*",p=g==="?"||g==="*",A=c||"/",C=u||d||(f?".*":"[^"+A+"]+?");e.push({name:h||t++,prefix:c||"",delimiter:A,optional:p,repeat:m,pattern:hB(C)})}return i<n.length&&(r+=n.substr(i)),r&&e.push(r),e}function cB(n){return qx(zI(n))}function qx(n){for(var e=new Array(n.length),t=0;t<n.length;t++)typeof n[t]=="object"&&(e[t]=new RegExp("^"+n[t].pattern+"$"));return function(i){for(var r="",s=i||{},a=0;a<n.length;a++){var o=n[a];if(typeof o=="string"){r+=o;continue}var l=s[o.name],c;if(l==null){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to be defined')}if(Hm(l)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received "'+l+'"');if(l.length===0){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=encodeURIComponent(l[h]),!e[a].test(c))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received "'+c+'"');r+=(h===0?o.prefix:o.delimiter)+c}continue}if(c=encodeURIComponent(l),!e[a].test(c))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+c+'"');r+=o.prefix+c}return r}}function Wv(n){return n.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function hB(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function GI(n,e){return n.keys=e,n}function $x(n){return n.sensitive?"":"i"}function uB(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var i=0;i<t.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return GI(n,e)}function dB(n,e,t){for(var i=[],r=0;r<n.length;r++)i.push(tS(n[r],e,t).source);var s=new RegExp("(?:"+i.join("|")+")",$x(t));return GI(s,e)}function gB(n,e,t){for(var i=zI(n),r=eS(i,t),s=0;s<i.length;s++)typeof i[s]!="string"&&e.push(i[s]);return GI(r,e)}function eS(n,e){e=e||{};for(var t=e.strict,i=e.end!==!1,r="",s=n[n.length-1],a=typeof s=="string"&&/\/$/.test(s),o=0;o<n.length;o++){var l=n[o];if(typeof l=="string")r+=Wv(l);else{var c=Wv(l.prefix),h=l.pattern;l.repeat&&(h+="(?:"+c+h+")*"),l.optional?c?h="(?:"+c+"("+h+"))?":h="("+h+")?":h=c+"("+h+")",r+=h}}return t||(r=(a?r.slice(0,-2):r)+"(?:\\/(?=$))?"),i?r+="$":r+=t&&a?"":"(?=\\/|$)",new RegExp("^"+r,$x(e))}function tS(n,e,t){return e=e||[],Hm(e)?t||(t={}):(t=e,e=[]),n instanceof RegExp?uB(n,e):Hm(n)?dB(n,e,t):gB(n,e,t)}Lu.parse=rB;Lu.compile=sB;Lu.tokensToFunction=aB;Lu.tokensToRegExp=oB;var mc=typeof document<"u",or=typeof window<"u",Ff=typeof history<"u",fB=typeof process<"u",Xm=mc&&document.ontouchstart?"touchstart":"click",Ss=or&&!!(window.history.location||window.location);function yi(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}yi.prototype.configure=function(n){var e=n||{};this._window=e.window||or&&window,this._decodeURLComponents=e.decodeURLComponents!==!1,this._popstate=e.popstate!==!1&&or,this._click=e.click!==!1&&mc,this._hashbang=!!e.hashbang;var t=this._window;this._popstate?t.addEventListener("popstate",this._onpopstate,!1):or&&t.removeEventListener("popstate",this._onpopstate,!1),this._click?t.document.addEventListener(Xm,this.clickHandler,!1):mc&&t.document.removeEventListener(Xm,this.clickHandler,!1),this._hashbang&&or&&!Ff?t.addEventListener("hashchange",this._onpopstate,!1):or&&t.removeEventListener("hashchange",this._onpopstate,!1)};yi.prototype.base=function(n){if(arguments.length===0)return this._base;this._base=n};yi.prototype._getBase=function(){var n=this._base;if(n)return n;var e=or&&this._window&&this._window.location;return or&&this._hashbang&&e&&e.protocol==="file:"&&(n=e.pathname),n};yi.prototype.strict=function(n){if(arguments.length===0)return this._strict;this._strict=n};yi.prototype.start=function(n){var e=n||{};if(this.configure(e),e.dispatch!==!1){this._running=!0;var t;if(Ss){var i=this._window,r=i.location;this._hashbang&&~r.hash.indexOf("#!")?t=r.hash.substr(2)+r.search:this._hashbang?t=r.search+r.hash:t=r.pathname+r.search+r.hash}this.replace(t,null,!0,e.dispatch)}};yi.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var n=this._window;this._click&&n.document.removeEventListener(Xm,this.clickHandler,!1),or&&n.removeEventListener("popstate",this._onpopstate,!1),or&&n.removeEventListener("hashchange",this._onpopstate,!1)}};yi.prototype.show=function(n,e,t,i){var r=new Pu(n,e,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,t!==!1&&this.dispatch(r,s),r.handled!==!1&&i!==!1&&r.pushState(),r};yi.prototype.back=function(n,e){var t=this;if(this.len>0){var i=this._window;Ff&&i.history.back(),this.len--}else setTimeout(n?function(){t.show(n,e)}:function(){t.show(t._getBase(),e)})};yi.prototype.redirect=function(n,e){var t=this;typeof n=="string"&&typeof e=="string"&&Bf.call(this,n,function(i){setTimeout(function(){t.replace(e)},0)}),typeof n=="string"&&typeof e>"u"&&setTimeout(function(){t.replace(n)},0)};yi.prototype.replace=function(n,e,t,i){var r=new Pu(n,e,this),s=this.prevContext;return this.prevContext=r,this.current=r.path,r.init=t,r.save(),i!==!1&&this.dispatch(r,s),r};yi.prototype.dispatch=function(n,e){var t=0,i=0,r=this;function s(){var o=r.exits[i++];if(!o)return a();o(e,s)}function a(){var o=r.callbacks[t++];if(n.path!==r.current){n.handled=!1;return}if(!o)return pB.call(r,n);o(n,a)}e?s():a()};yi.prototype.exit=function(n,e){if(typeof n=="function")return this.exit("*",n);for(var t=new Nu(n,null,this),i=1;i<arguments.length;++i)this.exits.push(t.middleware(arguments[i]))};yi.prototype.clickHandler=function(n){if(this._which(n)===1&&!(n.metaKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented){var e=n.target,t=n.path||(n.composedPath?n.composedPath():null);if(t){for(var i=0;i<t.length;i++)if(t[i].nodeName&&t[i].nodeName.toUpperCase()==="A"&&t[i].href){e=t[i];break}}for(;e&&e.nodeName.toUpperCase()!=="A";)e=e.parentNode;if(!(!e||e.nodeName.toUpperCase()!=="A")){var r=typeof e.href=="object"&&e.href.constructor.name==="SVGAnimatedString";if(!(e.hasAttribute("download")||e.getAttribute("rel")==="external")){var s=e.getAttribute("href");if(!(!this._hashbang&&this._samePath(e)&&(e.hash||s==="#"))&&!(s&&s.indexOf("mailto:")>-1)&&!(r?e.target.baseVal:e.target)&&!(!r&&!this.sameOrigin(e.href))){var a=r?e.href.baseVal:e.pathname+e.search+(e.hash||"");a=a[0]!=="/"?"/"+a:a,fB&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var o=a,l=this._getBase();a.indexOf(l)===0&&(a=a.substr(l.length)),this._hashbang&&(a=a.replace("#!","")),!(l&&o===a&&(!Ss||this._window.location.protocol!=="file:"))&&(n.preventDefault(),this.show(o))}}}}};yi.prototype._onpopstate=(function(){var n=!1;return or?(mc&&document.readyState==="complete"?n=!0:window.addEventListener("load",function(){setTimeout(function(){n=!0},0)}),function(t){if(n){var i=this;if(t.state){var r=t.state.path;i.replace(r,t.state)}else if(Ss){var s=i._window.location;i.show(s.pathname+s.search+s.hash,void 0,void 0,!1)}}}):function(){}})();yi.prototype._which=function(n){return n=n||or&&this._window.event,n.which==null?n.button:n.which};yi.prototype._toURL=function(n){var e=this._window;if(typeof URL=="function"&&Ss)return new URL(n,e.location.toString());if(mc){var t=e.document.createElement("a");return t.href=n,t}};yi.prototype.sameOrigin=function(n){if(!n||!Ss)return!1;var e=this._toURL(n),t=this._window,i=t.location;return i.protocol===e.protocol&&i.hostname===e.hostname&&(i.port===e.port||i.port===""&&(e.port==80||e.port==443))};yi.prototype._samePath=function(n){if(!Ss)return!1;var e=this._window,t=e.location;return n.pathname===t.pathname&&n.search===t.search};yi.prototype._decodeURLEncodedURIComponent=function(n){return typeof n!="string"?n:this._decodeURLComponents?decodeURIComponent(n.replace(/\+/g," ")):n};function iS(){var n=new yi;function e(){return Bf.apply(n,arguments)}return e.callbacks=n.callbacks,e.exits=n.exits,e.base=n.base.bind(n),e.strict=n.strict.bind(n),e.start=n.start.bind(n),e.stop=n.stop.bind(n),e.show=n.show.bind(n),e.back=n.back.bind(n),e.redirect=n.redirect.bind(n),e.replace=n.replace.bind(n),e.dispatch=n.dispatch.bind(n),e.exit=n.exit.bind(n),e.configure=n.configure.bind(n),e.sameOrigin=n.sameOrigin.bind(n),e.clickHandler=n.clickHandler.bind(n),e.create=iS,Object.defineProperty(e,"len",{get:function(){return n.len},set:function(t){n.len=t}}),Object.defineProperty(e,"current",{get:function(){return n.current},set:function(t){n.current=t}}),e.Context=Pu,e.Route=Nu,e}function Bf(n,e){if(typeof n=="function")return Bf.call(this,"*",n);if(typeof e=="function")for(var t=new Nu(n,null,this),i=1;i<arguments.length;++i)this.callbacks.push(t.middleware(arguments[i]));else typeof n=="string"?this[typeof e=="string"?"redirect":"show"](n,e):this.start(n)}function pB(n){if(!n.handled){var e,t=this,i=t._window;t._hashbang?e=Ss&&this._getBase()+i.location.hash.replace("#!",""):e=Ss&&i.location.pathname+i.location.search,e!==n.canonicalPath&&(t.stop(),n.handled=!1,Ss&&(i.location.href=n.canonicalPath))}}function AB(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Pu(n,e,t){var i=this.page=t||Bf,r=i._window,s=i._hashbang,a=i._getBase();n[0]==="/"&&n.indexOf(a)!==0&&(n=a+(s?"#!":"")+n);var o=n.indexOf("?");this.canonicalPath=n;var l=new RegExp("^"+AB(a));if(this.path=n.replace(l,"")||"/",s&&(this.path=this.path.replace("#!","")||"/"),this.title=mc&&r.document.title,this.state=e||{},this.state.path=n,this.querystring=~o?i._decodeURLEncodedURIComponent(n.slice(o+1)):"",this.pathname=i._decodeURLEncodedURIComponent(~o?n.slice(0,o):n),this.params={},this.hash="",!s){if(!~this.path.indexOf("#"))return;var c=this.path.split("#");this.path=this.pathname=c[0],this.hash=i._decodeURLEncodedURIComponent(c[1])||"",this.querystring=this.querystring.split("#")[0]}}Pu.prototype.pushState=function(){var n=this.page,e=n._window,t=n._hashbang;n.len++,Ff&&e.history.pushState(this.state,this.title,t&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};Pu.prototype.save=function(){var n=this.page;Ff&&n._window.history.replaceState(this.state,this.title,n._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function Nu(n,e,t){var i=this.page=t||WI,r=e||{};r.strict=r.strict||i._strict,this.path=n==="*"?"(.*)":n,this.method="GET",this.regexp=Lu(this.path,this.keys=[],r)}Nu.prototype.middleware=function(n){var e=this;return function(t,i){if(e.match(t.path,t.params))return t.routePath=e.path,n(t,i);i()}};Nu.prototype.match=function(n,e){var t=this.keys,i=n.indexOf("?"),r=~i?n.slice(0,i):n,s=this.regexp.exec(decodeURIComponent(r));if(!s)return!1;delete e[0];for(var a=1,o=s.length;a<o;++a){var l=t[a-1],c=this.page._decodeURLEncodedURIComponent(s[a]);(c!==void 0||!hasOwnProperty.call(e,l.name))&&(e[l.name]=c)}return!0};var WI=iS(),Ig=WI,mB=WI;Ig.default=mB;const nS="aria-describedby",Hg="aria-expanded",ku="aria-hidden",Df="aria-modal",Zv="aria-pressed",Bp="aria-selected",ZI="focus",HI="focusin",rS="focusout",Lf="keydown",CB="keyup",Si="click",sS="mousedown",IB="hover",Pf="mouseenter",XI="mouseleave",aS="pointerdown",vB="pointermove",yB="pointerup",Nf="touchstart",wB="dragstart",EB='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"]',Jm="ArrowDown",jm="ArrowUp",Hv="ArrowLeft",Xv="ArrowRight",JI="Escape",bB="transitionDuration",_B="transitionDelay",Dp="transitionend",oS="transitionProperty",lS=()=>{var e;const n=/iPhone|iPad|iPod|Android/i;return((e=navigator==null?void 0:navigator.userAgentData)==null?void 0:e.brands.some(t=>n.test(t.brand)))||n.test(navigator==null?void 0:navigator.userAgent)||!1},xB=()=>{var e;const n=/(iPhone|iPod|iPad)/;return((e=navigator==null?void 0:navigator.userAgentData)==null?void 0:e.brands.some(t=>n.test(t.brand)))||n.test(navigator==null?void 0:navigator.userAgent)||!1},Xg=()=>{},SB=(n,e,t,i)=>{n.addEventListener(e,t,!1)},MB=(n,e,t,i)=>{n.removeEventListener(e,t,!1)},Cr=(n,e)=>n.getAttribute(e),Jh=(n,e)=>n.hasAttribute(e),Qi=(n,e,t)=>n.setAttribute(e,t),To=(n,e)=>n.removeAttribute(e),Ke=(n,...e)=>{n.classList.add(...e)},yt=(n,...e)=>{n.classList.remove(...e)},qe=(n,e)=>n.classList.contains(e),Qu=n=>n!=null&&typeof n=="object"||!1,Ii=n=>Qu(n)&&typeof n.nodeType=="number"&&[1,2,3,4,5,6,7,8,9,10,11].some(e=>n.nodeType===e)||!1,Qn=n=>Ii(n)&&n.nodeType===1||!1,nl=new Map,ec={data:nl,set:(n,e,t)=>{Qn(n)&&(nl.has(e)||nl.set(e,new Map),nl.get(e).set(n,t))},getAllFor:n=>nl.get(n)||null,get:(n,e)=>{if(!Qn(n)||!e)return null;const t=ec.getAllFor(e);return n&&t&&t.get(n)||null},remove:(n,e)=>{const t=ec.getAllFor(e);!t||!Qn(n)||(t.delete(n),t.size===0&&nl.delete(e))}},bn=(n,e)=>ec.get(n,e),Jv=n=>n==null?void 0:n.trim().replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>t===0?e.toLowerCase():e.toUpperCase()).replace(/\s+/g,""),Ou=n=>typeof n=="string"||!1,cS=n=>Qu(n)&&n.constructor.name==="Window"||!1,hS=n=>Ii(n)&&n.nodeType===9||!1,_t=n=>hS(n)?n:Ii(n)?n.ownerDocument:cS(n)?n.document:globalThis.document,Ds=(n,...e)=>Object.assign(n,...e),ya=n=>{if(!n)return;if(Ou(n))return _t().createElement(n);const{tagName:e}=n,t=ya(e);if(!t)return;const i={...n};return delete i.tagName,Ds(t,i)},bt=(n,e)=>n.dispatchEvent(e),vn=(n,e,t)=>{const i=getComputedStyle(n,t),r=e.replace("webkit","Webkit").replace(/([A-Z])/g,"-$1").toLowerCase();return i.getPropertyValue(r)},RB=n=>{const e=vn(n,oS),t=vn(n,_B),i=t.includes("ms")?1:1e3,r=e&&e!=="none"?parseFloat(t)*i:0;return Number.isNaN(r)?0:r},Vu=n=>{const e=vn(n,oS),t=vn(n,bB),i=t.includes("ms")?1:1e3,r=e&&e!=="none"?parseFloat(t)*i:0;return Number.isNaN(r)?0:r},fi=(n,e)=>{let t=0;const i=new Event(Dp),r=Vu(n),s=RB(n);if(r){const a=o=>{o.target===n&&(e.apply(n,[o]),n.removeEventListener(Dp,a),t=1)};n.addEventListener(Dp,a),setTimeout(()=>{t||bt(n,i)},r+s+17)}else e.apply(n,[i])},Ls=(n,e)=>n.focus(e),jv=n=>["true",!0].includes(n)?!0:["false",!1].includes(n)?!1:["null","",null,void 0].includes(n)?null:n!==""&&!Number.isNaN(+n)?+n:n,vg=n=>Object.entries(n),TB=(n,e,t,i)=>{if(!Qn(n))return e;const r={...t},s={...n.dataset},a={...e},o={},l="title";return vg(s).forEach(([c,h])=>{const u=typeof c=="string"&&c.includes(i)?Jv(c.replace(i,"")):Jv(c);o[u]=jv(h)}),vg(r).forEach(([c,h])=>{r[c]=jv(h)}),vg(e).forEach(([c,h])=>{c in r?a[c]=r[c]:c in o?a[c]=o[c]:a[c]=c===l?Cr(n,l):h}),a},Yv=n=>Object.keys(n),Tt=(n,e)=>{const t=new CustomEvent(n,{cancelable:!0,bubbles:!0});return Qu(e)&&Ds(t,e),t},jh={passive:!0},Ho=n=>n.offsetHeight,pi=(n,e)=>{vg(e).forEach(([t,i])=>{if(i&&Ou(t)&&t.includes("--"))n.style.setProperty(t,i);else{const r={};r[t]=i,Ds(n.style,r)}})},Ym=n=>Qu(n)&&n.constructor.name==="Map"||!1,UB=n=>typeof n=="number"||!1,Ks=new Map,ot={set:(n,e,t,i)=>{Qn(n)&&(i&&i.length?(Ks.has(n)||Ks.set(n,new Map),Ks.get(n).set(i,setTimeout(e,t))):Ks.set(n,setTimeout(e,t)))},get:(n,e)=>{if(!Qn(n))return null;const t=Ks.get(n);return e&&t&&Ym(t)?t.get(e)||null:UB(t)?t:null},clear:(n,e)=>{if(!Qn(n))return;const t=Ks.get(n);e&&e.length&&Ym(t)?(clearTimeout(t.get(e)),t.delete(e),t.size===0&&Ks.delete(n)):(clearTimeout(t),Ks.delete(n))}},Yh=n=>n.toLowerCase(),ur=(n,e)=>(Ii(e)?e:_t()).querySelectorAll(n),jI=new Map;function uS(n){const{shiftKey:e,code:t}=n,i=_t(this),r=[...ur(EB,this)].filter(o=>!Jh(o,"disabled")&&!Cr(o,ku));if(!r.length)return;const s=r[0],a=r[r.length-1];t==="Tab"&&(e&&i.activeElement===s?(a.focus(),n.preventDefault()):!e&&i.activeElement===a&&(s.focus(),n.preventDefault()))}const YI=n=>jI.has(n)===!0,FB=n=>{YI(n)||(SB(n,"keydown",uS),jI.set(n,!0))},BB=n=>{YI(n)&&(MB(n,"keydown",uS),jI.delete(n))},kf=n=>{YI(n)?BB(n):FB(n)},Ci=n=>Qn(n)&&"offsetWidth"in n||!1,Uo=(n,e)=>{const{width:t,height:i,top:r,right:s,bottom:a,left:o}=n.getBoundingClientRect();let l=1,c=1;if(e&&Ci(n)){const{offsetWidth:h,offsetHeight:u}=n;l=h>0?Math.round(t)/h:1,c=u>0?Math.round(i)/u:1}return{width:t/l,height:i/c,top:r/c,right:s/l,bottom:a/c,left:o/l,x:o/l,y:r/c}},Xo=n=>_t(n).body,Gs=n=>_t(n).documentElement,DB=n=>{const e=cS(n),t=e?n.scrollX:n.scrollLeft,i=e?n.scrollY:n.scrollTop;return{x:t,y:i}},dS=n=>Ii(n)&&n.constructor.name==="ShadowRoot"||!1,LB=n=>n.nodeName==="HTML"?n:Qn(n)&&n.assignedSlot||Ii(n)&&n.parentNode||dS(n)&&n.host||Gs(n),gS=n=>{var e;return n?hS(n)?n.defaultView:Ii(n)?(e=n==null?void 0:n.ownerDocument)==null?void 0:e.defaultView:n:window},PB=n=>Ii(n)&&["TABLE","TD","TH"].includes(n.nodeName)||!1,fS=(n,e)=>n.matches(e),NB=n=>{if(!Ci(n))return!1;const{width:e,height:t}=Uo(n),{offsetWidth:i,offsetHeight:r}=n;return Math.round(e)!==i||Math.round(t)!==r},kB=(n,e,t)=>{const i=Ci(e),r=Uo(n,i&&NB(e)),s={x:0,y:0};if(i){const a=Uo(e,!0);s.x=a.x+e.clientLeft,s.y=a.y+e.clientTop}return{x:r.left+t.x-s.x,y:r.top+t.y-s.y,width:r.width,height:r.height}};let Kv=0,qv=0;const rl=new Map,pS=(n,e)=>{let t=e?Kv:qv;if(e){const i=pS(n),r=rl.get(i)||new Map;rl.has(i)||rl.set(i,r),Ym(r)&&!r.has(e)?(r.set(e,t),Kv+=1):t=r.get(e)}else{const i=n.id||n;rl.has(i)?t=rl.get(i):(rl.set(i,t),qv+=1)}return t},QB=n=>Array.isArray(n)||!1,AS=n=>{if(!Ii(n))return!1;const{top:e,bottom:t}=Uo(n),{clientHeight:i}=Gs(n);return e<=i&&t>=0},mS=n=>typeof n=="function"||!1,OB=n=>Qu(n)&&n.constructor.name==="NodeList"||!1,Pa=n=>Gs(n).dir==="rtl",rn=(n,e)=>!n||!e?null:n.closest(e)||rn(n.getRootNode().host,e)||null,gi=(n,e)=>Qn(n)?n:(Qn(e)?e:_t()).querySelector(n),KI=(n,e)=>(Ii(e)?e:_t()).getElementsByTagName(n),VB=(n,e)=>_t(e).getElementById(n),ws=(n,e)=>(e&&Ii(e)?e:_t()).getElementsByClassName(n),tc={},CS=n=>{const{type:e,currentTarget:t}=n;tc[e].forEach((i,r)=>{t===r&&i.forEach((s,a)=>{a.apply(r,[n]),typeof s=="object"&&s.once&&zi(r,e,a,s)})})},Vi=(n,e,t,i)=>{tc[e]||(tc[e]=new Map);const r=tc[e];r.has(n)||r.set(n,new Map);const s=r.get(n),{size:a}=s;s.set(t,i),a||n.addEventListener(e,CS,i)},zi=(n,e,t,i)=>{const r=tc[e],s=r&&r.get(n),a=s&&s.get(t),o=a!==void 0?a:i;s&&s.has(t)&&s.delete(t),r&&(!s||!s.size)&&r.delete(n),(!r||!r.size)&&delete tc[e],(!s||!s.size)&&n.removeEventListener(e,CS,o)},Ji="fade",lt="show",Qf="data-bs-dismiss",Of="alert",IS="Alert",as=n=>qe(n,"disabled")||Cr(n,"disabled")==="true",zB="5.1.6",GB=zB;let zr=class{constructor(e,t){re(this,"_toggleEventListeners",()=>{});let i;try{if(Qn(e))i=e;else if(Ou(e)){if(i=gi(e),!i)throw Error(`"${e}" is not a valid selector.`)}else throw Error("your target is not an instance of HTMLElement.")}catch(s){throw Error(`${this.name} Error: ${s.message}`)}const r=ec.get(i,this.name);r&&r._toggleEventListeners(),this.element=i,this.options=this.defaults&&Yv(this.defaults).length?TB(i,this.defaults,t||{},"bs"):{},ec.set(i,this.name,this)}get version(){return GB}get name(){return"BaseComponent"}get defaults(){return{}}dispose(){ec.remove(this.element,this.name),Yv(this).forEach(e=>{delete this[e]})}};const WB=`.${Of}`,ZB=`[${Qf}="${Of}"]`,HB=n=>bn(n,IS),XB=n=>new vS(n),$v=Tt(`close.bs.${Of}`),JB=Tt(`closed.bs.${Of}`),ey=n=>{const{element:e}=n;bt(e,JB),n._toggleEventListeners(),n.dispose(),e.remove()};var hh;let vS=(hh=class extends zr{constructor(t){super(t);re(this,"dismiss");re(this,"close",t=>{const{element:i,dismiss:r}=this;!i||!qe(i,lt)||t&&r&&as(r)||(bt(i,$v),!$v.defaultPrevented&&(yt(i,lt),qe(i,Ji)?fi(i,()=>ey(this)):ey(this)))});re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi,{dismiss:r,close:s}=this;r&&i(r,Si,s)});this.dismiss=gi(ZB,this.element),this._toggleEventListeners(!0)}get name(){return IS}dispose(){this._toggleEventListeners(),super.dispose()}},re(hh,"selector",WB),re(hh,"init",XB),re(hh,"getInstance",HB),hh);const Ht="active",os="data-bs-toggle",jB="button",yS="Button",YB=`[${os}="${jB}"]`,KB=n=>bn(n,yS),qB=n=>new wS(n);var uh;let wS=(uh=class extends zr{constructor(t){super(t);re(this,"toggle",t=>{t&&t.preventDefault();const{element:i,isActive:r}=this;as(i)||((r?yt:Ke)(i,Ht),Qi(i,Zv,r?"false":"true"),this.isActive=qe(i,Ht))});re(this,"_toggleEventListeners",t=>{(t?Vi:zi)(this.element,Si,this.toggle)});const{element:i}=this;this.isActive=qe(i,Ht),Qi(i,Zv,String(!!this.isActive)),this._toggleEventListeners(!0)}get name(){return yS}dispose(){this._toggleEventListeners(),super.dispose()}},re(uh,"selector",YB),re(uh,"init",qB),re(uh,"getInstance",KB),uh);const Km="data-bs-target",wo="carousel",ES="Carousel",ty="data-bs-parent",$B="data-bs-container",zn=n=>{const e=[Km,ty,$B,"href"],t=_t(n);return e.map(i=>{const r=Cr(n,i);return r?i===ty?rn(n,r):gi(r,t):null}).filter(i=>i)[0]},zu=`[data-bs-ride="${wo}"]`,Mr=`${wo}-item`,qm="data-bs-slide-to",Ca="data-bs-slide",wa="paused",eD=lS()?Nf:aS;console.log({isMobile:lS(),touchEvent:eD});const iy={pause:"hover",keyboard:!1,touch:!0,interval:5e3},Ws=n=>bn(n,ES),tD=n=>new _S(n);let yh=0,yg=0,Lp=0;const Pp=Tt(`slide.bs.${wo}`),$m=Tt(`slid.bs.${wo}`),ny=n=>{const{index:e,direction:t,element:i,slides:r,options:s}=n;if(n.isAnimating){const a=eC(n),o=t==="left"?"next":"prev",l=t==="left"?"start":"end";Ke(r[e],Ht),yt(r[e],`${Mr}-${o}`),yt(r[e],`${Mr}-${l}`),yt(r[a],Ht),yt(r[a],`${Mr}-${l}`),bt(i,$m),ot.clear(i,Ca),n.cycle&&!_t(i).hidden&&s.interval&&!n.isPaused&&n.cycle()}};function iD(){const n=Ws(this);n&&!n.isPaused&&!ot.get(this,wa)&&Ke(this,wa)}function nD(){const n=Ws(this);n&&n.isPaused&&!ot.get(this,wa)&&n.cycle()}function rD(n){n.preventDefault();const e=rn(this,zu)||zn(this),t=e&&Ws(e);if(as(this)||!t||t.isAnimating)return;const i=+(Cr(this,qm)||0);this&&!qe(this,Ht)&&!Number.isNaN(i)&&t.to(i)}function sD(n){n.preventDefault();const e=rn(this,zu)||zn(this),t=e&&Ws(e);if(as(this)||!t||t.isAnimating)return;const i=Cr(this,Ca);i==="next"?t.next():i==="prev"&&t.prev()}const aD=({code:n,target:e})=>{const t=_t(e),[i]=[...ur(zu,t)].filter(a=>AS(a)),r=Ws(i);if(!r||r.isAnimating||/textarea|input|select/i.test(e.nodeName))return;const s=Pa(i);n===(s?Xv:Hv)?r.prev():n===(s?Hv:Xv)&&r.next()};function ry(n){const{target:e}=n,t=Ws(this);t&&t.isTouch&&!t.controls.includes(e)&&!t.controls.includes(e==null?void 0:e.parentElement)&&(!t.indicator||!t.indicator.contains(e))&&n.preventDefault()}function oD(n){const{target:e}=n,t=Ws(this);if(!t||t.isAnimating||t.isTouch)return;const{controls:i,indicator:r}=t;![...i,r].every(s=>s&&(s===e||s.contains(e)))&&this.contains(e)&&(yh=n.pageX,t.isTouch=!0,bS(t,!0))}const lD=n=>{yg=n.pageX},cD=n=>{var o;const{target:e}=n,t=_t(e),i=[...ur(zu,t)].map(l=>Ws(l)).find(l=>l.isTouch);if(!i)return;const{element:r,index:s}=i,a=Pa(r);Lp=n.pageX,i.isTouch=!1,bS(i),!((o=t.getSelection())!=null&&o.toString().length)&&r.contains(e)&&Math.abs(yh-Lp)>120&&(yg<yh?i.to(s+(a?-1:1)):yg>yh&&i.to(s+(a?1:-1))),yh=0,yg=0,Lp=0},Np=(n,e)=>{const{indicators:t}=n;[...t].forEach(i=>yt(i,Ht)),n.indicators[e]&&Ke(t[e],Ht)},bS=(n,e)=>{const{element:t}=n,i=e?Vi:zi;i(_t(t),vB,lD,jh),i(_t(t),yB,cD,jh)},eC=n=>{const{slides:e,element:t}=n,i=gi(`.${Mr}.${Ht}`,t);return i?[...e].indexOf(i):-1};var dh;let _S=(dh=class extends zr{constructor(t,i){super(t,i);re(this,"_toggleEventListeners",t=>{const{element:i,options:r,slides:s,controls:a,indicators:o}=this,{touch:l,pause:c,interval:h,keyboard:u}=r,d=t?Vi:zi;c&&h&&(d(i,Pf,iD),d(i,XI,nD)),l&&s.length>2&&(d(i,aS,oD,jh),d(i,Nf,ry,{passive:!1}),d(i,wB,ry,{passive:!1})),a.length&&a.forEach(g=>{d(g,Si,sD)}),o.length&&o.forEach(g=>{d(g,Si,rD)}),u&&d(_t(i),Lf,aD)});const{element:r}=this;this.direction=Pa(r)?"right":"left",this.isTouch=!1,this.slides=ws(Mr,r);const{slides:s}=this;if(s.length<2)return;const a=eC(this),o=[...s].find(h=>fS(h,`.${Mr}-next`));this.index=a;const l=_t(r);this.controls=[...ur(`[${Ca}]`,r),...ur(`[${Ca}][${Km}="#${r.id}"]`,l)].filter((h,u,d)=>u===d.indexOf(h)),this.indicator=gi(`.${wo}-indicators`,r),this.indicators=[...this.indicator?ur(`[${qm}]`,this.indicator):[],...ur(`[${qm}][${Km}="#${r.id}"]`,l)].filter((h,u,d)=>u===d.indexOf(h));const{options:c}=this;this.options.interval=c.interval===!0?iy.interval:c.interval,o?this.index=[...s].indexOf(o):a<0&&(this.index=0,Ke(s[0],Ht),this.indicators.length&&Np(this,0)),this.indicators.length&&Np(this,this.index),this._toggleEventListeners(!0),c.interval&&this.cycle()}get name(){return ES}get defaults(){return iy}get isPaused(){return qe(this.element,wa)}get isAnimating(){return gi(`.${Mr}-next,.${Mr}-prev`,this.element)!==null}cycle(){const{element:t,options:i,isPaused:r,index:s}=this;ot.clear(t,wo),r&&(ot.clear(t,wa),yt(t,wa)),ot.set(t,()=>{this.element&&!this.isPaused&&!this.isTouch&&AS(t)&&this.to(s+1)},i.interval,wo)}pause(){const{element:t,options:i}=this;this.isPaused||!i.interval||(Ke(t,wa),ot.set(t,()=>{},1,wa))}next(){this.isAnimating||this.to(this.index+1)}prev(){this.isAnimating||this.to(this.index-1)}to(t){const{element:i,slides:r,options:s}=this,a=eC(this),o=Pa(i);let l=t;if(this.isAnimating||a===l||ot.get(i,Ca))return;a<l||a===0&&l===r.length-1?this.direction=o?"right":"left":(a>l||a===r.length-1&&l===0)&&(this.direction=o?"left":"right");const{direction:c}=this;l<0?l=r.length-1:l>=r.length&&(l=0);const h=c==="left"?"next":"prev",u=c==="left"?"start":"end",d={relatedTarget:r[l],from:a,to:l,direction:c};Ds(Pp,d),Ds($m,d),bt(i,Pp),!Pp.defaultPrevented&&(this.index=l,Np(this,l),Vu(r[l])&&qe(i,"slide")?ot.set(i,()=>{Ke(r[l],`${Mr}-${h}`),Ho(r[l]),Ke(r[l],`${Mr}-${u}`),Ke(r[a],`${Mr}-${u}`),fi(r[l],()=>this.slides&&this.slides.length&&ny(this))},0,Ca):(Ke(r[l],Ht),yt(r[a],Ht),ot.set(i,()=>{ot.clear(i,Ca),i&&s.interval&&!this.isPaused&&this.cycle(),bt(i,$m)},0,Ca)))}dispose(){const{isAnimating:t}=this,i={...this,isAnimating:t};this._toggleEventListeners(),super.dispose(),i.isAnimating&&fi(i.slides[i.index],()=>{ny(i)})}},re(dh,"selector",zu),re(dh,"init",tD),re(dh,"getInstance",Ws),dh);const Fo="collapsing",Pn="collapse",xS="Collapse",hD=`.${Pn}`,SS=`[${os}="${Pn}"]`,uD={parent:null},wg=n=>bn(n,xS),dD=n=>new MS(n),sy=Tt(`show.bs.${Pn}`),gD=Tt(`shown.bs.${Pn}`),ay=Tt(`hide.bs.${Pn}`),fD=Tt(`hidden.bs.${Pn}`),pD=n=>{const{element:e,parent:t,triggers:i}=n;bt(e,sy),sy.defaultPrevented||(ot.set(e,Xg,17),t&&ot.set(t,Xg,17),Ke(e,Fo),yt(e,Pn),pi(e,{height:`${e.scrollHeight}px`}),fi(e,()=>{ot.clear(e),t&&ot.clear(t),i.forEach(r=>Qi(r,Hg,"true")),yt(e,Fo),Ke(e,Pn),Ke(e,lt),pi(e,{height:""}),bt(e,gD)}))},oy=n=>{const{element:e,parent:t,triggers:i}=n;bt(e,ay),ay.defaultPrevented||(ot.set(e,Xg,17),t&&ot.set(t,Xg,17),pi(e,{height:`${e.scrollHeight}px`}),yt(e,Pn),yt(e,lt),Ke(e,Fo),Ho(e),pi(e,{height:"0px"}),fi(e,()=>{ot.clear(e),t&&ot.clear(t),i.forEach(r=>Qi(r,Hg,"false")),yt(e,Fo),Ke(e,Pn),pi(e,{height:""}),bt(e,fD)}))},AD=n=>{const{target:e}=n,t=e&&rn(e,SS),i=t&&zn(t),r=i&&wg(i);t&&as(t)||r&&(r.toggle(),(t==null?void 0:t.tagName)==="A"&&n.preventDefault())};var gh;let MS=(gh=class extends zr{constructor(t,i){super(t,i);re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi,{triggers:r}=this;r.length&&r.forEach(s=>{i(s,Si,AD)})});const{element:r,options:s}=this,a=_t(r);this.triggers=[...ur(SS,a)].filter(o=>zn(o)===r),this.parent=Ci(s.parent)?s.parent:Ou(s.parent)?zn(r)||gi(s.parent,a):null,this._toggleEventListeners(!0)}get name(){return xS}get defaults(){return uD}hide(){const{triggers:t,element:i}=this;ot.get(i)||(oy(this),t.length&&t.forEach(r=>Ke(r,`${Pn}d`)))}show(){const{element:t,parent:i,triggers:r}=this;let s,a;i&&(s=[...ur(`.${Pn}.${lt}`,i)].find(o=>wg(o)),a=s&&wg(s)),(!i||!ot.get(i))&&!ot.get(t)&&(a&&s!==t&&(oy(a),a.triggers.forEach(o=>{Ke(o,`${Pn}d`)})),pD(this),r.length&&r.forEach(o=>yt(o,`${Pn}d`)))}toggle(){qe(this.element,lt)?this.hide():this.show()}dispose(){this._toggleEventListeners(),super.dispose()}},re(gh,"selector",hD),re(gh,"init",dD),re(gh,"getInstance",wg),gh);var mD="1.1.0";const CD=["all","intersecting","update"],ly="PositionObserver Error";var Nm,qI=(Nm=class{constructor(e,t){re(this,"entries");re(this,"_t");re(this,"_r");re(this,"_cm");re(this,"_w");re(this,"_h");re(this,"_rm");re(this,"_th");re(this,"_c");re(this,"observe",e=>{if(!Qn(e))throw new Error(`${ly}: ${e} is not an instance of Element.`);this._r.contains(e)&&this._n(e).then(t=>{t.boundingClientRect&&!this.getEntry(e)&&this.entries.set(e,t),this._t||(this._t=requestAnimationFrame(this._rc))})});re(this,"unobserve",e=>{this.entries.has(e)&&this.entries.delete(e)});re(this,"_rc",()=>{if(!this.entries.size){this._t=0;return}const{clientWidth:e,clientHeight:t}=this._r,i=new Promise(r=>{const s=[];this.entries.forEach(({target:a,boundingClientRect:o,isIntersecting:l})=>{this._r.contains(a)&&this._n(a).then(c=>{if(!c.isIntersecting){if(this._cm===1)return;if(this._cm===2){l&&(this.entries.set(a,c),s.push(c));return}}const{left:h,top:u}=c.boundingClientRect;(o.top!==u||o.left!==h||this._w!==e||this._h!==t)&&(this.entries.set(a,c),s.push(c))})}),this._w=e,this._h=t,r(s)});this._t=requestAnimationFrame(async()=>{const r=await i;r.length&&this._c(r,this),this._rc()})});re(this,"_n",e=>new Promise(t=>{new IntersectionObserver(([i],r)=>{r.disconnect(),t(i)},{threshold:this._th,rootMargin:this._rm}).observe(e)}));re(this,"getEntry",e=>this.entries.get(e));re(this,"disconnect",()=>{cancelAnimationFrame(this._t),this.entries.clear(),this._t=0});if(!mS(e))throw new Error(`${ly}: ${e} is not a function.`);this.entries=new Map,this._c=e,this._t=0;const i=Qn(t==null?void 0:t.root)?t.root:document==null?void 0:document.documentElement;this._r=i,this._rm=t==null?void 0:t.rootMargin,this._th=t==null?void 0:t.threshold,this._cm=CD.indexOf((t==null?void 0:t.callbackMode)||"intersecting"),this._w=i.clientWidth,this._h=i.clientHeight}},re(Nm,"version",mD),Nm);const Bo=["dropdown","dropup","dropstart","dropend"],RS="Dropdown",TS="dropdown-menu",US=n=>{var t,i;const e=rn(n,"A");return n.tagName==="A"&&Jh(n,"href")&&((t=Cr(n,"href"))==null?void 0:t.slice(-1))==="#"||e&&Jh(e,"href")&&((i=Cr(e,"href"))==null?void 0:i.slice(-1))==="#"},[Br,tC,iC,nC]=Bo,ID=`[${os}="${Br}"]`,Kh=n=>bn(n,RS),vD=n=>new BS(n),yD=`${TS}-end`,cy=[Br,tC],hy=[iC,nC],uy=["A","BUTTON"],wD={offset:5,display:"dynamic"},kp=Tt(`show.bs.${Br}`),dy=Tt(`shown.bs.${Br}`),Qp=Tt(`hide.bs.${Br}`),gy=Tt(`hidden.bs.${Br}`),FS=Tt(`updated.bs.${Br}`),fy=n=>{const{element:e,menu:t,parentElement:i,options:r}=n,{offset:s}=r;if(vn(t,"position")==="static")return;const a=Pa(e),o=qe(t,yD);["margin","top","bottom","left","right"].forEach(S=>{const R={};R[S]="",pi(t,R)});let l=Bo.find(S=>qe(i,S))||Br;const c={dropdown:[s,0,0],dropup:[0,0,s],dropstart:a?[-1,0,0,s]:[-1,s,0],dropend:a?[-1,s,0]:[-1,0,0,s]},h={dropdown:{top:"100%"},dropup:{top:"auto",bottom:"100%"},dropstart:a?{left:"100%",right:"auto"}:{left:"auto",right:"100%"},dropend:a?{left:"auto",right:"100%"}:{left:"100%",right:"auto"},menuStart:a?{right:"0",left:"auto"}:{right:"auto",left:"0"},menuEnd:a?{right:"auto",left:"0"}:{right:"0",left:"auto"}},{offsetWidth:u,offsetHeight:d}=t,{clientWidth:g,clientHeight:f}=Gs(e),{left:m,top:p,width:A,height:C}=Uo(e),v=m-u-s<0,I=m+u+A+s>=g,w=p+d+s>=f,b=p+d+C+s>=f,_=p-d-s<0,x=(!a&&o||a&&!o)&&m+A-u<0,y=(a&&o||!a&&!o)&&m+u>=g;if(hy.includes(l)&&v&&I&&(l=Br),l===iC&&(a?I:v)&&(l=nC),l===nC&&(a?v:I)&&(l=iC),l===tC&&_&&!b&&(l=Br),l===Br&&b&&!_&&(l=tC),hy.includes(l)&&w&&Ds(h[l],{top:"auto",bottom:0}),cy.includes(l)&&(x||y)){let S={left:"auto",right:"auto"};!x&&y&&!a&&(S={left:"auto",right:0}),x&&!y&&a&&(S={left:0,right:"auto"}),S&&Ds(h[l],S)}const E=c[l];pi(t,{...h[l],margin:`${E.map(S=>S&&`${S}px`).join(" ")}`}),cy.includes(l)&&o&&o&&pi(t,h[!a&&x||a&&y?"menuStart":"menuEnd"]),bt(i,FS)},ED=n=>Array.from(n.children).map(e=>{if(e&&uy.includes(e.tagName))return e;const{firstElementChild:t}=e;return t&&uy.includes(t.tagName)?t:null}).filter(e=>e),py=n=>{const{element:e,options:t,menu:i}=n,r=n.open?Vi:zi,s=_t(e);r(s,Si,Ay),r(s,ZI,Ay),r(s,Lf,_D),r(s,CB,xD),t.display==="dynamic"&&(n.open?n._observer.observe(i):n._observer.disconnect())},$I=n=>{const e=[...Bo,"btn-group","input-group"].map(t=>ws(`${t} ${lt}`,_t(n))).find(t=>t.length);if(e&&e.length)return[...e[0].children].find(t=>Bo.some(i=>i===Cr(t,os)))},Ay=n=>{const{target:e,type:t}=n;if(!Ci(e))return;const i=$I(e),r=i&&Kh(i);if(!r)return;const{parentElement:s,menu:a}=r,o=s&&s.contains(e)&&(e.tagName==="form"||rn(e,"form")!==null);[Si,sS].includes(t)&&US(e)&&n.preventDefault(),!o&&t!==ZI&&e!==i&&e!==a&&r.hide()};function bD(n){const e=Kh(this);as(this)||e&&(n.stopPropagation(),e.toggle(),US(this)&&n.preventDefault())}const _D=n=>{[Jm,jm].includes(n.code)&&n.preventDefault()};function xD(n){const{code:e}=n,t=$I(this);if(!t)return;const i=Kh(t),{activeElement:r}=_t(t);if(!i||!r)return;const{menu:s,open:a}=i,o=ED(s);if(o&&o.length&&[Jm,jm].includes(e)){let l=o.indexOf(r);r===t?l=0:e===jm?l=l>1?l-1:0:e===Jm&&(l=l<o.length-1?l+1:l),o[l]&&Ls(o[l])}JI===e&&a&&(i.toggle(),Ls(t))}var fh;let BS=(fh=class extends zr{constructor(t,i){super(t,i);re(this,"_toggleEventListeners",t=>{(t?Vi:zi)(this.element,Si,bD)});const{parentElement:r}=this.element,[s]=ws(TS,r);s&&(this.parentElement=r,this.menu=s,this._observer=new qI(()=>fy(this)),this._toggleEventListeners(!0))}get name(){return RS}get defaults(){return wD}toggle(){this.open?this.hide():this.show()}show(){const{element:t,open:i,menu:r,parentElement:s}=this;if(i)return;const a=$I(t),o=a&&Kh(a);o&&o.hide(),[kp,dy,FS].forEach(l=>{l.relatedTarget=t}),bt(s,kp),!kp.defaultPrevented&&(Ke(r,lt),Ke(s,lt),Qi(t,Hg,"true"),fy(this),this.open=!i,Ls(t),py(this),bt(s,dy))}hide(){const{element:t,open:i,menu:r,parentElement:s}=this;i&&([Qp,gy].forEach(a=>{a.relatedTarget=t}),bt(s,Qp),!Qp.defaultPrevented&&(yt(r,lt),yt(s,lt),Qi(t,Hg,"false"),this.open=!i,py(this),bt(s,gy)))}dispose(){this.open&&this.hide(),this._toggleEventListeners(),super.dispose()}},re(fh,"selector",ID),re(fh,"init",vD),re(fh,"getInstance",Kh),fh);const Kn="modal",e0="Modal",t0="Offcanvas",SD="fixed-top",MD="fixed-bottom",DS="sticky-top",LS="position-sticky",PS=n=>[...ws(SD,n),...ws(MD,n),...ws(DS,n),...ws(LS,n),...ws("is-fixed",n)],RD=n=>{const e=Xo(n);pi(e,{paddingRight:"",overflow:""});const t=PS(e);t.length&&t.forEach(i=>{pi(i,{paddingRight:"",marginRight:""})})},NS=n=>{const{clientWidth:e}=Gs(n),{innerWidth:t}=gS(n);return Math.abs(t-e)},kS=(n,e)=>{const t=Xo(n),i=parseInt(vn(t,"paddingRight"),10),r=vn(t,"overflow")==="hidden"&&i?0:NS(n),s=PS(t);e&&(pi(t,{overflow:"hidden",paddingRight:`${i+r}px`}),s.length&&s.forEach(a=>{const o=vn(a,"paddingRight");if(a.style.paddingRight=`${parseInt(o,10)+r}px`,[DS,LS].some(l=>qe(a,l))){const l=vn(a,"marginRight");a.style.marginRight=`${parseInt(l,10)-r}px`}}))},Ir="offcanvas",Sa=ya({tagName:"div",className:"popup-container"}),QS=(n,e)=>{const t=Ii(e)&&e.nodeName==="BODY",i=Ii(e)&&!t?e:Sa,r=t?e:Xo(n);Ii(n)&&(i===Sa&&r.append(Sa),i.append(n))},OS=(n,e)=>{const t=Ii(e)&&e.nodeName==="BODY",i=Ii(e)&&!t?e:Sa;Ii(n)&&(n.remove(),i===Sa&&!Sa.children.length&&Sa.remove())},i0=(n,e)=>{const t=Ii(e)&&e.nodeName!=="BODY"?e:Sa;return Ii(n)&&t.contains(n)},VS="backdrop",my=`${Kn}-${VS}`,Cy=`${Ir}-${VS}`,zS=`.${Kn}.${lt}`,n0=`.${Ir}.${lt}`,vi=ya("div"),Jo=n=>gi(`${zS},${n0}`,_t(n)),r0=n=>{const e=n?my:Cy;[my,Cy].forEach(t=>{yt(vi,t)}),Ke(vi,e)},GS=(n,e,t)=>{r0(t),QS(vi,Xo(n)),e&&Ke(vi,Ji)},WS=()=>{qe(vi,lt)||(Ke(vi,lt),Ho(vi))},Vf=()=>{yt(vi,lt)},ZS=n=>{Jo(n)||(yt(vi,Ji),OS(vi,Xo(n)),RD(n))},HS=n=>Ci(n)&&vn(n,"visibility")!=="hidden"&&n.offsetParent!==null,TD=`.${Kn}`,UD=`[${os}="${Kn}"]`,FD=`[${Qf}="${Kn}"]`,XS=`${Kn}-static`,BD={backdrop:!0,keyboard:!0},qh=n=>bn(n,e0),DD=n=>new $h(n),Eg=Tt(`show.bs.${Kn}`),Iy=Tt(`shown.bs.${Kn}`),Op=Tt(`hide.bs.${Kn}`),vy=Tt(`hidden.bs.${Kn}`),JS=n=>{const{element:e}=n,t=NS(e),{clientHeight:i,scrollHeight:r}=Gs(e),{clientHeight:s,scrollHeight:a}=e,o=s!==a;if(!o&&t){const l={[Pa(e)?"paddingLeft":"paddingRight"]:`${t}px`};pi(e,l)}kS(e,o||i!==r)},jS=(n,e)=>{const t=e?Vi:zi,{element:i}=n;t(i,Si,ND),t(_t(i),Lf,PD),e?n._observer.observe(i):n._observer.disconnect()},yy=n=>{const{triggers:e,element:t,relatedTarget:i}=n;ZS(t),pi(t,{paddingRight:"",display:""}),jS(n);const r=Eg.relatedTarget||e.find(HS);r&&Ls(r),vy.relatedTarget=i||void 0,bt(t,vy),kf(t)},wy=n=>{const{element:e,relatedTarget:t}=n;Ls(e),jS(n,!0),Iy.relatedTarget=t||void 0,bt(e,Iy),kf(e)},Ey=n=>{const{element:e,hasFade:t}=n;pi(e,{display:"block"}),JS(n),Jo(e)||pi(Xo(e),{overflow:"hidden"}),Ke(e,lt),To(e,ku),Qi(e,Df,"true"),t?fi(e,()=>wy(n)):wy(n)},by=n=>{const{element:e,options:t,hasFade:i}=n;t.backdrop&&i&&qe(vi,lt)&&!Jo(e)?(Vf(),fi(vi,()=>yy(n))):yy(n)};function LD(n){const e=zn(this),t=e&&qh(e);as(this)||t&&(this.tagName==="A"&&n.preventDefault(),t.relatedTarget=this,t.toggle())}const PD=({code:n,target:e})=>{const t=gi(zS,_t(e)),i=t&&qh(t);if(!i)return;const{options:r}=i;r.keyboard&&n===JI&&qe(t,lt)&&(i.relatedTarget=null,i.hide())},ND=n=>{var u,d;const{currentTarget:e}=n,t=e&&qh(e);if(!t||!e||ot.get(e))return;const{options:i,isStatic:r,modalDialog:s}=t,{backdrop:a}=i,{target:o}=n,l=(d=(u=_t(e))==null?void 0:u.getSelection())==null?void 0:d.toString().length,c=s.contains(o),h=o&&rn(o,FD);r&&!c?ot.set(e,()=>{Ke(e,XS),fi(s,()=>kD(t))},17):(h||!l&&!r&&!c&&a)&&(t.relatedTarget=h||null,t.hide(),n.preventDefault())},kD=n=>{const{element:e,modalDialog:t}=n,i=(Vu(t)||0)+17;yt(e,XS),ot.set(e,()=>ot.clear(e),i)};var ph;let $h=(ph=class extends zr{constructor(t,i){super(t,i);re(this,"update",()=>{qe(this.element,lt)&&JS(this)});re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi,{triggers:r}=this;r.length&&r.forEach(s=>{i(s,Si,LD)})});const{element:r}=this,s=gi(`.${Kn}-dialog`,r);s&&(this.modalDialog=s,this.triggers=[...ur(UD,_t(r))].filter(a=>zn(a)===r),this.isStatic=this.options.backdrop==="static",this.hasFade=qe(r,Ji),this.relatedTarget=null,this._observer=new ResizeObserver(()=>this.update()),this._toggleEventListeners(!0))}get name(){return e0}get defaults(){return BD}toggle(){qe(this.element,lt)?this.hide():this.show()}show(){const{element:t,options:i,hasFade:r,relatedTarget:s}=this,{backdrop:a}=i;let o=0;if(qe(t,lt)||(Eg.relatedTarget=s||void 0,bt(t,Eg),Eg.defaultPrevented))return;const l=Jo(t);if(l&&l!==t){const c=qh(l)||bn(l,t0);c&&c.hide()}a?(i0(vi)?r0(!0):GS(t,r,!0),o=Vu(vi),WS(),setTimeout(()=>Ey(this),o)):(Ey(this),l&&qe(vi,lt)&&Vf())}hide(){const{element:t,hasFade:i,relatedTarget:r}=this;qe(t,lt)&&(Op.relatedTarget=r||void 0,bt(t,Op),!Op.defaultPrevented&&(yt(t,lt),Qi(t,ku,"true"),To(t,Df),i?fi(t,()=>by(this)):by(this)))}dispose(){const t={...this},{modalDialog:i,hasFade:r}=t,s=()=>setTimeout(()=>super.dispose(),17);this.hide(),this._toggleEventListeners(),r?fi(i,s):s()}},re(ph,"selector",TD),re(ph,"init",DD),re(ph,"getInstance",qh),ph);const QD=`.${Ir}`,YS=`[${os}="${Ir}"]`,OD=`[${Qf}="${Ir}"]`,zf=`${Ir}-toggling`,VD={backdrop:!0,keyboard:!0,scroll:!1},eu=n=>bn(n,t0),zD=n=>new e1(n),bg=Tt(`show.bs.${Ir}`),KS=Tt(`shown.bs.${Ir}`),Vp=Tt(`hide.bs.${Ir}`),qS=Tt(`hidden.bs.${Ir}`),GD=n=>{const{element:e}=n,{clientHeight:t,scrollHeight:i}=Gs(e);kS(e,t!==i)},$S=(n,e)=>{const t=e?Vi:zi,i=_t(n.element);t(i,Lf,XD),t(i,Si,HD)},_y=n=>{const{element:e,options:t}=n;t.scroll||(GD(n),pi(Xo(e),{overflow:"hidden"})),Ke(e,zf),Ke(e,lt),pi(e,{visibility:"visible"}),fi(e,()=>JD(n))},WD=n=>{const{element:e,options:t}=n,i=Jo(e);e.blur(),!i&&t.backdrop&&qe(vi,lt)&&Vf(),fi(e,()=>jD(n))};function ZD(n){const e=zn(this),t=e&&eu(e);as(this)||t&&(t.relatedTarget=this,t.toggle(),this.tagName==="A"&&n.preventDefault())}const HD=n=>{const{target:e}=n,t=gi(n0,_t(e));if(!t)return;const i=gi(OD,t),r=eu(t);if(!r)return;const{options:s,triggers:a}=r,{backdrop:o}=s,l=rn(e,YS),c=_t(t).getSelection();vi.contains(e)&&o==="static"||(!(c&&c.toString().length)&&(!t.contains(e)&&o&&(!l||a.includes(e))||i&&i.contains(e))&&(r.relatedTarget=i&&i.contains(e)?i:void 0,r.hide()),l&&l.tagName==="A"&&n.preventDefault())},XD=({code:n,target:e})=>{const t=gi(n0,_t(e)),i=t&&eu(t);i&&i.options.keyboard&&n===JI&&(i.relatedTarget=void 0,i.hide())},JD=n=>{const{element:e}=n;yt(e,zf),To(e,ku),Qi(e,Df,"true"),Qi(e,"role","dialog"),bt(e,KS),$S(n,!0),Ls(e),kf(e)},jD=n=>{const{element:e,triggers:t}=n;Qi(e,ku,"true"),To(e,Df),To(e,"role"),pi(e,{visibility:""});const i=bg.relatedTarget||t.find(HS);i&&Ls(i),ZS(e),bt(e,qS),yt(e,zf),kf(e),Jo(e)||$S(n)};var Ah;let e1=(Ah=class extends zr{constructor(t,i){super(t,i);re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi;this.triggers.forEach(r=>{i(r,Si,ZD)})});const{element:r}=this;this.triggers=[...ur(YS,_t(r))].filter(s=>zn(s)===r),this.relatedTarget=void 0,this._toggleEventListeners(!0)}get name(){return t0}get defaults(){return VD}toggle(){qe(this.element,lt)?this.hide():this.show()}show(){const{element:t,options:i,relatedTarget:r}=this;let s=0;if(qe(t,lt)||(bg.relatedTarget=r||void 0,KS.relatedTarget=r||void 0,bt(t,bg),bg.defaultPrevented))return;const a=Jo(t);if(a&&a!==t){const o=eu(a)||bn(a,e0);o&&o.hide()}i.backdrop?(i0(vi)?r0():GS(t,!0),s=Vu(vi),WS(),setTimeout(()=>_y(this),s)):(_y(this),a&&qe(vi,lt)&&Vf())}hide(){const{element:t,relatedTarget:i}=this;qe(t,lt)&&(Vp.relatedTarget=i||void 0,qS.relatedTarget=i||void 0,bt(t,Vp),!Vp.defaultPrevented&&(Ke(t,zf),yt(t,lt),WD(this)))}dispose(){const{element:t}=this,i=qe(t,lt),r=()=>setTimeout(()=>super.dispose(),1);this.hide(),this._toggleEventListeners(),i?fi(t,r):r()}},re(Ah,"selector",QD),re(Ah,"init",zD),re(Ah,"getInstance",eu),Ah);const Eo="popover",s0="Popover",Ms="tooltip",t1=n=>{const e=n===Ms,t=e?`${n}-inner`:`${n}-body`,i=e?"":`<h3 class="${n}-header"></h3>`,r=`<div class="${n}-arrow"></div>`,s=`<div class="${t}"></div>`;return`<div class="${n}" role="${Ms}">${i+r+s}</div>`},i1={top:"top",bottom:"bottom",left:"start",right:"end"},rC=n=>{requestAnimationFrame(()=>{const e=/\b(top|bottom|start|end)+/,{element:t,tooltip:i,container:r,offsetParent:s,options:a,arrow:o}=n;if(!i)return;const l=Pa(t),{x:c,y:h}=DB(s);pi(i,{top:"",left:"",right:"",bottom:""});const{offsetWidth:u,offsetHeight:d}=i,{clientWidth:g,clientHeight:f,offsetWidth:m}=Gs(t);let{placement:p}=a;const{clientWidth:A,offsetWidth:C}=r,v=vn(r,"position")==="fixed",I=Math.abs(v?A-C:g-m),w=l&&v?I:0,b=g-(l?0:I)-1,_=n._observer.getEntry(t),{width:x,height:y,left:E,right:S,top:R}=(_==null?void 0:_.boundingClientRect)||Uo(t,!0),{x:M,y:T}=kB(t,s,{x:c,y:h});pi(o,{top:"",left:"",right:"",bottom:""});let P=0,F="",N=0,L="",W="",ne="",de="";const ee=o.offsetWidth||0,Me=o.offsetHeight||0,G=ee/2;let te=R-d-Me<0,we=R+d+y+Me>=f,le=E-u-ee<w,xe=E+u+x+ee>=b;const Re=["left","right"],Fe=["top","bottom"];te=Re.includes(p)?R+y/2-d/2-Me<0:te,we=Re.includes(p)?R+d/2+y/2+Me>=f:we,le=Fe.includes(p)?E+x/2-u/2<w:le,xe=Fe.includes(p)?E+u/2+x/2>=b:xe,p=Re.includes(p)&&le&&xe?"top":p,p=p==="top"&&te?"bottom":p,p=p==="bottom"&&we?"top":p,p=p==="left"&&le?"right":p,p=p==="right"&&xe?"left":p,i.className.includes(p)||(i.className=i.className.replace(e,i1[p])),Re.includes(p)?(p==="left"?N=M-u-ee:N=M+x+ee,te&&we?(P=0,F=0,W=T+y/2-Me/2):te?(P=T,F="",W=y/2-ee):we?(P=T-d+y,F="",W=d-y/2-ee):(P=T-d/2+y/2,W=d/2-Me/2)):Fe.includes(p)&&(p==="top"?P=T-d-Me:P=T+y+Me,le?(N=0,ne=M+x/2-G):xe?(N="auto",L=0,de=x/2+b-S-G):(N=M-u/2+x/2,ne=u/2-G)),pi(i,{top:`${P}px`,bottom:F===""?"":`${F}px`,left:N==="auto"?N:`${N}px`,right:L!==""?`${L}px`:""}),Ci(o)&&(W!==""&&(o.style.top=`${W}px`),ne!==""?o.style.left=`${ne}px`:de!==""&&(o.style.right=`${de}px`));const Ve=Tt(`updated.bs.${Yh(n.name)}`);bt(t,Ve)})},sC={template:t1(Ms),title:"",customClass:"",trigger:"hover focus",placement:"top",sanitizeFn:void 0,animation:!0,delay:200,container:document.body,content:"",dismissible:!1,btnClose:""},n1="data-original-title",uo="Tooltip",qs=(n,e,t)=>{if(Ou(e)&&e.length){let i=e.trim();mS(t)&&(i=t(i));const r=new DOMParser().parseFromString(i,"text/html");n.append(...r.body.childNodes)}else Ci(e)?n.append(e):(OB(e)||QB(e)&&e.every(Ii))&&n.append(...e)},YD=n=>{const e=n.name===uo,{id:t,element:i,options:r}=n,{title:s,placement:a,template:o,animation:l,customClass:c,sanitizeFn:h,dismissible:u,content:d,btnClose:g}=r,f=e?Ms:Eo,m={...i1};let p=[],A=[];Pa(i)&&(m.left="end",m.right="start");const C=`bs-${f}-${m[a]}`;let v;if(Ci(o))v=o;else{const y=ya("div");qs(y,o,h),v=y.firstChild}if(!Ci(v))return;n.tooltip=v.cloneNode(!0);const{tooltip:I}=n;Qi(I,"id",t),Qi(I,"role",Ms);const w=e?`${Ms}-inner`:`${Eo}-body`,b=e?null:gi(`.${Eo}-header`,I),_=gi(`.${w}`,I);n.arrow=gi(`.${f}-arrow`,I);const{arrow:x}=n;if(Ci(s))p=[s.cloneNode(!0)];else{const y=ya("div");qs(y,s,h),p=[...y.childNodes]}if(Ci(d))A=[d.cloneNode(!0)];else{const y=ya("div");qs(y,d,h),A=[...y.childNodes]}if(u)if(s)if(Ci(g))p=[...p,g.cloneNode(!0)];else{const y=ya("div");qs(y,g,h),p=[...p,y.firstChild]}else if(b&&b.remove(),Ci(g))A=[...A,g.cloneNode(!0)];else{const y=ya("div");qs(y,g,h),A=[...A,y.firstChild]}e?s&&_&&qs(_,s,h):(s&&b&&qs(b,p,h),d&&_&&qs(_,A,h),n.btn=gi(".btn-close",I)||void 0),Ke(I,"position-absolute"),Ke(x,"position-absolute"),qe(I,f)||Ke(I,f),l&&!qe(I,Ji)&&Ke(I,Ji),c&&!qe(I,c)&&Ke(I,c),qe(I,C)||Ke(I,C)},KD=n=>{const e=["HTML","BODY"],t=[];let{parentNode:i}=n;for(;i&&!e.includes(i.nodeName);)i=LB(i),dS(i)||PB(i)||t.push(i);return t.find((r,s)=>(vn(r,"position")!=="relative"||vn(r,"position")==="relative"&&r.offsetHeight!==r.scrollHeight)&&t.slice(s+1).every(a=>vn(a,"position")==="static")?r:null)||_t(n).body},qD=`[${os}="${Ms}"],[data-tip="${Ms}"]`,r1="title";let xy=n=>bn(n,uo);const $D=n=>new a0(n),eL=n=>{const{element:e,tooltip:t,container:i}=n;To(e,nS),OS(t,i)},jc=n=>{const{tooltip:e,container:t}=n;return e&&i0(e,t)},tL=(n,e)=>{const{element:t}=n;n._toggleEventListeners(),Jh(t,n1)&&n.name===uo&&a1(n),e&&e()},s1=(n,e)=>{const t=e?Vi:zi,{element:i}=n;t(_t(i),Nf,n.handleTouch,jh)},Sy=n=>{const{element:e}=n,t=Tt(`shown.bs.${Yh(n.name)}`);s1(n,!0),bt(e,t),ot.clear(e,"in")},My=n=>{const{element:e}=n,t=Tt(`hidden.bs.${Yh(n.name)}`);s1(n),eL(n),bt(e,t),ot.clear(e,"out")},Ry=(n,e)=>{const t=e?Vi:zi,{element:i,tooltip:r}=n,s=rn(i,`.${Kn}`),a=rn(i,`.${Ir}`);e?[i,r].forEach(o=>n._observer.observe(o)):n._observer.disconnect(),s&&t(s,`hide.bs.${Kn}`,n.handleHide),a&&t(a,`hide.bs.${Ir}`,n.handleHide)},a1=(n,e)=>{const t=[n1,r1],{element:i}=n;Qi(i,t[e?0:1],e||Cr(i,t[0])||""),To(i,t[e?1:0])};var Ll;let a0=(Ll=class extends zr{constructor(t,i){super(t,i);re(this,"handleFocus",()=>Ls(this.element));re(this,"handleShow",()=>this.show());re(this,"handleHide",()=>this.hide());re(this,"update",()=>{rC(this)});re(this,"toggle",()=>{const{tooltip:t}=this;t&&!jc(this)?this.show():this.hide()});re(this,"handleTouch",({target:t})=>{const{tooltip:i,element:r}=this;i&&i.contains(t)||t===r||t&&r.contains(t)||this.hide()});re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi,{element:r,options:s,btn:a}=this,{trigger:o}=s,l=!!(this.name!==uo&&s.dismissible);o.includes("manual")||(this.enabled=!!t,o.split(" ").forEach(c=>{c===IB?(i(r,sS,this.handleShow),i(r,Pf,this.handleShow),l||(i(r,XI,this.handleHide),i(_t(r),Nf,this.handleTouch,jh))):c===Si?i(r,c,l?this.handleShow:this.toggle):c===ZI&&(i(r,HI,this.handleShow),l||i(r,rS,this.handleHide),xB()&&i(r,Si,this.handleFocus)),l&&a&&i(a,Si,this.handleHide)}))});const{element:r}=this,s=this.name===uo,a=s?Ms:Eo,o=s?uo:s0;xy=u=>bn(u,o),this.enabled=!0,this.id=`${a}-${pS(r,a)}`;const{options:l}=this;if(!l.title&&s||!s&&!l.content)return;Ds(sC,{titleAttr:""}),Jh(r,r1)&&s&&typeof l.title=="string"&&a1(this,l.title);const c=KD(r),h=["sticky","fixed","relative"].some(u=>vn(c,"position")===u)?c:gS(r);this.container=c,this.offsetParent=h,YD(this),this.tooltip&&(this._observer=new qI(()=>this.update()),this._toggleEventListeners(!0))}get name(){return uo}get defaults(){return sC}show(){const{options:t,tooltip:i,element:r,container:s,id:a}=this,{animation:o}=t,l=ot.get(r,"out");ot.clear(r,"out"),i&&!l&&!jc(this)&&ot.set(r,()=>{const c=Tt(`show.bs.${Yh(this.name)}`);bt(r,c),c.defaultPrevented||(QS(i,s),Qi(r,nS,`#${a}`),this.update(),Ry(this,!0),qe(i,lt)||Ke(i,lt),o?fi(i,()=>Sy(this)):Sy(this))},17,"in")}hide(){const{options:t,tooltip:i,element:r}=this,{animation:s,delay:a}=t;ot.clear(r,"in"),i&&jc(this)&&ot.set(r,()=>{const o=Tt(`hide.bs.${Yh(this.name)}`);bt(r,o),o.defaultPrevented||(this.update(),yt(i,lt),Ry(this),s?fi(i,()=>My(this)):My(this))},a+17,"out")}enable(){const{enabled:t}=this;t||(this._toggleEventListeners(!0),this.enabled=!t)}disable(){const{tooltip:t,enabled:i}=this;i&&(t&&jc(this)&&this.hide(),this._toggleEventListeners(),this.enabled=!i)}toggleEnabled(){this.enabled?this.disable():this.enable()}dispose(){const{tooltip:t,options:i}=this,r={...this,name:this.name},s=()=>setTimeout(()=>tL(r,()=>super.dispose()),17);i.animation&&jc(r)?(this.options.delay=0,this.hide(),fi(t,s)):s()}},re(Ll,"selector",qD),re(Ll,"init",$D),re(Ll,"getInstance",xy),re(Ll,"styleTip",rC),Ll);const iL=`[${os}="${Eo}"],[data-tip="${Eo}"]`,nL=Ds({},sC,{template:t1(Eo),content:"",dismissible:!1,btnClose:'<button class="btn-close position-absolute top-0 end-0 m-1" aria-label="Close"></button>'}),rL=n=>bn(n,s0),sL=n=>new o1(n);var Pl;let o1=(Pl=class extends a0{constructor(t,i){super(t,i);re(this,"show",()=>{super.show();const{options:t,btn:i}=this;t.dismissible&&i&&setTimeout(()=>Ls(i),17)})}get name(){return s0}get defaults(){return nL}},re(Pl,"selector",iL),re(Pl,"init",sL),re(Pl,"getInstance",rL),re(Pl,"styleTip",rC),Pl);const aL="scrollspy",l1="ScrollSpy",oL='[data-bs-spy="scroll"]',lL="[href]",cL={offset:10,target:void 0},hL=n=>bn(n,l1),uL=n=>new h1(n),Ty=Tt(`activate.bs.${aL}`),dL=n=>{const{target:e,_itemsLength:t,_observables:i}=n,r=KI("A",e),s=_t(e);!r.length||t===i.size||(i.clear(),Array.from(r).forEach(a=>{var c;const o=(c=Cr(a,"href"))==null?void 0:c.slice(1),l=o!=null&&o.length?s.getElementById(o):null;l&&!as(a)&&n._observables.set(l,a)}),n._itemsLength=n._observables.size)},c1=n=>{Array.from(KI("A",n)).forEach(e=>{qe(e,Ht)&&yt(e,Ht)})},Uy=(n,e)=>{const{target:t,element:i}=n;c1(t),n._activeItem=e,Ke(e,Ht);let r=e;for(;r!==t;)if(r=r.parentElement,["nav","dropdown-menu","list-group"].some(s=>qe(r,s))){const s=r.previousElementSibling;s&&!qe(s,Ht)&&Ke(s,Ht)}Ty.relatedTarget=e,bt(i,Ty)},zp=(n,e)=>{const{scrollTarget:t,element:i,options:r}=n;return(t!==i?Uo(e).top+t.scrollTop:e.offsetTop)-(r.offset||10)};var mh;let h1=(mh=class extends zr{constructor(t,i){super(t,i);re(this,"refresh",()=>{var d,g,f;const{target:t,scrollTarget:i}=this;if(!t||t.offsetHeight===0)return;dL(this);const{_itemsLength:r,_observables:s,_activeItem:a}=this;if(!r)return;const o=s.entries().toArray(),{scrollTop:l,scrollHeight:c,clientHeight:h}=i;if(l>=c-h){const m=(d=o[r-1])==null?void 0:d[1];a!==m&&Uy(this,m);return}const u=(g=o[0])!=null&&g[0]?zp(this,o[0][0]):null;if(u!==null&&l<u&&u>0){this._activeItem=null,c1(t);return}for(let m=0;m<r;m+=1){const[p,A]=o[m],C=zp(this,p),v=(f=o[m+1])==null?void 0:f[0],I=v?zp(this,v):null;if(a!==A&&l>=C&&(I===null||l<I)){Uy(this,A);break}}});re(this,"_scrollTo",t=>{var a;const i=rn(t.target,lL),r=i&&((a=Cr(i,"href"))==null?void 0:a.slice(1)),s=r&&VB(r,this.target);s&&(this.scrollTarget.scrollTo({top:s.offsetTop,behavior:"smooth"}),t.preventDefault())});re(this,"_toggleEventListeners",t=>{const{target:i,_observables:r,_observer:s,_scrollTo:a}=this;(t?Vi:zi)(i,Si,a),t?r==null||r.forEach((o,l)=>s.observe(l)):s.disconnect()});const{element:r,options:s}=this,a=gi(s.target,_t(r));a&&(this.target=a,this.scrollTarget=r.clientHeight<r.scrollHeight?r:Gs(r),this._observables=new Map,this.refresh(),this._observer=new qI(()=>{requestAnimationFrame(()=>this.refresh())},{root:this.scrollTarget}),this._toggleEventListeners(!0))}get name(){return l1}get defaults(){return cL}dispose(){this._toggleEventListeners(),super.dispose()}},re(mh,"selector",oL),re(mh,"init",uL),re(mh,"getInstance",hL),mh);const Gu="tab",u1="Tab",aC=`[${os}="${Gu}"]`,d1=n=>bn(n,u1),gL=n=>new g1(n),Gp=Tt(`show.bs.${Gu}`),Fy=Tt(`shown.bs.${Gu}`),Wp=Tt(`hide.bs.${Gu}`),By=Tt(`hidden.bs.${Gu}`),tu=new Map,Dy=n=>{const{tabContent:e,nav:t}=n;e&&qe(e,Fo)&&(e.style.height="",yt(e,Fo)),t&&ot.clear(t)},Ly=n=>{const{element:e,tabContent:t,content:i,nav:r}=n,{tab:s}=Ci(r)&&tu.get(r)||{tab:null};if(t&&i&&qe(i,Ji)){const{currentHeight:a,nextHeight:o}=tu.get(e)||{currentHeight:0,nextHeight:0};a!==o?setTimeout(()=>{t.style.height=`${o}px`,Ho(t),fi(t,()=>Dy(n))},50):Dy(n)}else r&&ot.clear(r);Fy.relatedTarget=s,bt(e,Fy)},Py=n=>{const{element:e,content:t,tabContent:i,nav:r}=n,{tab:s,content:a}=r&&tu.get(r)||{tab:null,content:null};let o=0;if(i&&t&&qe(t,Ji)&&([a,t].forEach(l=>{l&&Ke(l,"overflow-hidden")}),o=a?a.scrollHeight:0),Gp.relatedTarget=s,By.relatedTarget=e,bt(e,Gp),!Gp.defaultPrevented){if(t&&Ke(t,Ht),a&&yt(a,Ht),i&&t&&qe(t,Ji)){const l=t.scrollHeight;tu.set(e,{currentHeight:o,nextHeight:l,tab:null,content:null}),Ke(i,Fo),i.style.height=`${o}px`,Ho(i),[a,t].forEach(c=>{c&&yt(c,"overflow-hidden")})}t&&t&&qe(t,Ji)?setTimeout(()=>{Ke(t,lt),fi(t,()=>{Ly(n)})},1):(t&&Ke(t,lt),Ly(n)),s&&bt(s,By)}},Ny=n=>{const{nav:e}=n;if(!Ci(e))return{tab:null,content:null};const t=ws(Ht,e);let i=null;t.length===1&&!Bo.some(s=>qe(t[0].parentElement,s))?[i]=t:t.length>1&&(i=t[t.length-1]);const r=Ci(i)?zn(i):null;return{tab:i,content:r}},ky=n=>{if(!Ci(n))return null;const e=rn(n,`.${Bo.join(",.")}`);return e?gi(`.${Bo[0]}-toggle`,e):null},fL=n=>{const e=rn(n.target,aC),t=e&&d1(e);t&&(n.preventDefault(),t.show())};var Ch;let g1=(Ch=class extends zr{constructor(t){super(t);re(this,"_toggleEventListeners",t=>{(t?Vi:zi)(this.element,Si,fL)});const{element:i}=this,r=zn(i);if(!r)return;const s=rn(i,".nav"),a=rn(r,".tab-content");this.nav=s,this.content=r,this.tabContent=a,this.dropdown=ky(i);const{tab:o}=Ny(this);if(s&&!o){const l=gi(aC,s),c=l&&zn(l);c&&(Ke(l,Ht),Ke(c,lt),Ke(c,Ht),Qi(i,Bp,"true"))}this._toggleEventListeners(!0)}get name(){return u1}show(){const{element:t,content:i,nav:r,dropdown:s}=this;if(r&&ot.get(r)||qe(t,Ht))return;const{tab:a,content:o}=Ny(this);if(r&&a&&tu.set(r,{tab:a,content:o,currentHeight:0,nextHeight:0}),Wp.relatedTarget=t,!Ci(a)||(bt(a,Wp),Wp.defaultPrevented))return;Ke(t,Ht),Qi(t,Bp,"true");const l=Ci(a)&&ky(a);if(l&&qe(l,Ht)&&yt(l,Ht),r){const c=()=>{a&&(yt(a,Ht),Qi(a,Bp,"false")),s&&!qe(s,Ht)&&Ke(s,Ht)};o&&(qe(o,Ji)||i&&qe(i,Ji))?ot.set(r,c,1):c()}o&&(yt(o,lt),qe(o,Ji)?fi(o,()=>Py(this)):Py(this))}dispose(){this._toggleEventListeners(),super.dispose()}},re(Ch,"selector",aC),re(Ch,"init",gL),re(Ch,"getInstance",d1),Ch);const vr="toast",f1="Toast",pL=`.${vr}`,AL=`[${Qf}="${vr}"]`,mL=`[${os}="${vr}"]`,Cc="showing",p1="hide",CL={animation:!0,autohide:!0,delay:5e3},o0=n=>bn(n,f1),IL=n=>new A1(n),Qy=Tt(`show.bs.${vr}`),vL=Tt(`shown.bs.${vr}`),Oy=Tt(`hide.bs.${vr}`),yL=Tt(`hidden.bs.${vr}`),Vy=n=>{const{element:e,options:t}=n;yt(e,Cc),ot.clear(e,Cc),bt(e,vL),t.autohide&&ot.set(e,()=>n.hide(),t.delay,vr)},zy=n=>{const{element:e}=n;yt(e,Cc),yt(e,lt),Ke(e,p1),ot.clear(e,vr),bt(e,yL)},wL=n=>{const{element:e,options:t}=n;Ke(e,Cc),t.animation?(Ho(e),fi(e,()=>zy(n))):zy(n)},EL=n=>{const{element:e,options:t}=n;ot.set(e,()=>{yt(e,p1),Ho(e),Ke(e,lt),Ke(e,Cc),t.animation?fi(e,()=>Vy(n)):Vy(n)},17,Cc)};function bL(n){const e=zn(this),t=e&&o0(e);as(this)||t&&(this.tagName==="A"&&n.preventDefault(),t.relatedTarget=this,t.show())}const _L=n=>{const e=n.target,t=o0(e),{type:i,relatedTarget:r}=n;!t||e===r||e.contains(r)||([Pf,HI].includes(i)?ot.clear(e,vr):ot.set(e,()=>t.hide(),t.options.delay,vr))};var Ih;let A1=(Ih=class extends zr{constructor(t,i){super(t,i);re(this,"show",()=>{const{element:t,isShown:i}=this;!t||i||(bt(t,Qy),Qy.defaultPrevented||EL(this))});re(this,"hide",()=>{const{element:t,isShown:i}=this;!t||!i||(bt(t,Oy),Oy.defaultPrevented||wL(this))});re(this,"_toggleEventListeners",t=>{const i=t?Vi:zi,{element:r,triggers:s,dismiss:a,options:o,hide:l}=this;a&&i(a,Si,l),o.autohide&&[HI,rS,Pf,XI].forEach(c=>i(r,c,_L)),s.length&&s.forEach(c=>{i(c,Si,bL)})});const{element:r,options:s}=this;s.animation&&!qe(r,Ji)?Ke(r,Ji):!s.animation&&qe(r,Ji)&&yt(r,Ji),this.dismiss=gi(AL,r),this.triggers=[...ur(mL,_t(r))].filter(a=>zn(a)===r),this._toggleEventListeners(!0)}get name(){return f1}get defaults(){return CL}get isShown(){return qe(this.element,lt)}dispose(){const{element:t,isShown:i}=this;this._toggleEventListeners(),ot.clear(t,vr),i&&yt(t,lt),super.dispose()}},re(Ih,"selector",pL),re(Ih,"init",IL),re(Ih,"getInstance",o0),Ih);const m1=new Map;[vS,wS,_S,MS,BS,$h,e1,o1,h1,g1,A1,a0].forEach(n=>m1.set(n.prototype.name,n));const xL=(n,e)=>{[...e].forEach(t=>n(t))},Gy=n=>{const e=document,t=[...KI("*",e)];m1.forEach(i=>{const{init:r,selector:s}=i;xL(r,t.filter(a=>fS(a,s)))})};document.body?Gy():Vi(document,"DOMContentLoaded",()=>Gy(),{once:!0});function C1(...n){console.warn(...n)}const Pi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Wy(n){const e=yr();for(let t=0,i=n.length;t<i;++t)Qh(e,n[t]);return e}function l0(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function I1(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function v1(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function Ic(n,e){return y1(n,e[0],e[1])}function wh(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function y1(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function oC(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],a=e[0],o=e[1];let l=Pi.UNKNOWN;return a<t?l=l|Pi.LEFT:a>r&&(l=l|Pi.RIGHT),o<i?l=l|Pi.BELOW:o>s&&(l=l|Pi.ABOVE),l===Pi.UNKNOWN&&(l=Pi.INTERSECTING),l}function yr(){return[1/0,1/0,-1/0,-1/0]}function Na(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function Gf(n){return Na(1/0,1/0,-1/0,-1/0,n)}function w1(n,e){const t=n[0],i=n[1];return Na(t,i,t,i,e)}function c0(n,e,t,i,r){const s=Gf(r);return E1(s,n,e,t,i)}function iu(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function SL(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function Qh(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function E1(n,e,t,i,r){for(;t<i;t+=r)ML(n,e[t],e[t+1]);return n}function ML(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function b1(n,e){let t;return t=e(Wu(n)),t||(t=e(Wf(n)),t)||(t=e(Zu(n)),t)||(t=e(jo(n)),t)?t:!1}function lC(n){let e=0;return Zf(n)||(e=Xt(n)*yn(n)),e}function Wu(n){return[n[0],n[1]]}function Wf(n){return[n[2],n[1]]}function Do(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function RL(n,e){let t;if(e==="bottom-left")t=Wu(n);else if(e==="bottom-right")t=Wf(n);else if(e==="top-left")t=jo(n);else if(e==="top-right")t=Zu(n);else throw new Error("Invalid corner");return t}function cC(n,e,t,i,r){const[s,a,o,l,c,h,u,d]=_1(n,e,t,i);return Na(Math.min(s,o,c,u),Math.min(a,l,h,d),Math.max(s,o,c,u),Math.max(a,l,h,d),r)}function _1(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,a=Math.cos(t),o=Math.sin(t),l=r*a,c=r*o,h=s*a,u=s*o,d=n[0],g=n[1];return[d-l+u,g-c-h,d-l-u,g-c+h,d+l-u,g+c+h,d+l+u,g+c-h,d-l+u,g-c-h]}function yn(n){return n[3]-n[1]}function bo(n,e,t){const i=t||yr();return Bn(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Gf(i),i}function jo(n){return[n[0],n[3]]}function Zu(n){return[n[2],n[3]]}function Xt(n){return n[2]-n[0]}function Bn(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Zf(n){return n[2]<n[0]||n[3]<n[1]}function TL(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function UL(n,e,t){let i=!1;const r=oC(n,e),s=oC(n,t);if(r===Pi.INTERSECTING||s===Pi.INTERSECTING)i=!0;else{const a=n[0],o=n[1],l=n[2],c=n[3],h=e[0],u=e[1],d=t[0],g=t[1],f=(g-u)/(d-h);let m,p;s&Pi.ABOVE&&!(r&Pi.ABOVE)&&(m=d-(g-c)/f,i=m>=a&&m<=l),!i&&s&Pi.RIGHT&&!(r&Pi.RIGHT)&&(p=g-(d-l)*f,i=p>=o&&p<=c),!i&&s&Pi.BELOW&&!(r&Pi.BELOW)&&(m=d-(g-o)/f,i=m>=a&&m<=l),!i&&s&Pi.LEFT&&!(r&Pi.LEFT)&&(p=g-(d-a)*f,i=p>=o&&p<=c)}return i}function x1(n,e){const t=e.getExtent(),i=Do(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=Xt(t),a=Math.floor((i[0]-t[0])/r)*r;n[0]-=a,n[2]-=a}return n}function S1(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];x1(n,e);const r=Xt(i);if(Xt(n)>r&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+r,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-r,n[3]]]}return[n]}function FL(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Jg(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function h0(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function BL(n,e){return n[0]*=e,n[1]*=e,n}function M1(n,e){if(e.canWrapX()){const t=Xt(e.getExtent()),i=DL(n,e,t);i&&(n[0]-=i*t)}return n}function DL(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||Xt(i),r=Math.floor((n[0]-i[0])/t)),r}const u0={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Hf{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||u0[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Hu=6378137,Wl=Math.PI*Hu,LL=[-Wl,-Wl,Wl,Wl],PL=[-180,-85,180,85],Ad=Hu*Math.log(Math.tan(Math.PI/2));class sl extends Hf{constructor(e){super({code:e,units:"m",extent:LL,global:!0,worldExtent:PL,getPointResolution:function(t,i){return t/Math.cosh(i[1]/Hu)}})}}const Zy=[new sl("EPSG:3857"),new sl("EPSG:102100"),new sl("EPSG:102113"),new sl("EPSG:900913"),new sl("http://www.opengis.net/def/crs/EPSG/0/3857"),new sl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function NL(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Wl*n[s]/180;let a=Hu*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>Ad?a=Ad:a<-Ad&&(a=-Ad),e[s+1]=a}return e}function kL(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*n[s]/Wl,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Hu))/Math.PI-90;return e}const QL=6378137,Hy=[-180,-90,180,90],OL=Math.PI*QL/180;class Wa extends Hf{constructor(e,t){super({code:e,units:"degrees",extent:Hy,axisOrientation:t,global:!0,metersPerUnit:OL,worldExtent:Hy})}}const Xy=[new Wa("CRS:84"),new Wa("EPSG:4326","neu"),new Wa("urn:ogc:def:crs:OGC:1.3:CRS84"),new Wa("urn:ogc:def:crs:OGC:2:84"),new Wa("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Wa("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Wa("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let hC={};function VL(n){return hC[n]||hC[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function zL(n,e){hC[n]=e}let ic={};function Lo(n,e,t){const i=n.getCode(),r=e.getCode();i in ic||(ic[i]={}),ic[i][r]=t}function Zp(n,e){return n in ic&&e in ic[n]?ic[n][e]:null}const jg=.9996,pr=.00669438,Xf=pr*pr,Jf=Xf*pr,go=pr/(1-pr),Jy=Math.sqrt(1-pr),vc=(1-Jy)/(1+Jy),R1=vc*vc,d0=R1*vc,g0=d0*vc,T1=g0*vc,U1=1-pr/4-3*Xf/64-5*Jf/256,GL=3*pr/8+3*Xf/32+45*Jf/1024,WL=15*Xf/256+45*Jf/1024,ZL=35*Jf/3072,HL=3/2*vc-27/32*d0+269/512*T1,XL=21/16*R1-55/32*g0,JL=151/96*d0-417/128*T1,jL=1097/512*g0,Yg=6378137;function YL(n,e,t){const i=n-5e5,a=(t.north?e:e-1e7)/jg/(Yg*U1),o=a+HL*Math.sin(2*a)+XL*Math.sin(4*a)+JL*Math.sin(6*a)+jL*Math.sin(8*a),l=Math.sin(o),c=l*l,h=Math.cos(o),u=l/h,d=u*u,g=d*d,f=1-pr*c,m=Math.sqrt(1-pr*c),p=Yg/m,A=(1-pr)/f,C=go*h**2,v=C*C,I=i/(p*jg),w=I*I,b=w*I,_=b*I,x=_*I,y=x*I,E=o-u/A*(w/2-_/24*(5+3*d+10*C-4*v-9*go))+y/720*(61+90*d+298*C+45*g-252*go-3*v);let S=(I-b/6*(1+2*d+C)+x/120*(5-2*C+28*d-3*v+8*go+24*g))/h;return S=km(S+Ua(F1(t.number)),-Math.PI,Math.PI),[kv(S),kv(E)]}const jy=-80,Yy=84,KL=-180,qL=180;function $L(n,e,t){n=km(n,KL,qL),e<jy?e=jy:e>Yy&&(e=Yy);const i=Ua(e),r=Math.sin(i),s=Math.cos(i),a=r/s,o=a*a,l=o*o,c=Ua(n),h=F1(t.number),u=Ua(h),d=Yg/Math.sqrt(1-pr*r**2),g=go*s**2,f=s*km(c-u,-Math.PI,Math.PI),m=f*f,p=m*f,A=p*f,C=A*f,v=C*f,I=Yg*(U1*i-GL*Math.sin(2*i)+WL*Math.sin(4*i)-ZL*Math.sin(6*i)),w=jg*d*(f+p/6*(1-o+g)+C/120*(5-18*o+l+72*g-58*go))+5e5;let b=jg*(I+d*a*(m/2+A/24*(5-o+9*g+4*g**2)+v/720*(61-58*o+l+600*g-330*go)));return t.north||(b+=1e7),[w,b]}function F1(n){return(n-1)*6-180+3}const eP=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function B1(n){let e=0;for(const r of eP){const s=n.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function Ky(n,e){return function(t,i,r,s){const a=t.length;r=r>1?r:2,s=s??r,i||(r>2?i=t.slice():i=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],c=t[o+1],h=n(l,c,e);i[o]=h[0],i[o+1]=h[1]}return i}}function tP(n){return B1(n)?new Hf({code:n,units:"m"}):null}function iP(n){const e=B1(n.getCode());return e?{forward:Ky($L,e),inverse:Ky(YL,e)}:null}const nP=63710088e-1;function qy(n,e,t){t=t||nP;const i=Ua(n[1]),r=Ua(e[1]),s=(r-i)/2,a=Ua(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const rP=[iP],sP=[tP];let uC=!0;function aP(n){uC=!1}function f0(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Hp(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function yc(n){zL(n.getCode(),n),Lo(n,n,f0)}function oP(n){n.forEach(yc)}function sn(n){if(typeof n!="string")return n;const e=VL(n);if(e)return e;for(const t of sP){const i=t(n);if(i)return i}return null}function $y(n,e,t,i){n=sn(n);let r;const s=n.getPointResolutionFunc();if(s)r=s(e,t);else{const a=n.getUnits();if(a=="degrees"&&!i||i=="degrees")r=e;else{const o=A0(n,sn("EPSG:4326"));if(!o&&a!=="degrees")r=e*n.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=o(c,c,2);const h=qy(c.slice(0,2),c.slice(2,4)),u=qy(c.slice(4,6),c.slice(6,8));r=(h+u)/2}const l=n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function ew(n){oP(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Lo(e,t,f0)})})}function lP(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Lo(r,s,t),Lo(s,r,i)})})}function p0(n,e){return n?typeof n=="string"?sn(n):n:sn(e)}function dC(n){return(function(e,t,i,r){const s=e.length;i=i!==void 0?i:2,r=r??i,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=r){const o=n(e.slice(a,a+i)),l=o.length;for(let c=0,h=r;c<h;++c)t[a+c]=c>=l?e[a+c]:o[c]}return t})}function Kg(n,e,t,i){const r=sn(n),s=sn(e);Lo(r,s,dC(t)),Lo(s,r,dC(i))}function nu(n,e){const t=nn(n,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=yo(i+180,360)-180),t}function _g(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||A0(n,e)===f0)&&t}function A0(n,e){const t=n.getCode(),i=e.getCode();let r=Zp(t,i);if(r)return r;let s=null,a=null;for(const l of rP)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)r=Xp(s.inverse,a.forward);else{const l=Zp(t,o);l&&(r=Xp(l,a.forward))}else{const l=Zp(o,i);l&&(r=Xp(s.inverse,l))}return r&&(yc(n),yc(e),Lo(n,e,r)),r}function Xp(n,e){return function(t,i,r,s){return i=n(t,i,r,s),e(i,i,r,s)}}function _o(n,e){const t=sn(n),i=sn(e);return A0(t,i)}function nn(n,e,t){const i=_o(e,t);if(!i){const r=sn(e).getCode(),s=sn(t).getCode();throw new Error(`No transform available between ${r} and ${s}`)}return i(n,void 0,n.length)}function gC(n,e){return n}function Is(n,e){return uC&&!Jg(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(uC=!1,C1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function D1(n,e){return n}function Ma(n,e){return n}function cP(){ew(Zy),ew(Xy),lP(Xy,Zy,NL,kL)}cP();const Tn={ADD:"add",REMOVE:"remove"},wc={PROPERTYCHANGE:"propertychange"},pt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Lt(n,e,t,i,r){if(r){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(i??this,o)}}else i&&i!==n&&(t=t.bind(i));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function qg(n,e,t,i){return Lt(n,e,t,i,!0)}function ii(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Fu(n))}class Xu extends Bu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(pt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Lt(this,e[s],t);return r}return Lt(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=qg(this,e[s],t)}else i=qg(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)hP(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Xu.prototype.on;Xu.prototype.once;Xu.prototype.un;function hP(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)ii(n[e]);else ii(n)}function Dt(){throw new Error("Unimplemented abstract method.")}let uP=0;function Pt(n){return n.ol_uid||(n.ol_uid=String(++uP))}class tw extends zs{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class ls extends Xu{constructor(e){super(),this.on,this.once,this.un,Pt(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new tw(i,e,t)),i=wc.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new tw(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],Ac(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const iw={LENGTH:"length"};class md extends zs{constructor(e,t,i){super(e),this.element=t,this.index=i}}class dr extends ls{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(iw.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new md(Tn.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new md(Tn.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new md(Tn.REMOVE,r,e)),this.dispatchEvent(new md(Tn.ADD,t,e))}updateLength_(){this.set(iw.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,s=i.length;r<s;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}function zt(n,e){if(!n)throw new Error(e)}class m0 extends ls{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new m0(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ii(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Lt(e,pt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?dP(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function dP(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(zt(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}new Array(6);function Nr(){return[1,0,0,1,0,0]}function gP(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Ni(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function Ps(n,e,t,i,r,s,a,o){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=a*i*c-o*i*l+e,n[5]=a*r*l+o*r*c+t,n}function L1(n,e){const t=fP(e);zt(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-a*o)/t,n[5]=-(i*l-r*o)/t,n}function fP(n){return n[0]*n[3]-n[1]*n[2]}const pP=[1e5,1e5,1e5,1e5,2,2];function AP(n){return"matrix("+n.join(", ")+")"}function fC(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function mP(n,e){const t=fC(n),i=fC(e);for(let r=0;r<6;++r)if(Math.round((t[r]-i[r])*pP[r])!==0)return!1;return!0}function Ba(n,e,t,i,r,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=i){const c=n[l],h=n[l+1];s[o++]=r[0]*c+r[2]*h+r[4],s[o++]=r[1]*c+r[3]*h+r[5];for(let u=2;u<a;u++)s[o++]=n[l+u]}return s&&s.length!=o&&(s.length=o),s}function P1(n,e,t,i,r,s,a){a=a||[];const o=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let u=0;for(let d=e;d<t;d+=i){const g=n[d]-c,f=n[d+1]-h;a[u++]=c+g*o-f*l,a[u++]=h+g*l+f*o;for(let m=d+2;m<d+i;++m)a[u++]=n[m]}return a&&a.length!=u&&(a.length=u),a}function CP(n,e,t,i,r,s,a,o){o=o||[];const l=a[0],c=a[1];let h=0;for(let u=e;u<t;u+=i){const d=n[u]-l,g=n[u+1]-c;o[h++]=l+r*d,o[h++]=c+s*g;for(let f=u+2;f<u+i;++f)o[h++]=n[f]}return o&&o.length!=h&&(o.length=h),o}function IP(n,e,t,i,r,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=i){a[o++]=n[l]+r,a[o++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)a[o++]=n[c]}return a&&a.length!=o&&(a.length=o),a}const nw=Nr(),vP=[NaN,NaN];class yP extends ls{constructor(){super(),this.extent_=yr(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Ox((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Dt()}closestPointXY(e,t,i,r){return Dt()}containsXY(e,t){return this.closestPointXY(e,t,vP,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Dt()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Gf(t),this.extentRevision_=this.getRevision()}return TL(this.extent_,e)}rotate(e,t){Dt()}scale(e,t,i){Dt()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Dt()}getType(){return Dt()}applyTransform(e){Dt()}intersectsExtent(e){return Dt()}translate(e,t){Dt()}transform(e,t){const i=sn(e),r=i.getUnits()=="tile-pixels"?function(s,a,o){const l=i.getExtent(),c=i.getWorldExtent(),h=yn(c)/yn(l);Ps(nw,c[0],c[3],h,-h,0,0,0);const u=Ba(s,0,s.length,o,nw,a),d=_o(i,t);return d?d(u,u,o):u}:_o(i,t);return this.applyTransform(r),this}}class C0 extends yP{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return c0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Dt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=rw(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Dt()}setLayout(e,t,i){let r;if(e)r=rw(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=wP(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();P1(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Do(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();CP(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();IP(i,0,i.length,r,e,t,i),this.changed()}}}function wP(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function rw(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function EP(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return Ba(i,0,i.length,r,e,t)}function N1(n,e,t,i){let r=0;const s=n[t-i],a=n[t-i+1];let o=0,l=0;for(;e<t;e+=i){const c=n[e]-s,h=n[e+1]-a;r+=l*c-o*h,o=c,l=h}return r/2}function bP(n,e,t,i){let r=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];r+=N1(n,e,o,i),e=o}return r}function sw(n,e,t,i,r,s,a){const o=n[e],l=n[e+1],c=n[t]-o,h=n[t+1]-l;let u;if(c===0&&h===0)u=e;else{const d=((r-o)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=t;else if(d>0){for(let g=0;g<i;++g)a[g]=sr(n[e+g],n[t+g],d);a.length=i;return}else u=e}for(let d=0;d<i;++d)a[d]=n[u+d];a.length=i}function k1(n,e,t,i,r){let s=n[e],a=n[e+1];for(e+=i;e<t;e+=i){const o=n[e],l=n[e+1],c=$l(s,a,o,l);c>r&&(r=c),s=o,a=l}return r}function _P(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];r=k1(n,e,o,i,r),e=o}return r}function Q1(n,e,t,i,r,s,a,o,l,c,h){if(e==t)return c;let u,d;if(r===0){if(d=$l(a,o,n[e],n[e+1]),d<c){for(u=0;u<i;++u)l[u]=n[e+u];return l.length=i,d}return c}h=h||[NaN,NaN];let g=e+i;for(;g<t;)if(sw(n,g-i,g,i,a,o,h),d=$l(a,o,h[0],h[1]),d<c){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i,g+=i}else g+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(sw(n,t-i,e,i,a,o,h),d=$l(a,o,h[0],h[1]),d<c){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i}return c}function xP(n,e,t,i,r,s,a,o,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const g=t[u];c=Q1(n,e,g,i,r,s,a,o,l,c,h),e=g}return c}function SP(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function O1(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const a=t[r];for(let o=0;o<i;++o)n[e++]=a[o]}return e}function MP(n,e,t,i,r){r=r||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=O1(n,e,t[a],i);r[s++]=l,e=l}return r.length=s,r}function Zl(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=e;a<t;a+=i)r[s++]=n.slice(a,a+i);return r.length=s,r}function $g(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];r[s++]=Zl(n,e,l,i,r[s]),e=l}return r.length=s,r}function aw(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];r[s++]=l.length===1&&l[0]===e?[]:$g(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function I0(n,e,t,i,r,s,a){const o=(t-e)/i;if(o<3){for(;e<t;e+=i)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const c=[e,t-i];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let g=0;const f=n[d],m=n[d+1],p=n[u],A=n[u+1];for(let C=d+i;C<u;C+=i){const v=n[C],I=n[C+1],w=RU(v,I,f,m,p,A);w>g&&(h=C,g=w)}g>r&&(l[(h-e)/i]=1,d+i<h&&c.push(d,h),h+i<u&&c.push(h,u))}for(let u=0;u<o;++u)l[u]&&(s[a++]=n[e+u*i],s[a++]=n[e+u*i+1]);return a}function RP(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l];a=I0(n,e,h,i,r,s,a),o.push(a),e=h}return a}function to(n,e){return e*Math.round(n/e)}function TP(n,e,t,i,r,s,a){if(e==t)return a;let o=to(n[e],r),l=to(n[e+1],r);e+=i,s[a++]=o,s[a++]=l;let c,h;do if(c=to(n[e],r),h=to(n[e+1],r),e+=i,e==t)return s[a++]=c,s[a++]=h,a;while(c==o&&h==l);for(;e<t;){const u=to(n[e],r),d=to(n[e+1],r);if(e+=i,u==c&&d==h)continue;const g=c-o,f=h-l,m=u-o,p=d-l;if(g*p==f*m&&(g<0&&m<g||g==m||g>0&&m>g)&&(f<0&&p<f||f==p||f>0&&p>f)){c=u,h=d;continue}s[a++]=c,s[a++]=h,o=c,l=h,c=u,h=d}return s[a++]=c,s[a++]=h,a}function V1(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l];a=TP(n,e,h,i,r,s,a),o.push(a),e=h}return a}class ru extends C0{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new ru(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<v1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(k1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Q1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return N1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=I0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new ru(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=O1(this.flatCoordinates,0,e,this.stride),this.changed()}}class v0 extends C0{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new v0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,a=$l(e,t,s[0],s[1]);if(a<r){const o=this.stride;for(let l=0;l<o;++l)i[l]=s[l];return i.length=o,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return w1(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return y1(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=SP(this.flatCoordinates,0,e,this.stride),this.changed()}}function UP(n,e,t,i,r){return!b1(r,function(a){return!fo(n,e,t,i,a[0],a[1])})}function fo(n,e,t,i,r,s){let a=0,o=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],h=n[e+1];l<=s?h>s&&(c-o)*(s-l)-(r-o)*(h-l)>0&&a++:h<=s&&(c-o)*(s-l)-(r-o)*(h-l)<0&&a--,o=c,l=h}return a!==0}function z1(n,e,t,i,r,s){if(t.length===0||!fo(n,e,t[0],i,r,s))return!1;for(let a=1,o=t.length;a<o;++a)if(fo(n,t[a-1],t[a],i,r,s))return!1;return!0}function y0(n,e,t,i,r,s,a){let o,l,c,h,u,d,g;const f=r[s+1],m=[];for(let C=0,v=t.length;C<v;++C){const I=t[C];for(h=n[I-i],d=n[I-i+1],o=e;o<I;o+=i)u=n[o],g=n[o+1],(f<=d&&g<=f||d<=f&&f<=g)&&(c=(f-d)/(g-d)*(u-h)+h,m.push(c)),h=u,d=g}let p=NaN,A=-1/0;for(m.sort(xs),h=m[0],o=1,l=m.length;o<l;++o){u=m[o];const C=Math.abs(u-h);C>A&&(c=(h+u)/2,z1(n,e,t,i,c,f)&&(p=c,A=C)),h=u}return isNaN(p)&&(p=r[s]),a?(a.push(p,f,A),a):[p,f,A]}function FP(n,e,t,i,r){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=y0(n,e,l,i,r,2*a,s),e=l[l.length-1]}return s}function BP(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function G1(n,e,t,i,r,s){return s=s??E1(yr(),n,e,t,i),Bn(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:BP(n,e,t,i,function(a,o){return UL(r,a,o)}):!1}function W1(n,e,t,i,r){return!!(G1(n,e,t,i,r)||fo(n,e,t,i,r[0],r[1])||fo(n,e,t,i,r[0],r[3])||fo(n,e,t,i,r[2],r[1])||fo(n,e,t,i,r[2],r[3]))}function DP(n,e,t,i,r){if(!W1(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(UP(n,t[s-1],t[s],i,r)&&!G1(n,t[s-1],t[s],i,r))return!1;return!0}function LP(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function w0(n,e,t,i){let r=0,s=n[t-i],a=n[t-i+1];for(;e<t;e+=i){const o=n[e],l=n[e+1];r+=(o-s)*(l+a),s=o,a=l}return r===0?void 0:r>0}function PP(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=w0(n,e,o,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=o}return!0}function ow(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=w0(n,e,o,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&LP(n,e,o,i),e=o}return e}function NP(n,e){const t=[];let i=0,r=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],c=w0(n,i,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(r,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=a+1,i=l}return t}class su extends C0{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?PI(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new su(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<v1(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_P(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),xP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return z1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return bP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),ow(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,$g(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Do(this.getExtent());this.flatInteriorPoint_=y0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new v0(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new ru(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a],c=new ru(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;PP(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ow(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=V1(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new su(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return DP(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=MP(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function lw(n){if(Zf(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new su(s,"XY",[s.length])}function cw(n,e,t,i,r,s,a){let o,l;const c=(t-e)/i;if(c===1)o=e;else if(c===2)o=e,l=r;else if(c!==0){let h=n[e],u=n[e+1],d=0;const g=[0];for(let p=e+i;p<t;p+=i){const A=n[p],C=n[p+1];d+=Math.sqrt((A-h)*(A-h)+(C-u)*(C-u)),g.push(d),h=A,u=C}const f=r*d,m=IU(g,f);m<0?(l=(f-g[-m-2])/(g[-m-1]-g[-m-2]),o=e+(-m-2)*i):o=e+m*i}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:sr(n[o+h],n[o+i+h],l);return s}function kP(n,e,t,i){let r=n[e],s=n[e+1],a=0;for(let o=e+i;o<t;o+=i){const l=n[o],c=n[o+1];a+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return a}const gr={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ft={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function QP(n,e,t){const i=n;let r=!0,s=!1,a=!1;const o=[qg(i,pt.LOAD,function(){a=!0,s||e()})];return i.src&&zx?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(a?e():t())})):o.push(qg(i,pt.ERROR,t)),function(){r=!1,o.forEach(ii)}}function OP(n,e){return new Promise((t,i)=>{function r(){a(),t(n)}function s(){a(),i(new Error("Image load error"))}function a(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s)})}function VP(n,e){return e&&(n.src=e),n.src&&zx?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):OP(n)}class zP{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const r=Jp(e,t,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,t,i){const r=Jp(e,t,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,t,i,r,s){const a=Jp(e,t,i),o=a in this.cache_;this.cache_[a]=r,s&&(r.getImageState()===ft.IDLE&&r.load(),r.getImageState()===ft.LOADING?r.ready().then(()=>{this.patternCache_[a]=Wg().createPattern(r.getImage(1),"repeat")}):this.patternCache_[a]=Wg().createPattern(r.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function Jp(n,e,t){const i=t?Ro(t):"null";return e+":"+n+":"+i}const fr=new zP;let Yc=null;class Z1 extends Bu{constructor(e,t,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?ft.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ft.LOADED){Yc||(Yc=xi(1,1,void 0,{willReadFrequently:!0})),Yc.drawImage(this.image_,0,0);try{Yc.getImageData(0,0,1,1),this.tainted_=!1}catch{Yc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(pt.CHANGE)}handleImageError_(){this.imageState_=ft.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ft.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=xi(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ft.IDLE){this.image_||this.initializeImage_(),this.imageState_=ft.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&VP(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ft.LOADED)return;const t=this.image_,i=xi(Math.ceil(t.width*e),Math.ceil(t.height*e)),r=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=PU(this.color_),i.fillRect(0,0,r.width/e,r.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=r}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ft.LOADED||this.imageState_===ft.ERROR)e();else{const t=()=>{(this.imageState_===ft.LOADED||this.imageState_===ft.ERROR)&&(this.removeEventListener(pt.CHANGE,t),e())};this.addEventListener(pt.CHANGE,t)}})),this.ready_}}function ef(n,e,t,i,r,s){let a=e===void 0?void 0:fr.get(e,t,r);return a||(a=new Z1(n,n&&"src"in n?n.src||void 0:e,t,i,r),fr.set(e,t,r,a,s)),s&&a&&!fr.getPattern(e,t,r)&&fr.set(e,t,r,a,s),a}function Kr(n){return n?Array.isArray(n)?QI(n):typeof n=="object"&&"src"in n?GP(n):n:null}function GP(n){if(!n.offset||!n.size)return fr.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=fr.getPattern(e,void 0,n.color);if(t)return t;const i=fr.get(n.src,"anonymous",null);if(i.getImageState()!==ft.LOADED)return null;const r=xi(n.size[0],n.size[1]);return r.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),ef(r.canvas,e,void 0,ft.LOADED,n.color,!0),fr.getPattern(e,void 0,n.color)}class H1{drawCustom(e,t,i,r,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const Cd="ol-hidden",Ju="ol-unselectable",jf="ol-control",hw="ol-collapsed",WP=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),uw=["style","variant","weight","size","lineHeight","family"],pC={normal:400,bold:700},AC=function(n){const e=n.match(WP);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,r=uw.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[uw[i]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in pC&&(t.weight=pC[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t},X1="10px sans-serif",Un="#000",Ec="round",Rs=[],Ts=0,bc="round",au=10,ou="#000",lu="center",tf="middle",po=[0,0,0,0],cu=1,Nl=new ls;let Kc=null,dw;const mC={},ZP=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function HP(n,e,t){return`${n} ${e} 16px "${t}"`}const XP=(function(){let e,t;async function i(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=AC(s),l=o.families[0].toLowerCase(),c=o.weight;return a.some(h=>{const u=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),d=pC[h.weight]||h.weight;return u===l&&h.style===o.style&&d==c})}async function r(){await t.ready;let s=!0;const a=Nl.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const c=o[l];let h=a[c];h<100&&(await i(c)?(Fu(mC),Nl.set(c,100)):(h+=10,Nl.set(c,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(r,100))}return async function(s){t||(t=hr?self.fonts:document.fonts);const a=AC(s);if(!a)return;const o=a.families;let l=!1;for(const c of o){if(ZP.has(c))continue;const h=HP(a.style,a.weight,c);Nl.get(h)===void 0&&(Nl.set(h,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(r,100))}})(),JP=(function(){let n;return function(e){let t=mC[e];if(t==null){if(hr){const i=AC(e),r=J1(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);mC[e]=t}return t}})();function J1(n,e){return Kc||(Kc=xi(1,1)),n!=dw&&(Kc.font=n,dw=Kc.font),Kc.measureText(e)}function j1(n,e){return J1(n,e).width}function gw(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,j1(n,s)),0);return t[e]=i,i}function jP(n,e){const t=[],i=[],r=[];let s=0,a=0,o=0,l=0;for(let c=0,h=e.length;c<=h;c+=2){const u=e[c];if(u===`
`||c===h){s=Math.max(s,a),r.push(a),a=0,o+=l,l=0;continue}const d=e[c+1]||n.font,g=j1(d,u);t.push(g),a+=g;const f=JP(d);i.push(f),l=Math.max(l,f)}return{width:s,height:o,widths:t,heights:i,lineWidths:r}}function YP(n,e,t,i,r,s,a,o,l,c,h){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=u=>u.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(l,c),n.scale(h[0],h[1]),KP(i,n)):h[0]<0||h[1]<0?(n.translate(l,c),n.scale(h[0],h[1]),n.drawImage(i,r,s,a,o,0,0,a,o)):n.drawImage(i,r,s,a,o,l,c,a*h[0],o*h[1]),n.restore()}function KP(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class qP extends H1{constructor(e,t,i,r,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?Uf(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Nr()}drawImages_(e,t,i,r){if(!this.image_)return;const s=Ba(e,t,i,r,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let h=0,u=s.length;h<u;h+=2){const d=s[h]-this.imageAnchorX_,g=s[h+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const f=d+this.imageAnchorX_,m=g+this.imageAnchorY_;Ps(o,f,m,1,1,c,-f,-m),a.save(),a.transform.apply(a,o),a.translate(f,m),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Ba(e,t,i,r,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,c-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,c),this.textFillState_&&a.fillText(this.text_,l,c))}}moveToLineTo_(e,t,i,r,s){const a=this.context_,o=Ba(e,t,i,r,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let c=2;c<l;c+=2)a.lineTo(o[c],o[c+1]);return s&&a.closePath(),i}drawRings_(e,t,i,r){for(let s=0,a=i.length;s<a;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Bn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=EP(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Bn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Bn(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();i.beginPath();for(let l=0,c=a.length;l<c;++l)s=this.moveToLineTo_(r,s,a[l],o,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Bn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Bn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const c=s[o];r=this.drawRings_(i,r,c,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),Va(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:lu;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Kr(i||Un)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),h=s||Rs;this.strokeState_={lineCap:r!==void 0?r:Ec,lineDash:this.pixelRatio_===1?h:h.map(u=>u*this.pixelRatio_),lineDashOffset:(a||Ts)*this.pixelRatio_,lineJoin:o!==void 0?o:bc,lineWidth:(l!==void 0?l:cu)*this.pixelRatio_,miterLimit:c!==void 0?c:au,strokeStyle:Kr(i||ou)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const g=t.getColor();this.textFillState_={fillStyle:Kr(g||Un)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const g=i.getColor(),f=i.getLineCap(),m=i.getLineDash(),p=i.getLineDashOffset(),A=i.getLineJoin(),C=i.getWidth(),v=i.getMiterLimit();this.textStrokeState_={lineCap:f!==void 0?f:Ec,lineDash:m||Rs,lineDashOffset:p||Ts,lineJoin:A!==void 0?A:bc,lineWidth:C!==void 0?C:cu,miterLimit:v!==void 0?v:au,strokeStyle:Kr(g||ou)}}const r=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),h=e.getText(),u=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:X1,textAlign:u!==void 0?u:lu,textBaseline:d!==void 0?d:tf},this.text_=h!==void 0?Array.isArray(h)?h.reduce((g,f,m)=>g+=m%2?" ":f,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const $P=.5,Y1={Point:oN,LineString:rN,Polygon:cN,MultiPoint:lN,MultiLineString:sN,MultiPolygon:aN,GeometryCollection:nN,Circle:tN};function eN(n,e){return parseInt(Pt(n),10)-parseInt(Pt(e),10)}function fw(n,e){const t=K1(n,e);return t*t}function K1(n,e){return $P*n/e}function tN(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,i,r)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i)}}function pw(n,e,t,i,r,s,a,o){const l=[],c=t.getImage();if(c){let d=!0;const g=c.getImageState();g==ft.LOADED||g==ft.ERROR?d=!1:g==ft.IDLE&&c.load(),d&&l.push(c.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const u=l.length>0;return u&&Promise.all(l).then(()=>r(null)),iN(n,e,t,i,s,a,o),u}function iN(n,e,t,i,r,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(i,r);if(t.getRenderer())q1(n,l,t,e,a);else{const h=Y1[l.getType()];h(n,l,t,e,a,s)}}function q1(n,e,t,i,r){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)q1(n,a[o],t,i,r);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),r)}function nN(n,e,t,i,r,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const c=Y1[a[o].getType()];c(n,a[o],t,i,r,s)}}function rN(n,e,t,i,r){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i,r)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i,r)}}function sN(n,e,t,i,r){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i,r)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,i,r)}}function aN(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i,r)}}function oN(n,e,t,i,r,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),c=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=ft.LOADED)return;const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(a,c),h.drawPoint(e,i,r)}if(l){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(o,c),h.drawText(e,i,r)}}function lN(n,e,t,i,r,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),h=s&&o&&c?{}:void 0;if(o){if(a.getImageState()!=ft.LOADED)return;const u=n.getBuilder(t.getZIndex(),"Image");u.setImageStyle(a,h),u.drawMultiPoint(e,i,r)}if(c){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l,h),u.drawText(e,i,r)}}function cN(n,e,t,i,r){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,i,r)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,i,r)}}let hN=!1;function uN(n,e,t,i,r,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=hN,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const c=e.getType();try{let h;c=="text"||c=="json"?h=o.responseText:c=="xml"?h=o.responseXML||o.responseText:c=="arraybuffer"&&(h=o.response),h?s(e.readFeatures(h,{extent:t,featureProjection:r}),e.readProjection(h)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function Aw(n,e){return function(t,i,r,s,a){uN(n,e,t,i,r,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function dN(n,e){return[[-1/0,-1/0,1/0,1/0]]}function gN(n,e,t,i){const r=[];let s=yr();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=c0(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}const mw=Nr();class Rr{constructor(e,t,i,r,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?w1(this.flatCoordinates_):c0(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Do(this.getExtent());this.flatInteriorPoints_=y0(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=NP(this.flatCoordinates_,this.ends_),t=gN(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=FP(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=cw(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const a=i[r],o=cw(e,t,a,2,.5);PI(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=sn(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=yn(i)/yn(t);Ps(mw,i[0],i[3],r,-r,0,0,0),Ba(this.flatCoordinates_,0,this.flatCoordinates_.length,2,mw,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Rr(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Ox((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=I0(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=RP(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=V1(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new Rr(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Rr.prototype.getFlatCoordinates=Rr.prototype.getOrientedFlatCoordinates;function $1(n,e,t=0,i=n.length-1,r=fN){for(;i>t;){if(i-t>600){const l=i-t+1,c=e-t+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(c-l/2<0?-1:1),g=Math.max(t,Math.floor(e-c*u/l+d)),f=Math.min(i,Math.floor(e+(l-c)*u/l+d));$1(n,e,g,f,r)}const s=n[e];let a=t,o=i;for(qc(n,t,e),r(n[i],s)>0&&qc(n,t,i);a<o;){for(qc(n,a,o),a++,o--;r(n[a],s)<0;)a++;for(;r(n[o],s)>0;)o--}r(n[t],s)===0?qc(n,t,o):(o++,qc(n,o,i)),o<=e&&(t=o+1),e<=o&&(i=o-1)}}function qc(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function fN(n,e){return n<e?-1:n>e?1:0}let eM=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!vd(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?r(o):o;vd(e,l)&&(t.leaf?i.push(o):Yp(e,l)?this._all(o,i):s.push(o))}t=s.pop()}return i}collides(e){let t=this.data;if(!vd(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],a=t.leaf?this.toBBox(s):s;if(vd(e,a)){if(t.leaf||Yp(e,a))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=kl([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],a=[];let o,l,c;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],o=a.pop(),c=!0),i.leaf){const h=pN(e,i.children,t);if(h!==-1)return i.children.splice(h,1),s.push(i),this._condense(s),this}!c&&!i.leaf&&Yp(i,r)?(s.push(i),a.push(o),o=0,l=i,i=i.children[0]):l?(o++,i=l.children[o],c=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let a=this._maxEntries,o;if(s<=a)return o=kl(e.slice(t,i+1)),al(o,this.toBBox),o;r||(r=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,r-1))),o=kl([]),o.leaf=!1,o.height=r;const l=Math.ceil(s/a),c=l*Math.ceil(Math.sqrt(a));Cw(e,t,i,c,this.compareMinX);for(let h=t;h<=i;h+=c){const u=Math.min(h+c-1,i);Cw(e,h,u,l,this.compareMinY);for(let d=h;d<=u;d+=l){const g=Math.min(d+l-1,u);o.children.push(this._build(e,d,g,r-1))}}return al(o,this.toBBox),o}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const c=t.children[l],h=jp(c),u=CN(e,c)-h;u<a?(a=u,s=h<s?h:s,o=c):u===a&&h<s&&(s=h,o=c)}t=o||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],a=this._chooseSubtree(r,this.data,t,s);for(a.children.push(e),bh(a,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const a=this._chooseSplitIndex(i,s,r),o=kl(i.children.splice(a,i.children.length-a));o.height=i.height,o.leaf=i.leaf,al(i,this.toBBox),al(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)}_splitRoot(e,t){this.data=kl([e,t]),this.data.height=e.height+1,this.data.leaf=!1,al(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,a=1/0;for(let o=t;o<=i-t;o++){const l=Eh(e,0,o,this.toBBox),c=Eh(e,o,i,this.toBBox),h=IN(l,c),u=jp(l)+jp(c);h<s?(s=h,r=o,a=u<a?u:a):h===s&&u<a&&(a=u,r=o)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:AN,s=e.leaf?this.compareMinY:mN,a=this._allDistMargin(e,t,i,r),o=this._allDistMargin(e,t,i,s);a<o&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,a=Eh(e,0,t,s),o=Eh(e,i-t,i,s);let l=Id(a)+Id(o);for(let c=t;c<i-t;c++){const h=e.children[c];bh(a,e.leaf?s(h):h),l+=Id(a)}for(let c=i-t-1;c>=t;c--){const h=e.children[c];bh(o,e.leaf?s(h):h),l+=Id(o)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)bh(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():al(e[t],this.toBBox)}};function pN(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function al(n,e){Eh(n,0,n.children.length,e,n)}function Eh(n,e,t,i,r){r||(r=kl(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];bh(r,n.leaf?i(a):a)}return r}function bh(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function AN(n,e){return n.minX-e.minX}function mN(n,e){return n.minY-e.minY}function jp(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Id(n){return n.maxX-n.minX+(n.maxY-n.minY)}function CN(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function IN(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function Yp(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function vd(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function kl(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Cw(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const a=e+Math.ceil((t-e)/i/2)*i;$1(n,a,e,t,r),s.push(e,a,a,t)}}class Iw{constructor(e){this.rbush_=new eM(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Pt(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const a=e[r],o=t[r],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};i[r]=l,this.items_[Pt(o)]=l}this.rbush_.load(i)}remove(e){const t=Pt(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Pt(t)],r=[i.minX,i.minY,i.maxX,i.maxY];iu(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return Ac(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Na(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class tM extends ls{constructor(e){super(),this.projection=sn(e.projection),this.attributions_=vw(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=vw(e),this.changed()}setState(e){this.state_=e,this.changed()}}function vw(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const tr={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class $s extends zs{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class yd extends tM{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Xh,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(zt(this.format_,"`format` must be set when `url` is set"),this.loader_=Aw(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:dN;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Iw:null,this.loadedExtentsRtree_=new Iw,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new dr(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Pt(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new $s(tr.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Rr||(this.featureChangeKeys_[e]=[Lt(t,pt.CHANGE,this.handleFeatureChange_,this),Lt(t,wc.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof Rr){const s=this.idIndex_[r];s instanceof Rr?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:i=!1}else i=!1}return i&&(zt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=Pt(o);this.addToIndex_(l,o)&&i.push(o)}for(let s=0,a=i.length;s<a;s++){const o=i[s],l=Pt(o);this.setupChangeEvents_(l,o);const c=o.getGeometry();if(c){const h=c.getExtent();t.push(h),r.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(tr.ADDFEATURE))for(let s=0,a=i.length;s<a;s++)this.dispatchEvent(new $s(tr.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(tr.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(tr.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Tn.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Tn.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(ii);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new $s(tr.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof Rr||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof Rr||r.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ac(this.nullGeometryFeatures_)||PI(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=S1(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Hh,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const h=c.getGeometry(),u=o;if(o=h instanceof Rr?0:h.closestPointXY(i,r,a,o),o<u){s=c;const d=Math.sqrt(o);l[0]=i-d,l[1]=r-d,l[2]=i+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Pt(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const a=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new $s(tr.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Pt(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ac(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let a=0,o=s.length;a<o;++a){const l=s[a];r.forEachInExtent(l,function(h){return wh(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new $s(tr.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new $s(tr.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new $s(tr.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(r){if(iu(r.extent,e))return r});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,r=e.length;i<r;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Pt(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(ii),delete this.featureChangeKeys_[t];const r=e.getId();if(r!==void 0){const s=r.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(tr.REMOVEFEATURE)&&this.dispatchEvent(new $s(tr.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){zt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Aw(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Ns{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ns({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=ef(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ft.IDLE&&t.load(),t.getImageState()===ft.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Pt(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ro(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Po{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Po({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function yw(n){return n[0]>0&&n[1]>0}function vN(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Nn(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Yf{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Nn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Yf({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Dt()}getImage(e){return Dt()}getHitDetectionImage(){return Dt()}getPixelRatio(e){return 1}getImageState(){return Dt()}getImageSize(){return Dt()}getOrigin(){return Dt()}getSize(){return Dt()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Nn(e)}listenImageChange(e){Dt()}load(){Dt()}unlistenImageChange(e){Dt()}ready(){return Promise.resolve()}}class Kf extends Yf{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ft.LOADING:ft.LOADED,this.imageState_===ft.LOADING&&this.ready().then(()=>this.imageState_=ft.LOADED),this.render()}clone(){const e=this.getScale(),t=new Kf({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,a;const t=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let r=(a=fr.get(i,null,null))==null?void 0:a.getImage(1);if(!r){const o=this.renderOptions_,l=Math.ceil(o.size*e),c=xi(l,l);this.draw_(o,c,e),r=c.canvas,fr.set(i,null,null,new Z1(r,void 0,null,ft.LOADED,null))}return r}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const b=r;r=s,s=b}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),c=Math.sqrt(s*s-l*l),h=r-c,u=Math.sqrt(l*l+h*h),d=u/l;if(e==="miter"&&d<=i)return d*t;const g=t/2/d,f=t/2*(h/u),p=Math.sqrt((r+g)*(r+g)+f*f)-r;if(this.radius2_===void 0||e==="bevel")return p*2;const A=r*Math.sin(o),C=Math.sqrt(r*r-A*A),v=s-C,w=Math.sqrt(A*A+v*v)/A;if(w<=i){const b=w*t/2-s-r;return 2*Math.max(p,b)}return p*2}createRenderOptions(){let e=Ec,t=bc,i=0,r=null,s=0,a,o=0;this.stroke_&&(a=Kr(this.stroke_.getColor()??ou),o=this.stroke_.getWidth()??cu,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??bc,e=this.stroke_.getLineCap()??Ec,i=this.stroke_.getMiterLimit()??au);const l=this.calculateLineJoinSize_(t,o,i),c=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*c+l);return{strokeStyle:a,strokeWidth:o,size:h,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Un),t.fillStyle=Kr(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Ro(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=xi(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,c=o%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Un,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class qf extends Kf{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new qf({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Xi{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=ww,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Xi({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ww,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function yN(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(zt(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let Kp=null;function iM(n,e){if(!Kp){const t=new Ns({color:"rgba(255,255,255,0.4)"}),i=new Po({color:"#3399CC",width:1.25});Kp=[new Xi({image:new qf({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return Kp}function ww(n){return n.getGeometry()}const wN="#333";class E0{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Nn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ns({color:wN}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new E0({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Ns?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Nn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ki={ANIMATING:0,INTERACTING:1},Je={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},wd=[Je.FILL],Ra=[Je.STROKE],Ao=[Je.BEGIN_PATH],Ew=[Je.CLOSE_PATH];class ju extends H1{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)r[0]=e[o],r[1]=e[o+1],Ic(i,r)&&(s[a++]=r[0],s[a++]=r[1]);return a}appendFlatLineCoordinates(e,t,i,r,s,a){const o=this.coordinates;let l=o.length;const c=this.getBufferedMaxExtent();a&&(t+=r);let h=e[t],u=e[t+1];const d=this.tmpCoordinate_;let g=!0,f,m,p;for(f=t+r;f<i;f+=r)d[0]=e[f],d[1]=e[f+1],p=oC(c,d),p!==m?(g&&(o[l++]=h,o[l++]=u,g=!1),o[l++]=d[0],o[l++]=d[1]):p===Pi.INTERSECTING?(o[l++]=d[0],o[l++]=d[1],g=!1):g=!0,h=d[0],u=d[1],m=p;return(s&&g||f===t+r)&&(o[l++]=h,o[l++]=u),l}drawCustomCoordinates_(e,t,i,r,s){for(let a=0,o=i.length;a<o;++a){const l=i[a],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,i,r,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let c,h,u,d,g;switch(a){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),d=[];const f=e.getEndss();g=0;for(let m=0,p=f.length;m<p;++m){const A=[];g=this.drawCustomCoordinates_(c,g,f[m],o,A),d.push(A)}this.instructions.push([Je.CUSTOM,l,d,e,i,aw,s]),this.hitDetectionInstructions.push([Je.CUSTOM,l,d,e,r||i,aw,s]);break;case"Polygon":case"MultiLineString":u=[],c=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(c,0,e.getEnds(),o,u),this.instructions.push([Je.CUSTOM,l,u,e,i,$g,s]),this.hitDetectionInstructions.push([Je.CUSTOM,l,u,e,r||i,$g,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(c,0,c.length,o,!1,!1),this.instructions.push([Je.CUSTOM,l,h,e,i,Zl,s]),this.hitDetectionInstructions.push([Je.CUSTOM,l,h,e,r||i,Zl,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(c,o),h>l&&(this.instructions.push([Je.CUSTOM,l,h,e,i,Zl,s]),this.hitDetectionInstructions.push([Je.CUSTOM,l,h,e,r||i,Zl,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),h=this.coordinates.length,this.instructions.push([Je.CUSTOM,l,h,e,i,void 0,s]),this.hitDetectionInstructions.push([Je.CUSTOM,l,h,e,r||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Je.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Je.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,a=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==Je.END_GEOMETRY?a=t:s==Je.BEGIN_GEOMETRY&&(r[2]=t,yU(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Kr(i||Un)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Kr(i||ou);const r=e.getLineCap();t.lineCap=r!==void 0?r:Ec;const s=e.getLineDash();t.lineDash=s?s.slice():Rs;const a=e.getLineDashOffset();t.lineDashOffset=a||Ts;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:bc;const l=e.getWidth();t.lineWidth=l!==void 0?l:cu;const c=e.getMiterLimit();t.miterLimit=c!==void 0?c:au,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Je.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Je.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!Va(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Je.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=I1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;l0(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class EN extends ju{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Ic(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(r,s);this.instructions.push([Je.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Je.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const r=e.getFlatCoordinates(),s=[];for(let l=0,c=r.length;l<c;l+=e.getStride())(!this.maxExtent||Ic(this.maxExtent,r.slice(l,l+2)))&&s.push(r[l],r[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Je.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Je.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class bN extends ju{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),o=[Je.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),i}drawLineString(e,t,i){const r=this.state,s=r.strokeStyle,a=r.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Je.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Rs,Ts],Ao);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Ra),this.endGeometry(t)}drawMultiLineString(e,t,i){const r=this.state,s=r.strokeStyle,a=r.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Je.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Rs,Ts],Ao);const o=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=o.length;u<d;++u)h=this.drawFlatCoordinates_(l,h,o[u],c);this.hitDetectionInstructions.push(Ra),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ra),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ra),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ao)}}class bw extends ju{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Ao),this.hitDetectionInstructions.push(Ao);for(let c=0;c<l;++c){const h=i[c],u=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,h,r,!0,!o),g=[Je.MOVE_TO_LINE_TO,u,d];this.instructions.push(g),this.hitDetectionInstructions.push(g),o&&(this.instructions.push(Ew),this.hitDetectionInstructions.push(Ew)),t=h}return a&&(this.instructions.push(wd),this.hitDetectionInstructions.push(wd)),o&&(this.instructions.push(Ra),this.hitDetectionInstructions.push(Ra)),t}drawCircle(e,t,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_FILL_STYLE,Un]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Rs,Ts]);const o=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const h=[Je.CIRCLE,c];this.instructions.push(Ao,h),this.hitDetectionInstructions.push(Ao,h),r.fillStyle!==void 0&&(this.instructions.push(wd),this.hitDetectionInstructions.push(wd)),r.strokeStyle!==void 0&&(this.instructions.push(Ra),this.hitDetectionInstructions.push(Ra)),this.endGeometry(t)}drawPolygon(e,t,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_FILL_STYLE,Un]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Rs,Ts]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,o,c),this.endGeometry(t)}drawMultiPolygon(e,t,i){const r=this.state,s=r.fillStyle,a=r.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_FILL_STYLE,Un]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Je.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,Rs,Ts]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let h=0;for(let u=0,d=o.length;u<d;++u)h=this.drawFlatCoordinatess_(l,h,o[u],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=to(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function _N(n,e,t,i,r){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+r<i;){const[c,h]=l.slice(-2),u=e[a+r],d=e[a+r+1],g=Math.sqrt((u-c)*(u-c)+(d-h)*(d-h));if(o+=g,o>=n){const f=(n-o+g)/g,m=sr(c,u,f),p=sr(h,d,f);l.push(m,p),s.push(l),l=[m,p],o==n&&(a+=r),o=0}else if(o<n)l.push(e[a+r],e[a+r+1]),a+=r;else{const f=g-o,m=sr(c,u,f/g),p=sr(h,d,f/g);l.push(m,p),s.push(l),l=[m,p],o=0,a+=r}}return o>0&&s.push(l),s}function xN(n,e,t,i,r){let s=t,a=t,o=0,l=0,c=t,h,u,d,g,f,m,p,A,C,v;for(u=t;u<i;u+=r){const I=e[u],w=e[u+1];f!==void 0&&(C=I-f,v=w-m,g=Math.sqrt(C*C+v*v),p!==void 0&&(l+=d,h=Math.acos((p*C+A*v)/(d*g)),h>n&&(l>o&&(o=l,s=c,a=u),l=0,c=u-r)),d=g,p=C,A=v),f=I,m=w}return l+=g,l>o?[c,u]:[s,a]}const nf={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class SN extends ju{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Un]={fillStyle:Un},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const r=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!r&&!s)return;const o=this.coordinates;let l=o.length;const c=e.getType();let h=null,u=e.getStride();if(a.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Bn(this.maxExtent,e.getExtent()))return;let d;if(h=e.getFlatCoordinates(),c=="LineString")d=[h.length];else if(c=="MultiLineString")d=e.getEnds();else if(c=="Polygon")d=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const p=e.getEndss();d=[];for(let A=0,C=p.length;A<C;++A)d.push(p[A][0])}this.beginGeometry(e,t,i);const g=a.repeat,f=g?void 0:a.textAlign;let m=0;for(let p=0,A=d.length;p<A;++p){let C;g?C=_N(g*this.resolution,h,m,d[p],u):C=[h.slice(m,d[p])];for(let v=0,I=C.length;v<I;++v){const w=C[v];let b=0,_=w.length;if(f==null){const y=xN(a.maxAngle,w,0,w.length,2);b=y[0],_=y[1]}for(let y=b;y<_;y+=u)o.push(w[y],w[y+1]);const x=o.length;m=d[p],this.drawChars_(l,x),l=x}}this.endGeometry(t)}else{let d=a.overflow?null:[];switch(c){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),u=2;break;case"Polygon":h=e.getFlatInteriorPoint(),a.overflow||d.push(h[2]/this.resolution),u=3;break;case"MultiPolygon":const I=e.getFlatInteriorPoints();h=[];for(let w=0,b=I.length;w<b;w+=3)a.overflow||d.push(I[w+2]/this.resolution),h.push(I[w],I[w+1]);if(h.length===0)return;u=2;break}const g=this.appendFlatPointCoordinates(h,u);if(g===l)return;if(d&&(g-l)/2!==h.length/u){let I=l/2;d=d.filter((w,b)=>{const _=o[(I+b)*2]===h[b*u]&&o[(I+b)*2+1]===h[b*u+1];return _||--I,_})}this.saveTextStates_();const f=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,m=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,i);let p=a.padding;if(p!=po&&(a.scale[0]<0||a.scale[1]<0)){let I=a.padding[0],w=a.padding[1],b=a.padding[2],_=a.padding[3];a.scale[0]<0&&(w=-w,_=-_),a.scale[1]<0&&(I=-I,b=-b),p=[I,w,b,_]}const A=this.pixelRatio;this.instructions.push([Je.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==po?po:p.map(function(I){return I*A}),f,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]);const C=1/A,v=f?f.slice(0):null;v&&(v[1]=Un),this.hitDetectionInstructions.push([Je.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,p,v,m,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Un:this.fillKey_,this.textOffsetX_,this.textOffsetY_,d]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||lu,justify:t.justify,textBaseline:t.textBaseline||tf,scale:t.scale});const a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=nf[r.textBaseline],h=this.textOffsetY_*l,u=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Je.DRAW_CHARS,e,t,c,r.overflow,o,r.maxAngle,l,h,s,d*l,u,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Je.DRAW_CHARS,e,t,c,r.overflow,o&&Un,r.maxAngle,l,h,s,d*l,u,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const a=e.getFill();a?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=Kr(a.getColor()||Un)):(r=null,this.textFillState_=r);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const m=o.getLineDash(),p=o.getLineDashOffset(),A=o.getWidth(),C=o.getMiterLimit();s.lineCap=o.getLineCap()||Ec,s.lineDash=m?m.slice():Rs,s.lineDashOffset=p===void 0?Ts:p,s.lineJoin=o.getLineJoin()||bc,s.lineWidth=A===void 0?cu:A,s.miterLimit=C===void 0?au:C,s.strokeStyle=Kr(o.getColor()||ou)}i=this.textState_;const l=e.getFont()||X1;XP(l);const c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||tf,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||po,i.scale=c===void 0?[1,1]:c;const h=e.getOffsetX(),u=e.getOffsetY(),d=e.getRotateWithView(),g=e.getKeepUpright(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=u===void 0?0:u,this.textRotateWithView_=d===void 0?!1:d,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Pt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+Pt(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const MN={Circle:bw,Default:ju,Image:EN,LineString:bN,Polygon:bw,Text:SN};class RN{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const a=MN[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function TN(n,e,t,i,r,s,a,o,l,c,h,u,d=!0){let g=n[e],f=n[e+1],m=0,p=0,A=0,C=0;function v(){m=g,p=f,e+=i,g=n[e],f=n[e+1],C+=A,A=Math.sqrt((g-m)*(g-m)+(f-p)*(f-p))}do v();while(e<t-i&&C+A<s);let I=A===0?0:(s-C)/A;const w=sr(m,g,I),b=sr(p,f,I),_=e-i,x=C,y=s+o*l(c,r,h);for(;e<t-i&&C+A<y;)v();I=A===0?0:(y-C)/A;const E=sr(m,g,I),S=sr(p,f,I);let R=!1;if(d)if(u){const N=[w,b,E,S];P1(N,0,4,2,u,N,N),R=N[0]>N[2]}else R=w>E;const M=Math.PI,T=[],P=_+i===e;e=_,A=0,C=x,g=n[e],f=n[e+1];let F;if(P){v(),F=Math.atan2(f-p,g-m),R&&(F+=F>0?-M:M);const N=(E+w)/2,L=(S+b)/2;return T[0]=[N,L,(y-s)/2,F,r],T}r=r.replace(/\n/g," ");for(let N=0,L=r.length;N<L;){v();let W=Math.atan2(f-p,g-m);if(R&&(W+=W>0?-M:M),F!==void 0){let te=W-F;if(te+=te>M?-2*M:te<-M?2*M:0,Math.abs(te)>a)return null}F=W;const ne=N;let de=0;for(;N<L;++N){const te=R?L-N-1:N,we=o*l(c,r[te],h);if(e+i<t&&C+A<s+de+we/2)break;de+=we}if(N===ne)continue;const ee=R?r.substring(L-ne,L-N):r.substring(ne,N);I=A===0?0:(s+de/2-C)/A;const Me=sr(m,g,I),G=sr(p,f,I);T.push([Me,G,de/2,W,ee]),s+=de}return T}class nM{constructor(){re(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Wg(),{get:(e,t)=>{if(typeof Wg()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,r=t.length;i<r;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const a=t[++i];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ol=yr(),ea=[],hs=[],us=[],ta=[];function _w(n){return n[3].declutterBox}const xw=new RegExp("[-----]");function qp(n,e){return e==="start"?e=xw.test(n)?"right":"left":e==="end"&&(e=xw.test(n)?"left":"right"),nf[e]}function UN(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function FN(n,e,t){return t%2===0&&(n+=e),n}class BN{constructor(e,t,i,r,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Nr(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new nM:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const a=r?this.strokeStates[r]:null,o=i?this.fillStates[i]:null,l=this.textStates[t],c=this.pixelRatio,h=[l.scale[0]*c,l.scale[1]*c],u=l.justify?nf[l.justify]:qp(Array.isArray(e)?e[0]:e,l.textAlign||lu),d=r&&a.lineWidth?a.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(UN,[]),{width:f,height:m,widths:p,heights:A,lineWidths:C}=jP(l,g),v=f+d,I=[],w=(v+2)*h[0],b=(m+d)*h[1],_={width:w<0?Math.floor(w):Math.ceil(w),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:I};(h[0]!=1||h[1]!=1)&&I.push("scale",h),r&&(I.push("strokeStyle",a.strokeStyle),I.push("lineWidth",d),I.push("lineCap",a.lineCap),I.push("lineJoin",a.lineJoin),I.push("miterLimit",a.miterLimit),I.push("setLineDash",[a.lineDash]),I.push("lineDashOffset",a.lineDashOffset)),i&&I.push("fillStyle",o.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const x=.5-u;let y=u*v+x*d;const E=[],S=[];let R=0,M=0,T=0,P=0,F;for(let N=0,L=g.length;N<L;N+=2){const W=g[N];if(W===`
`){M+=R,R=0,y=u*v+x*d,++P;continue}const ne=g[N+1]||l.font;ne!==F&&(r&&E.push("font",ne),i&&S.push("font",ne),F=ne),R=Math.max(R,A[T]);const de=[W,y+x*p[T]+u*(p[T]-C[P]),.5*(d+R)+M];y+=p[T],r&&E.push("strokeText",de),i&&S.push("fillText",de),++T}return Array.prototype.push.apply(I,E),Array.prototype.push.apply(I,S),this.labels_[s]=_,_}replayTextBackground_(e,t,i,r,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,a,o,l,c,h,u,d,g,f,m,p){o*=d[0],l*=d[1];let A=i-o,C=r-l;const v=s+c>e?e-c:s,I=a+h>t?t-h:a,w=f[3]+v*d[0]+f[1],b=f[0]+I*d[1]+f[2],_=A-f[3],x=C-f[0];(m||u!==0)&&(ea[0]=_,ta[0]=_,ea[1]=x,hs[1]=x,hs[0]=_+w,us[0]=hs[0],us[1]=x+b,ta[1]=us[1]);let y;return u!==0?(y=Ps(Nr(),i,r,1,1,u,-i,-r),Ni(y,ea),Ni(y,hs),Ni(y,us),Ni(y,ta),Na(Math.min(ea[0],hs[0],us[0],ta[0]),Math.min(ea[1],hs[1],us[1],ta[1]),Math.max(ea[0],hs[0],us[0],ta[0]),Math.max(ea[1],hs[1],us[1],ta[1]),ol)):Na(Math.min(_,_+w),Math.min(x,x+b),Math.max(_,_+w),Math.max(x,x+b),ol),g&&(A=Math.round(A),C=Math.round(C)),{drawImageX:A,drawImageY:C,drawImageW:v,drawImageH:I,originX:c,originY:h,declutterBox:{minX:ol[0],minY:ol[1],maxX:ol[2],maxY:ol[3],value:p},canvasTransform:y,scale:d}}replayImageOrLabel_(e,t,i,r,s,a,o){const l=!!(a||o),c=r.declutterBox,h=o?o[2]*r.scale[0]/2:0;return c.minX-h<=t[0]&&c.maxX+h>=0&&c.minY-h<=t[1]&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,ea,hs,us,ta,a,o),YP(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=Ni(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],a=this.createLabel(e,t,r,i),o=this.strokeStates[i],l=this.pixelRatio,c=qp(Array.isArray(e)?e[0]:e,s.textAlign||lu),h=nf[s.textBaseline||tf],u=o&&o.lineWidth?o.lineWidth:0,d=a.width/l-2*s.scale[0],g=c*d+2*(.5-c)*u,f=h*a.height/l+2*(.5-h)*u;return{label:a,anchorX:g,anchorY:f}}execute_(e,t,i,r,s,a,o,l){const c=this.zIndexContext_;let h;this.pixelCoordinates_&&Va(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Ba(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),gP(this.renderedTransform_,i));let u=0;const d=r.length;let g=0,f,m,p,A,C,v,I,w,b,_,x,y,E,S=0,R=0;const M=this.coordinateCache_,T=this.viewRotation_,P=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,F={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:T},N=this.instructions!=r||this.overlaps?0:200;let L,W,ne,de;for(;u<d;){const ee=r[u];switch(ee[0]){case Je.BEGIN_GEOMETRY:L=ee[1],de=ee[3],L.getGeometry()?o!==void 0&&!Bn(o,de.getExtent())?u=ee[2]+1:++u:u=ee[2],c&&(c.zIndex=ee[4]);break;case Je.BEGIN_PATH:S>N&&(this.fill_(e),S=0),R>N&&(e.stroke(),R=0),!S&&!R&&(e.beginPath(),C=NaN,v=NaN),++u;break;case Je.CIRCLE:g=ee[1];const G=h[g],te=h[g+1],we=h[g+2],le=h[g+3],xe=we-G,Re=le-te,Fe=Math.sqrt(xe*xe+Re*Re);e.moveTo(G+Fe,te),e.arc(G,te,Fe,0,2*Math.PI,!0),++u;break;case Je.CLOSE_PATH:e.closePath(),++u;break;case Je.CUSTOM:g=ee[1],f=ee[2];const Ve=ee[3],$e=ee[4],xt=ee[5];F.geometry=Ve,F.feature=L,u in M||(M[u]=[]);const z=M[u];xt?xt(h,g,f,2,z):(z[0]=h[g],z[1]=h[g+1],z.length=2),c&&(c.zIndex=ee[6]),$e(z,F),++u;break;case Je.DRAW_IMAGE:g=ee[1],f=ee[2],b=ee[3],m=ee[4],p=ee[5];let St=ee[6];const Ze=ee[7],We=ee[8],Le=ee[9],ht=ee[10];let Pe=ee[11];const k=ee[12];let U=ee[13];A=ee[14]||"declutter";const Y=ee[15];if(!b&&ee.length>=20){_=ee[19],x=ee[20],y=ee[21],E=ee[22];const Te=this.drawLabelWithPointPlacement_(_,x,y,E);b=Te.label,ee[3]=b;const Qe=ee[23];m=(Te.anchorX-Qe)*this.pixelRatio,ee[4]=m;const Ge=ee[24];p=(Te.anchorY-Ge)*this.pixelRatio,ee[5]=p,St=b.height,ee[6]=St,U=b.width,ee[13]=U}let ge;ee.length>25&&(ge=ee[25]);let pe,D,O;ee.length>17?(pe=ee[16],D=ee[17],O=ee[18]):(pe=po,D=null,O=null),ht&&P?Pe+=T:!ht&&!P&&(Pe-=T);let H=0;for(;g<f;g+=2){if(ge&&ge[H++]<U/this.pixelRatio)continue;const Te=this.calculateImageOrLabelDimensions_(b.width,b.height,h[g],h[g+1],U,St,m,p,We,Le,Pe,k,s,pe,!!D||!!O,L),Qe=[e,t,b,Te,Ze,D,O];if(l){let Ge,Ue,Ye;if(Y){const It=f-g;if(!Y[It]){Y[It]={args:Qe,declutterMode:A};continue}const wt=Y[It];Ge=wt.args,Ue=wt.declutterMode,delete Y[It],Ye=_w(Ge)}let Ct,Yt;if(Ge&&(Ue!=="declutter"||!l.collides(Ye))&&(Ct=!0),(A!=="declutter"||!l.collides(Te.declutterBox))&&(Yt=!0),Ue==="declutter"&&A==="declutter"){const It=Ct&&Yt;Ct=It,Yt=It}Ct&&(Ue!=="none"&&l.insert(Ye),this.replayImageOrLabel_.apply(this,Ge)),Yt&&(A!=="none"&&l.insert(Te.declutterBox),this.replayImageOrLabel_.apply(this,Qe))}else this.replayImageOrLabel_.apply(this,Qe)}++u;break;case Je.DRAW_CHARS:const K=ee[1],ye=ee[2],J=ee[3],se=ee[4];E=ee[5];const fe=ee[6],ue=ee[7],ce=ee[8];y=ee[9];const be=ee[10];_=ee[11],Array.isArray(_)&&(_=_.reduce(FN,"")),x=ee[12];const he=[ee[13],ee[13]];A=ee[14]||"declutter";const Ee=ee[15],Q=this.textStates[x],ve=Q.font,V=[Q.scale[0]*ue,Q.scale[1]*ue];let X;ve in this.widths_?X=this.widths_[ve]:(X={},this.widths_[ve]=X);const $=kP(h,K,ye,2),Ae=Math.abs(V[0])*gw(ve,_,X);if(se||Ae<=$){const Te=this.textStates[x].textAlign,Qe=($-Ae)*qp(_,Te),Ge=TN(h,K,ye,2,_,Qe,fe,Math.abs(V[0]),gw,ve,X,P?0:this.viewRotation_,Ee);e:if(Ge){const Ue=[];let Ye,Ct,Yt,It,wt;if(y)for(Ye=0,Ct=Ge.length;Ye<Ct;++Ye){wt=Ge[Ye],Yt=wt[4],It=this.createLabel(Yt,x,"",y),m=wt[2]+(V[0]<0?-be:be),p=J*It.height+(.5-J)*2*be*V[1]/V[0]-ce;const Bt=this.calculateImageOrLabelDimensions_(It.width,It.height,wt[0],wt[1],It.width,It.height,m,p,0,0,wt[3],he,!1,po,!1,L);if(l&&A==="declutter"&&l.collides(Bt.declutterBox))break e;Ue.push([e,t,It,Bt,1,null,null])}if(E)for(Ye=0,Ct=Ge.length;Ye<Ct;++Ye){wt=Ge[Ye],Yt=wt[4],It=this.createLabel(Yt,x,E,""),m=wt[2],p=J*It.height-ce;const Bt=this.calculateImageOrLabelDimensions_(It.width,It.height,wt[0],wt[1],It.width,It.height,m,p,0,0,wt[3],he,!1,po,!1,L);if(l&&A==="declutter"&&l.collides(Bt.declutterBox))break e;Ue.push([e,t,It,Bt,1,null,null])}l&&A!=="none"&&l.load(Ue.map(_w));for(let Bt=0,on=Ue.length;Bt<on;++Bt)this.replayImageOrLabel_.apply(this,Ue[Bt])}}++u;break;case Je.END_GEOMETRY:if(a!==void 0){L=ee[1];const Te=a(L,de,A);if(Te)return Te}++u;break;case Je.FILL:N?S++:this.fill_(e),++u;break;case Je.MOVE_TO_LINE_TO:for(g=ee[1],f=ee[2],W=h[g],ne=h[g+1],e.moveTo(W,ne),C=W+.5|0,v=ne+.5|0,g+=2;g<f;g+=2)W=h[g],ne=h[g+1],I=W+.5|0,w=ne+.5|0,(g==f-2||I!==C||w!==v)&&(e.lineTo(W,ne),C=I,v=w);++u;break;case Je.SET_FILL_STYLE:this.alignAndScaleFill_=ee[2],S&&(this.fill_(e),S=0,R&&(e.stroke(),R=0)),e.fillStyle=ee[1],++u;break;case Je.SET_STROKE_STYLE:R&&(e.stroke(),R=0),this.setStrokeStyle_(e,ee),++u;break;case Je.STROKE:N?R++:e.stroke(),++u;break;default:++u;break}}S&&this.fill_(e),R&&e.stroke()}execute(e,t,i,r,s,a){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,r,s)}}const no=["Polygon","Circle","LineString","Image","Text","Default"],rM=["Image","Text"],DN=no.filter(n=>!rM.includes(n));class LN{constructor(e,t,i,r,s,a,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Nr(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);const s=e[i];for(const a in s){const o=s[a];r[a]=new BN(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,a){r=Math.round(r);const o=r*2+1,l=Ps(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=xi(o,o));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):c||h.clearRect(0,0,o,o);let u;this.renderBuffer_!==void 0&&(u=yr(),Qh(u,e),l0(u,t*(this.renderBuffer_+r),u));const d=PN(r);let g;function f(w,b,_){const x=h.getImageData(0,0,o,o).data;for(let y=0,E=d.length;y<E;y++)if(x[d[y]]>0){if(!a||_==="none"||g!=="Image"&&g!=="Text"||a.includes(w)){const S=(d[y]-3)/4,R=r-S%o,M=r-(S/o|0),T=s(w,b,R*R+M*M);if(T)return T}h.clearRect(0,0,o,o);break}}const m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(xs);let p,A,C,v,I;for(p=m.length-1;p>=0;--p){const w=m[p].toString();for(C=this.executorsByZIndex_[w],A=no.length-1;A>=0;--A)if(g=no[A],v=C[g],v!==void 0&&(I=v.executeHitDetection(h,l,i,f,u),I))return I}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],a=t[3],o=[i,r,i,a,s,a,s,r];return Ba(o,0,8,2,e,o),o}isEmpty(){return Ac(this.executorsByZIndex_)}execute(e,t,i,r,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?vU:xs),a=a||no;const c=no.length;for(let h=0,u=l.length;h<u;++h){const d=l[h].toString(),g=this.executorsByZIndex_[d];for(let f=0,m=a.length;f<m;++f){const p=a[f],A=g[p];if(A!==void 0){const C=o===null?void 0:A.getZIndexContext(),v=C?C.getContext():e,I=this.maxExtent_&&p!=="Image"&&p!=="Text";if(I&&(v.save(),this.clip(v,i)),!C||p==="Text"||p==="Image"?A.execute(v,t,i,r,s,o):C.pushFunction(w=>A.execute(w,t,i,r,s,o)),I&&v.restore(),C){C.offset();const w=l[h]*c+no.indexOf(p);this.deferredZIndexContexts_[w]||(this.deferredZIndexContexts_[w]=[]),this.deferredZIndexContexts_[w].push(C)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(xs);for(let i=0,r=t.length;i<r;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const $p={};function PN(n){if($p[n]!==void 0)return $p[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=i[o];l||(l=[],i[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const r=[];for(let s=0,a=i.length;s<a;++s)i[s]&&r.push(...i[s]);return $p[n]=r,r}function Sw(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class ns extends Yf{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;zt(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||Pt(a)),zt(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),zt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ft.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?ft.LOADED:ft.IDLE:l=ft.LOADING:l=ft.LOADED),this.color_=e.color!==void 0?Ro(e.color):null,this.iconImage_=ef(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,h;if(e.size)[c,h]=e.size;else{const u=this.getImage(1);if(u.width&&u.height)c=u.width,h=u.height;else if(u instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(Sw(g[0],g[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(Sw(c,h,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ns({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=ef(null,e,this.crossOrigin_,ft.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ft.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ft.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(pt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(pt.CHANGE,e)}ready(){return this.iconImage_.ready()}}const Yr=.5;function NN(n,e,t,i,r,s,a,o,l){const c=r,h=n[0]*Yr,u=n[1]*Yr,d=xi(h,u);d.imageSmoothingEnabled=!1;const g=d.canvas,f=new qP(d,Yr,r,null,a,o,null),m=t.length,p=Math.floor((256*256*256-1)/m),A={};for(let v=1;v<=m;++v){const I=t[v-1],w=I.getStyleFunction()||i;if(!w)continue;let b=w(I,s);if(!b)continue;Array.isArray(b)||(b=[b]);const x=(v*p).toString(16).padStart(7,"#00000");for(let y=0,E=b.length;y<E;++y){const S=b[y],R=S.getGeometryFunction()(I);if(!R||!Bn(c,R.getExtent()))continue;const M=S.clone(),T=M.getFill();T&&T.setColor(x);const P=M.getStroke();P&&(P.setColor(x),P.setLineDash(null)),M.setText(void 0);const F=S.getImage();if(F){const ne=F.getImageSize();if(!ne)continue;const de=xi(ne[0],ne[1],void 0,{alpha:!1}),ee=de.canvas;de.fillStyle=x,de.fillRect(0,0,ee.width,ee.height),M.setImage(new ns({img:ee,anchor:F.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:F.getOrigin(),opacity:1,size:F.getSize(),scale:F.getScale(),rotation:F.getRotation(),rotateWithView:F.getRotateWithView()}))}const N=M.getZIndex()||0;let L=A[N];L||(L={},A[N]=L,L.Polygon=[],L.Circle=[],L.LineString=[],L.Point=[]);const W=R.getType();if(W==="GeometryCollection"){const ne=R.getGeometriesArrayRecursive();for(let de=0,ee=ne.length;de<ee;++de){const Me=ne[de];L[Me.getType().replace("Multi","")].push(Me,M)}}else L[W.replace("Multi","")].push(R,M)}}const C=Object.keys(A).map(Number).sort(xs);for(let v=0,I=C.length;v<I;++v){const w=A[C[v]];for(const b in w){const _=w[b];for(let x=0,y=_.length;x<y;x+=2){f.setStyle(_[x+1]);for(let E=0,S=e.length;E<S;++E)f.setTransform(e[E]),f.drawGeometry(_[x])}}}return d.getImageData(0,0,g.width,g.height)}function kN(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*Yr),s=Math.floor(Math.round(n[1])*Yr),a=(oi(r,0,t.width-1)+oi(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],h=t.data[a+2]+256*(l+256*o),u=Math.floor((256*256*256-1)/e.length);h&&h%u===0&&i.push(e[h/u-1])}return i}class sM extends zs{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}const QN=5;class ON extends Xu{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=QN}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Dt()}getData(e){return null}prepareFrame(e){return Dt()}renderFrame(e,t){return Dt()}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ft.LOADED||t.getState()===ft.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ft.LOADED&&t!=ft.ERROR&&e.addEventListener(pt.CHANGE,this.boundHandleImageChange_),t==ft.IDLE&&(e.load(),t=e.getState()),t==ft.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Mw=[];let Ql=null;function VN(){Ql=xi(1,1,void 0,{willReadFrequently:!0})}class aM extends ON{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Nr(),this.pixelTransform=Nr(),this.inversePixelTransform=Nr(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){Ql||VN(),Ql.clearRect(0,0,1,1);let r;try{Ql.drawImage(e,t,i,1,1,0,0,1,1),r=Ql.getImageData(0,0,1,1).data}catch{return Ql=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,a;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&Va(Ro(e.style.backgroundColor),Ro(i)))){const o=e.firstElementChild;_a(o)&&(a=o.getContext("2d"))}if(a&&mP(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=hr?Wx():document.createElement("div"),s.className=r;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=xi();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=jo(i),s=Zu(i),a=Wf(i),o=Wu(i);Ni(t.coordinateToPixelTransform,r),Ni(t.coordinateToPixelTransform,s),Ni(t.coordinateToPixelTransform,a),Ni(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;Ni(l,r),Ni(l,s),Ni(l,a),Ni(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const i=e.extent,r=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Xt(i)/r*a),l=Math.round(yn(i)/r*a);Ps(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),L1(this.inversePixelTransform,this.pixelTransform);const c=AP(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=o||h.height!=l?(h.width=o,h.height=l):this.context.clearRect(0,0,o,l),c!==h.style.transform&&(h.style.transform=c)}}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new sM(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(gr.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(gr.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new nM),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(gr.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(gr.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,r,s,a,o){const l=s/2,c=a/2,h=r/t,u=-h,d=-e[0]+o,g=-e[1];return Ps(this.tempTransform,l,c,h,u,-i,d,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class zN extends aM{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=yr(),this.wrappedRenderedExtent_=yr(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,c=s.rotation,h=l.getExtent(),u=this.getLayer().getSource(),d=this.getLayer().getDeclutter(),g=t.pixelRatio,f=t.viewHints,m=!(f[ki.ANIMATING]||f[ki.INTERACTING]),p=this.context,A=Math.round(Xt(r)/o*g),C=Math.round(yn(r)/o*g),v=u.getWrapX()&&l.canWrapX(),I=v?Xt(h):null,w=v?Math.ceil((r[2]-h[2])/I)+1:1;let b=v?Math.floor((r[0]-h[0])/I):0;do{let _=this.getRenderTransform(a,o,0,g,A,C,b*I);t.declutter&&(_=_.slice(0)),e.execute(p,[p.canvas.width,p.canvas.height],_,c,m,i===void 0?no:i?rM:DN,i?d&&t.declutter[d]:void 0)}while(++b<w)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=xi(this.context.canvas.width,this.context.canvas.height,Mw))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Tf(this.context),Mw.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const r=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(gr.PRERENDER)||this.getLayer().hasListener(gr.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),r.projection,this.clipped_=!1,o&&i.extent&&this.clipping){const l=Ma(i.extent);o=Bn(l,e.extent),this.clipped_=o&&!wh(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),r=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),h=[],u=i[0]*Yr,d=i[1]*Yr;h.push(this.getRenderTransform(r,s,a,Yr,u,d,0).slice());const g=c.getSource(),f=o.getExtent();if(g.getWrapX()&&o.canWrapX()&&!wh(f,l)){let m=l[0];const p=Xt(f);let A=0,C;for(;m<f[0];)--A,C=p*A,h.push(this.getRenderTransform(r,s,a,Yr,u,d,C).slice()),m+=p;for(A=0,m=l[2];m>f[2];)++A,C=p*A,h.push(this.getRenderTransform(r,s,a,Yr,u,d,C).slice()),m-=p}this.hitDetectionImageData_=NN(i,h,this.renderedFeatures_,c.getStyleFunction(),l,s,a,fw(s,this.renderedPixelRatio_))}t(kN(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){var d,g;if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),c={},h=function(f,m,p){const A=Pt(f),C=c[A];if(C){if(C!==!0&&p<C.distanceSq){if(p===0)return c[A]=!0,s.splice(s.lastIndexOf(C),1),r(f,l,m);C.geometry=m,C.distanceSq=p}}else{if(p===0)return c[A]=!0,r(f,l,m);s.push(c[A]={feature:f,layer:l,geometry:m,distanceSq:p,callback:r})}},u=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,i,h,u?(g=(d=t.declutter)==null?void 0:d[u])==null?void 0:g.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[ki.ANIMATING],s=e.viewHints[ki.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&r||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,h=c.projection,u=c.resolution,d=e.pixelRatio,g=t.getRevision(),f=t.getRenderBuffer();let m=t.getRenderOrder();m===void 0&&(m=eN);const p=c.center.slice(),A=l0(l,f*u),C=A.slice(),v=[A.slice()],I=h.getExtent();if(i.getWrapX()&&h.canWrapX()&&!wh(I,e.extent)){const T=Xt(I),P=Math.max(Xt(A)/2,T);A[0]=I[0]-P,A[2]=I[2]+P,M1(p,h);const F=x1(v[0],h);F[0]<I[0]&&F[2]<I[2]?v.push([F[0]+T,F[1],F[2]+T,F[3]]):F[0]>I[0]&&F[2]>I[2]&&v.push([F[0]-T,F[1],F[2]-T,F[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==g&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&wh(this.wrappedRenderedExtent_,A))return Va(this.renderedExtent_,C)||(this.hitDetectionImageData_=null,this.renderedExtent_=C),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new RN(K1(u,d),A,u,d);let b;for(let T=0,P=v.length;T<P;++T)i.loadFeatures(v[T],u,h);const _=fw(u,d);let x=!0;const y=(T,P)=>{let F;const N=T.getStyleFunction()||t.getStyleFunction();if(N&&(F=N(T,u)),F){const L=this.renderFeature(T,_,F,w,b,this.getLayer().getDeclutter(),P);x=x&&!L}},E=D1(A),S=i.getFeaturesInExtent(E);m&&S.sort(m);for(let T=0,P=S.length;T<P;++T)y(S[T],T);this.renderedFeatures_=S,this.ready=x;const R=w.finish(),M=new LN(A,u,d,i.getOverlaps(),R,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=u,this.renderedRevision_=g,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=C,this.wrappedRenderedExtent_=A,this.renderedCenter_=p,this.renderedProjection_=h,this.renderedPixelRatio_=d,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,a,o){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)l=pw(r,e,i[c],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=pw(r,e,i,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let Yo=0;const An=1<<Yo++,Mt=1<<Yo++,Fn=1<<Yo++,Tr=1<<Yo++,No=1<<Yo++,_h=1<<Yo++,Ed=Math.pow(2,Yo)-1,b0={[An]:"boolean",[Mt]:"number",[Fn]:"string",[Tr]:"color",[No]:"number[]",[_h]:"size"},GN=Object.keys(b0).map(Number).sort(xs);function WN(n){return n in b0}function xh(n){const e=[];for(const t of GN)Sh(n,t)&&e.push(b0[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Sh(n,e){return(n&e)===e}function ia(n,e){return n===e}class bi{constructor(e,t){if(!WN(e))throw new Error(`literal expressions must have a specific type, got ${xh(e)}`);this.type=e,this.value=t}}class ZN{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function oM(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ji(n,e,t){switch(typeof n){case"boolean":{if(ia(e,Fn))return new bi(Fn,n?"true":"false");if(!Sh(e,An))throw new Error(`got a boolean, but expected ${xh(e)}`);return new bi(An,n)}case"number":{if(ia(e,_h))return new bi(_h,Nn(n));if(ia(e,An))return new bi(An,!!n);if(ia(e,Fn))return new bi(Fn,n.toString());if(!Sh(e,Mt))throw new Error(`got a number, but expected ${xh(e)}`);return new bi(Mt,n)}case"string":{if(ia(e,Tr))return new bi(Tr,kI(n));if(ia(e,An))return new bi(An,!!n);if(!Sh(e,Fn))throw new Error(`got a string, but expected ${xh(e)}`);return new bi(Fn,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return ik(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(ia(e,_h)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new bi(_h,n)}if(ia(e,Tr)){if(n.length===3)return new bi(Tr,[...n,1]);if(n.length===4)return new bi(Tr,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Sh(e,No))throw new Error(`got an array of numbers, but expected ${xh(e)}`);return new bi(No,n)}const Ce={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},HN={[Ce.Get]:it(dt(1,1/0),Rw),[Ce.Var]:it(dt(1,1),XN),[Ce.Has]:it(dt(1,1/0),Rw),[Ce.Id]:it(JN,ll),[Ce.Concat]:it(dt(2,1/0),Qt(Fn)),[Ce.GeometryType]:it(jN,ll),[Ce.LineMetric]:it(ll),[Ce.Resolution]:it(eA,ll),[Ce.Zoom]:it(eA,ll),[Ce.Time]:it(eA,ll),[Ce.Any]:it(dt(2,1/0),Qt(An)),[Ce.All]:it(dt(2,1/0),Qt(An)),[Ce.Not]:it(dt(1,1),Qt(An)),[Ce.Equal]:it(dt(2,2),Qt(Ed)),[Ce.NotEqual]:it(dt(2,2),Qt(Ed)),[Ce.GreaterThan]:it(dt(2,2),Qt(Mt)),[Ce.GreaterThanOrEqualTo]:it(dt(2,2),Qt(Mt)),[Ce.LessThan]:it(dt(2,2),Qt(Mt)),[Ce.LessThanOrEqualTo]:it(dt(2,2),Qt(Mt)),[Ce.Multiply]:it(dt(2,1/0),Tw),[Ce.Coalesce]:it(dt(2,1/0),Tw),[Ce.Divide]:it(dt(2,2),Qt(Mt)),[Ce.Add]:it(dt(2,1/0),Qt(Mt)),[Ce.Subtract]:it(dt(2,2),Qt(Mt)),[Ce.Clamp]:it(dt(3,3),Qt(Mt)),[Ce.Mod]:it(dt(2,2),Qt(Mt)),[Ce.Pow]:it(dt(2,2),Qt(Mt)),[Ce.Abs]:it(dt(1,1),Qt(Mt)),[Ce.Floor]:it(dt(1,1),Qt(Mt)),[Ce.Ceil]:it(dt(1,1),Qt(Mt)),[Ce.Round]:it(dt(1,1),Qt(Mt)),[Ce.Sin]:it(dt(1,1),Qt(Mt)),[Ce.Cos]:it(dt(1,1),Qt(Mt)),[Ce.Atan]:it(dt(1,2),Qt(Mt)),[Ce.Sqrt]:it(dt(1,1),Qt(Mt)),[Ce.Match]:it(dt(4,1/0),Uw,KN),[Ce.Between]:it(dt(3,3),Qt(Mt)),[Ce.Interpolate]:it(dt(6,1/0),Uw,qN),[Ce.Case]:it(dt(3,1/0),YN,$N),[Ce.In]:it(dt(2,2),ek),[Ce.Number]:it(dt(1,1/0),Qt(Ed)),[Ce.String]:it(dt(1,1/0),Qt(Ed)),[Ce.Array]:it(dt(1,1/0),Qt(Mt)),[Ce.Color]:it(dt(1,4),Qt(Mt)),[Ce.Band]:it(dt(1,3),Qt(Mt)),[Ce.Palette]:it(dt(2,2),tk),[Ce.ToString]:it(dt(1,1),Qt(An|Mt|Fn|Tr))};function Rw(n,e,t){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const a=n[s+1];switch(typeof a){case"number":{r[s]=new bi(Mt,a);break}case"string":{r[s]=new bi(Fn,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return r}function XN(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new bi(Fn,i)]}function JN(n,e,t){t.featureId=!0}function jN(n,e,t){t.geometryType=!0}function eA(n,e,t){t.mapState=!0}function ll(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function dt(n,e){return function(t,i,r){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function Tw(n,e,t){const i=n.length-1,r=new Array(i);for(let s=0;s<i;++s){const a=ji(n[s+1],e,t);r[s]=a}return r}function Qt(n){return function(e,t,i){const r=e.length-1,s=new Array(r);for(let a=0;a<r;++a){const o=ji(e[a+1],n,i);s[a]=o}return s}}function YN(n,e,t){const i=n[0],r=n.length-1;if(r%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}function Uw(n,e,t){const i=n[0],r=n.length-1;if(r%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function KN(n,e,t){const i=n.length-1,r=Fn|Mt|An,s=ji(n[1],r,t),a=ji(n[n.length-1],e,t),o=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const c=ji(n[l+2],s.type,t);o[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=ji(n[l+3],a.type,t);o[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...o,a]}function qN(n,e,t){const i=n[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);r=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new bi(Mt,r);let a;try{a=ji(n[2],Mt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const c=ji(n[l+3],Mt,t);o[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=ji(n[l+4],e,t);o[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,a,...o]}function $N(n,e,t){const i=ji(n[n.length-1],e,t),r=new Array(n.length-1);for(let s=0;s<r.length-1;s+=2){try{const a=ji(n[s+1],An,t);r[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=ji(n[s+2],i.type,t);r[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return r[r.length-1]=i,r}function ek(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let r;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],r=Fn}else r=Mt;const s=new Array(i.length);for(let o=0;o<s.length;o++)try{const l=ji(i[o],r,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[ji(n[1],r,t),...s]}function tk(n,e,t){let i;try{i=ji(n[1],Mt,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const r=n[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let a=0;a<s.length;a++){let o;try{o=ji(r[a],Tr,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof bi))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[i,...s]}function it(...n){return function(e,t,i){const r=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,i);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new ZN(t,r,...s)}}function ik(n,e,t){const i=n[0],r=HN[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(n,e,t)}function lM(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return lM(n.getGeometries()[0]);default:return""}}function cM(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Zs(n,e,t){const i=ji(n,e,t);return Qr(i)}function Qr(n,e){if(n instanceof bi){if(n.type===Tr&&typeof n.value=="string"){const i=kI(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case Ce.Number:case Ce.String:case Ce.Coalesce:return nk(n);case Ce.Get:case Ce.Var:case Ce.Has:return rk(n);case Ce.Id:return i=>i.featureId;case Ce.GeometryType:return i=>i.geometryType;case Ce.Concat:{const i=n.args.map(r=>Qr(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case Ce.Resolution:return i=>i.resolution;case Ce.Any:case Ce.All:case Ce.Between:case Ce.In:case Ce.Not:return ak(n);case Ce.Equal:case Ce.NotEqual:case Ce.LessThan:case Ce.LessThanOrEqualTo:case Ce.GreaterThan:case Ce.GreaterThanOrEqualTo:return sk(n);case Ce.Multiply:case Ce.Divide:case Ce.Add:case Ce.Subtract:case Ce.Clamp:case Ce.Mod:case Ce.Pow:case Ce.Abs:case Ce.Floor:case Ce.Ceil:case Ce.Round:case Ce.Sin:case Ce.Cos:case Ce.Atan:case Ce.Sqrt:return ok(n);case Ce.Case:return lk(n);case Ce.Match:return ck(n);case Ce.Interpolate:return hk(n);case Ce.ToString:return uk(n);default:throw new Error(`Unsupported operator ${t}`)}}function nk(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qr(n.args[s]);switch(t){case Ce.Coalesce:return s=>{for(let a=0;a<i;++a){const o=r[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Ce.Number:case Ce.String:return s=>{for(let a=0;a<i;++a){const o=r[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function rk(n,e){const i=n.args[0].value;switch(n.operator){case Ce.Get:return r=>{const s=n.args;let a=r.properties[i];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;a=a[h]}return a};case Ce.Var:return r=>r.variables[i];case Ce.Has:return r=>{const s=n.args;if(!(i in r.properties))return!1;let a=r.properties[i];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;if(!a||!Object.hasOwn(a,h))return!1;a=a[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function sk(n,e){const t=n.operator,i=Qr(n.args[0]),r=Qr(n.args[1]);switch(t){case Ce.Equal:return s=>i(s)===r(s);case Ce.NotEqual:return s=>i(s)!==r(s);case Ce.LessThan:return s=>i(s)<r(s);case Ce.LessThanOrEqualTo:return s=>i(s)<=r(s);case Ce.GreaterThan:return s=>i(s)>r(s);case Ce.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function ak(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qr(n.args[s]);switch(t){case Ce.Any:return s=>{for(let a=0;a<i;++a)if(r[a](s))return!0;return!1};case Ce.All:return s=>{for(let a=0;a<i;++a)if(!r[a](s))return!1;return!0};case Ce.Between:return s=>{const a=r[0](s),o=r[1](s),l=r[2](s);return a>=o&&a<=l};case Ce.In:return s=>{const a=r[0](s);for(let o=1;o<i;++o)if(a===r[o](s))return!0;return!1};case Ce.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function ok(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qr(n.args[s]);switch(t){case Ce.Multiply:return s=>{let a=1;for(let o=0;o<i;++o)a*=r[o](s);return a};case Ce.Divide:return s=>r[0](s)/r[1](s);case Ce.Add:return s=>{let a=0;for(let o=0;o<i;++o)a+=r[o](s);return a};case Ce.Subtract:return s=>r[0](s)-r[1](s);case Ce.Clamp:return s=>{const a=r[0](s),o=r[1](s);if(a<o)return o;const l=r[2](s);return a>l?l:a};case Ce.Mod:return s=>r[0](s)%r[1](s);case Ce.Pow:return s=>Math.pow(r[0](s),r[1](s));case Ce.Abs:return s=>Math.abs(r[0](s));case Ce.Floor:return s=>Math.floor(r[0](s));case Ce.Ceil:return s=>Math.ceil(r[0](s));case Ce.Round:return s=>Math.round(r[0](s));case Ce.Sin:return s=>Math.sin(r[0](s));case Ce.Cos:return s=>Math.cos(r[0](s));case Ce.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case Ce.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function lk(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Qr(n.args[r]);return r=>{for(let s=0;s<t-1;s+=2)if(i[s](r))return i[s+1](r);return i[t-1](r)}}function ck(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Qr(n.args[r]);return r=>{const s=i[0](r);for(let a=1;a<t-1;a+=2)if(s===i[a](r))return i[a+1](r);return i[t-1](r)}}function hk(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=Qr(n.args[r]);return r=>{const s=i[0](r),a=i[1](r);let o,l;for(let c=2;c<t;c+=2){const h=i[c](r);let u=i[c+1](r);const d=Array.isArray(u);if(d&&(u=kU(u)),h>=a)return c===2?u:d?dk(s,a,o,l,h,u):Mh(s,a,o,l,h,u);o=h,l=u}return l}}function uk(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Qr(n.args[s]);switch(t){case Ce.ToString:return s=>{const a=r[0](s);return n.args[0].type===Tr?QI(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Mh(n,e,t,i,r,s){const a=r-t;if(a===0)return i;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return i+l*(s-i)}function dk(n,e,t,i,r,s){if(r-t===0)return i;const o=Qv(i),l=Qv(s);let c=l[2]-o[2];c>180?c-=360:c<-180&&(c+=360);const h=[Mh(n,e,t,o[0],r,l[0]),Mh(n,e,t,o[1],r,l[1]),o[2]+Mh(n,e,t,0,r,c),Mh(n,e,t,i[3],r,s[3])];return QU(h)}function gk(n){return!0}function fk(n){const e=oM(),t=pk(n,e),i=cM();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const a=r.getId();a!==void 0?i.featureId=a:i.featureId=null}return e.geometryType&&(i.geometryType=lM(r.getGeometry())),t(i)}}function Fw(n){const e=oM(),t=n.length,i=new Array(t);for(let a=0;a<t;++a)i[a]=CC(n[a],e);const r=cM(),s=new Array(t);return function(a,o){if(r.properties=a.getPropertiesInternal(),r.resolution=o,e.featureId){const c=a.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){const h=i[c](r);h&&(s[l]=h,l+=1)}return s.length=l,s}}function pk(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const s=n[r],a="filter"in s?Zs(s.filter,An,e):gk;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let c=0;c<l;++c)o[c]=CC(s.style[c],e)}else o=[CC(s.style,e)];i[r]={filter:a,styles:o}}return function(r){const s=[];let a=!1;for(let o=0;o<t;++o){const l=i[o].filter;if(l(r)&&!(n[o].else&&a)){a=!0;for(const c of i[o].styles){const h=c(r);h&&s.push(h)}}}return s}}function CC(n,e){const t=hu(n,"",e),i=uu(n,"",e),r=Ak(n,e),s=mk(n,e),a=Dn(n,"z-index",e);if(!t&&!i&&!r&&!s&&!Ac(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new Xi;return function(l){let c=!0;if(t){const h=t(l);h&&(c=!1),o.setFill(h)}if(i){const h=i(l);h&&(c=!1),o.setStroke(h)}if(r){const h=r(l);h&&(c=!1),o.setText(h)}if(s){const h=s(l);h&&(c=!1),o.setImage(h)}return a&&o.setZIndex(a(l)),c?null:o}}function hu(n,e,t){let i;if(e+"fill-pattern-src"in n)i=yk(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;i=_0(n,e+"fill-color",t)}if(!i)return null;const r=new Ns;return function(s){const a=i(s);return a===NI?null:(r.setColor(a),r)}}function uu(n,e,t){const i=Dn(n,e+"stroke-width",t),r=_0(n,e+"stroke-color",t);if(!i&&!r)return null;const s=ys(n,e+"stroke-line-cap",t),a=ys(n,e+"stroke-line-join",t),o=hM(n,e+"stroke-line-dash",t),l=Dn(n,e+"stroke-line-dash-offset",t),c=Dn(n,e+"stroke-miter-limit",t),h=new Po;return function(u){if(r){const d=r(u);if(d===NI)return null;h.setColor(d)}if(i&&h.setWidth(i(u)),s){const d=s(u);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(d)}if(a){const d=a(u);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(d)}return o&&h.setLineDash(o(u)),l&&h.setLineDashOffset(l(u)),c&&h.setMiterLimit(c(u)),h}}function Ak(n,e){const t="text-",i=ys(n,t+"value",e);if(!i)return null;const r=hu(n,t,e),s=hu(n,t+"background-",e),a=uu(n,t,e),o=uu(n,t+"background-",e),l=ys(n,t+"font",e),c=Dn(n,t+"max-angle",e),h=Dn(n,t+"offset-x",e),u=Dn(n,t+"offset-y",e),d=nc(n,t+"overflow",e),g=ys(n,t+"placement",e),f=Dn(n,t+"repeat",e),m=$f(n,t+"scale",e),p=nc(n,t+"rotate-with-view",e),A=Dn(n,t+"rotation",e),C=ys(n,t+"align",e),v=ys(n,t+"justify",e),I=ys(n,t+"baseline",e),w=nc(n,t+"keep-upright",e),b=hM(n,t+"padding",e),_=ep(n,t+"declutter-mode"),x=new E0({declutterMode:_});return function(y){if(x.setText(i(y)),r&&x.setFill(r(y)),s&&x.setBackgroundFill(s(y)),a&&x.setStroke(a(y)),o&&x.setBackgroundStroke(o(y)),l&&x.setFont(l(y)),c&&x.setMaxAngle(c(y)),h&&x.setOffsetX(h(y)),u&&x.setOffsetY(u(y)),d&&x.setOverflow(d(y)),g){const E=g(y);if(E!=="point"&&E!=="line")throw new Error("Expected point or line for text-placement");x.setPlacement(E)}if(f&&x.setRepeat(f(y)),m&&x.setScale(m(y)),p&&x.setRotateWithView(p(y)),A&&x.setRotation(A(y)),C){const E=C(y);if(E!=="left"&&E!=="center"&&E!=="right"&&E!=="end"&&E!=="start")throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(E)}if(v){const E=v(y);if(E!=="left"&&E!=="right"&&E!=="center")throw new Error("Expected left, right, or center for text-justify");x.setJustify(E)}if(I){const E=I(y);if(E!=="bottom"&&E!=="top"&&E!=="middle"&&E!=="alphabetic"&&E!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(E)}return b&&x.setPadding(b(y)),w&&x.setKeepUpright(w(y)),x}}function mk(n,e){return"icon-src"in n?Ck(n,e):"shape-points"in n?Ik(n,e):"circle-radius"in n?vk(n,e):null}function Ck(n,e){const t="icon-",i=t+"src",r=uM(n[i],i),s=rf(n,t+"anchor",e),a=$f(n,t+"scale",e),o=Dn(n,t+"opacity",e),l=rf(n,t+"displacement",e),c=Dn(n,t+"rotation",e),h=nc(n,t+"rotate-with-view",e),u=Dw(n,t+"anchor-origin"),d=Lw(n,t+"anchor-x-units"),g=Lw(n,t+"anchor-y-units"),f=_k(n,t+"color"),m=Ek(n,t+"cross-origin"),p=bk(n,t+"offset"),A=Dw(n,t+"offset-origin"),C=sf(n,t+"width"),v=sf(n,t+"height"),I=wk(n,t+"size"),w=ep(n,t+"declutter-mode"),b=new ns({src:r,anchorOrigin:u,anchorXUnits:d,anchorYUnits:g,color:f,crossOrigin:m,offset:p,offsetOrigin:A,height:v,width:C,size:I,declutterMode:w});return function(_){return o&&b.setOpacity(o(_)),l&&b.setDisplacement(l(_)),c&&b.setRotation(c(_)),h&&b.setRotateWithView(h(_)),a&&b.setScale(a(_)),s&&b.setAnchor(s(_)),b}}function Ik(n,e){const t="shape-",i=t+"points",r=t+"radius",s=IC(n[i],i),a=IC(n[r],r),o=hu(n,t,e),l=uu(n,t,e),c=$f(n,t+"scale",e),h=rf(n,t+"displacement",e),u=Dn(n,t+"rotation",e),d=nc(n,t+"rotate-with-view",e),g=sf(n,t+"radius2"),f=sf(n,t+"angle"),m=ep(n,t+"declutter-mode"),p=new Kf({points:s,radius:a,radius2:g,angle:f,declutterMode:m});return function(A){return o&&p.setFill(o(A)),l&&p.setStroke(l(A)),h&&p.setDisplacement(h(A)),u&&p.setRotation(u(A)),d&&p.setRotateWithView(d(A)),c&&p.setScale(c(A)),p}}function vk(n,e){const t="circle-",i=hu(n,t,e),r=uu(n,t,e),s=Dn(n,t+"radius",e),a=$f(n,t+"scale",e),o=rf(n,t+"displacement",e),l=Dn(n,t+"rotation",e),c=nc(n,t+"rotate-with-view",e),h=ep(n,t+"declutter-mode"),u=new qf({radius:5,declutterMode:h});return function(d){return s&&u.setRadius(s(d)),i&&u.setFill(i(d)),r&&u.setStroke(r(d)),o&&u.setDisplacement(o(d)),l&&u.setRotation(l(d)),c&&u.setRotateWithView(c(d)),a&&u.setScale(a(d)),u}}function Dn(n,e,t){if(!(e in n))return;const i=Zs(n[e],Mt,t);return function(r){return IC(i(r),e)}}function ys(n,e,t){if(!(e in n))return null;const i=Zs(n[e],Fn,t);return function(r){return uM(i(r),e)}}function yk(n,e,t){const i=ys(n,e+"pattern-src",t),r=Bw(n,e+"pattern-offset",t),s=Bw(n,e+"pattern-size",t),a=_0(n,e+"color",t);return function(o){return{src:i(o),offset:r&&r(o),size:s&&s(o),color:a&&a(o)}}}function nc(n,e,t){if(!(e in n))return null;const i=Zs(n[e],An,t);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function _0(n,e,t){if(!(e in n))return null;const i=Zs(n[e],Tr,t);return function(r){return dM(i(r),e)}}function hM(n,e,t){if(!(e in n))return null;const i=Zs(n[e],No,t);return function(r){return Yu(i(r),e)}}function rf(n,e,t){if(!(e in n))return null;const i=Zs(n[e],No,t);return function(r){const s=Yu(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function Bw(n,e,t){if(!(e in n))return null;const i=Zs(n[e],No,t);return function(r){return gM(i(r),e)}}function $f(n,e,t){if(!(e in n))return null;const i=Zs(n[e],No|Mt,t);return function(r){return xk(i(r),e)}}function sf(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wk(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Nn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Ek(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Dw(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Lw(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function bk(n,e){const t=n[e];if(t!==void 0)return Yu(t,e)}function ep(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function _k(n,e){const t=n[e];if(t!==void 0)return dM(t,e)}function Yu(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function uM(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function IC(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function dM(n,e){if(typeof n=="string")return n;const t=Yu(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function gM(n,e){const t=Yu(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function xk(n,e){return typeof n=="number"?n:gM(n,e)}const wr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Pw(n,e,t){return(function(i,r,s,a,o){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,h=o?o[0]:0,u=o?o[1]:0;let d=n[0]+l/2+h,g=n[2]-l/2+h,f=n[1]+c/2+u,m=n[3]-c/2+u;d>g&&(d=(g+d)/2,g=d),f>m&&(f=(m+f)/2,m=f);let p=oi(i[0],d,g),A=oi(i[1],f,m);if(a&&t&&r){const C=30*r;p+=-C*Math.log(1+Math.max(0,d-i[0])/C)+C*Math.log(1+Math.max(0,i[0]-g)/C),A+=-C*Math.log(1+Math.max(0,f-i[1])/C)+C*Math.log(1+Math.max(0,i[1]-m)/C)}return[p,A]})}function Sk(n){return n}function fM(n){return Math.pow(n,3)}function kc(n){return 1-fM(1-n)}function Mk(n){return 3*n*n-2*n*n*n}function Rk(n){return n}function x0(n,e,t,i){const r=Xt(e)/t[0],s=yn(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function S0(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),oi(i,t/2,e*2)}function Tk(n,e,t,i){return e=e!==void 0?e:!0,(function(r,s,a,o){if(r!==void 0){const l=n[0],c=n[n.length-1],h=t?x0(l,t,a,i):l;if(o)return e?S0(r,h,c):oi(r,c,h);const u=Math.min(h,r),d=Math.floor(LI(n,u,s));return n[d]>h&&d<n.length-1?n[d+1]:n[d]}})}function Uk(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(a,o,l,c){if(a!==void 0){const h=r?x0(e,r,l,s):e;if(c)return i?S0(a,h,t):oi(a,t,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(n)-u),g=-o*(.5-u)+.5,f=Math.min(h,a),m=Math.floor(Math.log(e/f)/Math.log(n)+g),p=Math.max(d,m),A=e/Math.pow(n,p);return oi(A,t,h)}})}function Nw(n,e,t,i,r){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const c=i?x0(n,i,o,r):n;return!t||!l?oi(s,e,c):S0(s,c,e)}})}function M0(n){if(n!==void 0)return 0}function kw(n){if(n!==void 0)return n}function Fk(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function Bk(n){const e=Ua(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const Dk=42,R0=256,tA=0;class Ur extends ls{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=p0(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&aP(),e.center&&(e.center=Is(e.center,this.projection_)),e.extent&&(e.extent=Ma(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in wr)delete t[o];this.setProperties(t,!0);const i=Pk(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=Lk(e),s=i.constraint,a=Nk(e);this.constraints_={center:r,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(r[3]-t[3]+t[1]-r[1]),o=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+a,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Is(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Is(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===t){i&&bd(i,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const h=arguments[r],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||Mk,callback:i};if(h.center&&(u.sourceCenter=a,u.targetCenter=h.center.slice(),a=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=o,u.targetResolution=this.getResolutionForZoom(h.zoom),o=u.targetResolution):h.resolution&&(u.sourceResolution=o,u.targetResolution=h.resolution,o=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=yo(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}kk(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(ki.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ki.ANIMATING]>0}getInteracting(){return this.hints_[ki.INTERACTING]>0}cancelAnimations(){this.setHint(ki.ANIMATING,-this.hints_[ki.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&bd(r[0].callback,!1),!e)for(let s=0,a=r.length;s<a;++s){const o=r[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],g=l.sourceCenter[1],f=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=d+u*(f-d),A=g+u*(m-g);this.targetCenter_=[p,A]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,g,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?yo(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(ki.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&bd(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],h0(i,e-this.getRotation()),FL(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-r[0])/s,o=t[1]-e*(t[1]-r[1])/s;i=[a,o]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&gC(e,this.getProjection())}getCenterInternal(){return this.get(wr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return D1(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();zt(t,"The view center is not defined");const i=this.getResolution();zt(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return zt(r!==void 0,"The view rotation is not defined"),cC(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(wr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ma(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=Xt(e)/t[0],r=yn(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(s){return t/Math.pow(e,s*r)})}getRotation(){return this.get(wr.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return(function(a){return Math.log(i/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();r=iA(r,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=LI(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=oi(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,oi(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(zt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){zt(!Zf(e),"Cannot fit empty extent provided as `geometry`");const r=Ma(e,this.getProjection());i=lw(r)}else if(e.getType()==="Circle"){const r=Ma(e.getExtent(),this.getProjection());i=lw(r),i.rotate(this.getRotation(),Do(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=a){const g=s[u]*i-s[u+1]*r,f=s[u]*r+s[u+1]*i;o=Math.min(o,g),l=Math.min(l,f),c=Math.max(c,g),h=Math.max(h,f)}return[o,l,c,h]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=Do(o);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const g=d[0]*u-d[1]*h,f=d[1]*u+d[0]*h,m=this.getConstrainedCenter([g,f],l),p=t.callback?t.callback:Xh;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),bd(p,!0))}centerOn(e,t,i){this.centerOnInternal(Is(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(iA(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-i),l=iA(e,r,[o[0]/2+a[3],o[1]/2+a[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=gC(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Is(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Is(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Is(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,a,s,i,this.calculateCenterShift(this.targetCenter_,a,r,s));this.get(wr.ROTATION)!==r&&this.set(wr.ROTATION,r),this.get(wr.RESOLUTION)!==a&&(this.set(wr.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(wr.CENTER)||!Jg(this.get(wr.CENTER),o))&&this.set(wr.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Jg(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:kc,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ki.INTERACTING,1)}endInteraction(e,t,i){i=i&&Is(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(ki.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function bd(n,e){setTimeout(function(){n(e)},0)}function Lk(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Pw(n.extent,n.constrainOnlyCenter,t)}const e=p0(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Pw(t,!1,!1)}return Sk}function Pk(n){let e,t,i,a=n.minZoom!==void 0?n.minZoom:tA,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,u=n.showFullExtent!==void 0?n.showFullExtent:!1,d=p0(n.projection,"EPSG:3857"),g=d.getExtent();let f=n.constrainOnlyCenter,m=n.extent;if(!c&&!m&&d.isGlobal()&&(f=!1,m=g),n.resolutions!==void 0){const p=n.resolutions;t=p[a],i=p[o]!==void 0?p[o]:p[p.length-1],n.constrainResolution?e=Tk(p,h,!f&&m,u):e=Nw(t,i,h,!f&&m,u)}else{const A=(g?Math.max(Xt(g),yn(g)):360*u0.degrees/d.getMetersPerUnit())/R0/Math.pow(2,tA),C=A/Math.pow(2,28-tA);t=n.maxResolution,t!==void 0?a=0:t=A/Math.pow(l,a),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,o):i=A/Math.pow(l,o):i=C),o=a+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,o-a),n.constrainResolution?e=Uk(l,t,i,h,!f&&m,u):e=Nw(t,i,h,!f&&m,u)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:a,zoomFactor:l}}function Nk(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?Bk():t===!1?kw:typeof t=="number"?Fk(t):kw}return M0}function kk(n){return!(n.sourceCenter&&n.targetCenter&&!Jg(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function iA(n,e,t,i,r){const s=Math.cos(-r);let a=Math.sin(-r),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,a=-a;const c=o*s-l*a,h=l*s+o*a;return[c,h]}const Wt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class pM extends ls{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Wt.OPACITY]=e.opacity!==void 0?e.opacity:1,zt(typeof t[Wt.OPACITY]=="number","Layer opacity must be a number"),t[Wt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Wt.Z_INDEX]=e.zIndex,t[Wt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Wt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Wt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Wt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=oi(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Dt()}getLayerStatesArray(e){return Dt()}getExtent(){return this.get(Wt.EXTENT)}getMaxResolution(){return this.get(Wt.MAX_RESOLUTION)}getMinResolution(){return this.get(Wt.MIN_RESOLUTION)}getMinZoom(){return this.get(Wt.MIN_ZOOM)}getMaxZoom(){return this.get(Wt.MAX_ZOOM)}getOpacity(){return this.get(Wt.OPACITY)}getSourceState(){return Dt()}getVisible(){return this.get(Wt.VISIBLE)}getZIndex(){return this.get(Wt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Wt.EXTENT,e)}setMaxResolution(e){this.set(Wt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Wt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Wt.MAX_ZOOM,e)}setMinZoom(e){this.set(Wt.MIN_ZOOM,e)}setOpacity(e){zt(typeof e=="number","Layer opacity must be a number"),this.set(Wt.OPACITY,e)}setVisible(e){this.set(Wt.VISIBLE,e)}setZIndex(e){this.set(Wt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class tp extends pM{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Wt.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Wt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ii(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Lt(e,pt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Ur?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(a=>a.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return T0(r,t.viewState)&&(!s||Bn(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const i=e instanceof Ur?e.getViewStateAndExtent():e;let r=t(i);return Array.isArray(r)||(r=[r]),r}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Wt.MAP,e)}getMapInternal(){return this.get(Wt.MAP)}setMap(e){this.mapPrecomposeKey_&&(ii(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ii(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Lt(e,gr.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Lt(this,pt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);zt(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Wt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function T0(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const Qw={RENDER_ORDER:"renderOrder"};class AM extends tp{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Qw.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new eM(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Qw.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?iM:e;const t=Qk(e);this.styleFunction_=e===null?void 0:yN(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function Qk(n){if(n===void 0)return iM;if(!n)return null;if(typeof n=="function"||n instanceof Xi)return n;if(!Array.isArray(n))return Fw([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Xi){const r=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof Xi))throw new Error("Expected a list of style instances");r[s]=a}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");r[s]=a}return fk(r)}return Fw(n)}class _d extends AM{constructor(e){super(e)}createRenderer(){return new zN(this)}}const je={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class U0 extends Bu{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(pt.CHANGE)}release(){this.setState(je.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==je.EMPTY){if(this.state!==je.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Dt()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:fM(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class mM extends U0{constructor(e,t,i,r,s,a){super(e,t,a),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_,hr?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,r!==null&&(this.image_.crossOrigin=r)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=je.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=je.ERROR,this.unlistenImage_(),this.image_=Ok(),this.changed()}handleImageLoad_(){if(hr)this.state=je.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=je.LOADED:this.state=je.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==je.ERROR&&(this.state=je.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==je.IDLE&&(this.state=je.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=QP(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Ok(){const n=xi(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}class Vk{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],a=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class lr extends zs{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class fa extends lr{constructor(e,t,i,r,s,a){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ci={SINGLECLICK:"singleclick",CLICK:pt.CLICK,DBLCLICK:pt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},vC={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class zk extends Bu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Lt(i,vC.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Lt(i,vC.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_,Gx?{passive:!1}:!1)}emulateClick_(e){let t=new fa(ci.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new fa(ci.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new fa(ci.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==ci.POINTERUP||t.type==ci.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==ci.POINTERDOWN||t.type==ci.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new fa(ci.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ii),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new fa(ci.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Lt(i,ci.POINTERMOVE,this.handlePointerMove_,this),Lt(i,ci.POINTERUP,this.handlePointerUp_,this),Lt(this.element_,ci.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(Lt(this.element_.getRootNode(),ci.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new fa(ci.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new fa(ci.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ii(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(pt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ii(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ii),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const pa={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},tn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},af=1/0;class Gk{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Fu(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){zt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=af?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],a=i[e],o=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),h=c<r&&i[c]<i[l]?c:l;t[e]=t[h],i[e]=i[h],e=h}t[e]=s,i[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],a=r[t];for(;t>e;){const o=this.getParentIndex_(t);if(r[o]>a)i[t]=i[o],r[t]=r[o],t=o;else break}i[t]=s,r[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==af?delete this.queuedElements_[this.keyFunction_(a)]:(i[r]=l,t[r++]=a);t.length=r,i.length=r,this.heapify_()}}class Wk extends Gk{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(pt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===je.LOADED||i===je.ERROR||i===je.EMPTY){i!==je.ERROR&&t.removeEventListener(pt.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const r=this.dequeue()[0],s=r.getKey();r.getState()===je.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,r.load())}}}function Zk(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return af;const s=n.viewState.center,a=i[0]-s[0],o=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+o*o)/r}class ko extends ls{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,r=this.listenerKeys.length;i<r;++i)ii(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==Xh&&this.listenerKeys.push(Lt(e,pa.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Hk extends ko{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=r):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Ju+" "+jf+(this.collapsed_&&this.collapsible_?" "+hw:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(r=>r.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(r=>i.add(r)):i.add(this.attributions_)),!this.overrideCollapsible_){const r=!t.some(s=>{var a;return((a=s.getSource())==null?void 0:a.getAttributionsCollapsible())===!1});this.setCollapsible(r)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(r=>EU(()=>r))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Va(t,this.renderedAttributions_)){SU(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const a=document.createElement("li");a.innerHTML=t[r],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(hw),this.collapsed_?Nv(this.collapseLabel_,this.label_):Nv(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class CM extends ko{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(pt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Ju+" "+jf,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Cd)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:kc}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Cd);!s&&i===0?this.element.classList.add(Cd):s&&i!==0&&this.element.classList.remove(Cd)}this.label_.style.transform=r}this.rotation_=i}}let IM=class extends ko{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=r,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(pt.CLICK,this.handleClick_.bind(this,i),!1);const u=document.createElement("button");u.className=s,u.setAttribute("type","button"),u.title=c,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(pt.CLICK,this.handleClick_.bind(this,-i),!1);const d=t+" "+Ju+" "+jf,g=this.element;g.className=d,g.appendChild(h),g.appendChild(u),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:kc})):i.setZoom(s)}}};function Xk(n){n=n||{};const e=new dr;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new IM(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new CM(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new Hk(n.attributionOptions)),e}const Ow={ACTIVE:"active"};class Ku extends ls{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ow.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Ow.ACTIVE,e)}setMap(e){this.map_=e}}function Jk(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:Rk,center:n.getConstrainedCenter(r)})}}function F0(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:i!==void 0?i:250,easing:kc})}class jk extends Ku{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==ci.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=r.getView();F0(o,a,s,this.duration_),i.preventDefault(),t=!0}return!t}}function yC(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const Yk=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Kk=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},vM=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?Kk(n):!0},qk=Hh,yM=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(_U&&Vx&&e.ctrlKey)},wM=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},$k=function(n){const e=n.originalEvent;return Vx?e.metaKey:e.ctrlKey},e3=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},EM=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},nA=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},t3=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class qu extends Ku{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ci.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ci.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==ci.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==ci.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function B0(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}class i3 extends qu{constructor(e){super({stopDown:Rf}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:yC(wM,t3);this.condition_=e.onFocusOnly?yC(vM,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(B0(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],o=e.map.getView();BL(s,o.getResolution()),h0(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-r*Math.cos(s),o[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:kc})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class n3 extends qu{constructor(e){e=e||{},super({stopDown:Rf}),this.condition_=e.condition?e.condition:Yk,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!nA(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===M0)return;const r=t.getSize(),s=e.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return nA(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return nA(e)&&yM(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class r3 extends Mf{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new su([r])}getGeometry(){return this.geometry_}}const cl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class $c extends zs{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class s3 extends qu{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new r3(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??yM,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new $c(cl.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new $c(t?cl.BOXEND:cl.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new $c(cl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new $c(cl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new $c(cl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class a3 extends s3{constructor(e){e=e||{};const t=e.condition?e.condition:e3;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),a=i.getResolutionForExtentInternal(s),o=i.getResolution()/a;r=r.clone(),r.scale(o*o)}i.fitInternal(r,{duration:this.duration_,easing:kc})}}const Za={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class o3 extends Ku{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return wM(t)&&EM(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==pt.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Za.DOWN||r==Za.LEFT||r==Za.RIGHT||r==Za.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,c=0;r==Za.DOWN?c=-o:r==Za.LEFT?l=-o:r==Za.RIGHT?l=o:c=o;const h=[l,c];h0(h,a.getRotation()),Jk(a,h,this.duration_),i.preventDefault(),t=!0}}return!t}}class l3 extends Ku{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!$k(t)&&EM(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==pt.KEYDOWN||e.type==pt.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,a=r==="+"?this.delta_:-this.delta_,o=s.getView();F0(o,a,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const c3=40,h3=300;class u3 extends Ku{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:qk;this.condition_=e.onFocusOnly?yC(vM,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==pt.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=r.deltaY;switch(r.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=c3;break;case WheelEvent.DOM_DELTA_PAGE:s*=h3;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=i.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-oi(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),F0(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class d3 extends qu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Rf),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==M0&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(B0(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class g3 extends qu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=Rf),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,a=i.clientY-r.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(B0(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function f3(n){n=n||{};const e=new dr,t=new Vk(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new n3),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new jk({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new i3({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new d3),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new g3({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new o3),e.push(new l3({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new u3({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new a3({duration:n.zoomDuration})),e}const na={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Ia extends zs{constructor(e,t){super(e),this.layer=t}}const rA={LAYERS:"layers"};class Ko extends pM{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(rA.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new dr(i.slice(),{unique:!0}):zt(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new dr(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ii),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Lt(e,Tn.ADD,this.handleLayersAdd_,this),Lt(e,Tn.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(ii);Fu(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new Ia(na.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[Lt(e,wc.PROPERTYCHANGE,this.handleLayerChange_,this),Lt(e,pt.CHANGE,this.handleLayerChange_,this)];e instanceof Ko&&t.push(Lt(e,na.ADDLAYER,this.handleLayerGroupAdd_,this),Lt(e,na.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Pt(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ia(na.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ia(na.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ia(na.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Pt(t);this.listenerKeys_[i].forEach(ii),delete this.listenerKeys_[i],this.dispatchEvent(new Ia(na.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(rA.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new Ia(na.REMOVELAYER,i[r]))}this.set(rA.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let a=i,o=t.length;a<o;a++){const l=t[a];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=bo(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class p3 extends Mf{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Dt()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Ps(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),L1(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,a,o,l){let c;const h=t.viewState;function u(I,w,b,_){return s.call(a,w,I?b:null,_)}const d=h.projection,g=M1(e.slice(),d),f=[[0,0]];if(d.canWrapX()&&r){const I=d.getExtent(),w=Xt(I);f.push([-w,0],[w,0])}const m=t.layerStatesArray,p=m.length,A=[],C=[];for(let I=0;I<f.length;I++)for(let w=p-1;w>=0;--w){const b=m[w],_=b.layer;if(_.hasRenderer()&&T0(b,h)&&o.call(l,_)){const x=_.getRenderer(),y=_.getSource();if(x&&y){const E=y.getWrapX()?g:e,S=u.bind(null,b.managed);C[0]=E[0]+f[I][0],C[1]=E[1]+f[I][1],c=x.forEachFeatureAtCoordinate(C,t,i,S,A)}if(c)return c}}if(A.length===0)return;const v=1/A.length;return A.forEach((I,w)=>I.distanceSq+=w*v),A.sort((I,w)=>I.distanceSq-w.distanceSq),A.some(I=>c=I.callback(I.feature,I.layer,I.geometry)),c}hasFeatureAtCoordinate(e,t,i,r,s,a){return this.forEachFeatureAtCoordinate(e,t,i,r,Hh,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Dt()}scheduleExpireIconCache(e){fr.canExpireCache()&&e.postRenderFunctions.push(A3)}}function A3(n,e){fr.expire()}class m3 extends p3{constructor(e){super(e),this.fontChangeListenerKey_=Lt(Nl,wc.PROPERTYCHANGE,e.redrawText,e),this.element_=hr?Wx():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ju+" ol-layers";const i=e.getViewport();i&&i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new sM(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){ii(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(gr.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,h)=>c.zIndex-h.zIndex);t.some(c=>c.layer instanceof AM&&c.layer.getDeclutter())&&(e.declutter={});const r=e.viewState;this.children_.length=0;const s=[];let a=null;for(let c=0,h=t.length;c<h;++c){const u=t[c];e.layerIndex=c;const d=u.layer,g=d.getSourceState();if(!T0(u,r)||g!="ready"&&g!="undefined"){d.unrender();continue}const f=d.render(e,a);f&&(f!==a&&(this.children_.push(f),a=f),s.push(u))}this.declutter(e,s),MU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(_a(l)){const c=l.getContext("2d");for(const h of this.children_){const u=h.firstElementChild||h,d=h.style.backgroundColor;if(d&&(!_a(u)||u.width>0)&&(c.fillStyle=d,c.fillRect(0,0,l.width,l.height)),_a(u)&&u.width>0){const g=h.style.opacity||u.style.opacity;c.globalAlpha=g===""?1:Number(g);const f=u.style.transform;if(f)c.setTransform(...fC(f));else{const m=parseFloat(u.style.width)/u.width,p=parseFloat(u.style.height)/u.height;c.setTransform(m,0,0,p,0,0)}c.drawImage(u,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(gr.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const r=t[i],s=r.layer;s.getDeclutter()&&s.renderDeclutter(e,r)}t.forEach(i=>i.layer.renderDeferred(e))}}}function bM(n){if(n instanceof tp){n.setMapInternal(null);return}n instanceof Ko&&n.getLayers().forEach(bM)}function _M(n,e){if(n instanceof tp){n.setMapInternal(e);return}if(n instanceof Ko){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)_M(t[i],e)}}let C3=class extends ls{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=I3(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:xU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Nr(),this.pixelToCoordinateTransform_=Nr(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,hr||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,hr||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(hr?new dr:Xk()),this.interactions=t.interactions||(hr?new dr:f3({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Wk(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(tn.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(tn.VIEW,this.handleViewChanged_),this.addChangeListener(tn.SIZE,this.handleSizeChanged_),this.addChangeListener(tn.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Ur)&&e.view.then(function(r){i.setView(new Ur(r))}),this.controls.addEventListener(Tn.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Tn.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Tn.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Tn.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Tn.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Tn.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){_M(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){var e;this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),(e=this.resizeObserver_)==null||e.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:Hh,o=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof Ko?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Hh,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,a,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],a=i.height/r[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-i.left)/s,(o.clientY-i.top)/a]}getTarget(){return this.get(tn.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return gC(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Ni(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(tn.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof dr){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const a=r.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Is(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Ni(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(tn.SIZE)}getView(){return this.get(tn.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return Zk(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new fa(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===vC.POINTERDOWN||i===pt.WHEEL||i===pt.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===r?r.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const a=r[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const a=e.viewHints;if(a[ki.ANIMATING]||a[ki.INTERACTING]){const o=Date.now()-e.time>8;r=o?0:8,s=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(gr.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(gr.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new lr(pa.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new lr(pa.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){var i,r;if(this.mapBrowserEventHandler_){for(let s=0,a=this.targetChangeHandlerKeys_.length;s<a;++s)ii(this.targetChangeHandlerKeys_[s]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(pt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!_a(this.targetElement_)){(i=this.resizeObserver_)==null||i.unobserve(this.targetElement_);const s=this.targetElement_.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.unobserve(s.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(_a(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new m3(this)),!_a(t)){this.mapBrowserEventHandler_=new zk(this,this.moveTolerance_);for(const a in ci)this.mapBrowserEventHandler_.addEventListener(ci[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(pt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(pt.WHEEL,this.boundHandleBrowserEvent_,Gx?{passive:!1}:!1);let s;if(this.keyboardEventTarget_)s=this.keyboardEventTarget_;else{const a=t.getRootNode();s=a instanceof ShadowRoot?a.host:t}if(this.targetChangeHandlerKeys_=[Lt(s,pt.KEYDOWN,this.handleBrowserEvent,this),Lt(s,pt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const a=t.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.observe(a.host),(r=this.resizeObserver_)==null||r.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ii(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ii(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Lt(e,wc.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Lt(e,pt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ii),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ia("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Lt(e,wc.PROPERTYCHANGE,this.render,this),Lt(e,pt.CHANGE,this.render,this),Lt(e,"addlayer",this.handleLayerAdd_,this),Lt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){bM(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&yw(t)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:cC(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:Pt(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=cC(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Zf(this.previousExtent_)&&!iu(s.extent,this.previousExtent_))&&(this.dispatchEvent(new lr(pa.MOVESTART,this,r)),this.previousExtent_=Gf(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ki.ANIMATING]&&!s.viewHints[ki.INTERACTING]&&!iu(s.extent,this.previousExtent_)&&(this.dispatchEvent(new lr(pa.MOVEEND,this,s)),I1(s.extent,this.previousExtent_))),this.dispatchEvent(new lr(pa.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(pa.LOADSTART)||this.hasListener(pa.LOADEND)||this.hasListener(gr.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ia("removelayer",t)),this.set(tn.LAYERGROUP,e)}setSize(e){this.set(tn.SIZE,e)}setTarget(e){this.set(tn.TARGET,e)}setView(e){if(!e||e instanceof Ur){this.set(tn.VIEW,e);return}this.set(tn.VIEW,new Ur);const t=this;e.then(function(i){t.setView(new Ur(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){let r,s;if(_a(e))r=e.width,s=e.height;else{const a=getComputedStyle(e);r=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(r)&&!isNaN(s)&&(t=[Math.max(0,r),Math.max(0,s)],!yw(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&C1("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!Va(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function I3(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Ko({layers:n.layers});t[tn.LAYERGROUP]=i,t[tn.TARGET]=n.target,t[tn.VIEW]=n.view instanceof Ur?n.view:new Ur;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new dr(n.controls.slice()):(zt(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new dr(n.interactions.slice()):(zt(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new dr(n.overlays.slice()):(zt(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new dr,{controls:r,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}class D0{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function hl(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new D0(n,e,t,i)}function wC(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const v3=new Error("disposed"),y3=[256,256];class Vw extends U0{constructor(e){const t=je.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=wC(this.data_);return e?[e.width,e.height]:y3}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==je.IDLE&&this.state!==je.ERROR)return;this.state=je.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=je.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=je.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(v3),this.controller_=null),super.disposeInternal()}}let sA;const rc=[];function zw(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function aA(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function w3(){if(sA===void 0){const n=xi(6,6,rc);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",zw(n,4,5,4,0),zw(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;sA=aA(e,0)||aA(e,4)||aA(e,8),Tf(n),rc.push(n.canvas)}return sA}function Gw(n,e,t,i){const r=nn(t,e,n);let s=$y(e,i,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Ic(l,r)){const c=$y(n,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function E3(n,e,t,i){const r=Do(t);let s=Gw(n,e,r,i);return(!isFinite(s)||s<=0)&&b1(t,function(a){return s=Gw(n,e,a,i),isFinite(s)&&s>0}),s}function b3(n,e,t,i,r,s,a,o,l,c,h,u,d,g){const f=xi(Math.round(t*n),Math.round(t*e),rc);if(u||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function m(w){return Math.round(w*t)/t}f.globalCompositeOperation="lighter";const p=yr();l.forEach(function(w,b,_){SL(p,w.extent)});let A;const C=t/i,v=(u?1:1+Math.pow(2,-24))/C;A=xi(Math.round(Xt(p)*C),Math.round(yn(p)*C),rc),u||(A.imageSmoothingEnabled=!1),l.forEach(function(w,b,_){if(w.image.width>0&&w.image.height>0){if(w.clipExtent){A.save();const R=(w.clipExtent[0]-p[0])*C,M=-(w.clipExtent[3]-p[3])*C,T=Xt(w.clipExtent)*C,P=yn(w.clipExtent)*C;A.rect(u?R:Math.round(R),u?M:Math.round(M),u?T:Math.round(R+T)-Math.round(R),u?P:Math.round(M+P)-Math.round(M)),A.clip()}const x=(w.extent[0]-p[0])*C,y=-(w.extent[3]-p[3])*C,E=Xt(w.extent)*C,S=yn(w.extent)*C;A.drawImage(w.image,c,c,w.image.width-2*c,w.image.height-2*c,u?x:Math.round(x),u?y:Math.round(y),u?E:Math.round(x+E)-Math.round(x),u?S:Math.round(y+S)-Math.round(y)),w.clipExtent&&A.restore()}});const I=jo(a);return o.getTriangles().forEach(function(w,b,_){const x=w.source,y=w.target;let E=x[0][0],S=x[0][1],R=x[1][0],M=x[1][1],T=x[2][0],P=x[2][1];const F=m((y[0][0]-I[0])/s),N=m(-(y[0][1]-I[1])/s),L=m((y[1][0]-I[0])/s),W=m(-(y[1][1]-I[1])/s),ne=m((y[2][0]-I[0])/s),de=m(-(y[2][1]-I[1])/s),ee=E,Me=S;E=0,S=0,R-=ee,M-=Me,T-=ee,P-=Me;const G=[[R,M,0,0,L-F],[T,P,0,0,ne-F],[0,0,R,M,W-N],[0,0,T,P,de-N]],te=TU(G);if(!te)return;if(f.save(),f.beginPath(),w3()||!u){f.moveTo(L,W);const le=4,xe=F-L,Re=N-W;for(let Fe=0;Fe<le;Fe++)f.lineTo(L+m((Fe+1)*xe/le),W+m(Fe*Re/(le-1))),Fe!=le-1&&f.lineTo(L+m((Fe+1)*xe/le),W+m((Fe+1)*Re/(le-1)));f.lineTo(ne,de)}else f.moveTo(L,W),f.lineTo(F,N),f.lineTo(ne,de);f.clip(),f.transform(te[0],te[2],te[1],te[3],F,N),f.translate(p[0]-ee,p[3]-Me);let we;if(A)we=A.canvas,f.scale(v,-v);else{const le=l[0],xe=le.extent;we=le.image,f.scale(Xt(xe)/we.width,-yn(xe)/we.height)}f.drawImage(we,0,0),f.restore()}),A&&(Tf(A),rc.push(A.canvas)),h&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,o.getTriangles().forEach(function(w,b,_){const x=w.target,y=(x[0][0]-I[0])/s,E=-(x[0][1]-I[1])/s,S=(x[1][0]-I[0])/s,R=-(x[1][1]-I[1])/s,M=(x[2][0]-I[0])/s,T=-(x[2][1]-I[1])/s;f.beginPath(),f.moveTo(S,R),f.lineTo(y,E),f.lineTo(M,T),f.closePath(),f.stroke()}),f.restore()),f.canvas}const _3=10,Ww=.25;class x3{constructor(e,t,i,r,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const c=o?dC(v=>Ni(o,nn(v,this.targetProj_,this.sourceProj_))):_o(this.targetProj_,this.sourceProj_);this.transformInv_=function(v){const I=v[0]+"/"+v[1];return l[I]||(l[I]=c(v)),l[I]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Xt(r)>=Xt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xt(this.targetProj_.getExtent()):null;const h=jo(i),u=Zu(i),d=Wf(i),g=Wu(i),f=this.transformInv_(h),m=this.transformInv_(u),p=this.transformInv_(d),A=this.transformInv_(g),C=_3+(a?Math.max(0,Math.ceil(Math.log2(lC(i)/(a*a*256*256)))):0);if(this.addQuad_(h,u,d,g,f,m,p,A,C),this.wrapsXInSource_){let v=1/0;this.triangles_.forEach(function(I,w,b){v=Math.min(v,I.source[0][0],I.source[1][0],I.source[2][0])}),this.triangles_.forEach(I=>{if(Math.max(I.source[0][0],I.source[1][0],I.source[2][0])-v>this.sourceWorldWidth_/2){const w=[[I.source[0][0],I.source[0][1]],[I.source[1][0],I.source[1][1]],[I.source[2][0],I.source[2][1]]];w[0][0]-v>this.sourceWorldWidth_/2&&(w[0][0]-=this.sourceWorldWidth_),w[1][0]-v>this.sourceWorldWidth_/2&&(w[1][0]-=this.sourceWorldWidth_),w[2][0]-v>this.sourceWorldWidth_/2&&(w[2][0]-=this.sourceWorldWidth_);const b=Math.min(w[0][0],w[1][0],w[2][0]);Math.max(w[0][0],w[1][0],w[2][0])-b<this.sourceWorldWidth_/2&&(I.source=w)}})}l={}}addTriangle_(e,t,i,r,s,a){this.triangles_.push({source:[r,s,a],target:[e,t,i]})}addQuad_(e,t,i,r,s,a,o,l,c){const h=Wy([s,a,o,l]),u=this.sourceWorldWidth_?Xt(h)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&u>.5&&u<1;let f=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const p=Wy([e,t,i,r]);f=Xt(p)/this.targetWorldWidth_>Ww||f}!g&&this.sourceProj_.isGlobal()&&u&&(f=u>Ww||f)}if(!f&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Bn(h,this.maxSourceExtent_))return;let m=0;if(!f&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)f=!0;else if(m=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!f){const p=[(e[0]+i[0])/2,(e[1]+i[1])/2],A=this.transformInv_(p);let C;g?C=(yo(s[0],d)+yo(o[0],d))/2-yo(A[0],d):C=(s[0]+o[0])/2-A[0];const v=(s[1]+o[1])/2-A[1];f=C*C+v*v>this.errorThresholdSquared_}if(f){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const p=[(t[0]+i[0])/2,(t[1]+i[1])/2],A=this.transformInv_(p),C=[(r[0]+e[0])/2,(r[1]+e[1])/2],v=this.transformInv_(C);this.addQuad_(e,t,p,C,s,a,A,v,c-1),this.addQuad_(C,p,i,r,v,A,o,l,c-1)}else{const p=[(e[0]+t[0])/2,(e[1]+t[1])/2],A=this.transformInv_(p),C=[(i[0]+r[0])/2,(i[1]+r[1])/2],v=this.transformInv_(C);this.addQuad_(e,p,C,r,s,A,v,l,c-1),this.addQuad_(p,t,i,C,A,a,o,v,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(m&11)==0&&this.addTriangle_(e,i,r,s,o,l),(m&14)==0&&this.addTriangle_(e,i,t,s,o,a),m&&((m&13)==0&&this.addTriangle_(t,r,e,a,l,s),(m&7)==0&&this.addTriangle_(t,r,i,a,l,o))}calculateSourceExtent(){const e=yr();return this.triangles_.forEach(function(t,i,r){const s=t.source;Qh(e,s[0]),Qh(e,s[1]),Qh(e,s[2])}),e}getTriangles(){return this.triangles_}}const S3=.5;class xM extends U0{constructor(e,t,i,r,s,a,o,l,c,h,u,d){super(s,je.IDLE,d),this.renderEdges_=u!==void 0?u:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=r.getTileCoordExtent(this.wrappedTileCoord_),f=this.targetTileGrid_.getExtent();let m=this.sourceTileGrid_.getExtent();const p=f?bo(g,f):g;if(lC(p)===0){this.state=je.EMPTY;return}const A=e.getExtent();A&&(m?m=bo(m,A):m=A);const C=r.getResolution(this.wrappedTileCoord_[0]),v=E3(e,i,p,C);if(!isFinite(v)||v<=0){this.state=je.EMPTY;return}const I=h!==void 0?h:S3;if(this.triangulation_=new x3(e,i,p,m,v*I,C),this.triangulation_.getTriangles().length===0){this.state=je.EMPTY;return}this.sourceZ_=t.getZForResolution(v);let w=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(w[1]=oi(w[1],m[1],m[3]),w[3]=oi(w[3],m[1],m[3])):w=bo(w,m)),!lC(w))this.state=je.EMPTY;else{let b=0,_=0;e.canWrapX()&&(b=Xt(A),_=Math.floor((w[0]-A[0])/b)),S1(w.slice(),e,!0).forEach(y=>{const E=t.getTileRangeForExtentAndZ(y,this.sourceZ_);for(let S=E.minX;S<=E.maxX;S++)for(let R=E.minY;R<=E.maxY;R++){const M=c(this.sourceZ_,S,R,o);if(M){const T=_*b;this.sourceTiles_.push({tile:M,offset:T})}}++_}),this.sourceTiles_.length===0&&(this.state=je.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var r;const i=t.tile;if(i&&i.getState()==je.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=(r=this.clipExtent_)==null?void 0:r.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=je.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=b3(r,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=je.LOADED}this.changed()}load(){if(this.state==je.IDLE){this.state=je.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==je.IDLE||i==je.LOADING){e++;const r=Lt(t,pt.CHANGE,s=>{const a=t.getState();(a==je.LOADED||a==je.ERROR||a==je.EMPTY)&&(ii(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,r){t.getState()==je.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ii),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Tf(this.canvas_.getContext("2d")),rc.push(this.canvas_),this.canvas_=null),super.release()}}class Zw{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Mf&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return zt(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return zt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){zt(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function of(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function M3(n,e,t){return n+"/"+e+"/"+t}function xg(n,e,t,i,r){return`${Pt(n)},${e},${M3(t,i,r)}`}function R3(n){return T3(n[0],n[1],n[2])}function T3(n,e,t){return(e<<n)+t}function U3(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}function oA(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],r=i.has(e);return r||i.add(e),!r}function F3(n,e,t){const i=n[t];return i?i.delete(e):!1}function Hw(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=bo(e,Ma(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const r=i.getTileGridForProjection(n.viewState.projection).getExtent();r&&(e=bo(e,r))}return e}class B3 extends aM{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=yr(),this.tempTileRange_=new D0(0,0,0,0),this.tempTileCoord_=of(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Zw(i),this.sourceTileCache_=null,this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new Zw(512)),this.sourceTileCache_}getOrCreateTile(e,t,i,r){const s=this.tileCache_,o=this.getLayer().getSource(),l=xg(o,o.getKey(),e,t,i);let c;if(s.containsKey(l))c=s.get(l);else{const h=r.viewState.projection,u=o.getProjection();if(c=o.getTile(e,t,i,r.pixelRatio,h,!u||_g(u,h)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,t,i,r){const s=this.getOrCreateTile(e,t,i,r);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=Ni(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!Ic(s,r))return null;const a=t.viewState,o=i.getRenderSource(),l=o.getTileGridForProjection(a.projection),c=o.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(a.resolution);h>=l.getMinZoom();--h){const u=l.getTileCoordForCoordAndZ(r,h),d=this.getTile(h,u[1],u[2],t);if(!d||d.getState()!==je.LOADED)continue;const g=l.getOrigin(h),f=Nn(l.getTileSize(h)),m=l.getResolution(h);let p;if(d instanceof mM||d instanceof xM)p=d.getImage();else if(d instanceof Vw){if(p=wC(d.getData()),!p)continue}else continue;const A=Math.floor(c*((r[0]-g[0])/m-u[1]*f[0])),C=Math.floor(c*((g[1]-r[1])/m-u[2]*f[1])),v=Math.round(c*o.getGutterForProjection(a.projection));return this.getImageData(p,A+v,C+v)}return null}prepareFrame(e){var r;this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),(r=this.sourceTileCache_)==null||r.clear())):this.renderedSourceRevision_=i,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,i,r,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),c=l.getTileGridForProjection(a.projection),h=Pt(l);h in e.wantedTiles||(e.wantedTiles[h]={});const u=e.wantedTiles[h],d=o.getMapInternal(),g=Math.max(i-s,c.getMinZoom(),c.getZForResolution(Math.min(o.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),f=a.rotation,m=f?_1(a.center,a.resolution,f,e.size):void 0;for(let p=i;p>=g;--p){const A=c.getTileRangeForExtentAndZ(t,p,this.tempTileRange_),C=c.getResolution(p);for(let v=A.minX;v<=A.maxX;++v)for(let I=A.minY;I<=A.maxY;++I){if(f&&!c.tileCoordIntersectsViewport([p,v,I],m))continue;const w=this.getTile(p,v,I,e);if(!w||!oA(r,w,p))continue;const _=w.getKey();if(u[_]=!0,w.getState()===je.IDLE&&!e.tileQueue.isKeyQueued(_)){const x=of(p,v,I,this.tempTileCoord_);e.tileQueue.enqueue([w,h,c.getTileCoordCenter(x),C])}}}}findStaleTile_(e,t){const i=this.tileCache_,r=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const c=xg(this.getLayer().getSource(),o[l],r,s,a);if(i.containsKey(c)){const h=i.peek(c);if(h.getState()===je.LOADED)return h.endTransition(Pt(this)),oA(t,h,r),!0}}return!1}findAltTiles_(e,t,i,r){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let u=s.minY;u<=s.maxY;++u){const d=xg(l,c,i,h,u);let g=!1;if(o.containsKey(d)){const f=o.peek(d);f.getState()===je.LOADED&&(oA(r,f,i),g=!0)}g||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,a=r.resolution,o=r.center,l=e.pixelRatio,c=this.getLayer(),h=c.getSource(),u=h.getTileGridForProjection(s),d=u.getZForResolution(a,h.zDirection),g=u.getResolution(d),f=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==f&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=f):this.renderedSourceKey_=f;let m=e.extent;const p=h.getTilePixelRatio(l);this.prepareContainer(e,t);const A=this.context.canvas.width,C=this.context.canvas.height,v=i.extent&&Ma(i.extent);v&&(m=bo(m,Ma(i.extent)));const I=g*A/2/p,w=g*C/2/p,b=[o[0]-I,o[1]-w,o[0]+I,o[1]+w],_={};this.renderedTiles.length=0;const x=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const L=u.getZForResolution(r.nextResolution,h.zDirection),W=Hw(e,e.nextExtent);this.enqueueTiles(e,W,L,_,x)}const y=Hw(e,m);if(this.enqueueTiles(e,y,d,_,0),x>0&&setTimeout(()=>{this.enqueueTiles(e,y,d-1,_,x-1)},0),!(d in _))return this.container;const E=Pt(this),S=e.time;for(const L of _[d]){const W=L.getState();if(W===je.EMPTY)continue;const ne=L.tileCoord;if(W===je.LOADED&&L.getAlpha(E,S)===1){L.endTransition(E);continue}if(W!==je.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ne,_)){F3(_,L,d),e.animate=!0;continue}if(this.findAltTiles_(u,ne,d+1,_))continue;const Me=u.getMinZoom();for(let G=d-1;G>=Me&&!this.findAltTiles_(u,ne,G,_);--G);}const R=g/a*l/p,M=this.getRenderContext(e);Ps(this.tempTransform,A/2,C/2,R,R,0,-A/2,-C/2),i.extent&&this.clipUnrotated(M,e,v),h.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,e);const T=Object.keys(_).map(Number);T.sort(xs);let P;const F=[],N=[];for(let L=T.length-1;L>=0;--L){const W=T[L],ne=h.getTilePixelSize(W,l,s),ee=u.getResolution(W)/g,Me=ne[0]*ee*R,G=ne[1]*ee*R,te=u.getTileCoordForCoordAndZ(jo(b),W),we=u.getTileCoordExtent(te),le=Ni(this.tempTransform,[p*(we[0]-b[0])/g,p*(b[3]-we[3])/g]),xe=p*h.getGutterForProjection(s);for(const Re of _[W]){if(Re.getState()!==je.LOADED)continue;const Fe=Re.tileCoord,Ve=te[1]-Fe[1],$e=Math.round(le[0]-(Ve-1)*Me),xt=te[2]-Fe[2],z=Math.round(le[1]-(xt-1)*G),St=Math.round(le[0]-Ve*Me),Ze=Math.round(le[1]-xt*G),We=$e-St,Le=z-Ze,ht=T.length===1;let Pe=!1;P=[St,Ze,St+We,Ze,St+We,Ze+Le,St,Ze+Le];for(let k=0,U=F.length;k<U;++k)if(!ht&&W<N[k]){const Y=F[k];Bn([St,Ze,St+We,Ze+Le],[Y[0],Y[3],Y[4],Y[7]])&&(Pe||(M.save(),Pe=!0),M.beginPath(),M.moveTo(P[0],P[1]),M.lineTo(P[2],P[3]),M.lineTo(P[4],P[5]),M.lineTo(P[6],P[7]),M.moveTo(Y[6],Y[7]),M.lineTo(Y[4],Y[5]),M.lineTo(Y[2],Y[3]),M.lineTo(Y[0],Y[1]),M.clip())}F.push(P),N.push(W),this.drawTile(Re,e,St,Ze,We,Le,xe,ht),Pe&&M.restore(),this.renderedTiles.unshift(Re),this.updateUsedTiles(e.usedTiles,h,Re)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!iu(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=l,this.postRender(this.context,e),i.extent&&M.restore(),M.imageSmoothingEnabled=!0,this.renderComplete){const L=(W,ne)=>{var G;const de=Pt(h),ee=ne.wantedTiles[de],Me=ee?Object.keys(ee).length:0;this.updateCacheSize(Me),this.tileCache_.expireCache(),(G=this.sourceTileCache_)==null||G.expireCache()};e.postRenderFunctions.push(L)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,r,s,a,o,l){let c;if(e instanceof Vw){if(c=wC(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const h=this.getRenderContext(t),u=Pt(this),d=t.layerStatesArray[t.layerIndex],g=d.opacity*(l?e.getAlpha(u,t.time):1),f=g!==h.globalAlpha;f&&(h.save(),h.globalAlpha=g),h.drawImage(c,o,o,c.width-2*o,c.height-2*o,i,r,s,a),f&&h.restore(),g!==d.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const r=Pt(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}}const xd={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class D3 extends tp{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(xd.PRELOAD)}setPreload(e){this.set(xd.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(xd.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(xd.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class lA extends D3{constructor(e){super(e)}createRenderer(){return new B3(this,{cacheSize:this.getCacheSize()})}}const ul=[0,0,0],ra=5;class SM{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,zt(wU(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,zt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=jo(i)),zt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,zt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:R0,zt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const a=new D0(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const o=this.getTileRangeForExtentAndZ(i,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,a=r.maxX;s<=a;++s)for(let o=r.minY,l=r.maxY;o<=l;++o)i([t,s,o])}forEachTileCoordParentTileRange(e,t,i,r){let s,a,o,l=null,c=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=hl(a,a,o,o,i)):s=this.getTileRangeForExtentAndZ(l,c,i),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return hl(s,s+1,a,a+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],a=e[2];if(t===r)return hl(s,a,s,a,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),h=Math.floor(a*l);if(t<r)return hl(c,c,h,h,i);const u=Math.floor(l*(s+1))-1,d=Math.floor(l*(a+1))-1;return hl(c,u,h,d,i)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ul);const r=ul[1],s=ul[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ul);const a=ul[1],o=ul[2];return hl(r,a,s,o,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=Nn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Nn(this.getTileSize(e[0]),this.tmpSize_),a=i[0]+e[1]*s[0]*r,o=i[1]-(e[2]+1)*s[1]*r,l=a+s[0]*r,c=o+s[1]*r;return Na(a,o,l,c,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const a=this.getZForResolution(i),o=i/this.getResolution(a),l=this.getOrigin(a),c=Nn(this.getTileSize(a),this.tmpSize_);let h=o*(e-l[0])/i/c[0],u=o*(l[1]-t)/i/c[1];return r?(h=fd(h,ra)-1,u=fd(u,ra)-1):(h=gd(h,ra),u=gd(u,ra)),of(a,h,u,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const a=this.getOrigin(i),o=this.getResolution(i),l=Nn(this.getTileSize(i),this.tmpSize_);let c=(e-a[0])/o/l[0],h=(a[1]-t)/o/l[1];return r?(c=fd(c,ra)-1,h=fd(h,ra)-1):(c=gd(c,ra),h=gd(h,ra)),of(i,c,h,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=LI(this.resolutions_,e,t||0);return oi(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return W1(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}function MM(n){let e=n.getDefaultTileGrid();return e||(e=N3(n),n.setDefaultTileGrid(e)),e}function L3(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=ip(t);if(!Ic(s,r)){const a=Xt(s),o=Math.ceil((s[0]-r[0])/a);return r[0]+=a*o,n.getTileCoordForCoordAndZ(r,i)}return e}function P3(n,e,t,i){i=i!==void 0?i:"top-left";const r=TM(n,e,t);return new SM({extent:n,origin:RL(n,i),resolutions:r,tileSize:t})}function RM(n){const e=n||{},t=e.extent||sn("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:TM(t,e.maxZoom,e.tileSize,e.maxResolution)};return new SM(i)}function TM(n,e,t,i){e=e!==void 0?e:Dk,t=Nn(t!==void 0?t:R0);const r=yn(n),s=Xt(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=i/Math.pow(2,l);return o}function N3(n,e,t,i){const r=ip(n);return P3(r,e,t,i)}function ip(n){n=sn(n);let e=n.getExtent();if(!e){const t=180*u0.degrees/n.getMetersPerUnit();e=Na(-t,-t,t,t)}return e}const k3=/\{z\}/g,Q3=/\{x\}/g,O3=/\{y\}/g,V3=/\{-y\}/g;function z3(n,e,t,i,r){return n.replace(k3,e.toString()).replace(Q3,t.toString()).replace(O3,i.toString()).replace(V3,function(){if(r===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()})}function G3(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}function W3(n,e){return(function(t,i,r){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return z3(n,a,t[1],t[2],s)})}function Z3(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=W3(n[r],e);return H3(i)}function H3(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=R3(e),s=yo(r,n.length);return n[s](e,t,i)})}class X3 extends tM{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Nn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Pt(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s,a){return Dt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:MM(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),a=Nn(r.getTileSize(e),this.tmpSize);return s==1?a:vN(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),r=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=L3(r,e,i)),U3(e,r)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class J3 extends zs{constructor(e,t){super(e),this.tile=t}}const cA={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class L0 extends X3{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===L0.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Pt(t),r=t.getState();let s;r==je.LOADING?(this.tileLoadingKeys_[i]=!0,s=cA.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==je.ERROR?cA.TILELOADERROR:r==je.LOADED?cA.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new J3(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=G3(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Z3(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class UM extends L0{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:j3,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:mM,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!_g(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||_g(t,e)))return this.tileGrid;const i=Pt(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=MM(e)),this.tileGridForProjection[i]}createTile_(e,t,i,r,s,a){const o=[e,t,i],l=this.getTileCoordForTileUrlFunction(o,s),c=l?this.tileUrlFunction(l,r,s):void 0,h=new this.tileClass(o,c!==void 0?je.IDLE:je.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(pt.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,i,r,s,a){const o=this.getProjection();if(!o||!s||_g(o,s))return this.getTileInternal(e,t,i,r,o||s);const l=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(o),u=this.getTileGridForProjection(s),d=this.getTileCoordForTileUrlFunction(l,s),g=new xM(o,h,s,u,l,d,this.getTilePixelRatio(r),this.getGutter(),(f,m,p,A)=>this.getTileInternal(f,m,p,A,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,t,i,r,s,a){const o=this.getKey(),l=xg(this,o,e,t,i);if(a&&a.containsKey(l))return a.get(l);const c=this.createTile_(e,t,i,r,s,o);return a==null||a.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=sn(e);if(i){const r=Pt(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}}function j3(n,e){if(hr){const t=n.getCrossOrigin();let i="same-origin",r="same-origin";t==="anonymous"||t===""?(i="cors",r="omit"):t==="use-credentials"&&(i="cors",r="include"),fetch(e,{mode:i,credentials:r}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{var l;const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),(l=s.close)==null||l.call(s),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class FM extends UM{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:RM({extent:ip(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}var l6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Y3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}const K3="modulepreload",q3=function(n,e){return new URL(n,e).href},Xw={},$3=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let a=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=a(t.map(h=>{if(h=q3(h,i),h in Xw)return;Xw[h]=!0;const u=h.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!i)for(let m=o.length-1;m>=0;m--){const p=o[m];if(p.href===h&&(!u||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":K3,u||(f.as="script"),f.crossOrigin="",f.href=h,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},eQ=22;class tQ extends UM{constructor(e){const t=!!e.highDpi;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const i={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(i.imageFormat=e.imageFormat),e.scale&&(i.scale=e.scale),t&&(i.highDpi=!0),e.layerTypes&&(i.layerTypes=e.layerTypes),e.styles&&(i.styles=e.styles),e.overlay===!0&&(i.overlay=!0),e.apiOptions&&(i.apiOptions=e.apiOptions),this.sessionTokenRequest_=i,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_;const r=e.url||"https://tile.googleapis.com/";this.createSessionUrl_=r+"v1/createSession",this.tileUrl_=r+"v1/2dtiles",this.attributionUrl_=r+"tile/v1/viewport",this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e=this.createSessionUrl_+"?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(e,t);if(!i.ok){try{const d=await i.json();this.error_=new Error(d.error.message)}catch{this.error_=new Error("Error fetching session token")}this.setState("error");return}const r=await i.json(),s=this.getTilePixelRatio(1),a=[r.tileWidth/s,r.tileHeight/s];this.tileGrid=RM({extent:ip(this.getProjection()),maxZoom:eQ,tileSize:a});const o=r.session;this.sessionTokenValue_=o;const l=this.apiKey_,c=this.tileUrl_;this.tileUrlFunction=function(d,g,f){const m=d[0],p=d[1],A=d[2];return`${c}/${m}/${p}/${A}?session=${o}&key=${l}`};const h=parseInt(r.expiry,10)*1e3,u=Math.max(h-Date.now()-60*1e3,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),u),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[ki.ANIMATING]||e.viewHints[ki.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,i]=nu(Wu(e.extent),e.viewState.projection),[r,s]=nu(Zu(e.extent),e.viewState.projection),l=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${s}&south=${i}&east=${r}&west=${t}`;if(this.previousViewportExtent_==l)return this.previousViewportAttribution_;this.previousViewportExtent_=l;const c=this.sessionTokenValue_,h=this.apiKey_,d=`${this.attributionUrl_}?session=${c}&key=${h}&${l}`;return this.previousViewportAttribution_=await fetch(d).then(g=>g.json()).then(g=>g.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}var iQ=Object.defineProperty,nQ=(n,e,t)=>e in n?iQ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ie=(n,e,t)=>nQ(n,typeof e!="symbol"?e+"":e,t);let Hs=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},hn=class extends Hs{constructor(e,t){super(e),Ie(this,"detail"),this.detail=t}};const rQ=["ALL","OFF"],Oh={ALL:-99,DEBUG:-1,INFO:0,WARN:1,ERROR:2,OFF:99};let sQ=class{constructor(e=Oh.INFO){this.level=e,this.make()}make(){const e=Object.keys(Oh).filter(t=>!rQ.includes(t));for(const t of e){const i=Oh[t],r=t.toLowerCase();this[r]=this.level<=i?console.log:()=>{}}}};const di=20037508342789244e-9,Jw=[[0,0],[0,1],[1,0],[0,-1],[-1,0]],BM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAB3RJTUUH3QgIBToaSbAjlwAAABd0RVh0U29mdHdhcmUAR0xEUE5HIHZlciAzLjRxhaThAAAACHRwTkdHTEQzAAAAAEqAKR8AAAAEZ0FNQQAAsY8L/GEFAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgBDwABHHIJwwAAAABJRU5ErkJggg==",ro=256,aQ=`<canvas width="${ro}" height="${ro}" src="${BM}"></canvas>`;async function jw(n){if(typeof n=="string"){const e=n.match(/\//)?n:`pois/${n}`,t=await fetch(e);if(!t.ok)throw new Error("Fail to load poi json");return await t.json()}else return n}async function DM(n,e){if(n=await jw(n),Array.isArray(n))n=await Promise.all(n.map(async t=>await jw(t))),n.length>0&&n[0].type==="FeatureCollection"?n=n.reduce((t,i,r)=>{let s=i.id||i.properties&&i.properties.id;if(!s)if(r===0)s="main";else throw"POI layers include bad key setting";return t[s]=so(i,s,e),t},{}):n={main:so(n,"main",e)};else if(n.type==="FeatureCollection"){const t=n.id||n.properties&&n.properties.id||"main";n={[t]:so(n,t,e)}}else Object.keys(n).map(t=>{n[t]=so(n[t],t,e)});return n.main||(n.main=so([],"main",e)),Object.keys(n).map(t=>{P0(n,t,e)}),n}function so(n,e,t){if(Array.isArray(n))n={pois:n.map(i=>du(i))};else if(n.type==="FeatureCollection"){const i=Object.assign({},n.properties||{});n.name&&(i.name=n.name),i.pois=n.features.map(r=>du(r)),n=i}if(typeof n.id>"u")n.id=e;else if(n.id!==e)throw"POI layers include bad key setting";return n.namespaceID||(n.namespaceID=`${t.namespace?`${t.namespace}#`:""}${e}`),n.name||(n.name=e==="main"?t.name:e),n.pois||(n.pois=[]),n}function du(n){if(n.type==="Feature"){const e=Object.assign({},n.properties||{});e.lnglat=n.geometry.coordinates,e.id||(e.id=n.id),e.name||(e.name=n.name),n=e}return n.lnglat||(n.lnglat=[n.lng||n.longitude,n.lat||n.latitude]),delete n.lng,delete n.lat,delete n.longitude,delete n.latitude,n}function P0(n,e,t){if(!n[e])return;const i=n[e],r=i.pois;i.__nextId||(i.__nextId=0),r.map(s=>{s.id||(s.id=`${e}_${i.__nextId}`,i.__nextId++),s.namespaceID||(s.namespaceID=`${t.namespace?`${t.namespace}#`:""}${s.id}`)})}function gu(n,e,t={}){const i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function LM(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Kw(n[0])||!Kw(n[1]))throw new Error("coordinates must contain numbers");return gu({type:"Point",coordinates:n},e,t)}function Sg(n,e,t={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let r=0;r<i[i.length-1].length;r++)if(i[i.length-1][r]!==i[0][r])throw new Error("First and last Position are not equivalent.")}return gu({type:"Polygon",coordinates:n},e,t)}function oQ(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return gu({type:"LineString",coordinates:n},e,t)}function Yw(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function Kw(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function lQ(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function cQ(n){return n.type==="Feature"?n.geometry:n}function PM(n,e,t){if(n!==null)for(var i,r,s,a,o,l,c,h=0,u=0,d,g=n.type,f=g==="FeatureCollection",m=g==="Feature",p=f?n.features.length:1,A=0;A<p;A++){c=f?n.features[A].geometry:m?n.geometry:n,d=c?c.type==="GeometryCollection":!1,o=d?c.geometries.length:1;for(var C=0;C<o;C++){var v=0,I=0;if(a=d?c.geometries[C]:c,a!==null){l=a.coordinates;var w=a.type;switch(h=w==="Polygon"||w==="MultiPolygon"?1:0,w){case null:break;case"Point":if(e(l,u,A,v,I)===!1)return!1;u++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<l.length;i++){if(e(l[i],u,A,v,I)===!1)return!1;u++,w==="MultiPoint"&&v++}w==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<l.length;i++){for(r=0;r<l[i].length-h;r++){if(e(l[i][r],u,A,v,I)===!1)return!1;u++}w==="MultiLineString"&&v++,w==="Polygon"&&I++}w==="Polygon"&&v++;break;case"MultiPolygon":for(i=0;i<l.length;i++){for(I=0,r=0;r<l[i].length;r++){for(s=0;s<l[i][r].length-h;s++){if(e(l[i][r][s],u,A,v,I)===!1)return!1;u++}I++}v++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(PM(a.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}const Us=11102230246251565e-32,Ki=134217729,hQ=(3+8*Us)*Us;function hA(n,e,t,i,r){let s,a,o,l,c=e[0],h=i[0],u=0,d=0;h>c==h>-c?(s=c,c=e[++u]):(s=h,h=i[++d]);let g=0;if(u<n&&d<t)for(h>c==h>-c?(a=c+s,o=s-(a-c),c=e[++u]):(a=h+s,o=s-(a-h),h=i[++d]),s=a,o!==0&&(r[g++]=o);u<n&&d<t;)h>c==h>-c?(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++u]):(a=s+h,l=a-s,o=s-(a-l)+(h-l),h=i[++d]),s=a,o!==0&&(r[g++]=o);for(;u<n;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++u],s=a,o!==0&&(r[g++]=o);for(;d<t;)a=s+h,l=a-s,o=s-(a-l)+(h-l),h=i[++d],s=a,o!==0&&(r[g++]=o);return(s!==0||g===0)&&(r[g++]=s),g}function uQ(n,e){let t=e[0];for(let i=1;i<n;i++)t+=e[i];return t}function $u(n){return new Float64Array(n)}const dQ=(3+16*Us)*Us,gQ=(2+12*Us)*Us,fQ=(9+64*Us)*Us*Us,dl=$u(4),qw=$u(8),$w=$u(12),eE=$u(16),un=$u(4);function pQ(n,e,t,i,r,s,a){let o,l,c,h,u,d,g,f,m,p,A,C,v,I,w,b,_,x;const y=n-r,E=t-r,S=e-s,R=i-s;I=y*R,d=Ki*y,g=d-(d-y),f=y-g,d=Ki*R,m=d-(d-R),p=R-m,w=f*p-(I-g*m-f*m-g*p),b=S*E,d=Ki*S,g=d-(d-S),f=S-g,d=Ki*E,m=d-(d-E),p=E-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,dl[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,dl[1]=v-(A+u)+(u-b),x=C+A,u=x-C,dl[2]=C-(x-u)+(A-u),dl[3]=x;let M=uQ(4,dl),T=gQ*a;if(M>=T||-M>=T||(u=n-y,o=n-(y+u)+(u-r),u=t-E,c=t-(E+u)+(u-r),u=e-S,l=e-(S+u)+(u-s),u=i-R,h=i-(R+u)+(u-s),o===0&&l===0&&c===0&&h===0)||(T=fQ*a+hQ*Math.abs(M),M+=y*h+R*o-(S*c+E*l),M>=T||-M>=T))return M;I=o*R,d=Ki*o,g=d-(d-o),f=o-g,d=Ki*R,m=d-(d-R),p=R-m,w=f*p-(I-g*m-f*m-g*p),b=l*E,d=Ki*l,g=d-(d-l),f=l-g,d=Ki*E,m=d-(d-E),p=E-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,un[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,un[1]=v-(A+u)+(u-b),x=C+A,u=x-C,un[2]=C-(x-u)+(A-u),un[3]=x;const P=hA(4,dl,4,un,qw);I=y*h,d=Ki*y,g=d-(d-y),f=y-g,d=Ki*h,m=d-(d-h),p=h-m,w=f*p-(I-g*m-f*m-g*p),b=S*c,d=Ki*S,g=d-(d-S),f=S-g,d=Ki*c,m=d-(d-c),p=c-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,un[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,un[1]=v-(A+u)+(u-b),x=C+A,u=x-C,un[2]=C-(x-u)+(A-u),un[3]=x;const F=hA(P,qw,4,un,$w);I=o*h,d=Ki*o,g=d-(d-o),f=o-g,d=Ki*h,m=d-(d-h),p=h-m,w=f*p-(I-g*m-f*m-g*p),b=l*c,d=Ki*l,g=d-(d-l),f=l-g,d=Ki*c,m=d-(d-c),p=c-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,un[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,un[1]=v-(A+u)+(u-b),x=C+A,u=x-C,un[2]=C-(x-u)+(A-u),un[3]=x;const N=hA(F,$w,4,un,eE);return eE[N-1]}function AQ(n,e,t,i,r,s){const a=(e-s)*(t-r),o=(n-r)*(i-s),l=a-o,c=Math.abs(a+o);return Math.abs(l)>=dQ*c?l:-pQ(n,e,t,i,r,s,c)}function mQ(n,e){var t,i,r=0,s,a,o,l,c,h,u,d=n[0],g=n[1],f=e.length;for(t=0;t<f;t++){i=0;var m=e[t],p=m.length-1;if(h=m[0],h[0]!==m[p][0]&&h[1]!==m[p][1])throw new Error("First and last coordinates in a ring must be the same");for(a=h[0]-d,o=h[1]-g,i;i<p;i++){if(u=m[i+1],l=u[0]-d,c=u[1]-g,o===0&&c===0){if(l<=0&&a>=0||a<=0&&l>=0)return 0}else if(c>=0&&o<=0||c<=0&&o>=0){if(s=AQ(a,l,o,c,0,0),s===0)return 0;(s>0&&c>0&&o<=0||s<0&&c<=0&&o>0)&&r++}h=u,o=c,a=l}}return r%2!==0}function Mg(n,e,t={}){if(!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");const i=lQ(n),r=cQ(e),s=r.type,a=e.bbox;let o=r.coordinates;if(a&&CQ(i,a)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var c=0;c<o.length;++c){const h=mQ(i,o[c]);if(h===0)return!t.ignoreBoundary;h&&(l=!0)}return l}function CQ(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}let NM=class{constructor(e=[],t=IQ){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(i(r,a)>=0)break;t[e]=a,e=s}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,s=t[e];for(;e<r;){let a=(e<<1)+1,o=t[a];const l=a+1;if(l<this.length&&i(t[l],o)<0&&(a=l,o=t[l]),i(o,s)>=0)break;t[e]=o,e=a}t[e]=s}};function IQ(n,e){return n<e?-1:n>e?1:0}function kM(n,e){return n.p.x>e.p.x?1:n.p.x<e.p.x?-1:n.p.y!==e.p.y?n.p.y>e.p.y?1:-1:1}function vQ(n,e){return n.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:n.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:n.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?n.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}let tE=class{constructor(e,t,i,r){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=i,this.eventId=r,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function yQ(n,e){if(n.type==="FeatureCollection"){const t=n.features;for(let i=0;i<t.length;i++)iE(t[i],e)}else iE(n,e)}let Sd=0,Md=0,Rd=0;function iE(n,e){const t=n.type==="Feature"?n.geometry:n;let i=t.coordinates;(t.type==="Polygon"||t.type==="MultiLineString")&&(i=[i]),t.type==="LineString"&&(i=[[i]]);for(let r=0;r<i.length;r++)for(let s=0;s<i[r].length;s++){let a=i[r][s][0],o=null;Md=Md+1;for(let l=0;l<i[r][s].length-1;l++){o=i[r][s][l+1];const c=new tE(a,Sd,Md,Rd),h=new tE(o,Sd,Md,Rd+1);c.otherEvent=h,h.otherEvent=c,kM(c,h)>0?(h.isLeftEndpoint=!0,c.isLeftEndpoint=!1):(c.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(c),e.push(h),a=o,Rd=Rd+1}}Sd=Sd+1}class wQ{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}}function EQ(n,e){if(n===null||e===null||n.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(n.rightSweepEvent.isSamePoint(e.leftSweepEvent)||n.rightSweepEvent.isSamePoint(e.leftSweepEvent)||n.rightSweepEvent.isSamePoint(e.rightSweepEvent)||n.leftSweepEvent.isSamePoint(e.leftSweepEvent)||n.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;const t=n.leftSweepEvent.p.x,i=n.leftSweepEvent.p.y,r=n.rightSweepEvent.p.x,s=n.rightSweepEvent.p.y,a=e.leftSweepEvent.p.x,o=e.leftSweepEvent.p.y,l=e.rightSweepEvent.p.x,c=e.rightSweepEvent.p.y,h=(c-o)*(r-t)-(l-a)*(s-i),u=(l-a)*(i-o)-(c-o)*(t-a),d=(r-t)*(i-o)-(s-i)*(t-a);if(h===0)return!1;const g=u/h,f=d/h;if(g>=0&&g<=1&&f>=0&&f<=1){const m=t+g*(r-t),p=i+g*(s-i);return[m,p]}return!1}function bQ(n,e){e=e||!1;const t=[],i=new NM([],vQ);for(;n.length;){const r=n.pop();if(r.isLeftEndpoint){const s=new wQ(r);for(let a=0;a<i.data.length;a++){const o=i.data[a];if(e&&o.leftSweepEvent.featureId===r.featureId)continue;const l=EQ(s,o);l!==!1&&t.push(l)}i.push(s)}else r.isLeftEndpoint===!1&&i.pop()}return t}function _Q(n,e){const t=new NM([],kM);return yQ(n,t),bQ(t,e)}var xQ=_Q;function SQ(n,e,t={}){const{removeDuplicates:i=!0,ignoreSelfIntersections:r=!0}=t;let s=[];n.type==="FeatureCollection"?s=s.concat(n.features):n.type==="Feature"?s.push(n):(n.type==="LineString"||n.type==="Polygon"||n.type==="MultiLineString"||n.type==="MultiPolygon")&&s.push(gu(n)),e.type==="FeatureCollection"?s=s.concat(e.features):e.type==="Feature"?s.push(e):(e.type==="LineString"||e.type==="Polygon"||e.type==="MultiLineString"||e.type==="MultiPolygon")&&s.push(gu(e));const a=xQ(Yw(s),r);let o=[];if(i){const l={};a.forEach(c=>{const h=c.join(",");l[h]||(l[h]=!0,o.push(c))})}else o=a;return Yw(o.map(l=>LM(l)))}function MQ(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function RQ(n,e={}){let t=0,i=0,r=0;return PM(n,function(s){t+=s[0],i+=s[1],r++}),LM([t/r,i/r],e.properties)}function QM(n){class e extends n{constructor(){super(...arguments),Ie(this,"weiwudi"),Ie(this,"_map"),Ie(this,"homePosition"),Ie(this,"mercZoom"),Ie(this,"pois"),Ie(this,"officialTitle",""),Ie(this,"title",""),Ie(this,"mapID",""),Ie(this,"label",""),Ie(this,"initialWait"),Ie(this,"maxZoom"),Ie(this,"minZoom"),Ie(this,"envelope"),Ie(this,"centroid"),Ie(this,"homeMarginPixels",0),Ie(this,"thumbnail"),Ie(this,"poiTemplate"),Ie(this,"poiStyle"),Ie(this,"iconTemplate"),Ie(this,"startFrom"),Ie(this,"controls"),Ie(this,"northUp"),Ie(this,"tapDuration"),Ie(this,"mercatorXShift",0),Ie(this,"mercatorYShift",0),Ie(this,"icon"),Ie(this,"selectedIcon")}initialize(i){var r;if(i=es(i),this.mapID=i.mapID,this.homePosition=i.homePosition,this.mercZoom=i.mercZoom,this.label=i.label,this.maxZoom=i.maxZoom,this.minZoom=i.minZoom,this.poiTemplate=i.poiTemplate,this.poiStyle=i.poiStyle,this.iconTemplate=i.iconTemplate,this.icon=i.icon,this.selectedIcon=i.selectedIcon,this.mercatorXShift=i.mercatorXShift,this.mercatorYShift=i.mercatorYShift,this.weiwudi=i.weiwudi,i.envelopeLngLats){const o=i.envelopeLngLats.map(l=>nn(l,"EPSG:4326","EPSG:3857"));o.push(o[0]),this.envelope=Sg([o]),this.centroid=(r=RQ(this.envelope).geometry)==null?void 0:r.coordinates}for(let o=0;o<fu.length;o++){const l=fu[o],c=UQ[o];this.set(l,i[c]||i[l])}const s=i.thumbnail?new Promise(o=>{this.thumbnail=i.thumbnail,o(void 0)}):new Promise(o=>{this.thumbnail=`./tmbs/${i.mapID}.jpg`,fetch(this.thumbnail).then(l=>{l.ok||(this.thumbnail=`./tmbs/${i.mapID}_menu.jpg`),o(void 0)}).catch(l=>{this.thumbnail=`./tmbs/${i.mapID}_menu.jpg`,o(void 0)})}).catch(o=>{this.thumbnail=`./tmbs/${i.mapID||i.sourceID}_menu.jpg`}),a=this.resolvePois(i.pois);this.initialWait=Promise.all([a,s]),FQ(this)}static isBasemap(){return this.isBasemap_}static isWmts(){return this.isWmts_}static isMapbox(){return!!this.isMapbox_}static isMapLibre(){return!!this.isMapLibre_}isBasemap(){return this.constructor.isBasemap()}isWmts(){return this.constructor.isWmts()}isMapbox(){return this.constructor.isMapbox()}isMapLibre(){return this.constructor.isMapLibre&&this.constructor.isMapLibre()}getCacheEnable(){return!!this.weiwudi}async getTileCacheStatsAsync(){if(!this.weiwudi)return{};try{return await this.weiwudi.stats()}catch{return{}}}async getTileCacheSizeAsync(){return(await this.getTileCacheStatsAsync()).size||0}async fetchAllTileCacheAsync(i){if(this.weiwudi)try{const r=a=>{i(a.type,a.detail)},s=a=>{this.weiwudi.removeEventListener("proceed",r),this.weiwudi.removeEventListener("finish",s),this.weiwudi.removeEventListener("stop",s),this.weiwudi.removeEventListener("canceled",s),r(a)};this.weiwudi.addEventListener("proceed",r),this.weiwudi.addEventListener("finish",s),this.weiwudi.addEventListener("stop",s),this.weiwudi.addEventListener("canceled",s),await this.weiwudi.fetchAll()}catch{}}async cancelTileCacheAsync(){if(this.weiwudi)try{await this.weiwudi.cancel()}catch{}}async clearTileCacheAsync(){if(this.weiwudi)try{await this.weiwudi.clean()}catch{}}getMap(){return this._map}setMap(i){this._map=i}setViewpointRadian(i){let r,s;const a=i.mercZoom,o=i.zoom,l=i.direction,c=i.rotation,h=this.getMap(),u=h==null?void 0:h.getView();i.latitude!==void 0&&i.longitude!==void 0&&(r=nn([i.longitude,i.latitude],"EPSG:4326","EPSG:3857")),i.x!==void 0&&i.y!=null&&(s=[i.x,i.y]),this.viewpoint2MercsAsync().then(d=>this.mercs2MercViewpoint(d)).then(d=>{const g=this.mercViewpoint2Mercs([r||d[0],a||d[1]||17,l??c??d[2]]);this.mercs2ViewpointAsync(g).then(f=>{r!=null?u==null||u.setCenter(f[0]):s!=null&&(u==null||u.setCenter(s)),a!=null?u==null||u.setZoom(f[1]):o!=null&&(u==null||u.setZoom(o)),l!=null?u==null||u.setRotation(f[2]):c!=null&&(u==null||u.setRotation(c))})})}setViewpoint(i){const r={...i};r.rotation&&(r.rotation=r.rotation*Math.PI/180),r.direction&&(r.direction=r.direction*Math.PI/180),this.setViewpointRadian(r)}goHome(){const i=this.getMap();let r=i.getTarget();typeof r=="string"&&(r=document.getElementById(r));const s=i.homeMarginPixels,a=[(r.clientWidth-s-10)*1,(r.clientHeight-s-10)*1],o={longitude:this.homePosition[0],latitude:this.homePosition[1],zoom:this.defZoom(a)};this.getMap().northUp?o.direction=0:o.rotation=0,this.setViewpointRadian(o)}resetRotation(){this.setViewpointRadian({rotation:0})}resetDirection(){this.setViewpointRadian({direction:0})}resetCirculation(){this.getMap().northUp?this.resetDirection():this.resetRotation()}setGPSMarkerAsync(i,r=!1){const s=this.getMap(),a=s==null?void 0:s.getView();if(!i)return new Promise((l,c)=>{s==null||s.setGPSPosition(null),l(!0)});const o=this.mercsFromGPSValue(i.lnglat,i.acc);return this.mercs2SysCoordsAsync_multiLayer([o]).then(l=>{const c=!l[0],h=c?l[1]:l[0],u=c?null:l[1],d={xy:h[0][0]};if(!this.insideCheckSysCoord(h[0][0]))return!1;const g=h[0].slice(1);return d.rad=g.reduce((f,m,p)=>{const A=f+Math.sqrt(Math.pow(m[0]-d.xy[0],2)+Math.pow(m[1]-d.xy[1],2));return p===3?A/4:A},0),r||a==null||a.setCenter(d.xy),s==null||s.setGPSPosition(d,c?"hide":null),u&&(s==null||s.setGPSPosition({xy:u[0][0]},"sub")),!0}).catch(l=>{throw l})}setGPSMarker(i,r=!1){this.setGPSMarkerAsync(i,r).then(()=>{})}mercsFromGPSValue(i,r){const s=nn(i,"EPSG:4326","EPSG:3857"),a=i[1]*Math.PI/180,o=r/Math.cos(a);return Jw.map(l=>[l[0]*o+s[0],l[1]*o+s[1]])}rotateMatrix(i,r){r===void 0&&(r=this.getMap().getView().getRotation());const s=[];for(let a=0;a<i.length;a++){const o=i[a],l=o[0]*Math.cos(r)-o[1]*Math.sin(r),c=o[0]*Math.sin(r)+o[1]*Math.cos(r);s.push([l,c])}return s}async resolvePois(i){this.pois=await DM(i||[],{name:this.officialTitle||this.title,namespace:this.mapID})}getPoi(i){let r;return Object.keys(this.pois).map(s=>{this.pois[s].pois.map((a,o)=>{a.id===i&&(r=this.pois[s].pois[o])})}),r}addPoi(i,r){if(r||(r="main"),this.pois[r])return i=du(i),this.pois[r].pois.push(i),P0(this.pois,r,{name:this.officialTitle||this.title,namespace:this.mapID}),i.namespaceID}removePoi(i){Object.keys(this.pois).map(r=>{this.pois[r].pois.map((s,a)=>{s.id===i&&delete this.pois[r].pois[a]})})}clearPoi(i){i||(i="main"),i==="all"?Object.keys(this.pois).map(r=>{this.pois[r].pois=[]}):this.pois[i]&&(this.pois[i].pois=[])}listPoiLayers(i=!1,r=!1){return Object.keys(this.pois).sort((s,a)=>s==="main"?-1:a==="main"?1:s<a?-1:s>a?1:0).map(s=>this.pois[s]).filter(s=>r?i?s.pois.length&&s.hide:s.pois.length:i?s.hide:!0)}getPoiLayer(i){return this.pois[i]}addPoiLayer(i,r){i!=="main"&&(this.pois[i]||(this.pois[i]=so(r||[],i,{name:this.officialTitle||this.title,namespace:this.mapID})))}removePoiLayer(i){i!=="main"&&this.pois[i]&&delete this.pois[i]}merc2SysCoordAsync_ignoreBackground(i){return this.merc2XyAsync_ignoreBackground(i).then(r=>r?this.xy2SysCoord(r):void 0)}merc2SysCoordAsync(i){return this.merc2XyAsync(i).then(r=>r&&this.xy2SysCoord(r))}sysCoord2MercAsync(i){const r=this.sysCoord2Xy(i);return this.xy2MercAsync(r)}zoom2Radius(i,r){const s=Math.floor(Math.min(i[0],i[1])/4);return r===void 0&&(r=this.getMap().getView().getDecimalZoom()),s*di/128/Math.pow(2,r)}viewpoint2SysCoords(i,r){return this.mercViewpoint2Mercs(i,r)}mercViewpoint2Mercs(i,r){let s=i?i[0]:void 0;const a=i?i[1]:void 0,o=i?i[2]:void 0;s===void 0&&(s=this.getMap().getView().getCenter()),r===void 0&&(r=this.getMap().getSize());const l=this.zoom2Radius(r,a);return[this.rotateMatrix(Jw,o).map(c=>[c[0]*l+s[0],c[1]*l+s[1]]),r]}sysCoords2Viewpoint(i){return this.mercs2MercViewpoint(i)}mercs2MercViewpoint(i){const r=i[0][0];let s=i[1];const a=i[0].slice(1,5).map(m=>[m[0]-r[0],m[1]-r[1]]),o=[[0,1],[1,0],[0,-1],[-1,0]];let l=0,c=0,h=0;for(let m=0;m<4;m++){const p=a[m],A=o[m],C=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2));l+=C;const v=p[0]*A[1]-p[1]*A[0],I=Math.acos((p[0]*A[0]+p[1]*A[1])/C),w=v>0?-1*I:I;c+=Math.cos(w),h+=Math.sin(w)}const u=l/4,d=Math.atan2(h,c);s||(s=this.getMap().getSize());const g=Math.floor(Math.min(s[0],s[1])/4),f=Math.log(g*di/128/u)/Math.log(2);return[r,f,d]}sysCoords2Xys(i){return[i[0].map(r=>this.sysCoord2Xy(r)),i[1]]}xys2SysCoords(i){return[i[0].map(r=>this.xy2SysCoord(r)),i[1]]}mercs2XysAsync(i){return Promise.all(i[0].map(r=>this.merc2XyAsync(r))).then(r=>[r,i[1]])}xys2MercsAsync(i){return Promise.all(i[0].map(r=>this.xy2MercAsync(r))).then(r=>[r,i[1]])}static async createAsync(i){return new this(i)}}return Ie(e,"isBasemap_",!1),Ie(e,"isWmts_",!0),Ie(e,"isMapbox_",!1),Ie(e,"isMapLibre_",!1),e}function OM(n){class e extends QM(n){insideCheckXy(i){return this.envelope?Mg(i,this.envelope):!0}insideCheckSysCoord(i){return this.insideCheckXy(i)}modulateXyInside(i){if(!this.centroid)return i;const r=oQ([i,this.centroid]),s=SQ(this.envelope,r);return s.features.length>0&&s.features[0].geometry?s.features[0].geometry.coordinates:i}modulateSysCoordInside(i){return this.modulateXyInside(i)}merc2XyAsync(i){return Promise.resolve(i)}merc2XyAsync_ignoreBackground(i){return this.merc2XyAsync(i)}xy2MercAsync(i){return Promise.resolve(i)}xy2SysCoord(i){return i}sysCoord2Xy(i){return i}viewpoint2MercsAsync(i,r){const s=this.viewpoint2SysCoords(i,r),a=this.sysCoords2Xys(s);return this.xys2MercsAsync(a)}mercs2ViewpointAsync(i){return this.mercs2XysAsync(i).then(r=>{const s=this.xys2SysCoords(r);return this.sysCoords2Viewpoint(s)})}mercs2SysCoordsAsync_multiLayer(i){return Promise.all(i[0].map(r=>this.merc2SysCoordAsync(r))).then(r=>[[r,i[1]]])}defZoom(){return this.mercZoom}}return Ie(e,"isBasemap_",!0),Ie(e,"isWmts_",!0),e}function TQ(n){class e extends QM(n){constructor(){super(...arguments),Ie(this,"width",0),Ie(this,"height",0),Ie(this,"_maxxy",0)}insideCheckXy(i){return!(i[0]<0||i[0]>this.width||i[1]<0||i[1]>this.height)}insideCheckSysCoord(i){return this.insideCheckXy(this.sysCoord2Xy(i))}modulateXyInside(i){const r=i[0]/(this.width/2)-1,s=i[1]/(this.height/2)-1,a=Math.max(Math.abs(r),Math.abs(s));return[(r/a+1)*this.width/2,(s/a+1)*this.height/2]}modulateSysCoordInside(i){const r=this.sysCoord2Xy(i),s=this.modulateXyInside(r);return this.xy2SysCoord(s)}xy2SysCoord(i){const r=i[0]*(2*di)/this._maxxy-di,s=-1*(i[1]*(2*di)/this._maxxy-di);return[r,s]}sysCoord2Xy(i){const r=(i[0]+di)*this._maxxy/(2*di),s=(-i[1]+di)*this._maxxy/(2*di);return[r,s]}defZoom(i){const r=i[0],s=i[1],a=Math.log2((r-10)/this.width),o=Math.log2((s-10)/this.height),l=this.maxZoom;let c;return o>a?c=o:c=a,l+c}}return Ie(e,"isBasemap_",!1),Ie(e,"isWmts_",!1),e}const fu=["title","officialTitle","author","createdAt","era","contributor","mapper","license","dataLicense","attr","dataAttr","reference","description"],UQ=["title","official_title","author","created_at","era","contributor","mapper","license","data_license","attr","data_attr","reference","description"];function VM(n){return n=es(n),n.imageExtension||(n.imageExtension="jpg"),n.mapID&&!n.url&&!n.urls&&(n.url=n.tms?`tiles/${n.mapID}/{z}/{x}/{-y}.${n.imageExtension}`:`tiles/${n.mapID}/{z}/{x}/{y}.${n.imageExtension}`),n}function FQ(n){const e=n;n.setTileLoadFunction((function(){const t=e.getTileLoadFunction(),i=function(r,s,a,o,l,c,h){return new Promise((u,d)=>{const g=function(f,m=void 0){const p=document.createElement("img");p.crossOrigin="Anonymous",p.onload=p.onerror=function(){if(p.width&&p.height){const A=a.getContext("2d"),C=o===0?256-c:0,v=l===0?256-h:0;c=o+c>p.width?p.width-o:c,h=l+h>p.height?p.height-l:h,A.drawImage(p,o,l,c,h,C,v,c,h),u(void 0)}else m?g(m):u("tileLoadError")},p.src=f};g(s)})};return function(r,s){const a=r.tileCoord[0];let o=r.tileCoord[1],l=r.tileCoord[2],c=Math.round((e.mercatorXShift||0)*128*Math.pow(2,a)/di),h=Math.round((e.mercatorYShift||0)*-128*Math.pow(2,a)/di);for(;c<0||c>=256;)c<0?(c=c+256,o++):(c=c-256,o--);for(;h<0||h>=256;)h<0?(h=h+256,l++):(h=h-256,l--);const u=document.createElement("div");u.innerHTML=aQ;const d=u.childNodes[0],g=[[[a,o,l],0,0,256-c,256-h]];c!==0&&g.push([[a,o-1,l],256-c,0,c,256-h]),h!==0&&(g.push([[a,o,l-1],0,256-h,256-c,h]),c!==0&&g.push([[a,o-1,l-1],256-c,256-h,c,h])),Promise.all(g.map(f=>{const m=e.tileUrlFunction(f[0],e.tilePixelRatio_,e.projection_);return i(f[0],m,d,f[1],f[2],f[3],f[4])})).then(f=>{if(f.reduce((m,p)=>m&&p,!0))r.handleImageError_();else{const m=d.toDataURL(),p=r.getImage();p.crossOrigin=null,t(r,m)}}).catch(f=>{r.handleImageError_()})}})())}function Ol(n){const e=document,t=e.createDocumentFragment(),i=[];n=n.replace(/(<\/?)d([ >])/g,"$1div$2").replace(/(<\/?)s([ >])/g,"$1span$2").replace(/ din="/g,' data-i18n="').replace(/ dinh="/g,' data-i18n-html="').replace(/ c="/g,' class="');const r=t.appendChild(e.createElement("div"));r.innerHTML=n;for(let s=0;s<r.childNodes.length;s++){const a=r.childNodes[s];if(a.nodeName&&a.nodeName.toLowerCase()==="script"){const o=e.createElement("script");a.type&&(o.type=a.type),a.src?o.src=a.src:o.text=a.text,i[s]=o}else i[s]=a}return i}function nE(n){for(;!(n<=180&&n>-180);){const e=n>0?-1:1;n=n+e*360}return n}function rE(n){if(!n)return;const e={mapID:n.mapID};for(let t=0;t<fu.length;t++){const i=fu[t];n[i]&&(e[i]=n[i])}return e}function es(n){const e={max_zoom:"maxZoom",min_zoom:"minZoom",envelope_lnglats:"envelopeLngLats",envelopLngLats:"envelopeLngLats",image_extention:"imageExtension",image_extension:"imageExtension",imageExtention:"imageExtension",map_id:"mapID",sourceID:"mapID",source_id:"mapID",merc_max_zoom:"mercMaxZoom",merc_min_zoom:"mercMinZoom",zoom_restriction:"zoomRestriction",enable_cache:"enableCache",default_zoom:"defaultZoom",start_from:"startFrom",home_position:"homePosition",fake_radius:"fakeRadius",fake_center:"fakeCenter",fake_gps:"fakeGps",app_name:"appName",setting_file:"settingFile",merc_zoom:"mercZoom",mapbox_token:"mapboxToken",translate_ui:"translateUI",restore_session:"restoreSession",no_rotate:"noRotate",poi_template:"poiTemplate",poi_style:"poiStyle",icon_template:"iconTemplate",default_center:"defaultCenter",default_rotation:"defaultRotation",selected_icon:"selectedIcon",namespace_id:"namespaceID",mercator_x_shift:"mercatorXShift",mercator_y_shift:"mercatorYShift"};return Object.keys(e).reduce((t,i)=>{if(t[i]!==void 0)throw new Error(`Invalid Maplat option key: ${i}. Use "${e[i]}" instead.`);return t},n)}let zM=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function BQ(n,e,t){let i,r;t=t||GM;let s=0,a=n.length,o=!1;for(;s<a;)i=s+(a-s>>1),r=+t(n[i],e),r<0?s=i+1:(a=i,o=!r);return o?s:~s}function GM(n,e){return n>e?1:n<e?-1:0}function WM(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function ZM(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function DQ(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function LQ(){return!0}function np(){return!1}function EC(){}function PQ(n){let e,t,i;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==i||!DQ(r,t))&&(i=this,t=r,e=n.apply(this,arguments)),e}}function HM(n){for(const e in n)delete n[e]}function NQ(n){let e;for(e in n)return!1;return!e}let XM=class extends zM{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new Hs(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,o[i]=0),++a[i];let l;for(let c=0,h=r.length;c<h;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[i]===0){let c=o[i];for(delete o[i];c--;)this.removeEventListener(i,EC);delete a[i]}return l}disposeInternal(){this.listeners_&&HM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=EC,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}};Ur.prototype.getDecimalZoom=function(){const n=this.getResolution(),e=Math.log(this.maxResolution_/n)/Math.log(2);return e!==void 0?this.minZoom_+e:e};const Wi={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function N0(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function kQ(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function sE(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],a=e[0],o=e[1];let l=Wi.UNKNOWN;return a<t?l=l|Wi.LEFT:a>r&&(l=l|Wi.RIGHT),o<i?l=l|Wi.BELOW:o>s&&(l=l|Wi.ABOVE),l===Wi.UNKNOWN&&(l=Wi.INTERSECTING),l}function JM(){return[1/0,1/0,-1/0,-1/0]}function rp(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function jM(n){return rp(1/0,1/0,-1/0,-1/0,n)}function QQ(n,e){const t=n[0],i=n[1];return rp(t,i,t,i,e)}function OQ(n,e,t,i,r){const s=jM(r);return YM(s,n,e,t,i)}function YM(n,e,t,i,r){for(;t<i;t+=r)VQ(n,e[t],e[t+1]);return n}function VQ(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function KM(n,e){let t;return t=e(zQ(n)),t||(t=e(GQ(n)),t)||(t=e(XQ(n)),t)||(t=e(HQ(n)),t)?t:!1}function zQ(n){return[n[0],n[1]]}function GQ(n){return[n[2],n[1]]}function lf(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function WQ(n,e,t,i,r){const[s,a,o,l,c,h,u,d]=ZQ(n,e,t,i);return rp(Math.min(s,o,c,u),Math.min(a,l,h,d),Math.max(s,o,c,u),Math.max(a,l,h,d),r)}function ZQ(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,a=Math.cos(t),o=Math.sin(t),l=r*a,c=r*o,h=s*a,u=s*o,d=n[0],g=n[1];return[d-l+u,g-c-h,d-l-u,g-c+h,d+l-u,g+c+h,d+l+u,g+c-h,d-l+u,g-c-h]}function pu(n){return n[3]-n[1]}function HQ(n){return[n[0],n[3]]}function XQ(n){return[n[2],n[3]]}function k0(n){return n[2]-n[0]}function Q0(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function qM(n){return n[2]<n[0]||n[3]<n[1]}function JQ(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function jQ(n,e,t){let i=!1;const r=sE(n,e),s=sE(n,t);if(r===Wi.INTERSECTING||s===Wi.INTERSECTING)i=!0;else{const a=n[0],o=n[1],l=n[2],c=n[3],h=e[0],u=e[1],d=t[0],g=t[1],f=(g-u)/(d-h);let m,p;s&Wi.ABOVE&&!(r&Wi.ABOVE)&&(m=d-(g-c)/f,i=m>=a&&m<=l),!i&&s&Wi.RIGHT&&!(r&Wi.RIGHT)&&(p=g-(d-l)*f,i=p>=o&&p<=c),!i&&s&Wi.BELOW&&!(r&Wi.BELOW)&&(m=d-(g-o)/f,i=m>=a&&m<=l),!i&&s&Wi.LEFT&&!(r&Wi.LEFT)&&(p=g-(d-a)*f,i=p>=o&&p<=c)}return i}function fn(){throw new Error("Unimplemented abstract method.")}let YQ=0;function KQ(n){return n.ol_uid||(n.ol_uid=String(++YQ))}const qQ={PROPERTYCHANGE:"propertychange"},ka={CHANGE:"change",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",WHEEL:"wheel"};function sc(n,e,t,i,r){if(r){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(i??this,o)}}else i&&i!==n&&(t=t.bind(i));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function aE(n,e,t,i){return sc(n,e,t,i,!0)}function Vh(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),HM(n))}let sp=class extends XM{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ka.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=sc(this,e[s],t);return r}return sc(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=aE(this,e[s],t)}else i=aE(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)$Q(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}};sp.prototype.on;sp.prototype.once;sp.prototype.un;function $Q(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Vh(n[e]);else Vh(n)}let oE=class extends Hs{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}},Qc=class extends sp{constructor(e){super(),this.on,this.once,this.un,KQ(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new oE(i,e,t)),i=qQ.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new oE(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],NQ(this.values_)&&(this.values_=null),t||this.notify(e,i)}}};function eO(...n){console.warn(...n)}function Or(n,e,t){return Math.min(Math.max(n,e),t)}function tO(n,e,t,i,r,s){const a=r-t,o=s-i;if(a!==0||o!==0){const l=((n-t)*a+(e-i)*o)/(a*a+o*o);l>1?(t=r,i=s):l>0&&(t+=a*l,i+=o*l)}return ac(n,e,t,i)}function ac(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function lE(n){return n*180/Math.PI}function oc(n){return n*Math.PI/180}function bC(n,e){const t=n%e;return t*e<0?t+e:t}function O0(n,e,t){return n+t*(e-n)}function _C(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function iO(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function cf(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function V0(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function nO(n,e){return n[0]*=e,n[1]*=e,n}const $M={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Au=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||$M[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const ed=6378137,Hl=Math.PI*ed,rO=[-Hl,-Hl,Hl,Hl],sO=[-180,-85,180,85],Td=ed*Math.log(Math.tan(Math.PI/2));class gl extends Au{constructor(e){super({code:e,units:"m",extent:rO,global:!0,worldExtent:sO,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ed)}})}}const cE=[new gl("EPSG:3857"),new gl("EPSG:102100"),new gl("EPSG:102113"),new gl("EPSG:900913"),new gl("http://www.opengis.net/def/crs/EPSG/0/3857"),new gl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function aO(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i){e[s]=Hl*n[s]/180;let a=ed*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>Td?a=Td:a<-Td&&(a=-Td),e[s+1]=a}return e}function oO(n,e,t,i){const r=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(r));for(let s=0;s<r;s+=i)e[s]=180*n[s]/Hl,e[s+1]=360*Math.atan(Math.exp(n[s+1]/ed))/Math.PI-90;return e}const lO=6378137,hE=[-180,-90,180,90],cO=Math.PI*lO/180;class Ha extends Au{constructor(e,t){super({code:e,units:"degrees",extent:hE,axisOrientation:t,global:!0,metersPerUnit:cO,worldExtent:hE})}}const uE=[new Ha("CRS:84"),new Ha("EPSG:4326","neu"),new Ha("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ha("urn:ogc:def:crs:OGC:2:84"),new Ha("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ha("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ha("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let xC={};function hO(n){return xC[n]||xC[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function uO(n,e){xC[n]=e}let lc={};function mu(n,e,t){const i=n.getCode(),r=e.getCode();i in lc||(lc[i]={}),lc[i][r]=t}function uA(n,e){return n in lc&&e in lc[n]?lc[n][e]:null}const hf=.9996,Ar=.00669438,ap=Ar*Ar,op=ap*Ar,mo=Ar/(1-Ar),dE=Math.sqrt(1-Ar),_c=(1-dE)/(1+dE),eR=_c*_c,z0=eR*_c,G0=z0*_c,tR=G0*_c,iR=1-Ar/4-3*ap/64-5*op/256,dO=3*Ar/8+3*ap/32+45*op/1024,gO=15*ap/256+45*op/1024,fO=35*op/3072,pO=3/2*_c-27/32*z0+269/512*tR,AO=21/16*eR-55/32*G0,mO=151/96*z0-417/128*tR,CO=1097/512*G0,uf=6378137;function IO(n,e,t){const i=n-5e5,r=(t.north?e:e-1e7)/hf/(uf*iR),s=r+pO*Math.sin(2*r)+AO*Math.sin(4*r)+mO*Math.sin(6*r)+CO*Math.sin(8*r),a=Math.sin(s),o=a*a,l=Math.cos(s),c=a/l,h=c*c,u=h*h,d=1-Ar*o,g=Math.sqrt(1-Ar*o),f=uf/g,m=(1-Ar)/d,p=mo*l**2,A=p*p,C=i/(f*hf),v=C*C,I=v*C,w=I*C,b=w*C,_=b*C,x=s-c/m*(v/2-w/24*(5+3*h+10*p-4*A-9*mo))+_/720*(61+90*h+298*p+45*u-252*mo-3*A);let y=(C-I/6*(1+2*h+p)+b/120*(5-2*p+28*h-3*A+8*mo+24*u))/l;return y=_C(y+oc(nR(t.number)),-Math.PI,Math.PI),[lE(y),lE(x)]}const gE=-80,fE=84,vO=-180,yO=180;function wO(n,e,t){n=_C(n,vO,yO),e<gE?e=gE:e>fE&&(e=fE);const i=oc(e),r=Math.sin(i),s=Math.cos(i),a=r/s,o=a*a,l=o*o,c=oc(n),h=nR(t.number),u=oc(h),d=uf/Math.sqrt(1-Ar*r**2),g=mo*s**2,f=s*_C(c-u,-Math.PI,Math.PI),m=f*f,p=m*f,A=p*f,C=A*f,v=C*f,I=uf*(iR*i-dO*Math.sin(2*i)+gO*Math.sin(4*i)-fO*Math.sin(6*i)),w=hf*d*(f+p/6*(1-o+g)+C/120*(5-18*o+l+72*g-58*mo))+5e5;let b=hf*(I+d*a*(m/2+A/24*(5-o+9*g+4*g**2)+v/720*(61-58*o+l+600*g-330*mo)));return t.north||(b+=1e7),[w,b]}function nR(n){return(n-1)*6-180+3}const EO=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function rR(n){let e=0;for(const r of EO){const s=n.match(r);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function pE(n,e){return function(t,i,r,s){const a=t.length;r=r>1?r:2,s=s??r,i||(r>2?i=t.slice():i=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],c=t[o+1],h=n(l,c,e);i[o]=h[0],i[o+1]=h[1]}return i}}function bO(n){return rR(n)?new Au({code:n,units:"m"}):null}function _O(n){const e=rR(n.getCode());return e?{forward:pE(wO,e),inverse:pE(IO,e)}:null}const xO=[_O],SO=[bO];let SC=!0;function MO(n){SC=!1}function sR(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function MC(n){uO(n.getCode(),n),mu(n,n,sR)}function RO(n){n.forEach(MC)}function Cu(n){if(typeof n!="string")return n;const e=hO(n);if(e)return e;for(const t of SO){const i=t(n);if(i)return i}return null}function AE(n){RO(n),n.forEach(function(e){n.forEach(function(t){e!==t&&mu(e,t,sR)})})}function TO(n,e,t,i){n.forEach(function(r){e.forEach(function(s){mu(r,s,t),mu(s,r,i)})})}function W0(n,e){return n?typeof n=="string"?Cu(n):n:Cu(e)}function UO(n,e){const t=n.getCode(),i=e.getCode();let r=uA(t,i);if(r)return r;let s=null,a=null;for(const l of xO)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)r=dA(s.inverse,a.forward);else{const l=uA(t,o);l&&(r=dA(l,a.forward))}else{const l=uA(o,i);l&&(r=dA(s.inverse,l))}return r&&(MC(n),MC(e),mu(n,e,r)),r}function dA(n,e){return function(t,i,r,s){return i=n(t,i,r,s),e(i,i,r,s)}}function mE(n,e){const t=Cu(n),i=Cu(e);return UO(t,i)}function CE(n,e){return n}function sa(n,e){return SC&&!cf(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(SC=!1,eO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function FO(n,e){return n}function Ud(n,e){return n}function BO(){AE(cE),AE(uE),TO(uE,cE,aO,oO)}BO();function Ea(n,e){if(!n)throw new Error(e)}new Array(6);function DO(){return[1,0,0,1,0,0]}function LO(n,e,t,i,r,s,a,o){const l=Math.sin(s),c=Math.cos(s);return n[0]=i*c,n[1]=r*l,n[2]=-i*l,n[3]=r*c,n[4]=a*i*c-o*i*l+e,n[5]=a*r*l+o*r*c+t,n}function PO(n,e,t,i,r,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=i){const c=n[l],h=n[l+1];s[o++]=r[0]*c+r[2]*h+r[4],s[o++]=r[1]*c+r[3]*h+r[5];for(let u=2;u<a;u++)s[o++]=n[l+u]}return s&&s.length!=o&&(s.length=o),s}function aR(n,e,t,i,r,s,a){a=a||[];const o=Math.cos(r),l=Math.sin(r),c=s[0],h=s[1];let u=0;for(let d=e;d<t;d+=i){const g=n[d]-c,f=n[d+1]-h;a[u++]=c+g*o-f*l,a[u++]=h+g*l+f*o;for(let m=d+2;m<d+i;++m)a[u++]=n[m]}return a&&a.length!=u&&(a.length=u),a}function NO(n,e,t,i,r,s,a,o){o=o||[];const l=a[0],c=a[1];let h=0;for(let u=e;u<t;u+=i){const d=n[u]-l,g=n[u+1]-c;o[h++]=l+r*d,o[h++]=c+s*g;for(let f=u+2;f<u+i;++f)o[h++]=n[f]}return o&&o.length!=h&&(o.length=h),o}function kO(n,e,t,i,r,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=i){a[o++]=n[l]+r,a[o++]=n[l+1]+s;for(let c=l+2;c<l+i;++c)a[o++]=n[c]}return a&&a.length!=o&&(a.length=o),a}const IE=DO(),QO=[NaN,NaN];let OO=class extends Qc{constructor(){super(),this.extent_=JM(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=PQ((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return fn()}closestPointXY(e,t,i,r){return fn()}containsXY(e,t){return this.closestPointXY(e,t,QO,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return fn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&jM(t),this.extentRevision_=this.getRevision()}return JQ(this.extent_,e)}rotate(e,t){fn()}scale(e,t,i){fn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return fn()}getType(){return fn()}applyTransform(e){fn()}intersectsExtent(e){return fn()}translate(e,t){fn()}transform(e,t){const i=Cu(e),r=i.getUnits()=="tile-pixels"?function(s,a,o){const l=i.getExtent(),c=i.getWorldExtent(),h=pu(c)/pu(l);LO(IE,c[0],c[3],h,-h,0,0,0);const u=PO(s,0,s.length,o,IE,a),d=mE(i,t);return d?d(u,u,o):u}:mE(i,t);return this.applyTransform(r),this}},td=class extends OO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return OQ(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return fn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=vE(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){fn()}setLayout(e,t,i){let r;if(e)r=vE(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=VO(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();aR(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=lf(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();NO(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();kO(i,0,i.length,r,e,t,i),this.changed()}}};function VO(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function vE(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function oR(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function Z0(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const a=t[r];for(let o=0;o<i;++o)n[e++]=a[o]}return e}function zO(n,e,t,i,r){r=r||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Z0(n,e,t[a],i);r[s++]=l,e=l}return r.length=s,r}let GO=class lR extends td{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new lR(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,a=e-s[0],o=t-s[1],l=a*a+o*o;if(l<r){if(l===0)for(let c=0;c<this.stride;++c)i[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);i[0]=s[0]+c*a,i[1]=s[1]+c*o;for(let h=2;h<this.stride;++h)i[h]=s[h]}return i.length=this.stride,l}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return rp(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Q0(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:KM(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=oR(r,0,e,this.stride);r[s++]=r[0]+t;for(let a=1,o=this.stride;a<o;++a)r[s++]=r[a];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(aR(i,0,i.length,r,e,t,i)),this.changed()}};function cR(n,e,t,i){let r=0;const s=n[t-i],a=n[t-i+1];let o=0,l=0;for(;e<t;e+=i){const c=n[e]-s,h=n[e+1]-a;r+=l*c-o*h,o=c,l=h}return r/2}function WO(n,e,t,i){let r=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];r+=cR(n,e,o,i),e=o}return r}function yE(n,e,t,i,r,s,a){const o=n[e],l=n[e+1],c=n[t]-o,h=n[t+1]-l;let u;if(c===0&&h===0)u=e;else{const d=((r-o)*c+(s-l)*h)/(c*c+h*h);if(d>1)u=t;else if(d>0){for(let g=0;g<i;++g)a[g]=O0(n[e+g],n[t+g],d);a.length=i;return}else u=e}for(let d=0;d<i;++d)a[d]=n[u+d];a.length=i}function H0(n,e,t,i,r){let s=n[e],a=n[e+1];for(e+=i;e<t;e+=i){const o=n[e],l=n[e+1],c=ac(s,a,o,l);c>r&&(r=c),s=o,a=l}return r}function ZO(n,e,t,i,r){for(let s=0,a=t.length;s<a;++s){const o=t[s];r=H0(n,e,o,i,r),e=o}return r}function X0(n,e,t,i,r,s,a,o,l,c,h){if(e==t)return c;let u,d;if(r===0){if(d=ac(a,o,n[e],n[e+1]),d<c){for(u=0;u<i;++u)l[u]=n[e+u];return l.length=i,d}return c}h=h||[NaN,NaN];let g=e+i;for(;g<t;)if(yE(n,g-i,g,i,a,o,h),d=ac(a,o,h[0],h[1]),d<c){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i,g+=i}else g+=i*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(yE(n,t-i,e,i,a,o,h),d=ac(a,o,h[0],h[1]),d<c)){for(c=d,u=0;u<i;++u)l[u]=h[u];l.length=i}return c}function HO(n,e,t,i,r,s,a,o,l,c,h){h=h||[NaN,NaN];for(let u=0,d=t.length;u<d;++u){const g=t[u];c=X0(n,e,g,i,r,s,a,o,l,c,h),e=g}return c}function J0(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=e;a<t;a+=i)r[s++]=n.slice(a,a+i);return r.length=s,r}function XO(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];r[s++]=J0(n,e,l,i,r[s]),e=l}return r.length=s,r}function hR(n,e,t,i,r,s,a){const o=(t-e)/i;if(o<3){for(;e<t;e+=i)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const c=[e,t-i];let h=0;for(;c.length>0;){const u=c.pop(),d=c.pop();let g=0;const f=n[d],m=n[d+1],p=n[u],A=n[u+1];for(let C=d+i;C<u;C+=i){const v=n[C],I=n[C+1],w=tO(v,I,f,m,p,A);w>g&&(h=C,g=w)}g>r&&(l[(h-e)/i]=1,d+i<h&&c.push(d,h),h+i<u&&c.push(h,u))}for(let u=0;u<o;++u)l[u]&&(s[a++]=n[e+u*i],s[a++]=n[e+u*i+1]);return a}function fl(n,e){return e*Math.round(n/e)}function JO(n,e,t,i,r,s,a){if(e==t)return a;let o=fl(n[e],r),l=fl(n[e+1],r);e+=i,s[a++]=o,s[a++]=l;let c,h;do if(c=fl(n[e],r),h=fl(n[e+1],r),e+=i,e==t)return s[a++]=c,s[a++]=h,a;while(c==o&&h==l);for(;e<t;){const u=fl(n[e],r),d=fl(n[e+1],r);if(e+=i,u==c&&d==h)continue;const g=c-o,f=h-l,m=u-o,p=d-l;if(g*p==f*m&&(g<0&&m<g||g==m||g>0&&m>g)&&(f<0&&p<f||f==p||f>0&&p>f)){c=u,h=d;continue}s[a++]=c,s[a++]=h,o=c,l=h,c=u,h=d}return s[a++]=c,s[a++]=h,a}function jO(n,e,t,i,r,s,a,o){for(let l=0,c=t.length;l<c;++l){const h=t[l];a=JO(n,e,h,i,r,s,a),o.push(a),e=h}return a}class Iu extends td{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Iu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<N0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(H0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return cR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return J0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=hR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Iu(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Z0(this.flatCoordinates,0,e,this.stride),this.changed()}}function YO(n,e,t,i,r,s,a){let o,l;const c=(t-e)/i;if(c===1)o=e;else if(c===2)o=e,l=r;else if(c!==0){let h=n[e],u=n[e+1],d=0;const g=[0];for(let p=e+i;p<t;p+=i){const A=n[p],C=n[p+1];d+=Math.sqrt((A-h)*(A-h)+(C-u)*(C-u)),g.push(d),h=A,u=C}const f=r*d,m=BQ(g,f);m<0?(l=(f-g[-m-2])/(g[-m-1]-g[-m-2]),o=e+(-m-2)*i):o=e+m*i}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:O0(n[o+h],n[o+i+h],l);return s}function KO(n,e,t,i,r,s){if(t==e)return null;let a;if(r<n[e+i-1])return s?(a=n.slice(e,e+i),a[i-1]=r,a):null;if(n[t-1]<r)return s?(a=n.slice(t-i,t),a[i-1]=r,a):null;if(r==n[e+i-1])return n.slice(e,e+i);let o=e/i,l=t/i;for(;o<l;){const d=o+l>>1;r<n[(d+1)*i-1]?l=d:o=d+1}const c=n[o*i-1];if(r==c)return n.slice((o-1)*i,(o-1)*i+i);const h=n[(o+1)*i-1],u=(r-c)/(h-c);a=[];for(let d=0;d<i-1;++d)a.push(O0(n[(o-1)*i+d],n[o*i+d],u));return a.push(r),a}function qO(n,e,t,i,r){return!KM(r,function(s){return!Co(n,e,t,i,s[0],s[1])})}function Co(n,e,t,i,r,s){let a=0,o=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const c=n[e],h=n[e+1];l<=s?h>s&&(c-o)*(s-l)-(r-o)*(h-l)>0&&a++:h<=s&&(c-o)*(s-l)-(r-o)*(h-l)<0&&a--,o=c,l=h}return a!==0}function uR(n,e,t,i,r,s){if(t.length===0||!Co(n,e,t[0],i,r,s))return!1;for(let a=1,o=t.length;a<o;++a)if(Co(n,t[a-1],t[a],i,r,s))return!1;return!0}function dR(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function j0(n,e,t,i,r,s){return s=s??YM(JM(),n,e,t,i),Q0(r,s)?s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:dR(n,e,t,i,function(a,o){return jQ(r,a,o)}):!1}function $O(n,e,t,i,r){return!!(j0(n,e,t,i,r)||Co(n,e,t,i,r[0],r[1])||Co(n,e,t,i,r[0],r[3])||Co(n,e,t,i,r[2],r[1])||Co(n,e,t,i,r[2],r[3]))}function eV(n,e,t,i,r){if(!$O(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(qO(n,t[s-1],t[s],i,r)&&!j0(n,t[s-1],t[s],i,r))return!1;return!0}function tV(n,e,t,i){let r=n[e],s=n[e+1],a=0;for(let o=e+i;o<t;o+=i){const l=n[o],c=n[o+1];a+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return a}let iV=class RC extends td{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){ZM(this.flatCoordinates,e),this.changed()}clone(){const e=new RC(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<N0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(H0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return dR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,KO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return J0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return YO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return tV(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=hR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new RC(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return j0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Z0(this.flatCoordinates,0,e,this.stride),this.changed()}};class vu extends td{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new vu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,a=ac(e,t,s[0],s[1]);if(a<r){const o=this.stride;for(let l=0;l<o;++l)i[l]=s[l];return i.length=o,a}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return QQ(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return kQ(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=oR(this.flatCoordinates,0,e,this.stride),this.changed()}}function nV(n,e,t,i,r,s,a){let o,l,c,h,u,d,g;const f=r[s+1],m=[];for(let C=0,v=t.length;C<v;++C){const I=t[C];for(h=n[I-i],d=n[I-i+1],o=e;o<I;o+=i)u=n[o],g=n[o+1],(f<=d&&g<=f||d<=f&&f<=g)&&(c=(f-d)/(g-d)*(u-h)+h,m.push(c)),h=u,d=g}let p=NaN,A=-1/0;for(m.sort(GM),h=m[0],o=1,l=m.length;o<l;++o){u=m[o];const C=Math.abs(u-h);C>A&&(c=(h+u)/2,uR(n,e,t,i,c,f)&&(p=c,A=C)),h=u}return isNaN(p)&&(p=r[s]),[p,f,A]}function rV(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function gR(n,e,t,i){let r=0,s=n[t-i],a=n[t-i+1];for(;e<t;e+=i){const o=n[e],l=n[e+1];r+=(o-s)*(l+a),s=o,a=l}return r===0?void 0:r>0}function sV(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=gR(n,e,o,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=o}return!0}function wE(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=gR(n,e,o,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&rV(n,e,o,i),e=o}return e}class Qo extends td{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ZM(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Qo(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<N0(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ZO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return uR(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return WO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),wE(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,XO(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=lf(this.getExtent());this.flatInteriorPoint_=nV(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new vu(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Iu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let a=0,o=i.length;a<o;++a){const l=i[a],c=new Iu(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sV(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=wE(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=jO(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Qo(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return eV(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=zO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function EE(n){if(qM(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new Qo(s,"XY",[s.length])}class xc extends OM(FM){constructor(e={}){const t=VM(e);if(super(t),e.mapID&&(this.mapID=e.mapID),e.mapID==="morioka_ndl_affine"){const i=this.getTileUrlFunction();this.setTileUrlFunction((r,s,a)=>i(r,s,a))}this.initialize(e)}}class yu extends xc{constructor(e={}){super(e),Ie(this,"style",""),Ie(this,"accessToken",""),Ie(this,"mapboxMap"),this.style=e.style,this.mapboxMap=e.mapboxMap,this.accessToken=e.accessToken}}Ie(yu,"isMapbox_",!0);let wu=class extends xc{constructor(e={}){super(e),Ie(this,"style",""),Ie(this,"maplibreMap"),this.style=e.style||"https://tile.openstreetmap.jp/styles/osm-bright/style.json",this.maplibreMap=e.maplibreMap}};Ie(wu,"isMapLibre_",!0);let TC=class extends OM(tQ){constructor(e={}){const t=Object.assign({},e);t.mapType=e.maptype.match(/^google_(.+)$/)?RegExp.$1:"roadmap",t.layerTypes=(e.layers||[]).map(i=>`layer${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()}`),super(t),e.mapID&&(this.mapID=e.mapID),this.initialize(e)}};const aa={ANIMATING:0,INTERACTING:1},Er={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function bE(n,e,t){return(function(i,r,s,a,o){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,h=o?o[0]:0,u=o?o[1]:0;let d=n[0]+l/2+h,g=n[2]-l/2+h,f=n[1]+c/2+u,m=n[3]-c/2+u;d>g&&(d=(g+d)/2,g=d),f>m&&(f=(m+f)/2,m=f);let p=Or(i[0],d,g),A=Or(i[1],f,m);if(a&&t&&r){const C=30*r;p+=-C*Math.log(1+Math.max(0,d-i[0])/C)+C*Math.log(1+Math.max(0,i[0]-g)/C),A+=-C*Math.log(1+Math.max(0,f-i[1])/C)+C*Math.log(1+Math.max(0,i[1]-m)/C)}return[p,A]})}function aV(n){return n}function oV(n){return Math.pow(n,3)}function lp(n){return 1-oV(1-n)}function lV(n){return 3*n*n-2*n*n*n}function cV(n){return n}function Y0(n,e,t,i){const r=k0(e)/t[0],s=pu(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function K0(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Or(i,t/2,e*2)}function hV(n,e,t,i){return e=e!==void 0?e:!0,(function(r,s,a,o){if(r!==void 0){const l=n[0],c=n[n.length-1],h=t?Y0(l,t,a,i):l;if(o)return e?K0(r,h,c):Or(r,c,h);const u=Math.min(h,r),d=Math.floor(WM(n,u,s));return n[d]>h&&d<n.length-1?n[d+1]:n[d]}})}function uV(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,(function(a,o,l,c){if(a!==void 0){const h=r?Y0(e,r,l,s):e;if(c)return i?K0(a,h,t):Or(a,t,h);const u=1e-9,d=Math.ceil(Math.log(e/h)/Math.log(n)-u),g=-o*(.5-u)+.5,f=Math.min(h,a),m=Math.floor(Math.log(e/f)/Math.log(n)+g),p=Math.max(d,m),A=e/Math.pow(n,p);return Or(A,t,h)}})}function _E(n,e,t,i,r){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const c=i?Y0(n,i,o,r):n;return!t||!l?Or(s,e,c):K0(s,c,e)}})}function q0(n){if(n!==void 0)return 0}function xE(n){if(n!==void 0)return n}function dV(n){const e=2*Math.PI/n;return(function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function gV(n){const e=oc(5);return(function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t})}const fV=256,gA=0;let SE=class extends Qc{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=W0(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&MO(),e.center&&(e.center=sa(e.center,this.projection_)),e.extent&&(e.extent=Ud(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Er)delete t[o];this.setProperties(t,!0);const i=AV(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=pV(e),s=i.constraint,a=mV(e);this.constraints_={center:r,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(r[3]-t[3]+t[1]-r[1]),o=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+a,i[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=sa(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=sa(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const h=arguments[r];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(r===t){i&&Fd(i,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const h=arguments[r],u={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||lV,callback:i};if(h.center&&(u.sourceCenter=a,u.targetCenter=h.center.slice(),a=u.targetCenter),h.zoom!==void 0?(u.sourceResolution=o,u.targetResolution=this.getResolutionForZoom(h.zoom),o=u.targetResolution):h.resolution&&(u.sourceResolution=o,u.targetResolution=h.resolution,o=u.targetResolution),h.rotation!==void 0){u.sourceRotation=l;const d=bC(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=l+d,l=u.targetRotation}CV(u)?u.complete=!0:s+=u.duration,c.push(u)}this.animations_.push(c),this.setHint(aa.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[aa.ANIMATING]>0}getInteracting(){return this.hints_[aa.INTERACTING]>0}cancelAnimations(){this.setHint(aa.ANIMATING,-this.hints_[aa.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Fd(r[0].callback,!1),!e)for(let s=0,a=r.length;s<a;++s){const o=r[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l.complete)continue;const c=e-l.start;let h=l.duration>0?c/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const u=l.easing(h);if(l.sourceCenter){const d=l.sourceCenter[0],g=l.sourceCenter[1],f=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;const p=d+u*(f-d),A=g+u*(m-g);this.targetCenter_=[p,A]}if(l.sourceResolution&&l.targetResolution){const d=u===1?l.targetResolution:l.sourceResolution+u*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(d,0,g,!0);this.targetCenter_=this.calculateCenterZoom(f,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=u===1?bC(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+u*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(aa.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=r[0].callback;a&&Fd(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],V0(i,e-this.getRotation()),iO(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-r[0])/s,o=t[1]-e*(t[1]-r[1])/s;i=[a,o]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&CE(e,this.getProjection())}getCenterInternal(){return this.get(Er.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return FO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Ea(t,"The view center is not defined");const i=this.getResolution();Ea(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Ea(r!==void 0,"The view rotation is not defined"),WQ(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Er.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ud(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=k0(e)/t[0],r=pu(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return(function(s){return t/Math.pow(e,s*r)})}getRotation(){return this.get(Er.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return(function(a){return Math.log(i/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();r=fA(r,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=WM(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Or(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(r,Or(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Ea(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Ea(!qM(e),"Cannot fit empty extent provided as `geometry`");const r=Ud(e,this.getProjection());i=EE(r)}else if(e.getType()==="Circle"){const r=Ud(e.getExtent(),this.getProjection());i=EE(r),i.rotate(this.getRotation(),lf(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,c=-1/0,h=-1/0;for(let u=0,d=s.length;u<d;u+=a){const g=s[u]*i-s[u+1]*r,f=s[u]*r+s[u+1]*i;o=Math.min(o,g),l=Math.min(l,f),c=Math.max(c,g),h=Math.max(h,f)}return[o,l,c,h]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),h=Math.sin(c),u=Math.cos(c),d=lf(o);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const g=d[0]*u-d[1]*h,f=d[1]*u+d[0]*h,m=this.getConstrainedCenter([g,f],l),p=t.callback?t.callback:EC;t.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:t.duration,easing:t.easing},p):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),Fd(p,!0))}centerOn(e,t,i){this.centerOnInternal(sa(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(fA(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-i),l=fA(e,r,[o[0]/2+a[3],o[1]/2+a[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=CE(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&sa(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=sa(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&sa(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,0,s,i),o=this.constraints_.center(this.targetCenter_,a,s,i,this.calculateCenterShift(this.targetCenter_,a,r,s));this.get(Er.ROTATION)!==r&&this.set(Er.ROTATION,r),this.get(Er.RESOLUTION)!==a&&(this.set(Er.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Er.CENTER)||!cf(this.get(Er.CENTER),o))&&this.set(Er.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,r,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!cf(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:lp,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(aa.INTERACTING,1)}endInteraction(e,t,i){i=i&&sa(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(aa.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}};function Fd(n,e){setTimeout(function(){n(e)},0)}function pV(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return bE(n.extent,n.constrainOnlyCenter,t)}const e=W0(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,bE(t,!1,!1)}return aV}function AV(n){let e,t,i,r=n.minZoom!==void 0?n.minZoom:gA,s=n.maxZoom!==void 0?n.maxZoom:28;const a=n.zoomFactor!==void 0?n.zoomFactor:2,o=n.multiWorld!==void 0?n.multiWorld:!1,l=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,c=n.showFullExtent!==void 0?n.showFullExtent:!1,h=W0(n.projection,"EPSG:3857"),u=h.getExtent();let d=n.constrainOnlyCenter,g=n.extent;if(!o&&!g&&h.isGlobal()&&(d=!1,g=u),n.resolutions!==void 0){const f=n.resolutions;t=f[r],i=f[s]!==void 0?f[s]:f[f.length-1],n.constrainResolution?e=hV(f,l,!d&&g,c):e=_E(t,i,l,!d&&g,c)}else{const f=(u?Math.max(k0(u),pu(u)):360*$M.degrees/h.getMetersPerUnit())/fV/Math.pow(2,gA),m=f/Math.pow(2,28-gA);t=n.maxResolution,t!==void 0?r=0:t=f/Math.pow(a,r),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(a,s):i=f/Math.pow(a,s):i=m),s=r+Math.floor(Math.log(t/i)/Math.log(a)),i=t/Math.pow(a,s-r),n.constrainResolution?e=uV(a,t,i,l,!d&&g,c):e=_E(t,i,l,!d&&g,c)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:r,zoomFactor:a}}function mV(n){if(n.enableRotation===void 0||n.enableRotation){const e=n.constrainRotation;return e===void 0||e===!0?gV():e===!1?xE:typeof e=="number"?dV(e):xE}return q0}function CV(n){return!(n.sourceCenter&&n.targetCenter&&!cf(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function fA(n,e,t,i,r){const s=Math.cos(-r);let a=Math.sin(-r),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,a=-a;const c=o*s-l*a,h=l*s+o*a;return[c,h]}const IV={PRECOMPOSE:"precompose"},Zt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class vV extends Qc{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Zt.OPACITY]=e.opacity!==void 0?e.opacity:1,Ea(typeof t[Zt.OPACITY]=="number","Layer opacity must be a number"),t[Zt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Zt.Z_INDEX]=e.zIndex,t[Zt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Zt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Zt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Zt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Or(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return fn()}getLayerStatesArray(e){return fn()}getExtent(){return this.get(Zt.EXTENT)}getMaxResolution(){return this.get(Zt.MAX_RESOLUTION)}getMinResolution(){return this.get(Zt.MIN_RESOLUTION)}getMinZoom(){return this.get(Zt.MIN_ZOOM)}getMaxZoom(){return this.get(Zt.MAX_ZOOM)}getOpacity(){return this.get(Zt.OPACITY)}getSourceState(){return fn()}getVisible(){return this.get(Zt.VISIBLE)}getZIndex(){return this.get(Zt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Zt.EXTENT,e)}setMaxResolution(e){this.set(Zt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Zt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Zt.MAX_ZOOM,e)}setMinZoom(e){this.set(Zt.MIN_ZOOM,e)}setOpacity(e){Ea(typeof e=="number","Layer opacity must be a number"),this.set(Zt.OPACITY,e)}setVisible(e){this.set(Zt.VISIBLE,e)}setZIndex(e){this.set(Zt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}let fR=class extends vV{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Zt.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Zt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Vh(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=sc(e,ka.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof SE?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;if(t.layerStatesArray){if(r=t.layerStatesArray.find(a=>a.layer===this),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return yV(r,t.viewState)&&(!s||Q0(s,t.extent))}getAttributions(e){var t;if(!this.isVisible(e))return[];const i=(t=this.getSource())==null?void 0:t.getAttributions();if(!i)return[];const r=e instanceof SE?e.getViewStateAndExtent():e;let s=i(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Zt.MAP,e)}getMapInternal(){return this.get(Zt.MAP)}setMap(e){this.mapPrecomposeKey_&&(Vh(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Vh(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=sc(e,IV.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=sc(this,ka.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);Ea(!t.some(r=>r.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(Zt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function yV(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}class wV extends fR{constructor(e){const t=function(i){const r=this.getSource(),s=r.mapboxMap;if(!s)return console.error("MapboxLayer: mapboxMap is undefined!"),null;s.setStyle(r.style);const a=s.getCanvas(),o=i.viewState,l=this.getVisible();a.style.display=l?"block":"none";const c=this.getOpacity();a.style.opacity=c;const h=o.rotation*-180/Math.PI,u=nu(o.center),d=o.zoom-1,g=s.getBearing(),f=s.getCenter().toArray(),m=s.getZoom();return h==g&&u[0]==f[0]&&u[1]==f[1]&&d==m||(h!=g&&s.rotateTo(h,{animate:!1}),(u[0]!=f[0]||u[1]!=f[1]||d!=m)&&s.jumpTo({center:u,zoom:d,animate:!1}),s._frame&&(s._frame.cancel(),s._frame=null),s._render()),a};super({render:t,source:e.source})}}class EV extends fR{constructor(e){const t=function(i){const r=this.getSource(),s=r.maplibreMap;if(!s)return console.error("MapLibreLayer: maplibreMap is undefined!"),null;s.setStyle(r.style);const a=s.getCanvas(),o=i.viewState,l=this.getVisible();a.style.display=l?"block":"none";const c=this.getOpacity();a.style.opacity=c;const h=-o.rotation*180/Math.PI,u=s.getBearing();Math.abs(h-u)>.01&&(s.stop(),s.setBearing(h));const d=nu(o.center),g=o.zoom-1;if((s.getCenter().toArray().toString()!==d.toString()||s.getZoom()!==g)&&s.jumpTo({center:d,zoom:g,animate:!1}),s._frame&&(s._frame.cancel(),s._frame=null),i.size){const[f,m]=i.size;(a.width!==f||a.height!==m)&&s.resize()}return s._render(),Math.abs(s.getZoom()-g)>.01&&s.setZoom(g),a.style.position="absolute",a.style.left="0",a.style.top="0",a};super({render:t,source:e.source})}}const pR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAABBF0RVh0WE1MOmNvbS5hZG9iZS54bXAAPD94cGFja2V0IGJlZ2luPSIgICAiIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6MTE6NDEgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMS0xMC0yNlQyMTo1MjoxOFo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMS0xMC0yN1QxNzo0MjowN1o8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgkVIwmwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTM5jWRgMAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTAvMjYvMTHjwOqVAAARQHByVld4nMWbB3wURdvAd6/u3V6/27sts/PMQQhFpEU6SlNBRXqTfgkkQOhFSigHIgIWkJqAIJ1QBCz0KkJoQYrSQaQjioBKC+XezWU5fH2/3+/L8fu+fWd3bubZKf95nnlmdjeX2/dk602qD9UnooRc5YjkKp9KyIrkZikfkazcSFaWcuZmpUZScyOpWcqZm6rkU3OTIpGk3EhSViQpVTlzk5IiSUm5VCRC5UaorAiVqpy5VFKESspND6UY03O6U0oYGHo3NCg0ODSj59BQRmhYaHhoaDofFsJiGIVfC78e/hnOwwW4CI1Ttve/AlehLClH6oTrhl8N1wu3CIcFKhqWiwVpWvrG9EcjmXC2nC/1Sd+dHgonh1PCpxQ5nN4pfHHk3qGzOlFUepiiPk5PC/cO9wn3DfcL59deGOqWXC95Saigp/fCY8Lvh0e9Xm94q3DBlXLd2qm5kmRpSrdw9/CEqNwneWQ4HH6hXul6FHVs5Gfh2eGbI6eFp0fLxoZqhE/KC6P5Oa9lhzN7ymofy5PN4anhCRlfFpSVXxNeG26UQf0jyBSO5R1UcjTdF/3c8o+a66j11AbqhCrtpvZQe6lzqnSRukRdjtU8Q52lfqJuqNJt6g/qTzW/ltpKbaO2U99SO9QrF6j71AMqL9b2OvUr9VtMYmgLbaU9dIHkpwM0r+YdtJN20W76ytOa/zZWjpZpTANdNlr7NJVEv0RXpCtFpR+panR1ugZdPCodoGrTdei69MNou3p0ffoN+k36aT+rqcZqfheVQzWiW9HUP0Kn6BVEJ9DF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zV6+JT3q/K+UUkoppZ5Tl9rnzXTvZS/51pTrIJewYX0bzb5r+vfUX7X2ebU/rDnUmslszXqN0v99bSO/80ff/EtrIayb9PNrKMs56kf84zG7v5Te6HqW1yytUb8m7mzNaVbmv4r9stz7I1/WPPKc9sIzuc6ebST3XjlnDZd7OSawd7MmvNs6y5nriXWP9WbWmvq6UoX3Ota9TCttV8f0GZBXXqMep8R6JfdJl73upTKfo+6XbG+j/s9aG7ZmP75rNPZXvNzHLegjrPOtCT9WL+yXY17/tyH3IRB7GXXMtcq0VabZ8xrZt/8TQZzR/ZH/R2U+R33+P8X/GX/2/pB24py9GY74M//JWBN+ar36nJd7Avh6VKf0QbdPXs/yyrDRPhP3sz9znXmPynyutvB/30cpn1CmPC8x1jF+MpbRnteGn1Ivwhg3+I8AG9O+EHNt938fc3KP8pj/+X8i8yj1+93/szKfq2P+z7kdO/R+knUt9fEpfYO/iMs8tlX4MbtnGLbk/TrnYcZw4mLntDV7nfgz9yiPlYN/a/EhbSdtyp7ZyP+jMp/zLsh+W9YpfUffzrpij9FYRdxMr+fX/dn7wZpwwpbqlWHUg7mk+zfn8tE3GM/350Z59TDaQN+LTBsTP/Oelbn3tUtoab1APb70v1JKKaWUUkoppZRSSl1NOxERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERGRO+Qfh5eOajemXSYAAAFTbWtCVPrOyv4Af1WJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4nO3W4WmDYBSGUQdxEQdxEBdxEAdxEQexvIELt6Yh/4oJ54FDm0/7601szlOSJEmSJEmSJEmSJEmSJEmSJEkf0XEc577vT+c5y7V397+6T/dvXddzHMdzmqbHz+wY/Sz31L11FsuyPF7HMAx/vod077JjlX2zYXatzfs9tX/VN7/+je5ftut7Vjnrn+V6nX37xtm/ul7T/ctzvu9f/9fneX7aP9fs/31l23ru1+/btv36zPfnv/2/r/oe1/er90Cu1Xf7nEXVnx3Xa5IkSZIkSZIk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b24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+zWqGFQAACShJREFUWIWVmGusXFUVx39r73POzJy5M3fmPtrblj7p7btYGigGmojExISHQQ0miDFA4lc0SCBRNH4gRhNJ/aIfNAIxUkKIkMgjBBKMCHwQEGKhpbS39HXfve+5M3fmnr23H84+M7e1PDyTlbPPnDl7//da//Vf64zwBQ9jjCilAiDyFgIaUP4nFjDAMtACWtbaRGvtPmte59Lb8gUW137hGCgDFaDkrzMwrABRBxaAWWDeX7esteZyoD4XSJIkorXO+cV7gQFg9fMvLdz74bHm+hOnTP/QsOmeaxBYoJTDbF2n5wa36At7d+XOfOOW0uPAmLcpYN4Y0wyC4LIeuiwQ55wC8kA/sHF62tz5+F/mDz7zytKOTxpBMKsCEq1BCWjBiQAOcRAYQylpcWW0bG6/Kf/Rvd/rfmP1Kn0YOANMAksiYj8XiAcRew9se/ZvtR8/+seFr3xQj3QtDHGhQCCIFtAqDYxI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",AR="data:image/png;base64,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",mR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAABSJJREFUSA3lVU1sVUUU/mbmvvvu+ykt/aUFLImhsQWMPxAVY4wGNbpxZ9gTjYkxMSa4MTEsXLhxZ4wxMcawMmEFmrhwQ0ANBoxGSSkBq6JCKVBa6Ot7796Z43emtE0BCSs3Tt7cmTkz53znfOfMPOA/auaucTacqyCpl5HNO5TqAWmjhRNDjbvVvzPQlov1JMcDFuGFYMyDENTFoMKxZSwaRsxJ58Khpst+wM9dM3cC/RcgsdnY1FNFbl4NqXteqqUaaglQsoCjSghALkCjgJnPWzb3h52RD1q1ga9wwuS3A7wViBQllfS14Oxb0pP1obcMZFS1NMwfhJ+gE7ZA9TbnVz3MpYW5xPsP20X6Hn7tnl08sPJdDbRpMkvS6j7v7F5sqFv0MYqM3peooCc9jaq/Go1GRR4jcGFhFii73Ia52v7Ee/cmzvTMrcDQz5WFmFKa7SHIG9hEkEEHrBXIiIE8YiHbeLSXhjW6EkfDrlGqhRIpXEPRGNPXlexJJN+Lh0XdW248vdjS0QtbC3FfyFBtGOsI0kH5fRbuaYds2KCgf63vPfAd+ywBmhoVOxiZckqx66dtUilHr18xubxYnO4/umh9OSKx3uMV6SwPo1uTzu0a1Ucsto8CP3YWeGdjgGyl+/0GJtPOCFKe07MalbpsPOwIndxW7TYhvI4tJ/VEbHoE5dHpe8XaZ9BFLUsPHT1URXWY7YbPUWaUNgWq3ugVjmX2hHLqmTqH+1OESvJE4nu3L1oA6H5kYKdkyWY1AEPrmmRSY84GHB93eGg4gZ+ngTPkp8X9KrsCcmkKjm2qMF+mxqIg5aZi4YdKgzjrH6X5bxUjAokPG0zqnDDqCFRwbNPAZEDBCrs+SAOag8uMjWJoFKk6xF9OQZNiWjKdlHdyn47awQQygX6uYotA1qIS9CKqkRuJjUC8M/YPihWgwi0ybjQn0SGOvEdMOqPhXOnUquyI2QDWsFKNVLkTWwTijKd1HT9xI94VXaZULjhRo2pDwXiHIxeMUpqUc9tUSN0A56ROlA1WJOfLBiMQ6+kaPL3WrMc93aeShqhyr8Yosxw1IkYXR6WY24ZsmH4L20uKmSdZoJUZViDsNZ6ILcbpYE6h6ec1D7EQlsH0jLq71LlcuqRKH7U1OqMlr3nsomMa7VUSdM57seY3rmKLQEnJHDOt4qTSRZWY+Pi0CN3Vrs+NXk4dY6FwrheWP7uWfhPE9hCID4qwCv0ZcnShfdYmOLIKaP6XgSk6fQAzbVgeBstTXxhR42qY75toWbO6IkCLo0bTza55YRFoxcUi+ZP+HF6APZ8fbB3vm1gFpItyavabK61v5GIOt74EuzGB7aYB1o3mI+akRDBd9xi4dYxigKT3KWVE5b2SaT5VXzYRjjVOu2dLHy+B6Eg3Vlo2OrWrneMzu7M+5HaUISmff82PEqxPTo3Aa6jCbjs46uvAO6V5lYsM/muPYv/sNUw2X/ZX1n++YvkmIN1IN17YXZTN+3YHwZ7MYNdRWA3xyYkXVe+TgvLZifySxnCOIAeb8IcXZux0/nY+2f/RoodqcbHx9K0t6flrl1TdPmyuPG53EGyMNLKyNBKlMvLAfMllQTjl4Y+SrvHGT4mEd9sTgwdutXibiJYOVZ+bHsyP5btDr3sJXckWc0/agW7mQ29+g+U761nCxYJcysf5z3rIluTT5vjQ70v6N4+3jWjVoZG/e8vBPsYrtg2F6RQRZkVaSOycTcJEYpMjjfG+86t0/heLfwDVxeXi8JpGRAAAAABJRU5ErkJggg==",$0="data:image/png;base64,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",bV=new Xi({image:new ns({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:pR})}),_V=new Xi({image:new ns({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:AR})}),xV=new Xi({image:new ns({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:mR})}),SV=new Xi({fill:new Ns({color:[128,128,256,.2]}),stroke:new Po({color:[128,128,256,1],width:3})}),MV=new Xi({image:new ns({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:$0})});let ME=class UC extends C3{constructor(e){e=es(e||{});const t=new _d({source:new yd({wrapX:!1})});t.set("name","gps");const i=new _d({source:new yd({wrapX:!1})});i.set("name","marker");const r=new _d({source:new yd({wrapX:!1})});r.set("name","feature");const s=new _d({source:new yd({wrapX:!1})});s.set("name","envelope");const a=UC.spawnLayer(null,e.source,e.target),o=new Ko;o.set("name","overlay");const l={controls:e.controls?e.controls:[],layers:[a,o,s,r,t,i],target:e.div,view:new Ur({center:e.defaultCenter||[0,0],zoom:e.defaultZoom||2,rotation:e.defaultRotation||0,multiWorld:!0})};e.interactions&&(l.interactions=e.interactions),super(l),Ie(this,"fakeGps"),Ie(this,"fakeRadius"),Ie(this,"geolocation"),Ie(this,"homePosition"),Ie(this,"northUp"),Ie(this,"tapDuration"),Ie(this,"homeMarginPixels"),Ie(this,"tapUIVanish"),Ie(this,"alwaysGpsOn"),Ie(this,"__ignore_first_move"),this.fakeGps=e.fakeGps,this.fakeRadius=e.fakeRadius,this.homePosition=e.homePosition,this.northUp=e.northUp,this.tapDuration=e.tapDuration,this.homeMarginPixels=e.homeMarginPixels,this.tapUIVanish=e.tapUIVanish,this.alwaysGpsOn=e.alwaysGpsOn||!1;const c=this.getView();this.__ignore_first_move=!0;const h=()=>{this.__ignore_first_move||this.dispatchEvent("movestart"),this.__ignore_first_move=!1,c.un("propertychange",h)};c.on("propertychange",h),this.on("moveend",()=>{c.on("propertychange",h)}),c.on("change:resolution",()=>{this.getSource()})}static spawnLayer(e,t,i){return t instanceof yu||t instanceof wu||!(e instanceof lA)?(t instanceof yu?e=new wV({style:t.style,accessToken:t.accessToken,container:i,source:t}):t instanceof wu?e=new EV({style:t.style,container:i,source:t}):e=new lA({source:t}),e.set("name","base")):e.setSource(t),e}getLayer(e="base"){const t=i=>{const r=i.getArray().map(s=>{if(s.get("name")==e)return s;if(s.getLayers)return t(s.getLayers())}).filter(s=>s);if(r.length!=0)return r[0]};return t(this.getLayers())}getSource(e="base"){const t=this.getLayer(e);if(t)return t.getSource()}setFeature(e,t,i){const r=this.getSource(i),s=new m0(e);return t&&s.setStyle(t),r.addFeature(s),s}removeFeature(e,t){this.getSource(t).removeFeature(e)}resetFeature(e){this.getSource(e).clear()}setGPSPosition(e,t=void 0){const i=t=="sub"?xV:t=="hide"?_V:bV;t!="sub"&&this.resetFeature("gps"),e&&(this.setFeature({geometry:new vu(e.xy)},i,"gps"),t||this.setFeature({geometry:new GO(e.xy,e.rad)},SV,"gps"))}setMarker(e,t,i,r){return r||(r="marker"),t.geometry=new vu(e),i?typeof i=="string"?i=new Xi({image:new ns({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:i})}):i instanceof Xi||(i=new Xi({image:new ns(i)})):i=MV,this.setFeature(t,i,r)}resetMarker(e){e||(e="marker"),this.resetFeature(e)}setLine(e,t,i){return this.setVector(e,"Line",t?{stroke:t}:null,i)}setVector(e,t="Line",i,r){r||(r="feature");const s={};i.stroke!=null&&(s.stroke=new Po(i.stroke)),i.fill!=null&&(s.fill=new Ns(i.fill));const a=new Xi(s),o=t==="Line"?new iV(e):new Qo(e);return this.setFeature({geometry:o,name:t},a,r)}resetLine(e){this.resetVector(e)}resetVector(e){e||(e="feature"),this.resetFeature(e)}setEnvelope(e,t,i){return i||(i="envelope"),this.setLine(e,t,i)}removeEnvelope(e,t){t||(t="envelope"),this.removeFeature(e,t)}resetEnvelope(e){e||(e="envelope"),this.resetFeature(e)}setFillEnvelope(e,t,i,r){r||(r="envelope");let s;if(t!=null||i!=null){const a={};t!=null&&(a.stroke=new Po(t)),i!=null&&(a.fill=new Ns(i)),s=new Xi(a)}return this.setFeature({geometry:new Qo([e])},s,r)}exchangeSource(e=void 0){const t=this.getLayers(),i=t.item(0),r=UC.spawnLayer(i,e,this.getTarget());r!=i&&t.setAt(0,r),e&&e.setMap(this)}setLayer(e=void 0){const t=this.getLayer("overlay").getLayers();if(t.clear(),e){const i=new lA({source:e});t.push(i)}}setTransparency(e){const t=(100-e)/100,i=this.getSource();i instanceof xc||i instanceof TC?(this.getLayers().item(0).setOpacity(1),this.getLayers().item(1).setOpacity(t)):this.getLayers().item(0).setOpacity(t)}setGPSMarker(e,t){this.getLayers().item(0).getSource().setGPSMarker(e,t)}};const Rh={DBLCLICK:ka.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup"},RE={ACTIVE:"active"};let id=class extends Qc{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(RE.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(RE.ACTIVE,e)}setMap(e){this.map_=e}};function RV(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:cV,center:n.getConstrainedCenter(r)})}}function ev(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:i!==void 0?i:250,easing:lp})}class TV extends id{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Rh.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,a=i.shiftKey?-this.delta_:this.delta_,o=r.getView();ev(o,a,s,this.duration_),i.preventDefault(),t=!0}return!t}}const Oo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",UV=Oo.includes("safari")&&!Oo.includes("chrom");UV&&(Oo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Oo));const FV=Oo.includes("webkit")&&!Oo.includes("edge"),CR=Oo.includes("macintosh");typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope;(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();function FC(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const BV=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},DV=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},LV=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},IR=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?LV(n):!0},PV=LQ,vR=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(FV&&CR&&e.ctrlKey)},yR=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},NV=function(n){const e=n.originalEvent;return CR?e.metaKey:e.ctrlKey},wR=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ER=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},cc=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},kV=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class QV extends zM{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Qo([i])}getGeometry(){return this.geometry_}}let Oc=class extends id{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Rh.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Rh.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Rh.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Rh.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function tv(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}const pl={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class eh extends Hs{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class OV extends Oc{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new QV(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??vR,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new eh(pl.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new eh(t?pl.BOXEND:pl.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new eh(pl.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new eh(pl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new eh(pl.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class VV extends Oc{constructor(e){super({stopDown:np}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:FC(yR,kV);this.condition_=e.onFocusOnly?FC(IR,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(tv(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();nO(s,a.getResolution()),V0(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=i.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-r*Math.cos(s),o[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:lp})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class zV extends Oc{constructor(e){e=e||{},super({stopDown:np}),this.condition_=e.condition?e.condition:DV,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!cc(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===q0)return;const r=t.getSize(),s=e.pixel,a=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;i.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return cc(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return cc(e)&&vR(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class GV extends Oc{constructor(e){e=e||{},super(e),this.condition_=e.condition?e.condition:wR,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=e.duration!==void 0?e.duration:400}handleDragEvent(e){if(!cc(e))return;const t=e.map,i=t.getSize(),r=e.pixel,s=r[0]-i[0]/2,a=i[1]/2-r[1],o=Math.atan2(a,s),l=Math.sqrt(s*s+a*a),c=t.getView();if(this.lastAngle_!==void 0){const h=this.lastAngle_-o;c.adjustRotationInternal(h)}this.lastAngle_=o,this.lastMagnitude_!==void 0&&c.adjustResolutionInternal(this.lastMagnitude_/l),this.lastMagnitude_!==void 0&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}handleUpEvent(e){if(!cc(e))return!0;const t=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1}handleDownEvent(e){return cc(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0):!1}}class WV extends OV{constructor(e){e=e||{};const t=e.condition?e.condition:wR;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const t=this.getMap().getView();let i=this.getGeometry();if(this.out_){const r=t.rotatedExtentForGeometry(i),s=t.getResolutionForExtentInternal(r),a=t.getResolution()/s;i=i.clone(),i.scale(a*a)}t.fitInternal(i,{duration:this.duration_,easing:lp})}}const Bd={ADD:"add",REMOVE:"remove"},TE={LENGTH:"length"};let Dd=class extends Hs{constructor(e,t,i){super(e),this.element=t,this.index=i}};class ZV extends Qc{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let i=1,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(TE.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Dd(Bd.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Dd(Bd.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Dd(Bd.REMOVE,r,e)),this.dispatchEvent(new Dd(Bd.ADD,t,e))}updateLength_(){this.set(TE.LENGTH,this.array_.length)}assertUnique_(e,t){const i=this.array_;for(let r=0,s=i.length;r<s;++r)if(i[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}const Xa={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class HV extends id{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return yR(t)&&ER(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ka.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Xa.DOWN||r==Xa.LEFT||r==Xa.RIGHT||r==Xa.UP)){const s=e.map.getView(),a=s.getResolution()*this.pixelDelta_;let o=0,l=0;r==Xa.DOWN?l=-a:r==Xa.LEFT?o=-a:r==Xa.RIGHT?o=a:l=a;const c=[o,l];V0(c,s.getRotation()),RV(s,c,this.duration_),i.preventDefault(),t=!0}}return!t}}class XV extends id{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!NV(t)&&ER(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ka.KEYDOWN||e.type==ka.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,a=r==="+"?this.delta_:-this.delta_,o=s.getView();ev(o,a,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const JV=40,jV=300;class YV extends id{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:PV;this.condition_=e.onFocusOnly?FC(IR,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==ka.WHEEL)return!0;const t=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let r=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:r*=JV;break;case WheelEvent.DOM_DELTA_PAGE:r*=jV;break}if(r===0)return!1;this.lastDelta_=r;const s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=t.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=r;const o=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,t),o),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Or(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),ev(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class KV extends Oc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=np),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==q0&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(tv(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class qV extends Oc{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=np),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,a=i.clientY-r.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(tv(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const t=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class $V{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],a=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function UE(n){n=n||{};const e=new ZV,t=new $V(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new zV),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new TV({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new VV({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new KV),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new qV({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new HV),e.push(new XV({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new YV({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new WV({duration:n.zoomDuration})),e}function ez(n){return tz(n[0],n[1],n[2])}function tz(n,e,t){return(e<<n)+t}const iz=/\{z\}/g,nz=/\{x\}/g,rz=/\{y\}/g,sz=/\{-y\}/g;function az(n,e,t,i,r){return n.replace(iz,e.toString()).replace(nz,t.toString()).replace(rz,i.toString()).replace(sz,function(){throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known")})}function oz(n,e){return(function(t,i,r){if(!t)return;const s=t[0];return az(n,s,t[1],t[2])})}function FE(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=oz(n[r]);return lz(i)}function lz(n){return n.length===1?n[0]:(function(e,t,i){if(!e)return;const r=ez(e),s=bC(r,n.length);return n[s](e,t,i)})}for(let n=0;n<9;n++){const e=`ZOOM:${n}`,t=256*Math.pow(2,n);(function(i,r){const s=new Hf({code:i,extent:[0,0,r,r],units:"m"});yc(s),Kg("EPSG:3857",s,a=>{const o=(a[0]+di)*r/(2*di),l=(-a[1]+di)*r/(2*di);return[o,l]},a=>{const o=a[0]*(2*di)/r-di,l=-1*(a[1]*(2*di)/r-di);return[o,l]})})(e,t)}let bR=class extends TQ(FM){constructor(e={}){e=VM(e),e.wrapX=!1;const t=Math.log2(e.width/ro),i=Math.log2(e.height/ro);e.maxZoom=Math.ceil(Math.max(t,i)),e.tileUrlFunction=e.tileUrlFunction||function(r){const s=r[0],a=r[1],o=r[2];return a*ro*Math.pow(2,this.maxZoom-s)>=this.width||o*ro*Math.pow(2,this.maxZoom-s)>=this.height||a<0||o<0?BM:this._tileUrlFunction(r)},super(e),e.mapID&&(this.mapID=e.mapID),e.urls?this._tileUrlFunction=FE(e.urls):e.url&&(this._tileUrlFunction=FE(Array.isArray(e.url)?e.url:[e.url])),this.width=e.width,this.height=e.height,this.maxZoom=e.maxZoom,this._maxxy=Math.pow(2,this.maxZoom)*ro,this.initialize(e)}},Eu=class extends xc{constructor(e={}){super(Object.assign(e,{opaque:!1}))}};Ie(Eu,"isBasemap_",!1);const ds="https://weiwudi.example.com/api/";let pA,Al;class cz{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(!(e in this.listeners))return;const i=this.listeners[e];for(let r=0,s=i.length;r<s;r++)if(i[r]===t){i.splice(r,1);return}}dispatchEvent(e){if(!(e.type in this.listeners))return!0;const t=this.listeners[e.type].slice();for(let i=0,r=t.length;i<r;i++)t[i].call(this,e);return!e.defaultPrevented}}let hz=class Aa extends cz{static async registerSW(e,t){if("serviceWorker"in navigator)try{const i=await navigator.serviceWorker.register(e,t),r=i.installing,s=i.waiting;return r&&(r.state==="activated"&&!s&&window.location.reload(),r.addEventListener("statechange",a=>{r.state==="activated"&&!s&&window.location.reload()})),i.onupdatefound=()=>{i.update()},await Aa.swCheck(),i}catch(i){throw`Error: Service worker registration failed with ${i}`}else throw"Error: Service worker is not supported"}static async swCheck(){return Al!==void 0?Al:(pA===void 0&&(pA=new Promise((e,t)=>{fetch(`${ds}ping`).then(i=>{Al=!!i,e(Al)}).catch(i=>{Al=!1,e(Al)})})),pA)}static async registerMap(e,t){if(!await Aa.swCheck())throw"Weiwudi service worker is not implemented.";let i;const r=["type","url","width","height","tileSize","minZoom","maxZoom","maxLng","maxLat","minLng","minLat"].reduce((a,o)=>(typeof t[o]<"u"&&(t[o]instanceof Array?t[o].map(l=>{a.append(o,l)}):a.append(o,String(t[o]))),a),new URLSearchParams);r.append("mapID",e);const s=new URL(`${ds}add`);if(s.search=r.toString(),i=await(await fetch(s.href)).text(),i.match(/^Error: /))throw i;return new Aa(e,JSON.parse(i))}static async retrieveMap(e){if(!await Aa.swCheck())throw"Weiwudi service worker is not implemented.";let t;if(t=await(await fetch(`${ds}info?mapID=${e}`)).text(),t.match(/^Error: /))throw t;return console.log(t),new Aa(e,JSON.parse(t))}static async removeMap(e){if(!await Aa.swCheck())throw"Weiwudi service worker is not implemented.";let t;if(t=await(await fetch(`${ds}delete?mapID=${e}`)).text(),t.match(/^Error: /))throw t}constructor(e,t){if(super(),!e)throw"MapID is necessary.";this.mapID=e,t&&Object.assign(this,t),this.url=`${ds}cache/${e}/{z}/{x}/{y}`,this.listener=i=>{i.data.mapID===e&&this.dispatchEvent(new CustomEvent(i.data.type,{detail:i.data}))},navigator.serviceWorker.addEventListener("message",this.listener)}release(){navigator.serviceWorker.removeEventListener("message",this.listener),delete this.mapID}checkAspect(){if(!this.mapID)throw"This instance is already released."}async stats(){let e;if(this.checkAspect(),e=await(await fetch(`${ds}stats?mapID=${this.mapID}`)).text(),typeof e=="string"&&e.match(/^Error: /))throw e;return JSON.parse(e)}async clean(){let e;if(this.checkAspect(),e=await(await fetch(`${ds}clean?mapID=${this.mapID}`)).text(),e.match(/^Error: /))throw e}async fetchAll(){let e;if(this.checkAspect(),e=await(await fetch(`${ds}fetchAll?mapID=${this.mapID}`)).text(),e.match(/^Error: /))throw e}async remove(){this.checkAspect(),this.mapID&&await Aa.removeMap(this.mapID),this.release()}async cancel(){let e;if(this.checkAspect(),e=await(await fetch(`${ds}cancel?mapID=${this.mapID}`)).text(),e.match(/^Error: /))throw e}};function Ld(n,e,t){const i=typeof n=="string"?n:n.getCode(),r=typeof e=="string"?e:e.getCode();let s=_o(n,e);if(s==Hp&&i!=r){const a=_o(n,"EPSG:3857"),o=_o("EPSG:3857",e);if(a==Hp&&i!="EPSG:3857")throw"Transform of Source projection is not defined.";if(o==Hp&&r!="EPSG:3857")throw"Transform of Distination projection is not defined.";s=function(l){return nn(nn(l,n,"EPSG:3857"),"EPSG:3857",e)},Kg(n,e,s,function(l){return nn(nn(l,e,"EPSG:3857"),"EPSG:3857",n)})}if(t)return s(t)}var Rg={exports:{}},uz=Rg.exports,BE;function dz(){return BE||(BE=1,(function(n,e){(function(t,i){i(e)})(uz,(function(t){var i=Object.defineProperty,r=(D,O,H)=>O in D?i(D,O,{enumerable:!0,configurable:!0,writable:!0,value:H}):D[O]=H,s=(D,O,H)=>r(D,typeof O!="symbol"?O+"":O,H);function a(D,O,H={}){const K={type:"Feature"};return(H.id===0||H.id)&&(K.id=H.id),H.bbox&&(K.bbox=H.bbox),K.properties=O||{},K.geometry=D,K}function o(D,O,H={}){if(!D)throw new Error("coordinates is required");if(!Array.isArray(D))throw new Error("coordinates must be an Array");if(D.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(D[0])||!h(D[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:D},O,H)}function l(D,O,H={}){for(const K of D){if(K.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(K[K.length-1].length!==K[0].length)throw new Error("First and last Position are not equivalent.");for(let ye=0;ye<K[K.length-1].length;ye++)if(K[K.length-1][ye]!==K[0][ye])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:D},O,H)}function c(D,O={}){const H={type:"FeatureCollection"};return O.id&&(H.id=O.id),O.bbox&&(H.bbox=O.bbox),H.features=D,H}function h(D){return!isNaN(D)&&D!==null&&!Array.isArray(D)}function u(D){if(!D)throw new Error("coord is required");if(!Array.isArray(D)){if(D.type==="Feature"&&D.geometry!==null&&D.geometry.type==="Point")return[...D.geometry.coordinates];if(D.type==="Point")return[...D.coordinates]}if(Array.isArray(D)&&D.length>=2&&!Array.isArray(D[0])&&!Array.isArray(D[1]))return[...D];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function d(D){if(Array.isArray(D))return D;if(D.type==="Feature"){if(D.geometry!==null)return D.geometry.coordinates}else if(D.coordinates)return D.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function g(D){return D.type==="Feature"?D.geometry:D}const f=11102230246251565e-32,m=134217729,p=(3+8*f)*f;function A(D,O,H,K,ye){let J,se,fe,ue,ce=O[0],be=K[0],he=0,Ee=0;be>ce==be>-ce?(J=ce,ce=O[++he]):(J=be,be=K[++Ee]);let Q=0;if(he<D&&Ee<H)for(be>ce==be>-ce?(se=ce+J,fe=J-(se-ce),ce=O[++he]):(se=be+J,fe=J-(se-be),be=K[++Ee]),J=se,fe!==0&&(ye[Q++]=fe);he<D&&Ee<H;)be>ce==be>-ce?(se=J+ce,ue=se-J,fe=J-(se-ue)+(ce-ue),ce=O[++he]):(se=J+be,ue=se-J,fe=J-(se-ue)+(be-ue),be=K[++Ee]),J=se,fe!==0&&(ye[Q++]=fe);for(;he<D;)se=J+ce,ue=se-J,fe=J-(se-ue)+(ce-ue),ce=O[++he],J=se,fe!==0&&(ye[Q++]=fe);for(;Ee<H;)se=J+be,ue=se-J,fe=J-(se-ue)+(be-ue),be=K[++Ee],J=se,fe!==0&&(ye[Q++]=fe);return(J!==0||Q===0)&&(ye[Q++]=J),Q}function C(D,O){let H=O[0];for(let K=1;K<D;K++)H+=O[K];return H}function v(D){return new Float64Array(D)}const I=(3+16*f)*f,w=(2+12*f)*f,b=(9+64*f)*f*f,_=v(4),x=v(8),y=v(12),E=v(16),S=v(4);function R(D,O,H,K,ye,J,se){let fe,ue,ce,be,he,Ee,Q,ve,V,X,$,Ae,Te,Qe,Ge,Ue,Ye,Ct;const Yt=D-ye,It=H-ye,wt=O-J,Bt=K-J;Qe=Yt*Bt,Ee=m*Yt,Q=Ee-(Ee-Yt),ve=Yt-Q,Ee=m*Bt,V=Ee-(Ee-Bt),X=Bt-V,Ge=ve*X-(Qe-Q*V-ve*V-Q*X),Ue=wt*It,Ee=m*wt,Q=Ee-(Ee-wt),ve=wt-Q,Ee=m*It,V=Ee-(Ee-It),X=It-V,Ye=ve*X-(Ue-Q*V-ve*V-Q*X),$=Ge-Ye,he=Ge-$,_[0]=Ge-($+he)+(he-Ye),Ae=Qe+$,he=Ae-Qe,Te=Qe-(Ae-he)+($-he),$=Te-Ue,he=Te-$,_[1]=Te-($+he)+(he-Ue),Ct=Ae+$,he=Ct-Ae,_[2]=Ae-(Ct-he)+($-he),_[3]=Ct;let on=C(4,_),Gr=w*se;if(on>=Gr||-on>=Gr||(he=D-Yt,fe=D-(Yt+he)+(he-ye),he=H-It,ce=H-(It+he)+(he-ye),he=O-wt,ue=O-(wt+he)+(he-J),he=K-Bt,be=K-(Bt+he)+(he-J),fe===0&&ue===0&&ce===0&&be===0)||(Gr=b*se+p*Math.abs(on),on+=Yt*be+Bt*fe-(wt*ce+It*ue),on>=Gr||-on>=Gr))return on;Qe=fe*Bt,Ee=m*fe,Q=Ee-(Ee-fe),ve=fe-Q,Ee=m*Bt,V=Ee-(Ee-Bt),X=Bt-V,Ge=ve*X-(Qe-Q*V-ve*V-Q*X),Ue=ue*It,Ee=m*ue,Q=Ee-(Ee-ue),ve=ue-Q,Ee=m*It,V=Ee-(Ee-It),X=It-V,Ye=ve*X-(Ue-Q*V-ve*V-Q*X),$=Ge-Ye,he=Ge-$,S[0]=Ge-($+he)+(he-Ye),Ae=Qe+$,he=Ae-Qe,Te=Qe-(Ae-he)+($-he),$=Te-Ue,he=Te-$,S[1]=Te-($+he)+(he-Ue),Ct=Ae+$,he=Ct-Ae,S[2]=Ae-(Ct-he)+($-he),S[3]=Ct;const Js=A(4,_,4,S,x);Qe=Yt*be,Ee=m*Yt,Q=Ee-(Ee-Yt),ve=Yt-Q,Ee=m*be,V=Ee-(Ee-be),X=be-V,Ge=ve*X-(Qe-Q*V-ve*V-Q*X),Ue=wt*ce,Ee=m*wt,Q=Ee-(Ee-wt),ve=wt-Q,Ee=m*ce,V=Ee-(Ee-ce),X=ce-V,Ye=ve*X-(Ue-Q*V-ve*V-Q*X),$=Ge-Ye,he=Ge-$,S[0]=Ge-($+he)+(he-Ye),Ae=Qe+$,he=Ae-Qe,Te=Qe-(Ae-he)+($-he),$=Te-Ue,he=Te-$,S[1]=Te-($+he)+(he-Ue),Ct=Ae+$,he=Ct-Ae,S[2]=Ae-(Ct-he)+($-he),S[3]=Ct;const tl=A(Js,x,4,S,y);Qe=fe*be,Ee=m*fe,Q=Ee-(Ee-fe),ve=fe-Q,Ee=m*be,V=Ee-(Ee-be),X=be-V,Ge=ve*X-(Qe-Q*V-ve*V-Q*X),Ue=ue*ce,Ee=m*ue,Q=Ee-(Ee-ue),ve=ue-Q,Ee=m*ce,V=Ee-(Ee-ce),X=ce-V,Ye=ve*X-(Ue-Q*V-ve*V-Q*X),$=Ge-Ye,he=Ge-$,S[0]=Ge-($+he)+(he-Ye),Ae=Qe+$,he=Ae-Qe,Te=Qe-(Ae-he)+($-he),$=Te-Ue,he=Te-$,S[1]=Te-($+he)+(he-Ue),Ct=Ae+$,he=Ct-Ae,S[2]=Ae-(Ct-he)+($-he),S[3]=Ct;const js=A(tl,y,4,S,E);return E[js-1]}function M(D,O,H,K,ye,J){const se=(O-J)*(H-ye),fe=(D-ye)*(K-J),ue=se-fe,ce=Math.abs(se+fe);return Math.abs(ue)>=I*ce?ue:-R(D,O,H,K,ye,J,ce)}function T(D,O){var H,K,ye=0,J,se,fe,ue,ce,be,he,Ee=D[0],Q=D[1],ve=O.length;for(H=0;H<ve;H++){K=0;var V=O[H],X=V.length-1;if(be=V[0],be[0]!==V[X][0]&&be[1]!==V[X][1])throw new Error("First and last coordinates in a ring must be the same");for(se=be[0]-Ee,fe=be[1]-Q,K;K<X;K++){if(he=V[K+1],ue=he[0]-Ee,ce=he[1]-Q,fe===0&&ce===0){if(ue<=0&&se>=0||se<=0&&ue>=0)return 0}else if(ce>=0&&fe<=0||ce<=0&&fe>=0){if(J=M(se,ue,fe,ce,0,0),J===0)return 0;(J>0&&ce>0&&fe<=0||J<0&&ce<=0&&fe>0)&&ye++}be=he,fe=ce,se=ue}}return ye%2!==0}function P(D,O,H={}){if(!D)throw new Error("point is required");if(!O)throw new Error("polygon is required");const K=u(D),ye=g(O),J=ye.type,se=O.bbox;let fe=ye.coordinates;if(se&&F(K,se)===!1)return!1;J==="Polygon"&&(fe=[fe]);let ue=!1;for(var ce=0;ce<fe.length;++ce){const be=T(K,fe[ce]);if(be===0)return!H.ignoreBoundary;be&&(ue=!0)}return ue}function F(D,O){return O[0]<=D[0]&&O[1]<=D[1]&&O[2]>=D[0]&&O[3]>=D[1]}function N(D,O){for(let H=0;H<O.features.length;H++)if(P(D,O.features[H]))return O.features[H]}function L(D,O,H){const K=O.geometry.coordinates[0][0],ye=O.geometry.coordinates[0][1],J=O.geometry.coordinates[0][2],se=D.geometry.coordinates,fe=O.properties.a.geom,ue=O.properties.b.geom,ce=O.properties.c.geom,be=[ye[0]-K[0],ye[1]-K[1]],he=[J[0]-K[0],J[1]-K[1]],Ee=[se[0]-K[0],se[1]-K[1]],Q=[ue[0]-fe[0],ue[1]-fe[1]],ve=[ce[0]-fe[0],ce[1]-fe[1]];let V=(he[1]*Ee[0]-he[0]*Ee[1])/(be[0]*he[1]-be[1]*he[0]),X=(be[0]*Ee[1]-be[1]*Ee[0])/(be[0]*he[1]-be[1]*he[0]);if(H){const $=H[O.properties.a.index],Ae=H[O.properties.b.index],Te=H[O.properties.c.index];let Qe;if(V<0||X<0||1-V-X<0){const Ge=V/(V+X),Ue=X/(V+X);Qe=V/Ae/(Ge/Ae+Ue/Te),X=X/Te/(Ge/Ae+Ue/Te)}else Qe=V/Ae/(V/Ae+X/Te+(1-V-X)/$),X=X/Te/(V/Ae+X/Te+(1-V-X)/$);V=Qe}return[V*Q[0]+X*ve[0]+fe[0],V*Q[1]+X*ve[1]+fe[1]]}function W(D,O,H,K){const ye=D.geometry.coordinates,J=H.geometry.coordinates,se=Math.atan2(ye[0]-J[0],ye[1]-J[1]),fe=ee(se,O[0]);if(fe===void 0)throw new Error("Unable to determine vertex index");const ue=O[1][fe];return L(D,ue.features[0],K)}function ne(D,O,H,K,ye,J,se,fe){let ue;if(se&&(ue=N(D,c([se]))),!ue){if(H){const ce=D.geometry.coordinates,be=H.gridNum,he=H.xOrigin,Ee=H.yOrigin,Q=H.xUnit,ve=H.yUnit,V=H.gridCache,X=de(ce[0],he,Q,be),$=de(ce[1],Ee,ve,be),Ae=V[X]?V[X][$]?V[X][$]:[]:[];O=c(Ae.map(Te=>O.features[Te]))}ue=N(D,O)}return fe&&fe(ue),ue?L(D,ue,J):W(D,K,ye,J)}function de(D,O,H,K){let ye=Math.floor((D-O)/H);return ye>=K&&(ye=K-1),ye}function ee(D,O){let H=Me(D-O[0]),K=Math.PI*2,ye;for(let J=0;J<O.length;J++){const se=(J+1)%O.length,fe=Me(D-O[se]),ue=Math.min(Math.abs(H),Math.abs(fe));H*fe<=0&&ue<K&&(K=ue,ye=J),H=fe}return ye}function Me(D,O=!1){const H=O?function(K){return!(K>=0&&K<Math.PI*2)}:function(K){return!(K>-1*Math.PI&&K<=Math.PI)};for(;H(D);)D=D+2*Math.PI*(D>0?-1:1);return D}function G(D,O){return O&&O>=2.00703||Array.isArray(D[0])?D:D.map(H=>[H.illstNodes,H.mercNodes,H.startEnd])}function te(D){const O=D.features;for(let H=0;H<O.length;H++){const K=O[H];`${K.properties.a.index}`.substring(0,1)==="b"&&`${K.properties.b.index}`.substring(0,1)==="b"?O[H]={geometry:{type:"Polygon",coordinates:[[K.geometry.coordinates[0][2],K.geometry.coordinates[0][0],K.geometry.coordinates[0][1],K.geometry.coordinates[0][2]]]},properties:{a:{geom:K.properties.c.geom,index:K.properties.c.index},b:{geom:K.properties.a.geom,index:K.properties.a.index},c:{geom:K.properties.b.geom,index:K.properties.b.index}},type:"Feature"}:`${K.properties.c.index}`.substring(0,1)==="b"&&`${K.properties.a.index}`.substring(0,1)==="b"&&(O[H]={geometry:{type:"Polygon",coordinates:[[K.geometry.coordinates[0][1],K.geometry.coordinates[0][2],K.geometry.coordinates[0][0],K.geometry.coordinates[0][1]]]},properties:{a:{geom:K.properties.b.geom,index:K.properties.b.index},b:{geom:K.properties.c.geom,index:K.properties.c.index},c:{geom:K.properties.a.geom,index:K.properties.a.index}},type:"Feature"})}return D}function we(D){const O=["a","b","c","a"].map(J=>D.properties[J].geom),H=D.geometry.coordinates[0],K=D.properties,ye={a:{geom:H[0],index:K.a.index},b:{geom:H[1],index:K.b.index},c:{geom:H[2],index:K.c.index}};return l([O],ye)}function le(D){const O=[0,1,2,0].map(K=>D[K][0][0]),H={a:{geom:D[0][0][1],index:D[0][1]},b:{geom:D[1][0][1],index:D[1][1]},c:{geom:D[2][0][1],index:D[2][1]}};return l([O],H)}function xe(D,O,H,K,ye,J=!1,se){const fe=D.map(ue=>{(!se||se<2.00703)&&(ue=Re(ue));const ce=isFinite(ue)?O[ue]:ue==="c"?K:ue==="b0"?ye[0]:ue==="b1"?ye[1]:ue==="b2"?ye[2]:ue==="b3"?ye[3]:(function(){const be=ue.match(/e(\d+)/);if(be){const he=parseInt(be[1]);return H[he]}throw"Bad index value for indexesToTri"})();return J?[[ce[1],ce[0]],ue]:[[ce[0],ce[1]],ue]});return le(fe)}function Re(D){return typeof D=="number"?D:D.replace(/^(c|e|b)(?:ent|dgeNode|box)(\d+)?$/,"$1$2")}const Fe=2.00703;function Ve(D){return!!(D.version||!D.tins&&D.points&&D.tins_points)}function $e(D){return{points:D.points,pointsWeightBuffer:z(D),strictStatus:St(D),verticesParams:Ze(D),centroid:Le(D),edges:G(D.edges||[]),edgeNodes:D.edgeNodes||[],tins:ht(D),kinks:Pe(D.kinks_points),yaxisMode:D.yaxisMode??"invert",strictMode:D.strictMode??"auto",vertexMode:D.vertexMode,bounds:D.bounds,boundsPolygon:D.boundsPolygon,wh:D.wh,xy:D.bounds?D.xy:[0,0]}}function xt(D){const O=k(D),H=O.tins;return{compiled:O,tins:H,points:U(H),strictStatus:O.strict_status,pointsWeightBuffer:O.weight_buffer,verticesParams:O.vertices_params,centroid:O.centroid,kinks:O.kinks}}function z(D){return!D.version||D.version<Fe?["forw","bakw"].reduce((O,H)=>{const K=D.weight_buffer[H];return K&&(O[H]=Object.keys(K).reduce((ye,J)=>{const se=Re(J);return ye[se]=K[J],ye},{})),O},{}):D.weight_buffer}function St(D){return D.strict_status?D.strict_status:D.kinks_points?"strict_error":D.tins_points.length===2?"loose":"strict"}function Ze(D){const O={forw:[D.vertices_params[0]],bakw:[D.vertices_params[1]]};return O.forw[1]=We(D,!1),O.bakw[1]=We(D,!0),O}function We(D,O){return[0,1,2,3].map(H=>{const K=(H+1)%4,ye=xe(["c",`b${H}`,`b${K}`],D.points,D.edgeNodes||[],D.centroid_point,D.vertices_points,O,Fe);return c([ye])})}function Le(D){return{forw:o(D.centroid_point[0],{target:{geom:D.centroid_point[1],index:"c"}}),bakw:o(D.centroid_point[1],{target:{geom:D.centroid_point[0],index:"c"}})}}function ht(D){const O=D.tins_points.length===1?0:1;return{forw:c(D.tins_points[0].map(H=>xe(H,D.points,D.edgeNodes||[],D.centroid_point,D.vertices_points,!1,D.version))),bakw:c(D.tins_points[O].map(H=>xe(H,D.points,D.edgeNodes||[],D.centroid_point,D.vertices_points,!0,D.version)))}}function Pe(D){if(D)return{bakw:c(D.map(O=>o(O)))}}function k(D){return JSON.parse(JSON.stringify(D).replace('"cent"','"c"').replace(/"bbox(\d+)"/g,'"b$1"'))}function U(D){const O=[],H=D.forw.features;for(let K=0;K<H.length;K++){const ye=H[K];["a","b","c"].map((J,se)=>{const fe=ye.geometry.coordinates[0][se],ue=ye.properties[J].geom,ce=ye.properties[J].index;typeof ce=="number"&&(O[ce]=[fe,ue])})}return O}const Y=Fe,ge=class Hr{constructor(){s(this,"points",[]),s(this,"pointsWeightBuffer"),s(this,"strict_status"),s(this,"vertices_params"),s(this,"centroid"),s(this,"edgeNodes"),s(this,"edges"),s(this,"tins"),s(this,"kinks"),s(this,"yaxisMode",Hr.YAXIS_INVERT),s(this,"strictMode",Hr.MODE_AUTO),s(this,"vertexMode",Hr.VERTEX_PLAIN),s(this,"bounds"),s(this,"boundsPolygon"),s(this,"wh"),s(this,"xy"),s(this,"indexedTins"),s(this,"stateFull",!1),s(this,"stateTriangle"),s(this,"stateBackward"),s(this,"priority"),s(this,"importance"),s(this,"xyBounds"),s(this,"mercBounds")}setCompiled(O){if(Ve(O)){this.applyModernState($e(O));return}this.applyLegacyState(xt(O))}applyModernState(O){this.points=O.points,this.pointsWeightBuffer=O.pointsWeightBuffer,this.strict_status=O.strictStatus,this.vertices_params=O.verticesParams,this.centroid=O.centroid,this.edges=O.edges,this.edgeNodes=O.edgeNodes||[],this.tins=O.tins,this.addIndexedTin(),this.kinks=O.kinks,this.yaxisMode=O.yaxisMode??Hr.YAXIS_INVERT,this.vertexMode=O.vertexMode??Hr.VERTEX_PLAIN,this.strictMode=O.strictMode??Hr.MODE_AUTO,O.bounds?(this.bounds=O.bounds,this.boundsPolygon=O.boundsPolygon,this.xy=O.xy,this.wh=O.wh):(this.bounds=void 0,this.boundsPolygon=void 0,this.xy=O.xy??[0,0],O.wh&&(this.wh=O.wh))}applyLegacyState(O){this.tins=O.tins,this.addIndexedTin(),this.strict_status=O.strictStatus,this.pointsWeightBuffer=O.pointsWeightBuffer,this.vertices_params=O.verticesParams,this.centroid=O.centroid,this.kinks=O.kinks,this.points=O.points}addIndexedTin(){const O=this.tins,H=O.forw,K=O.bakw,ye=Math.ceil(Math.sqrt(H.features.length));if(ye<3){this.indexedTins=void 0;return}let J=[],se=[];const fe=H.features.map(V=>{let X=[];return d(V)[0].map($=>{J.length===0?J=[Array.from($),Array.from($)]:($[0]<J[0][0]&&(J[0][0]=$[0]),$[0]>J[1][0]&&(J[1][0]=$[0]),$[1]<J[0][1]&&(J[0][1]=$[1]),$[1]>J[1][1]&&(J[1][1]=$[1])),X.length===0?X=[Array.from($),Array.from($)]:($[0]<X[0][0]&&(X[0][0]=$[0]),$[0]>X[1][0]&&(X[1][0]=$[0]),$[1]<X[0][1]&&(X[0][1]=$[1]),$[1]>X[1][1]&&(X[1][1]=$[1]))}),X}),ue=(J[1][0]-J[0][0])/ye,ce=(J[1][1]-J[0][1])/ye,be=fe.reduce((V,X,$)=>{const Ae=de(X[0][0],J[0][0],ue,ye),Te=de(X[1][0],J[0][0],ue,ye),Qe=de(X[0][1],J[0][1],ce,ye),Ge=de(X[1][1],J[0][1],ce,ye);for(let Ue=Ae;Ue<=Te;Ue++){V[Ue]||(V[Ue]=[]);for(let Ye=Qe;Ye<=Ge;Ye++)V[Ue][Ye]||(V[Ue][Ye]=[]),V[Ue][Ye].push($)}return V},[]),he=K.features.map(V=>{let X=[];return d(V)[0].map($=>{se.length===0?se=[Array.from($),Array.from($)]:($[0]<se[0][0]&&(se[0][0]=$[0]),$[0]>se[1][0]&&(se[1][0]=$[0]),$[1]<se[0][1]&&(se[0][1]=$[1]),$[1]>se[1][1]&&(se[1][1]=$[1])),X.length===0?X=[Array.from($),Array.from($)]:($[0]<X[0][0]&&(X[0][0]=$[0]),$[0]>X[1][0]&&(X[1][0]=$[0]),$[1]<X[0][1]&&(X[0][1]=$[1]),$[1]>X[1][1]&&(X[1][1]=$[1]))}),X}),Ee=(se[1][0]-se[0][0])/ye,Q=(se[1][1]-se[0][1])/ye,ve=he.reduce((V,X,$)=>{const Ae=de(X[0][0],se[0][0],Ee,ye),Te=de(X[1][0],se[0][0],Ee,ye),Qe=de(X[0][1],se[0][1],Q,ye),Ge=de(X[1][1],se[0][1],Q,ye);for(let Ue=Ae;Ue<=Te;Ue++){V[Ue]||(V[Ue]=[]);for(let Ye=Qe;Ye<=Ge;Ye++)V[Ue][Ye]||(V[Ue][Ye]=[]),V[Ue][Ye].push($)}return V},[]);this.indexedTins={forw:{gridNum:ye,xOrigin:J[0][0],yOrigin:J[0][1],xUnit:ue,yUnit:ce,gridCache:be},bakw:{gridNum:ye,xOrigin:se[0][0],yOrigin:se[0][1],xUnit:Ee,yUnit:Q,gridCache:ve}}}transform(O,H,K){if(H&&this.strict_status==Hr.STATUS_ERROR)throw'Backward transform is not allowed if strict_status == "strict_error"';this.yaxisMode==Hr.YAXIS_FOLLOW&&H&&(O=[O[0],-1*O[1]]);const ye=o(O);if(this.bounds&&!H&&!K&&!P(ye,this.boundsPolygon))return!1;const J=H?this.tins.bakw:this.tins.forw,se=H?this.indexedTins.bakw:this.indexedTins.forw,fe=H?this.vertices_params.bakw:this.vertices_params.forw,ue=H?this.centroid.bakw:this.centroid.forw,ce=H?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw;let be,he;this.stateFull&&(this.stateBackward==H?be=this.stateTriangle:(this.stateBackward=H,this.stateTriangle=void 0),he=Q=>{this.stateTriangle=Q});let Ee=ne(ye,J,se,fe,ue,ce,be,he);if(this.bounds&&H&&!K){const Q=o(Ee);if(!P(Q,this.boundsPolygon))return!1}else this.yaxisMode==Hr.YAXIS_FOLLOW&&!H&&(Ee=[Ee[0],-1*Ee[1]]);return Ee}};s(ge,"VERTEX_PLAIN","plain"),s(ge,"VERTEX_BIRDEYE","birdeye"),s(ge,"MODE_STRICT","strict"),s(ge,"MODE_AUTO","auto"),s(ge,"MODE_LOOSE","loose"),s(ge,"STATUS_STRICT","strict"),s(ge,"STATUS_ERROR","strict_error"),s(ge,"STATUS_LOOSE","loose"),s(ge,"YAXIS_FOLLOW","follow"),s(ge,"YAXIS_INVERT","invert");let pe=ge;t.Transform=pe,t.counterTri=we,t.format_version=Y,t.normalizeEdges=G,t.rotateVerticesTriangle=te,t.transformArr=ne,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}))})(Rg,Rg.exports)),Rg.exports}var DE=dz();const gz=["title","attr","officialTitle","dataAttr","author","createdAt","era","license","dataLicense","contributor","mapper","reference","description","url","lang","imageExtension","homePosition","mercZoom"];async function fz(n){return pz(n,!1,!0)}async function pz(n,e,t){var i,r;const s=t?n:{},a=[];if(gz.forEach(o=>{s[o]=n[o]}),(n.imageExtention||n.imageExtension)&&(s.imageExtension=n.imageExtension||n.imageExtention),n.compiled){let o=new DE.Transform;o.setCompiled(n.compiled),o.addIndexedTin();const l=o;s.strictMode=l.strictMode,s.vertexMode=l.vertexMode,s.yaxisMode=l.yaxisMode,s.width=(i=l.wh)==null?void 0:i[0],s.height=(r=l.wh)==null?void 0:r[1],s.gcps=l.points,s.edges=l.edges,a.push(o)}else{s.strictMode=n.strictMode,s.vertexMode=n.vertexMode,s.yaxisMode=n.yaxisMode,s.width=n.width,s.height=n.height,s.gcps=n.gcps,s.edges=n.edges;let o=await LE(n.strictMode,n.vertexMode,n.yaxisMode,n.gcps,n.edges,[n.width,n.height]);a.push(o)}if(n.sub_maps){const o=[];for(let l=0;l<n.sub_maps.length;l++){const c=n.sub_maps[l],h={};if(h.importance=c.importance,h.priority=c.priority,c.compiled){let u=new DE.Transform;u.setCompiled(c.compiled),u.addIndexedTin(),h.bounds=u.bounds,h.gcps=u.points,h.edges=u.edges,a.push(u)}else{h.bounds=c.bounds,h.gcps=c.gcps,h.edges=c.edges;let u=await LE(n.strictMode,n.vertexMode,n.yaxisMode,c.gcps,c.edges,void 0,c.bounds);a.push(u)}o.push(h)}s.sub_maps=o}return[s,a]}async function LE(n,e,t,i=[],r=[],s,a){return i.length<3?"tooLessGcps":(console.error("@maplat/transform requires pre-compiled data. Cannot create from GCPs."),console.error("Please use @maplat/editor or a separate tool to generate compiled data."),"compiledRequired")}let PE=class _R extends bR{constructor(e={}){super(e),Ie(this,"tins"),this.tins=[]}static async createAsync(e){const t=await fz(e);e=t[0];const i=new _R(e);i.tins=t[1];const r=new Au({code:`Illst:${i.mapID}`,extent:[0,0,i.width,i.height],units:"m"});return yc(r),Kg(r,"EPSG:3857",s=>i.tins[0].transform(s,!1),s=>i.tins[0].transform(s,!0)),Ld("EPSG:4326",r),e.sub_maps&&e.sub_maps.map((s,a)=>{const o=a+1,l=`Illst:${i.mapID}#${o}`,c=i.tins[o],h=new Au({code:l,extent:[c.xy[0],c.xy[1],c.wh[0],c.wh[1]],units:"m"});yc(h),Kg(h,"EPSG:3857",m=>c.transform(m,!1,!0),m=>c.transform(m,!0,!0)),Ld("EPSG:4326",h);const u=Object.assign([],s.bounds);u.push(s.bounds[0]);const d=u.map(m=>c.transform(m,!1)),g=Sg([u]),f=Sg([d]);c.xyBounds=g,c.mercBounds=f}),i}xy2MercAsync_specifyLayer(e,t){const i=`Illst:${this.mapID}${t?`#${t}`:""}`;return new Promise((r,s)=>{r(Ld(i,"EPSG:3857",e))})}merc2XyAsync_specifyLayer(e,t){const i=`Illst:${this.mapID}${t?`#${t}`:""}`;return new Promise((r,s)=>{r(Ld("EPSG:3857",i,e))})}xy2MercAsync_returnLayer(e){return new Promise((t,i)=>{const r=this.tins.map((s,a)=>[a,s]).sort((s,a)=>s[1].priority<a[1].priority?1:-1);for(let s=0;s<r.length;s++){const a=r[s][0],o=r[s][1];if(a==0||Mg(e,o.xyBounds)){this.xy2MercAsync_specifyLayer(e,a).then(l=>{t([a,l])}).catch(l=>{i(l)});break}}})}merc2XyAsync_returnLayer(e){return Promise.all(this.tins.map((t,i)=>new Promise((r,s)=>{this.merc2XyAsync_specifyLayer(e,i).then(a=>{i===0||Mg(a,t.xyBounds)?r([t,i,a]):r([t,i])}).catch(a=>{s(a)})}))).then(t=>t.sort((i,r)=>i[0].priority<r[0].priority?1:-1).reduce((i,r,s,a)=>{const o=r[0],l=r[1],c=r[2];if(!c)return i;for(let h=0;h<s;h++){const u=a[h][0];if(a[h][1]===0||Mg(c,u.xyBounds))if(i.length){const d=!i[0],g=d?i[1][2]:i[0][2];return!d||o.importance<g.importance?i:[void 0,[l,c,o]]}else return[void 0,[l,c,o]]}return!i.length||!i[0]?[[l,c,o]]:(i.push([l,c,o]),i.sort((h,u)=>h[2].importance<u[2].importance?1:-1).filter((h,u)=>u<2))},[]).map(i=>{if(i)return[i[0],i[1]]}))}setupMapParameter(e){const t=[this.width/2,this.height/2];this.xy2MercAsync_returnLayer(t).then(i=>{const r=i[0],s=i[1],a=[[t[0]-150,t[1]],[t[0]+150,t[1]],[t[0],t[1]-150],[t[0],t[1]+150]],o=[[0,0],[this.width,0],[this.width,this.height],[0,this.height]],l=[];for(let c=0;c<9;c++){const h=c<4?this.xy2MercAsync_specifyLayer(a[c],r):c==4?Promise.resolve(s):this.xy2MercAsync_specifyLayer(o[c-5],0);l.push(h)}Promise.all(l).then(c=>{const h=Math.sqrt(Math.pow(c[0][0]-c[1][0],2)+Math.pow(c[0][1]-c[1][1],2)),u=Math.sqrt(Math.pow(c[2][0]-c[3][0],2)+Math.pow(c[2][1]-c[3][1],2)),d=(h+u)/2;this.mercZoom||(this.mercZoom=Math.log(300*(2*di)/256/d)/Math.log(2)-3),this.homePosition||(this.homePosition=nu(c[4])),this.envelope=Sg([[c[5],c[6],c[7],c[8],c[5]]]),e(this)}).catch(c=>{throw c})}).catch(i=>{throw i})}mercs2SysCoordsAsync_multiLayer(e){return this.merc2XyAsync_returnLayer(e[0][0]).then(t=>{let i=!1;return Promise.all(t.map((r,s)=>{if(!r){i=!0;return}const a=r[0],o=r[1];return s!==0&&!i?Promise.resolve([o]):Promise.all(e[0].map((l,c)=>c===0?Promise.resolve(o):this.merc2XyAsync_specifyLayer(l,a)))}))}).then(t=>t.map(i=>{if(i)return[i.map(r=>this.xy2SysCoord(r)),e[1]]}))}merc2XyAsync_base(e,t){return this.merc2XyAsync_returnLayer(e).then(i=>{if(!(t&&!i[0]))return i[0]?i[0][1]:i[1][1]})}merc2XyAsync_ignoreBackground(e){return this.merc2XyAsync_base(e,!0)}merc2XyAsync(e){return this.merc2XyAsync_base(e,!1)}xy2MercAsync(e){return this.xy2MercAsync_returnLayer(e).then(t=>t[1])}viewpoint2MercsAsync(e,t){const i=this.viewpoint2SysCoords(e,t),r=this.sysCoords2Xys(i);return this.xy2MercAsync_returnLayer(r[0][0]).then(s=>{const a=s[0],o=s[1],l=r[0].map((c,h)=>h===0?Promise.resolve(o):this.xy2MercAsync_specifyLayer(c,a));return Promise.all(l).then(c=>[c,t])})}mercs2ViewpointAsync(e){return this.merc2XyAsync_returnLayer(e[0][0]).then(t=>{const i=t[0]||t[1],r=i[0],s=i[1];return Promise.all(e[0].map((a,o)=>o===0?s:this.merc2XyAsync_specifyLayer(a,r)))}).then(t=>{const i=this.xys2SysCoords([t,e[1]]);return this.sysCoords2Viewpoint(i)})}};var Hi=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof globalThis<"u"&&globalThis||{},pn={searchParams:"URLSearchParams"in Hi,iterable:"Symbol"in Hi&&"iterator"in Symbol,blob:"FileReader"in Hi&&"Blob"in Hi&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in Hi,arrayBuffer:"ArrayBuffer"in Hi};function Az(n){return n&&DataView.prototype.isPrototypeOf(n)}if(pn.arrayBuffer)var mz=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Cz=ArrayBuffer.isView||function(n){return n&&mz.indexOf(Object.prototype.toString.call(n))>-1};function Vc(n){if(typeof n!="string"&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(n)||n==="")throw new TypeError('Invalid character in header field name: "'+n+'"');return n.toLowerCase()}function iv(n){return typeof n!="string"&&(n=String(n)),n}function nv(n){var e={next:function(){var t=n.shift();return{done:t===void 0,value:t}}};return pn.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Ri(n){this.map={},n instanceof Ri?n.forEach(function(e,t){this.append(t,e)},this):Array.isArray(n)?n.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(e){this.append(e,n[e])},this)}Ri.prototype.append=function(n,e){n=Vc(n),e=iv(e);var t=this.map[n];this.map[n]=t?t+", "+e:e};Ri.prototype.delete=function(n){delete this.map[Vc(n)]};Ri.prototype.get=function(n){return n=Vc(n),this.has(n)?this.map[n]:null};Ri.prototype.has=function(n){return this.map.hasOwnProperty(Vc(n))};Ri.prototype.set=function(n,e){this.map[Vc(n)]=iv(e)};Ri.prototype.forEach=function(n,e){for(var t in this.map)this.map.hasOwnProperty(t)&&n.call(e,this.map[t],t,this)};Ri.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),nv(n)};Ri.prototype.values=function(){var n=[];return this.forEach(function(e){n.push(e)}),nv(n)};Ri.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),nv(n)};pn.iterable&&(Ri.prototype[Symbol.iterator]=Ri.prototype.entries);function AA(n){if(!n._noBody){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}}function xR(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function Iz(n){var e=new FileReader,t=xR(e);return e.readAsArrayBuffer(n),t}function vz(n){var e=new FileReader,t=xR(e),i=/charset=([A-Za-z0-9_-]+)/.exec(n.type),r=i?i[1]:"utf-8";return e.readAsText(n,r),t}function yz(n){for(var e=new Uint8Array(n),t=new Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(e[i]);return t.join("")}function NE(n){if(n.slice)return n.slice(0);var e=new Uint8Array(n.byteLength);return e.set(new Uint8Array(n)),e.buffer}function SR(){return this.bodyUsed=!1,this._initBody=function(n){this.bodyUsed=this.bodyUsed,this._bodyInit=n,n?typeof n=="string"?this._bodyText=n:pn.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:pn.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:pn.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():pn.arrayBuffer&&pn.blob&&Az(n)?(this._bodyArrayBuffer=NE(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):pn.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||Cz(n))?this._bodyArrayBuffer=NE(n):this._bodyText=n=Object.prototype.toString.call(n):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof n=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):pn.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},pn.blob&&(this.blob=function(){var n=AA(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var n=AA(this);return n||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(pn.blob)return this.blob().then(Iz);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var n=AA(this);if(n)return n;if(this._bodyBlob)return vz(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(yz(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},pn.formData&&(this.formData=function(){return this.text().then(bz)}),this.json=function(){return this.text().then(JSON.parse)},this}var wz=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Ez(n){var e=n.toUpperCase();return wz.indexOf(e)>-1?e:n}function Vo(n,e){if(!(this instanceof Vo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var t=e.body;if(n instanceof Vo){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,e.headers||(this.headers=new Ri(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,!t&&n._bodyInit!=null&&(t=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Ri(e.headers)),this.method=Ez(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||(function(){if("AbortController"in Hi){var s=new AbortController;return s.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&t)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(t),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+new Date().getTime());else{var r=/\?/;this.url+=(r.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Vo.prototype.clone=function(){return new Vo(this,{body:this._bodyInit})};function bz(n){var e=new FormData;return n.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),s=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(s))}}),e}function _z(n){var e=new Ri,t=n.replace(/\r?\n[\t ]+/g," ");return t.split("\r").map(function(i){return i.indexOf(`
`)===0?i.substr(1,i.length):i}).forEach(function(i){var r=i.split(":"),s=r.shift().trim();if(s){var a=r.join(":").trim();try{e.append(s,a)}catch(o){console.warn("Response "+o.message)}}}),e}SR.call(Vo.prototype);function rs(n,e){if(!(this instanceof rs))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Ri(e.headers),this.url=e.url||"",this._initBody(n)}SR.call(rs.prototype);rs.prototype.clone=function(){return new rs(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Ri(this.headers),url:this.url})};rs.error=function(){var n=new rs(null,{status:200,statusText:""});return n.ok=!1,n.status=0,n.type="error",n};var xz=[301,302,303,307,308];rs.redirect=function(n,e){if(xz.indexOf(e)===-1)throw new RangeError("Invalid status code");return new rs(null,{status:e,headers:{location:n}})};var ao=Hi.DOMException;try{new ao}catch{ao=function(n,e){this.message=n,this.name=e;var t=Error(n);this.stack=t.stack},ao.prototype=Object.create(Error.prototype),ao.prototype.constructor=ao}function MR(n,e){return new Promise(function(t,i){var r=new Vo(n,e);if(r.signal&&r.signal.aborted)return i(new ao("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var c={statusText:s.statusText,headers:_z(s.getAllResponseHeaders()||"")};r.url.indexOf("file://")===0&&(s.status<200||s.status>599)?c.status=200:c.status=s.status,c.url="responseURL"in s?s.responseURL:c.headers.get("X-Request-URL");var h="response"in s?s.response:s.responseText;setTimeout(function(){t(new rs(h,c))},0)},s.onerror=function(){setTimeout(function(){i(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){i(new TypeError("Network request timed out"))},0)},s.onabort=function(){setTimeout(function(){i(new ao("Aborted","AbortError"))},0)};function o(c){try{return c===""&&Hi.location.href?Hi.location.href:c}catch{return c}}if(s.open(r.method,o(r.url),!0),r.credentials==="include"?s.withCredentials=!0:r.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(pn.blob?s.responseType="blob":pn.arrayBuffer&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Ri||Hi.Headers&&e.headers instanceof Hi.Headers)){var l=[];Object.getOwnPropertyNames(e.headers).forEach(function(c){l.push(Vc(c)),s.setRequestHeader(c,iv(e.headers[c]))}),r.headers.forEach(function(c,h){l.indexOf(h)===-1&&s.setRequestHeader(h,c)})}else r.headers.forEach(function(c,h){s.setRequestHeader(h,c)});r.signal&&(r.signal.addEventListener("abort",a),s.onreadystatechange=function(){s.readyState===4&&r.signal.removeEventListener("abort",a)}),s.send(typeof r._bodyInit>"u"?null:r._bodyInit)})}MR.polyfill=!0;Hi.fetch||(Hi.fetch=MR,Hi.Headers=Ri,Hi.Request=Vo,Hi.Response=rs);const RR="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAAqACAAQAAAABAAAANKADAAQAAAABAAAANAAAAAD/4QkhaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+AP/tADhQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAAADhCSU0EJQAAAAAAENQdjNmPALIE6YAJmOz4Qn7/4hskSUNDX1BST0ZJTEUAAQEAABsUYXBwbAIQAABtbnRyUkdCIFhZWiAH4AAKAB0AFAA0AAZhY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFkZXNjAAABUAAAAGJkc2NtAAABtAAABBhjcHJ0AAAFzAAAACN3dHB0AAAF8AAAABRyWFlaAAAGBAAAABRnWFlaAAAGGAAAABRiWFlaAAAGLAAAABRyVFJDAAAGQAAACAxhYXJnAAAOTAAAACB2Y2d0AAAObAAABhJuZGluAAAUgAAABj5jaGFkAAAawAAAACxtbW9kAAAa7AAAAChiVFJDAAAGQAAACAxnVFJDAAAGQAAACAxhYWJnAAAOTAAAACBhYWdnAAAOTAAAACBkZXNjAAAAAAAAAAhEaXNwbGF5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAiAAAADGhySFIAAAAUAAABqGtvS1IAAAAMAAABvG5iTk8AAAASAAAByGlkAAAAAAASAAAB2mh1SFUAAAAUAAAB7GNzQ1oAAAAWAAACAGRhREsAAAAcAAACFnVrVUEAAAAcAAACMmFyAAAAAAAUAAACTml0SVQAAAAUAAACYnJvUk8AAAASAAACdm5sTkwAAAAWAAACiGhlSUwAAAAWAAACnmVzRVMAAAASAAACdmZpRkkAAAAQAAACtHpoVFcAAAAMAAACxHZpVk4AAAAOAAAC0HNrU0sAAAAWAAAC3npoQ04AAAAMAAACxHJ1UlUAAAAkAAAC9GZyRlIAAAAWAAADGG1zAAAAAAASAAADLmNhRVMAAAAYAAADQHRoVEgAAAAMAAADWGVzWEwAAAASAAACdmRlREUAAAAQAAADZGVuVVMAAAASAAADdHB0QlIAAAAYAAADhnBsUEwAAAASAAADnmVsR1IAAAAiAAADsHN2U0UAAAAQAAAD0nRyVFIAAAAUAAAD4mphSlAAAAAMAAAD9nB0UFQAAAAWAAAEAgBMAEMARAAgAHUAIABiAG8AagBpzuy37AAgAEwAQwBEAEYAYQByAGcAZQAtAEwAQwBEAEwAQwBEACAAVwBhAHIAbgBhAFMAegDtAG4AZQBzACAATABDAEQAQgBhAHIAZQB2AG4A/QAgAEwAQwBEAEwAQwBEAC0AZgBhAHIAdgBlAHMAawDmAHIAbQQaBD4EOwRMBD4EQAQ+BDIEOAQ5ACAATABDAEQgDwBMAEMARAAgBkUGRAZIBkYGKQBMAEMARAAgAGMAbwBsAG8AcgBpAEwAQwBEACAAYwBvAGwAbwByAEsAbABlAHUAcgBlAG4ALQBMAEMARCAPAEwAQwBEACAF5gXRBeIF1QXgBdkAVgDkAHIAaQAtAEwAQwBEX2mCcgAgAEwAQwBEAEwAQwBEACAATQDgAHUARgBhAHIAZQBiAG4A6QAgAEwAQwBEBCYEMgQ1BEIEPQQ+BDkAIAQWBBoALQQ0BDgEQQQ/BDsENQQ5AEwAQwBEACAAYwBvAHUAbABlAHUAcgBXAGEAcgBuAGEAIABMAEMARABMAEMARAAgAGUAbgAgAGMAbwBsAG8AcgBMAEMARAAgDioONQBGAGEAcgBiAC0ATABDAEQAQwBvAGwAbwByACAATABDAEQATABDAEQAIABDAG8AbABvAHIAaQBkAG8ASwBvAGwAbwByACAATABDAEQDiAOzA8cDwQPJA7wDtwAgA78DuAPMA70DtwAgAEwAQwBEAEYA5AByAGcALQBMAEMARABSAGUAbgBrAGwAaQAgAEwAQwBEMKsw6TD8AEwAQwBEAEwAQwBEACAAYQAgAEMAbwByAGUAc3RleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMTYAAFhZWiAAAAAAAADzUgABAAAAARbPWFlaIAAAAAAAAGXoAAA8EAAACdBYWVogAAAAAAAAapMAAKrFAAAXilhZWiAAAAAAAAAmWwAAGSwAALHSY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA2ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKMAqACtALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkH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",TR="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAAqACAAQAAAABAAAANKADAAQAAAABAAAANAAAAAD/4QkhaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+AP/tADhQaG90b3Nob3AgMy4wADhCSU0EBAAAAAAAADhCSU0EJQAAAAAAENQdjNmPALIE6YAJmOz4Qn7/4gKESUNDX1BST0ZJTEUAAQEAAAJ0YXBwbAQAAABtbnRyUkdCIFhZWiAH3AALAAwAEgA6ABdhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGxmSfnZPIV3n7QGSpkeOnQsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtkZXNjAAABCAAAAGNkc2NtAAABbAAAACxjcHJ0AAABmAAAAC13dHB0AAAByAAAABRyWFlaAAAB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",UR="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAADSgAwAEAAAAAQAAADQAAAAA/+EJIWh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/PgD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+IbJElDQ19QUk9GSUxFAAEBAAAbFGFwcGwCEAAAbW50clJHQiBYWVogB+EABAAEABcABgAzYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARZGVzYwAAAVAAAABiZHNjbQAAAbQAAAQYY3BydAAABcwAAAAjd3RwdAAABfAAAAAUclhZWgAABgQAAAAUZ1hZWgAABhgAAAAUYlhZWgAABiwAAAAUclRSQwAABkAAAAgMYWFyZwAADkwAAAAgdmNndAAADmwAAAYSbmRpbgAAFIAAAAY+Y2hhZAAAGsAAAAAsbW1vZAAAGuwAAAAoYlRSQwAABkAAAAgMZ1RSQwAABkAAAAgMYWFiZwAADkwAAAAgYWFnZwAADkwAAAAgZGVzYwAAAAAAAAAIRGlzcGxheQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG1sdWMAAAAAAAAAIgAAAAxockhSAAAAFAAAAahrb0tSAAAADAAAAbxuYk5PAAAAEgAAAchpZAAAAAAAEgAAAdpodUhVAAAAFAAAAexjc0NaAAAAFgAAAgBkYURLAAAAHAAAAhZ1a1VBAAAAHAAAAjJhcgAAAAAAFAAAAk5pdElUAAAAFAAAAmJyb1JPAAAAEgAAAnZubE5MAAAAFgAAAohoZUlMAAAAFgAAAp5lc0VTAAAAEgAAAnZmaUZJAAAAEAAAArR6aFRXAAAADAAAAsR2aVZOAAAADgAAAtBza1NLAAAAFgAAAt56aENOAAAADAAAAsRydVJVAAAAJAAAAvRmckZSAAAAFgAAAxhtcwAAAAAAEgAAAy5jYUVTAAAAGAAAA0B0aFRIAAAADAAAA1hlc1hMAAAAEgAAAnZkZURFAAAAEAAAA2RlblVTAAAAEgAAA3RwdEJSAAAAGAAAA4ZwbFBMAAAAEgAAA55lbEdSAAAAIgAAA7BzdlNFAAAAEAAAA9J0clRSAAAAFAAAA+JqYUpQAAAADAAAA/ZwdFBUAAAAFgAABAIATABDAEQAIAB1ACAAYgBvAGoAac7st+wAIABMAEMARABGAGEAcgBnAGUALQBMAEMARABMAEMARAAgAFcAYQByAG4AYQBTAHoA7QBuAGUAcwAgAEwAQwBEAEIAYQByAGUAdgBuAP0AIABMAEMARABMAEMARAAtAGYAYQByAHYAZQBzAGsA5gByAG0EGgQ+BDsETAQ+BEAEPgQyBDgEOQAgAEwAQwBEIA8ATABDAEQAIAZFBkQGSAZGBikATABDAEQAIABjAG8AbABvAHIAaQBMAEMARAAgAGMAbwBsAG8AcgBLAGwAZQB1AHIAZQBuAC0ATABDAEQgDwBMAEMARAAgBeYF0QXiBdUF4AXZAFYA5AByAGkALQBMAEMARF9pgnIAIABMAEMARABMAEMARAAgAE0A4AB1AEYAYQByAGUAYgBuAP0AIABMAEMARAQmBDIENQRCBD0EPgQ5ACAEFgQaAC0ENAQ4BEEEPwQ7BDUEOQBMAEMARAAgAGMAbwB1AGwAZQB1AHIAVwBhAHIAbgBhACAATABDAEQATABDAEQAIABlAG4AIABjAG8AbABvAHIATABDAEQAIA4qDjUARgBhAHIAYgAtAEwAQwBEAEMAbwBsAG8AcgAgAEwAQwBEAEwAQwBEACAAQwBvAGwAbwByAGkAZABvAEsAbwBsAG8AcgAgAEwAQwBEA4gDswPHA8EDyQO8A7cAIAO/A7gDzAO9A7cAIABMAEMARABGAOQAcgBnAC0ATABDAEQAUgBlAG4AawBsAGkAIABMAEMARDCrMOkw/ABMAEMARABMAEMARAAgAGEAIABDAG8AcgBlAHN0ZXh0AAAAAENvcHlyaWdodCBBcHBsZSBJbmMuLCAyMDE3AABYWVogAAAAAAAA81IAAQAAAAEWz1hZWiAAAAAAAABl6AAAPBAAAAnQWFlaIAAAAAAAAGqTAACqxQAAF4pYWVogAAAAAAAAJlsAABksAACx0mN1cnYAAAAAAAAEAAAAAAUACgAPABQAGQAeACMAKAAtADIANgA7AEAARQBKAE8AVABZAF4AYwBoAG0AcgB3AHwAgQCGAIsAkACVAJoAnwCjAKgArQCyALcAvADBAMYAywDQANUA2wDgAOUA6wDwAPYA+wEBAQcBDQETARkBHwElASsBMgE4AT4BRQFMAVIBWQFgAWcBbgF1AXwBgwGLAZIBmgGhAakBsQG5AcEByQHRAdkB4QHpAfIB+gIDAgwCFAIdAiYCLwI4AkECSwJUAl0CZwJxAnoChAKOApgCogKsArYCwQLLAtUC4ALrAvUDAAMLAxYDIQMtAzgDQwNPA1oDZgNyA34DigOWA6IDrgO6A8cD0wPgA+wD+QQGBBMEIAQtBDsESARVBGMEcQR+BIwEmgSoBLYExATTBOEE8AT+BQ0FHAUrBToFSQVYBWcF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",Sz={osm:{mapID:"osm",title:{ja:"",en:"OpenStreetMap"},label:{ja:"OSM()",en:"OSM(Now)"},attr:" OpenStreetMap contributors",maptype:"base",thumbnail:RR,urls:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},gsi:{mapID:"gsi",title:{ja:"",en:"Geospatial Information Authority of Japan Map"},label:{ja:"",en:"GSI Map"},attr:{ja:"",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",maxZoom:18,thumbnail:TR},gsi_ortho:{mapID:"gsi_ortho",title:{ja:"",en:"Geospatial Information Authority of Japan Ortho aerial photo"},label:{ja:"",en:"GSI Ortho"},attr:{ja:"",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg",maxZoom:18,thumbnail:UR}},kE=n=>(n||"").match(/^(?:base|overlay|google(?:_(?:roadmap|satellite|hybrid|terrain))?|mapbox|maplibre|osm)$/);async function Mz(n,e){if(typeof n=="string"&&(n=Sz[n]),n=es(Object.assign(n,e)),n.label=n.label||n.year,kE(n.maptype)){const a=n.maptype==="base"?xc:n.maptype==="overlay"?Eu:n.maptype==="mapbox"?yu:n.maptype==="maplibre"?wu:TC;a.isBasemap()?(n.homePosition=n.homePos,n.mercZoom=n.defZoom):(n.homePosition||(n.homePosition=n.homePos),n.mercZoom||(n.mercZoom=n.defZoom)),delete n.homePos,delete n.defZoom,n.zoomRestriction&&(n.maxZoom=n.maxZoom||n.mercMaxZoom,n.minZoom=n.minZoom||n.mercMinZoom),n.zoomRestriction=n.mercMaxZoom=n.mercMinZoom=void 0,n.translator&&(n.url=n.translator(n.url)),n.imageExtension||(n.imageExtension="jpg"),n.mapID&&!n.url&&!n.urls&&(n.url=n.tms?`tiles/${n.mapID}/{z}/{x}/{-y}.${n.imageExtension}`:`tiles/${n.mapID}/{z}/{x}/{y}.${n.imageExtension}`),n.weiwudi=await mA(n),n.weiwudi&&(n.url=n.weiwudi.url,delete n.urls);const o=await a.createAsync(n);return await o.initialWait,o}else if(n.noload)return n.mercMaxZoom=n.mercMinZoom=void 0,new PE(n);const t=n.settingFile||`maps/${n.mapID}.json`,i=await fetch(t);if(!i.ok)throw new Error("Fail to load map json");const r=await i.json();if(n=es(Object.assign(r,n)),n.label=n.label||r.year,n.translator&&(n.url=n.translator(n.url)),n.maptype||(n.maptype="maplat"),kE(n.maptype)){const a=n.maptype==="base"?xc:n.maptype==="overlay"?Eu:n.maptype==="mapbox"?yu:n.maptype==="maplibre"?wu:TC;a.isBasemap()?(n.homePosition=n.homePos,n.mercZoom=n.defZoom):(n.homePosition||(n.homePosition=n.homePos),n.mercZoom||(n.mercZoom=n.defZoom)),delete n.homePos,delete n.defZoom,n.zoomRestriction&&(n.maxZoom=n.maxZoom||n.mercMaxZoom,n.minZoom=n.minZoom||n.mercMinZoom),n.zoomRestriction=n.mercMaxZoom=n.mercMinZoom=void 0,n.imageExtension||(n.imageExtension="jpg"),n.mapID&&!n.url&&!n.urls&&(n.url=n.tms?`tiles/${n.mapID}/{z}/{x}/{-y}.${n.imageExtension}`:`tiles/${n.mapID}/{z}/{x}/{y}.${n.imageExtension}`),n.weiwudi=await mA(n),n.weiwudi&&(n.url=n.weiwudi.url,delete n.urls);const o=await a.createAsync(n);try{return await o.initialWait,o}catch{return o}}if(delete n.homePos,delete n.defZoom,n.imageExtension||(n.imageExtension="jpg"),n.mapID&&!n.url&&!n.urls&&(n.url=`tiles/${n.mapID}/{z}/{x}/{y}.${n.imageExtension}`),!n.compiled||!n.compiled.wh)throw console.error(`[Maplat] Missing compiled.wh for mapID=${n.mapID}. Check map setting file: ${t}`),new Error(`Map ${n.mapID} is missing compiled data.`);n.width=n.width||n.compiled.wh[0],n.height=n.height||n.compiled.wh[1],n.weiwudi=await mA(n),n.weiwudi&&(n.url=n.weiwudi.url,delete n.urls);const s=await PE.createAsync(n);return await s.initialWait,await new Promise(a=>{s.setupMapParameter(()=>a())}),s}async function mA(n){const e={};if(n.maptype==="mapbox"||n.maptype==="maplibre"||n.maptype==="google"||!n.enableCache)return;n.maptype==="base"||n.maptype==="overlay"?e.type="wmts":e.type="xyz",e.url=n.urls?n.urls:n.url,e.width=n.width,e.height=n.height,e.maxZoom=n.maxZoom,e.minZoom=n.minZoom;const t=n.envelopeLngLats;if(t){const r=t.reduce((s,a)=>(s[0]=s[0]>a[0]?a[0]:s[0],s[1]=s[1]<a[0]?a[0]:s[1],s[2]=s[2]>a[1]?a[1]:s[2],s[3]=s[3]<a[1]?a[1]:s[3],s),[1/0,-1/0,1/0,-1/0]);["minLng","maxLng","minLat","maxLat"].map((s,a)=>{e[s]=r[a]})}let i;try{i=await hz.registerMap(n.mapID,e)}catch{}return i}function CA(n,e){return n+(Math.random()-.5)*e}function BC(n,e){if(n instanceof Array)return n.map(i=>BC(i,e));const t=Math.pow(10,e);return Math.round(n*t)/t}var Tg={exports:{}},IA,QE;function FR(){if(QE)return IA;QE=1;var n=/<%=([\s\S]+?)%>/g;return IA=n,IA}var vA,OE;function Rz(){if(OE)return vA;OE=1;var n=FR(),e="[object Null]",t="[object Symbol]",i="[object Undefined]",r=/[&<>"']/g,s=RegExp(r.source),a=/<%-([\s\S]+?)%>/g,o=/<%([\s\S]+?)%>/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,h=typeof self=="object"&&self&&self.Object===Object&&self,u=c||h||Function("return this")();function d(F,N){for(var L=-1,W=F==null?0:F.length,ne=Array(W);++L<W;)ne[L]=N(F[L],L,F);return ne}function g(F){return function(N){return F==null?void 0:F[N]}}var f=g(l),m=Object.prototype,p=m.hasOwnProperty,A=m.toString,C=u.Symbol,v=C?C.toStringTag:void 0,I=C?C.prototype:void 0,w=I?I.toString:void 0,b={escape:a,evaluate:o,interpolate:n,variable:"",imports:{_:{escape:P}}};function _(F){return F==null?F===void 0?i:e:v&&v in Object(F)?y(F):E(F)}function x(F){if(typeof F=="string")return F;if(S(F))return d(F,x)+"";if(M(F))return w?w.call(F):"";var N=F+"";return N=="0"&&1/F==-1/0?"-0":N}function y(F){var N=p.call(F,v),L=F[v];try{F[v]=void 0;var W=!0}catch{}var ne=A.call(F);return W&&(N?F[v]=L:delete F[v]),ne}function E(F){return A.call(F)}var S=Array.isArray;function R(F){return F!=null&&typeof F=="object"}function M(F){return typeof F=="symbol"||R(F)&&_(F)==t}function T(F){return F==null?"":x(F)}function P(F){return F=T(F),F&&s.test(F)?F.replace(r,f):F}return vA=b,vA}Tg.exports;var VE;function Tz(){return VE||(VE=1,(function(n,e){var t=FR(),i=Rz(),r=800,s=16,a=9007199254740991,o="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",h="[object Boolean]",u="[object Date]",d="[object DOMException]",g="[object Error]",f="[object Function]",m="[object GeneratorFunction]",p="[object Map]",A="[object Number]",C="[object Null]",v="[object Object]",I="[object Proxy]",w="[object RegExp]",b="[object Set]",_="[object String]",x="[object Symbol]",y="[object Undefined]",E="[object WeakMap]",S="[object ArrayBuffer]",R="[object DataView]",M="[object Float32Array]",T="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",N="[object Int32Array]",L="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",de="[object Uint32Array]",ee=/\b__p \+= '';/g,Me=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,te=/[\\^$.*+?()[\]{}|]/g,we=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,le=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,Re=/($^)/,Fe=/['\n\r\u2028\u2029\\]/g,Ve={};Ve[M]=Ve[T]=Ve[P]=Ve[F]=Ve[N]=Ve[L]=Ve[W]=Ve[ne]=Ve[de]=!0,Ve[o]=Ve[l]=Ve[S]=Ve[h]=Ve[R]=Ve[u]=Ve[g]=Ve[f]=Ve[p]=Ve[A]=Ve[v]=Ve[w]=Ve[b]=Ve[_]=Ve[E]=!1;var $e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xt=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,z=typeof self=="object"&&self&&self.Object===Object&&self,St=xt||z||Function("return this")(),Ze=e&&!e.nodeType&&e,We=Ze&&!0&&n&&!n.nodeType&&n,Le=We&&We.exports===Ze,ht=Le&&xt.process,Pe=(function(){try{var Z=We&&We.require&&We.require("util").types;return Z||ht&&ht.binding&&ht.binding("util")}catch{}})(),k=Pe&&Pe.isTypedArray;function U(Z,me,Se){switch(Se.length){case 0:return Z.call(me);case 1:return Z.call(me,Se[0]);case 2:return Z.call(me,Se[0],Se[1]);case 3:return Z.call(me,Se[0],Se[1],Se[2])}return Z.apply(me,Se)}function Y(Z,me){for(var Se=-1,ut=Z==null?0:Z.length,kt=Array(ut);++Se<ut;)kt[Se]=me(Z[Se],Se,Z);return kt}function ge(Z,me){for(var Se=-1,ut=Array(Z);++Se<Z;)ut[Se]=me(Se);return ut}function pe(Z){return function(me){return Z(me)}}function D(Z,me){return Y(me,function(Se){return Z[Se]})}function O(Z){return"\\"+$e[Z]}function H(Z,me){return Z==null?void 0:Z[me]}function K(Z,me){return function(Se){return Z(me(Se))}}var ye=Function.prototype,J=Object.prototype,se=St["__core-js_shared__"],fe=ye.toString,ue=J.hasOwnProperty,ce=(function(){var Z=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""})(),be=J.toString,he=fe.call(Object),Ee=RegExp("^"+fe.call(ue).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=Le?St.Buffer:void 0,ve=St.Symbol,V=K(Object.getPrototypeOf,Object),X=J.propertyIsEnumerable,$=ve?ve.toStringTag:void 0,Ae=(function(){try{var Z=Ip(Object,"defineProperty");return Z({},"",{}),Z}catch{}})(),Te=Q?Q.isBuffer:void 0,Qe=K(Object.keys,Object),Ge=Math.max,Ue=Date.now,Ye=ve?ve.prototype:void 0,Ct=Ye?Ye.toString:void 0;function Yt(Z,me){var Se=Nt(Z),ut=!Se&&Ut(Z),kt=!Se&&!ut&&Vt(Z),Di=!Se&&!ut&&!kt&&Ga(Z),$n=Se||ut||kt||Di,Ai=$n?ge(Z.length,String):[],Wr=Ai.length;for(var er in Z)(me||ue.call(Z,er))&&!($n&&(er=="length"||kt&&(er=="offset"||er=="parent")||Di&&(er=="buffer"||er=="byteLength"||er=="byteOffset")||q(er,Wr)))&&Ai.push(er);return Ai}function It(Z,me,Se){var ut=Z[me];(!(ue.call(Z,me)&&et(ut,Se))||Se===void 0&&!(me in Z))&&wt(Z,me,Se)}function wt(Z,me,Se){me=="__proto__"&&Ae?Ae(Z,me,{configurable:!0,enumerable:!0,value:Se,writable:!0}):Z[me]=Se}function Bt(Z){return Z==null?Z===void 0?y:C:$&&$ in Object(Z)?B(Z):De(Z)}function on(Z){return Bi(Z)&&Bt(Z)==o}function Gr(Z){if(!qn(Z)||oe(Z))return!1;var me=He(Z)?Ee:le;return me.test(tt(Z))}function Js(Z){return Bi(Z)&&Fi(Z.length)&&!!Ve[Bt(Z)]}function tl(Z){if(!j(Z))return Qe(Z);var me=[];for(var Se in Object(Z))ue.call(Z,Se)&&Se!="constructor"&&me.push(Se);return me}function js(Z){if(!qn(Z))return _e(Z);var me=j(Z),Se=[];for(var ut in Z)ut=="constructor"&&(me||!ue.call(Z,ut))||Se.push(ut);return Se}function Hc(Z,me){return Oe(Ne(Z,me,Uv),Z+"")}var ld=Ae?function(Z,me){return Ae(Z,"toString",{configurable:!0,enumerable:!1,value:cs(me),writable:!0})}:Uv;function cd(Z){if(typeof Z=="string")return Z;if(Nt(Z))return Y(Z,cd)+"";if(ln(Z))return Ct?Ct.call(Z):"";var me=Z+"";return me=="0"&&1/Z==-1/0?"-0":me}function mp(Z,me,Se,ut){var kt=!Se;Se||(Se={});for(var Di=-1,$n=me.length;++Di<$n;){var Ai=me[Di],Wr=ut?ut(Se[Ai],Z[Ai],Ai,Se,Z):void 0;Wr===void 0&&(Wr=Z[Ai]),kt?wt(Se,Ai,Wr):It(Se,Ai,Wr)}return Se}function Cp(Z){return Hc(function(me,Se){var ut=-1,kt=Se.length,Di=kt>1?Se[kt-1]:void 0,$n=kt>2?Se[2]:void 0;for(Di=Z.length>3&&typeof Di=="function"?(kt--,Di):void 0,$n&&ae(Se[0],Se[1],$n)&&(Di=kt<3?void 0:Di,kt=1),me=Object(me);++ut<kt;){var Ai=Se[ut];Ai&&Z(me,Ai,ut,Di)}return me})}function hd(Z,me,Se,ut){return Z===void 0||et(Z,J[Se])&&!ue.call(ut,Se)?me:Z}function Ip(Z,me){var Se=H(Z,me);return Gr(Se)?Se:void 0}function B(Z){var me=ue.call(Z,$),Se=Z[$];try{Z[$]=void 0;var ut=!0}catch{}var kt=be.call(Z);return ut&&(me?Z[$]=Se:delete Z[$]),kt}function q(Z,me){var Se=typeof Z;return me=me??a,!!me&&(Se=="number"||Se!="symbol"&&xe.test(Z))&&Z>-1&&Z%1==0&&Z<me}function ae(Z,me,Se){if(!qn(Se))return!1;var ut=typeof me;return(ut=="number"?ri(Se)&&q(me,Se.length):ut=="string"&&me in Se)?et(Se[me],Z):!1}function oe(Z){return!!ce&&ce in Z}function j(Z){var me=Z&&Z.constructor,Se=typeof me=="function"&&me.prototype||J;return Z===Se}function _e(Z){var me=[];if(Z!=null)for(var Se in Object(Z))me.push(Se);return me}function De(Z){return be.call(Z)}function Ne(Z,me,Se){return me=Ge(me===void 0?Z.length-1:me,0),function(){for(var ut=arguments,kt=-1,Di=Ge(ut.length-me,0),$n=Array(Di);++kt<Di;)$n[kt]=ut[me+kt];kt=-1;for(var Ai=Array(me+1);++kt<me;)Ai[kt]=ut[kt];return Ai[me]=Se($n),U(Z,this,Ai)}}var Oe=nt(ld);function nt(Z){var me=0,Se=0;return function(){var ut=Ue(),kt=s-(ut-Se);if(Se=ut,kt>0){if(++me>=r)return arguments[0]}else me=0;return Z.apply(void 0,arguments)}}function tt(Z){if(Z!=null){try{return fe.call(Z)}catch{}try{return Z+""}catch{}}return""}function et(Z,me){return Z===me||Z!==Z&&me!==me}var Ut=on((function(){return arguments})())?on:function(Z){return Bi(Z)&&ue.call(Z,"callee")&&!X.call(Z,"callee")},Nt=Array.isArray;function ri(Z){return Z!=null&&Fi(Z.length)&&!He(Z)}var Vt=Te||gU;function Gt(Z){if(!Bi(Z))return!1;var me=Bt(Z);return me==g||me==d||typeof Z.message=="string"&&typeof Z.name=="string"&&!Ys(Z)}function He(Z){if(!qn(Z))return!1;var me=Bt(Z);return me==f||me==m||me==c||me==I}function Fi(Z){return typeof Z=="number"&&Z>-1&&Z%1==0&&Z<=a}function qn(Z){var me=typeof Z;return Z!=null&&(me=="object"||me=="function")}function Bi(Z){return Z!=null&&typeof Z=="object"}function Ys(Z){if(!Bi(Z)||Bt(Z)!=v)return!1;var me=V(Z);if(me===null)return!0;var Se=ue.call(me,"constructor")&&me.constructor;return typeof Se=="function"&&Se instanceof Se&&fe.call(Se)==he}function ln(Z){return typeof Z=="symbol"||Bi(Z)&&Bt(Z)==x}var Ga=k?pe(k):Js;function $t(Z){return Z==null?"":cd(Z)}var cn=Cp(function(Z,me,Se,ut){mp(me,wi(me),Z,ut)});function _n(Z){return ri(Z)?Yt(Z):tl(Z)}function wi(Z){return ri(Z)?Yt(Z,!0):js(Z)}function Wn(Z,me,Se){var ut=i.imports._.templateSettings||i;Se&&ae(Z,me,Se)&&(me=void 0),Z=$t(Z),me=cn({},me,ut,hd);var kt=cn({},me.imports,ut.imports,hd),Di=_n(kt),$n=D(kt,Di),Ai,Wr,er=0,Fv=me.interpolate||Re,xn="__p += '",fU=RegExp((me.escape||Re).source+"|"+Fv.source+"|"+(Fv===t?we:Re).source+"|"+(me.evaluate||Re).source+"|$","g"),pU=ue.call(me,"sourceURL")?"//# sourceURL="+(me.sourceURL+"").replace(/[\r\n]/g," ")+`
`:"";Z.replace(fU,function(Bv,Dv,dd,AU,Lv,Pv){return dd||(dd=AU),xn+=Z.slice(er,Pv).replace(Fe,O),Dv&&(Ai=!0,xn+=`' +
__e(`+Dv+`) +
'`),Lv&&(Wr=!0,xn+=`';
`+Lv+`;
__p += '`),dd&&(xn+=`' +
((__t = (`+dd+`)) == null ? '' : __t) +
'`),er=Pv+Bv.length,Bv}),xn+=`';
`;var vp=ue.call(me,"variable")&&me.variable;vp||(xn=`with (obj) {
`+xn+`
}
`),xn=(Wr?xn.replace(ee,""):xn).replace(Me,"$1").replace(G,"$1;"),xn="function("+(vp||"obj")+`) {
`+(vp?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ai?", __e = _.escape":"")+(Wr?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xn+`return __p
}`;var ud=Xc(function(){return Function(Di,pU+"return "+xn).apply(void 0,$n)});if(ud.source=xn,Gt(ud))throw ud;return ud}var Xc=Hc(function(Z,me){try{return U(Z,void 0,me)}catch(Se){return Gt(Se)?Se:new Error(Se)}});function cs(Z){return function(){return Z}}function Uv(Z){return Z}function gU(){return!1}n.exports=Wn})(Tg,Tg.exports)),Tg.exports}var Uz=Tz();const BR=MQ(Uz);function zE(n,...e){const t=es(Object.assign({},n));if(t.icon)return t;const i=e.reduce((r,s)=>{if(r)return r;const a=s.iconTemplate;if(a)return JSON.parse(BR(a)(t));if(s.icon)return{icon:s.icon,selectedIcon:s.selectedIcon}},void 0);return i&&(t.icon=i.icon,t.selectedIcon=i.selectedIcon),t}function GE(n,...e){return n=es(n),n.html?n:e.reduce((t,i)=>{if(t)return t;const r=i.poiTemplate;if(r)return n.html=BR(r)(n),n.poiStyle=n.poiStyle||i.poiStyle,n},void 0)||n}const Gi={ACCURACY:"accuracy",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Fz={ERROR:"error"};class Bz extends Hs{constructor(e){super(Fz.ERROR),Ie(this,"code"),Ie(this,"message"),this.code=e.code,this.message=e.message}}class Dz extends Qc{constructor(e){super(),Ie(this,"task_id_"),Ie(this,"timer_base_",!1),Ie(this,"home_position_",!1),e=e||{},this.timer_base_=e.timerBase!==void 0?e.timerBase:!1,this.task_id_=void 0,this.home_position_=e.homePosition!==void 0?e.homePosition:!1,this.addChangeListener(Gi.TRACKING,this.handleTrackingChanged_),e.trackingOptions!==void 0?this.setTrackingOptions(e.trackingOptions):this.setTrackingOptions({enableHighAccuracy:!0,timeout:5e3,maximumAge:1e3}),this.setTracking(e.tracking!==void 0?e.tracking:!1)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleTrackingChanged_(){if(this.timer_base_){const e=this.getTracking(),t=this.getTrackingOptions();e&&this.task_id_===void 0?window.confirm("Allow GPS?")?this.task_id_=setInterval(this.timerPositionChange_.bind(this),t.maximumAge):setTimeout(this.timerPositionError_.bind(this),t.maximumAge*10):!e&&this.task_id_!==void 0&&(clearInterval(this.task_id_),this.task_id_=void 0)}else if("geolocation"in navigator){const e=this.getTracking();e&&this.task_id_===void 0?this.task_id_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):!e&&this.task_id_!==void 0&&(navigator.geolocation.clearWatch(this.task_id_),this.task_id_=void 0)}}timerPositionChange_(){const e={longitude:CA(this.home_position_[0],.05),latitude:CA(this.home_position_[1],.05),accuracy:CA(15,10)};this.positionChange_({coords:e})}positionChange_(e){const t=e.coords;this.set(Gi.ACCURACY,t.accuracy),this.set(Gi.ALTITUDE,t.altitude===null?void 0:t.altitude),this.set(Gi.ALTITUDE_ACCURACY,t.altitudeAccuracy===null?void 0:t.altitudeAccuracy),this.set(Gi.HEADING,t.heading===null?void 0:oc(t.heading)),this.set(Gi.POSITION,[t.longitude,t.latitude]),this.set(Gi.SPEED,t.speed===null?void 0:t.speed),this.changed()}timerPositionError_(){const e=Math.floor(Math.random()*3)+1,t={code:e,message:e===1?"User denied Geolocation":e===2?"Position unavailable":"Timeout expired"};this.positionError_(t)}positionError_(e){const t=new Bz(e);this.dispatchEvent(t)}getAccuracy(){return this.get(Gi.ACCURACY)}getAltitude(){return this.get(Gi.ALTITUDE)}getAltitudeAccuracy(){return this.get(Gi.ALTITUDE_ACCURACY)}getHeading(){return this.get(Gi.HEADING)}getPosition(){return this.get(Gi.POSITION)}getSpeed(){return this.get(Gi.SPEED)}getTracking(){return this.get(Gi.TRACKING)}getTrackingOptions(){return this.get(Gi.TRACKING_OPTIONS)}setTracking(e){this.set(Gi.TRACKING,e)}setTrackingOptions(e){this.set(Gi.TRACKING_OPTIONS,e)}}const DR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjcyNTIxMjZFMDJBMTExRTBCOTNGRTVBRkM1QzM1Qjc5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjcyNTIxMjZGMDJBMTExRTBCOTNGRTVBRkM1QzM1Qjc5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzI1MjEyNkMwMkExMTFFMEI5M0ZFNUFGQzVDMzVCNzkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzI1MjEyNkQwMkExMTFFMEI5M0ZFNUFGQzVDMzVCNzkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4RaveOAAAB1UlEQVR42qzUTyikcRzH8d+OsUNbSOTvgW2LREqjHKSk9FjZxAGXlXJQDsqNokRzcebiRC5mT8tllBE7LlzYKBHFJpKMkD+7hvH+6ftMT4M0Y3/1uswzz+d5nu/3+/t9CAaD6n8uu/L5lHK5XroWjwI4kYWP8GMdv3H47A6nk8CDA6U8nvBLX/Ed+TjDEe7lAS24wE+M4zR0180NgXa7NSgOvajHKvqwZglMxBfUoBmVlv/wTXxU0O1WuoqIgQvLaIJDfn9NISbhRd7Tb4ahbJa3a0QthjCFv2/UfwNduJKv0jUOBSajDb8wE0FTdf1GUAzDGliOdExEMSleedsGxJiBZdiVC5GuABbxGZm2p1lUKg1/dOOjnGf9IglIsUkxY3H+jg1yIc136MBb6WjqOwLNe6904AP2kSuDG80qkW15YjZlCdkojSLsEyqwiWMzcAVbaJV6RrK+IQc/dB3NwGuMohAdEYQVoROz8FkHW68FCW1Hv4zS68eeUnWyS/YwLL1Q9rA/jsn4dEtd5mRo9WlzJ03Tda6S7TaPQWmIPCkQCH+6Ww5RfR5WowmX+IckOca2MYBp2SmW8zCb5hpGeKjuWA8yZEulSbP8sqN2JPjZif0owACin4C7wCjG6AAAAABJRU5ErkJggg==",LR="data:image/png;base64,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",Xr={osm:RR,gsi:TR,gsi_ortho:UR,redcircle:DR,defaultpin_selected:LR,defaultpin:$0,bluedot:pR,bluedot_transparent:AR,bluedot_small:mR},Lz={"setting-loaded":"onSettingLoaded","appdata-ready":"onAppdataReady","ui-configure":"onUiConfigure","core-dom-ready":"onCoreDomReady","ui-dom-ready":"onUiDomReady","core-ready":"onCoreReady","ui-ready":"onUiReady"};class Pz extends Hs{constructor(e){super("gps_error"),Ie(this,"detail"),this.detail=e}}let th=class extends Hs{constructor(e){super("gps_result"),Ie(this,"detail"),this.detail=e}};class Nz extends Hs{constructor(){super("gps_request")}}let Sc=class extends XM{constructor(e){super(),Ie(this,"appid"),Ie(this,"translateUI",!1),Ie(this,"noRotate",!1),Ie(this,"initialRestore",{}),Ie(this,"mapDiv","map_div"),Ie(this,"restoreSession",!1),Ie(this,"enableCache"),Ie(this,"stateBuffer",{}),Ie(this,"mobileMapMoveBuffer"),Ie(this,"overlay",!0),Ie(this,"waitReady"),Ie(this,"changeMapSeq"),Ie(this,"appData"),Ie(this,"backMap"),Ie(this,"mercSrc"),Ie(this,"mercBuffer"),Ie(this,"timer"),Ie(this,"appName"),Ie(this,"cacheHash"),Ie(this,"currentPosition"),Ie(this,"startFrom",""),Ie(this,"from"),Ie(this,"vectors",[]),Ie(this,"mapDivDocument"),Ie(this,"mapObject"),Ie(this,"mapboxMap"),Ie(this,"maplibreMap"),Ie(this,"googleApiKey"),Ie(this,"pois"),Ie(this,"poiTemplate"),Ie(this,"poiStyle"),Ie(this,"iconTemplate"),Ie(this,"logger"),Ie(this,"icon"),Ie(this,"selectedIcon"),Ie(this,"fakeGps",!1),Ie(this,"fakeRadius"),Ie(this,"homePosition"),Ie(this,"geolocation"),Ie(this,"moveTo_",!1),Ie(this,"gpsEnabled_",!1),Ie(this,"alwaysGpsOn",!1),Ie(this,"firstGpsRequest_",!1),Ie(this,"initialGpsMove_",!1),Ie(this,"__backMapMoving",!1),Ie(this,"__selectedMarker"),Ie(this,"uiHooks"),Ie(this,"lifecycleHookResults",{}),Ie(this,"__init",!0),Ie(this,"__redrawMarkerBlock",!1),Ie(this,"__redrawMarkerThrottle",[]),Ie(this,"__transparency"),Ie(this,"lastClickEvent"),e=es(e),this.appid=e.appid||"sample";const t=e.mapboxgl||(typeof window<"u"?window.mapboxgl:void 0);t&&e.mapboxToken&&(t.accessToken=e.mapboxToken),e.googleApiKey&&(this.googleApiKey=e.googleApiKey),this.mapDiv=e.div||"map_div",this.mapDivDocument=document.querySelector(`#${this.mapDiv}`),this.mapDivDocument.classList.add("maplat"),this.logger=new sQ(e.debug?Oh.ALL:Oh.INFO),this.enableCache=e.enableCache||!1,this.icon=e.icon,this.selectedIcon=e.selectedIcon,this.translateUI=e.translateUI,this.uiHooks=e.uiHooks;const i=e.setting;if(e.restore)e.restoreSession&&(this.restoreSession=!0),this.initialRestore=e.restore;else if(e.restoreSession){this.restoreSession=!0;const s=parseInt(localStorage.getItem("epoch")||"0"),a=Math.floor(new Date().getTime()/1e3);s&&a-s<3600&&(this.initialRestore.mapID=localStorage.getItem("mapID")||localStorage.getItem("sourceID")||void 0,this.initialRestore.backgroundID=localStorage.getItem("backgroundID")||localStorage.getItem("backID")||void 0,this.initialRestore.position={x:parseFloat(localStorage.getItem("x")||"0"),y:parseFloat(localStorage.getItem("y")||"0"),zoom:parseFloat(localStorage.getItem("zoom")||"0"),rotation:parseFloat(localStorage.getItem("rotation")||"0")},this.initialRestore.transparency=parseFloat(localStorage.getItem("transparency")||"0"),this.initialRestore.hideMarker=parseInt(localStorage.getItem("hideMarker")||"0"),this.initialRestore.hideLayer=localStorage.getItem("hideLayer")||void 0)}[...Ol(`<img id="center_circle" class="prevent-default" alt=""
            style="position:absolute;top:50%;left:50%;margin-top:-10px;
            margin-left:-10px;" src="${DR}">`)].reverse().forEach(s=>{this.mapDivDocument.insertBefore(s,this.mapDivDocument.firstChild)});const r="maplat-core-style";if(!document.getElementById(r)){const s=document.createElement("style");s.id=r,s.innerHTML=`
        .maplat * {
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }
      `,document.head.appendChild(s)}this.mapDivDocument.querySelectorAll(".prevent-default").forEach(s=>{s.addEventListener("touchstart",a=>{a.preventDefault()})}),this.overlay="overlay"in e?e.overlay:!0,this.overlay&&this.mapDivDocument.classList.add("with-opacity"),this.waitReady=(async()=>{const s=await this.settingLoader(i);return this.handleSetting(s,e)})()}buildLifecycleContext(e,t){return{phaseId:e,appData:t??this.appData,mapDivDocument:this.mapDivDocument,core:this,uiHookResults:{...this.lifecycleHookResults}}}async runLifecyclePhase(e,t){var i,r,s,a,o;(r=(i=this.logger)==null?void 0:i.debug)==null||r.call(i,`lifecycle:${e}`);const l=this.buildLifecycleContext(e,t),c=Lz[e],h=(s=this.uiHooks)==null?void 0:s[c];if(h)try{const u=await h(l);this.lifecycleHookResults[e]=u,l.uiHookResult=u,l.uiHookResults={...this.lifecycleHookResults}}catch(u){throw(o=(a=this.logger)==null?void 0:a.debug)==null||o.call(a,`lifecycle:error:${e}`),this.dispatchEvent(new hn("lifecycle:error",{phaseId:e,error:u})),u}return this.dispatchEvent(new hn(`lifecycle:${e}`,l)),l}async settingLoader(e){return e||(await fetch(`apps/${this.appid}.json`)).json()}async sourcesLoader(e){const t=this.appData.sources,i=[],r={homePos:e.homePos,defZoom:e.defZoom,zoomRestriction:e.zoomRestriction,mercMinZoom:e.mercMinZoom,mercMaxZoom:e.mercMaxZoom,enableCache:this.enableCache,key:this.googleApiKey,mapboxMap:this.mapboxMap,maplibreMap:this.maplibreMap};return t.forEach(s=>{i.push(Mz(s,r))}),Promise.all(i)}async handleSetting(e,t){await this.runLifecyclePhase("setting-loaded",e),this.appData=es(e),await this.runLifecyclePhase("appdata-ready"),await this.runLifecyclePhase("ui-configure");const i=await this.prepareMap(t);await this.runLifecyclePhase("ui-dom-ready");const r=await DM(this.appData.pois||[],this);await this.handlePois(r,i),this.initGeolocation(t)}initGeolocation(e){this.alwaysGpsOn=e.alwaysGpsOn||!1;const t=this.geolocation=new Dz({timerBase:e.fake,homePosition:this.appData.homePosition});this.alwaysGpsOn?(t.setTracking(!0),this.gpsEnabled_=!0,this.initialGpsMove_=!0):(t.setTracking(!1),this.gpsEnabled_=!1),t.on("change",()=>{(async()=>{const i=this.mapObject,r=i.getLayer("overlay").getLayers().item(0),s=i.getLayers().item(0),a=r?r.getSource():s.getSource(),o=t.getPosition(),l=t.getAccuracy();if(!o||!l)return;let c=!this.moveTo_&&!this.firstGpsRequest_;this.alwaysGpsOn&&(c=!this.initialGpsMove_);const h=await a.setGPSMarkerAsync({lnglat:o,acc:l},c);this.moveTo_=!1,this.firstGpsRequest_=!1,this.initialGpsMove_=!1,h||(this.alwaysGpsOn||this.handleGPS(!1,!0),a.setGPSMarker());const u=this.alwaysGpsOn?"gps_out_hide":"gps_out";this.dispatchEvent(new th(h?{lnglat:o,acc:l}:{error:u}))})()}),t.on("error",i=>{const r=i.code;if(r===3)return;t.setTracking(!1),this.gpsEnabled_=!1;const s=this.mapObject,a=s.getLayer("overlay").getLayers().item(0),o=s.getLayers().item(0);(a?a.getSource():o.getSource()).setGPSMarker(),this.dispatchEvent(new Pz(r===1?"user_gps_deny":r===2?"gps_miss":"gps_timeout")),this.dispatchEvent(new th({error:"gps_off"}))}),this.addEventListener("mapChanged",()=>{(async()=>{if(t.getTracking()){const i=this.mapObject,r=i.getLayer("overlay").getLayers().item(0),s=i.getLayers().item(0),a=r?r.getSource():s.getSource(),o=t.getPosition(),l=t.getAccuracy();if(!o||!l)return;const c=await a.setGPSMarkerAsync({lnglat:o,acc:l},!0);c||(this.alwaysGpsOn||this.handleGPS(!1,!0),a.setGPSMarker());const h=this.alwaysGpsOn?"gps_out_hide":"gps_out";this.dispatchEvent(new th(c?{lnglat:o,acc:l}:{error:h}))}})()})}handleGPS(e,t=!1){if(this.geolocation){if(e)if(!this.alwaysGpsOn)this.firstGpsRequest_=!0,this.geolocation.setTracking(!0),this.gpsEnabled_=!0,this.dispatchEvent(new Nz);else{const i=this.geolocation.getPosition(),r=this.geolocation.getAccuracy();if(i&&r){const s=this.mapObject,a=s.getLayer("overlay").getLayers().item(0),o=s.getLayers().item(0),l=a?a.getSource():o.getSource();(async()=>await l.setGPSMarkerAsync({lnglat:i,acc:r},!1)||(l.setGPSMarker(),this.dispatchEvent(new th({error:"gps_out"}))))()}}else if(!this.alwaysGpsOn){this.geolocation.setTracking(!1),this.gpsEnabled_=!1;const i=this.mapObject,r=i.getLayer("overlay").getLayers().item(0),s=i.getLayers().item(0);(r?r.getSource():s.getSource()).setGPSMarker(),t||this.dispatchEvent(new th({error:"gps_off"}))}}}getGPSEnabled(){return this.gpsEnabled_}async prepareMap(e){e=es(e),this.mercBuffer=null;const t=this.appData.homePosition,i=this.appData.defaultZoom,r=this.appData.zoomRestriction,s=this.appData.minZoom,a=this.appData.maxZoom;this.appName=this.appData.appName;const o=e.fake?this.appData.fakeGps:!1,l=e.fake?this.appData.fakeRadius:!1;this.noRotate=e.noRotate||this.appData.noRotate||!1,this.poiTemplate=e.poiTemplate||this.appData.poiTemplate||!1,this.poiStyle=e.poiStyle||this.appData.poiStyle||!1,this.iconTemplate=e.iconTemplate||this.appData.iconTemplate||!1,this.currentPosition=null,this.__init=!0;const c=`${this.mapDiv}_front`;let h=Ol(`<div id="${c}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>`)[0];this.mapDivDocument.insertBefore(h,this.mapDivDocument.firstChild),this.fakeGps=o,this.fakeRadius=l,this.homePosition=t,this.mapObject=new ME({div:c,controls:this.appData.controls||[],interactions:this.noRotate?UE({altShiftDragRotate:!1,pinchRotate:!1}):UE().extend([new GV({condition:BV})]),fakeGps:o,fakeRadius:l,homePosition:t,northUp:e.northUp||this.appData.northUp||!1,tapDuration:e.tapDuration||this.appData.tapDuration||3e3,homeMarginPixels:e.homeMarginPixels||this.appData.homeMarginPixels||50,tapUIVanish:e.tapUIVanish||this.appData.tapUIVanish||!1,alwaysGpsOn:e.alwaysGpsOn||!1});let u=null;this.overlay&&(u=`${this.mapDiv}_back`,h=Ol(`<div id="${u}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>`)[0],this.mapDivDocument.insertBefore(h,this.mapDivDocument.firstChild),this.backMap=new ME({off_control:!0,div:u}));const d=e.mapboxgl||(typeof window<"u"?window.mapboxgl:void 0);if(d){const f=`${this.mapDiv}_mapbox`;h=Ol(`<div id="${f}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;visibility:hidden;"></div>`)[0],this.mapDivDocument.insertBefore(h,this.mapDivDocument.firstChild),this.mapboxMap=new d.Map({attributionControl:!1,boxZoom:!1,container:f,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1})}const g=e.maplibregl||(typeof window<"u"?window.maplibregl:void 0);if(g){const f=`${this.mapDiv}_maplibre`;h=Ol(`<div id="${f}" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;visibility:hidden;"></div>`)[0],this.mapDivDocument.insertBefore(h,this.mapDivDocument.firstChild),this.maplibreMap=new g.Map({attributionControl:!1,boxZoom:!1,container:f,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1,style:{version:8,sources:{},layers:[]}})}return await this.runLifecyclePhase("core-dom-ready"),this.startFrom=this.appData.startFrom,{homePos:t,defZoom:i,zoomRestriction:r,mercMinZoom:s,mercMaxZoom:a}}async handlePois(e,t){this.pois=e;const i=await this.sourcesLoader(t);return this.handleSources(i)}async handleSources(e){this.mercSrc=e.reduce((i,r)=>{if(i)return i;if(r.isBasemap())return r},null);const t=[];this.cacheHash={},e.forEach(i=>{if(i.setMap(this.mapObject),i.isMapbox()){if(!this.mapboxMap)throw"To use Mapbox based maps, you need to include Mapbox GL JS and provide it via mapboxgl option.";i.mapboxMap=this.mapboxMap}else if(i.isMapLibre&&i.isMapLibre()){if(!this.maplibreMap)throw"To use MapLibre based maps, you need to include MapLibre GL JS and provide it via maplibregl option.";i.maplibreMap=this.maplibreMap}t.push(i),this.cacheHash[i.mapID]=i}),this.dispatchEvent(new hn("sourceLoaded",e)),await this.setInitialMap(t),this.setMapClick(),this.setPointerEvents(),this.setMapOnOff(),this.setMouseCursor(),this.setBackMapBehavior(),this.raiseChangeViewpoint(),await this.runLifecyclePhase("core-ready"),await this.runLifecyclePhase("ui-ready")}async setInitialMap(e){const t=this.initialRestore.mapID||this.startFrom||e[e.length-1].mapID;this.from=e.reduce((i,r)=>i?!(i instanceof bR)&&r.mapID!=t?r:i:r.mapID!=t?r:i,void 0),await this.changeMap(t,this.initialRestore)}setMapClick(){this.mapObject.on("click",e=>{this.logger.debug(e.pixel),this.lastClickEvent=e;const t=[];if(e.target.forEachFeatureAtPixel(e.pixel,i=>{this.logger.debug(e.pixel),i.get("datum")&&t.push(i.get("datum"))}),t.length>0)this.dispatchEvent(new hn("clickMarker",t[0])),this.dispatchEvent(new hn("clickMarkers",t));else{const i=e.coordinate;this.dispatchEvent(new hn("clickMapXy",i)),this.from.sysCoord2MercAsync(i).then(r=>{this.dispatchEvent(new hn("clickMapMerc",r));const s=nn(r,"EPSG:3857","EPSG:4326");this.dispatchEvent(new hn("clickMap",{longitude:s[0],latitude:s[1]}))})}})}setPointerEvents(){let e,t=!1,i=!1;const r={},s=a=>{this.dispatchEvent(new hn("pointerMoveOnMapXy",a)),this.from.sysCoord2MercAsync(a).then(o=>{if(this.dispatchEvent(new hn("pointerMoveOnMapMerc",o)),e){const l=e;e=!1,s(l)}else t=!1})};this.mapObject.on("pointermove",a=>{i||(t?e=a.coordinate:(t=!0,s(a.coordinate)))}),this.mapObject.on("pointerdown",a=>{a.originalEvent&&a.originalEvent.pointerId!=null&&(r[a.originalEvent.pointerId]=!0),i=!0}),this.mapObject.on("pointerdrag",a=>{a.originalEvent&&a.originalEvent.pointerId!=null&&(r[a.originalEvent.pointerId]=!0),i=!0}),this.mapObject.on("pointerup",a=>{a.originalEvent&&a.originalEvent.pointerId!=null?(delete r[a.originalEvent.pointerId],Object.keys(r).length==0&&(i=!1)):a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches.length==0&&(i=!1):i=!1})}setMapOnOff(){let e;const t=()=>this.mapDivDocument.querySelectorAll(".ol-control"),i=s=>{s.forEach(a=>a.classList.add("fade"))},r=s=>{s.forEach(a=>a.classList.remove("fade"))};this.mapObject.on("click",()=>{e&&(clearTimeout(e),e=void 0);const s=t(),a=s.length&&s[0].classList.contains("fade");!this.mapObject.tapUIVanish||a?r(s):(i(s),e=setTimeout(()=>{e=void 0,r(t())},this.mapObject.tapDuration))}),this.mapObject.on("pointerdrag",()=>{e&&(clearTimeout(e),e=void 0),i(t())}),this.mapObject.on("moveend",()=>{e&&(clearTimeout(e),e=void 0),e=setTimeout(()=>{e=void 0,r(t())},this.mapObject.tapDuration)})}setMouseCursor(){const e=i=>{const r=i.target.getEventPixel(i.originalEvent),s=i.target.hasFeatureAtPixel(r),a=i.target.getTarget();if(s){const o=i.target.forEachFeatureAtPixel(i.pixel,l=>{if(l.get("datum"))return l});this.mapDivDocument.querySelector(`#${a}`).style.cursor=o?"pointer":"";return}this.mapDivDocument.querySelector(`#${a}`).style.cursor=""};this.mapObject.on("pointermove",e);const t=i=>{let r=i.frameState.viewState.center;const s=this.from;s.insideCheckSysCoord(r)||(r=s.modulateSysCoordInside(r),i.target.getView().setCenter(r))};this.mapObject.on("moveend",t)}setBackMapBehavior(){const e=t=>{if(!this.backMap)return;if(this.__backMapMoving){this.logger.debug("Backmap moving skipped");return}const i=this.backMap.getSource();i&&(this.__backMapMoving=!0,this.logger.debug("Backmap moving started"),this.convertParametersFromCurrent(i,r=>{const s=this.backMap.getView();s.setCenter(r[0]),s.setZoom(r[1]),s.setRotation(this.noRotate?0:r[2]),this.logger.debug("Backmap moving ended"),this.__backMapMoving=!1}))};this.mapObject.on("postrender",e)}raiseChangeViewpoint(){this.mapObject.on("postrender",async e=>{const t=this.mapObject.getView(),i=t.getCenter(),r=t.getDecimalZoom(),s=nE(t.getRotation()*180/Math.PI),a=await this.from.viewpoint2MercsAsync(),o=await this.mercSrc.mercs2ViewpointAsync(a);if(this.mobileMapMoveBuffer&&this.mobileMapMoveBuffer[0][0]==o[0][0]&&this.mobileMapMoveBuffer[0][1]==o[0][1]&&this.mobileMapMoveBuffer[1]==o[1]&&this.mobileMapMoveBuffer[2]==o[2])return;this.mobileMapMoveBuffer=o;const l=nn(o[0],"EPSG:3857","EPSG:4326"),c=nE(o[2]*180/Math.PI);this.dispatchEvent(new hn("changeViewpoint",{x:i[0],y:i[1],longitude:l[0],latitude:l[1],mercator_x:o[0][0],mercator_y:o[0][1],zoom:r,mercZoom:o[1],direction:c,rotation:s})),this.requestUpdateState({position:{x:i[0],y:i[1],zoom:r,rotation:s}})})}currentMapInfo(){return rE(this.from)}mapInfo(e){return rE(this.cacheHash[e])}async clientPointToLngLat(e,t){if(!this.from||!this.mapObject)return;const i=this.mapObject.getViewport().getBoundingClientRect(),r=[e-i.left,t-i.top],s=this.mapObject.getCoordinateFromPixel(r);if(!s)return;const a=await this.from.sysCoord2MercAsync(s),o=nn(a,"EPSG:3857","EPSG:4326");return{longitude:o[0],latitude:o[1]}}async lngLatToClientPoint(e,t){if(!this.from||!this.mapObject)return;const i=nn([e,t],"EPSG:4326","EPSG:3857"),r=await this.from.merc2SysCoordAsync(i),s=this.mapObject.getPixelFromCoordinate(r);if(!s)return;const a=this.mapObject.getViewport().getBoundingClientRect();return{x:s[0]+a.left,y:s[1]+a.top}}setMarker(e){this.logger.debug(e);const t=e.lnglat||[e.lng||e.longitude,e.lat||e.latitude],i=e.x,r=e.y,s=e.coordinates,a=this.from,o=e.icon?this.__selectedMarker==e.namespaceID&&e.selectedIcon?e.selectedIcon:e.icon:this.__selectedMarker==e.namespaceID?LR:$0;return(s?(function(){return a.merc2SysCoordAsync_ignoreBackground(s)})():i&&r?new Promise(l=>{l(a.xy2SysCoord([i,r]))}):(function(){const l=nn(t,"EPSG:4326","EPSG:3857");return a.merc2SysCoordAsync_ignoreBackground(l)})()).then(l=>{l&&a.insideCheckSysCoord(l)&&this.mapObject.setMarker(l,{datum:e},o)})}resetMarker(){this.mapObject.resetMarker()}setLine(e){e.type="Line",!e.style&&e.stroke&&(e.style={stroke:e.stroke}),this.setVector(e)}setVector(e){this.logger.debug(e);let t;const i=(r,s=!1)=>Promise.all(r.map(a=>Array.isArray(a[0])?i(a,s):(s&&(a=nn(a,"EPSG:4326","EPSG:3857")),this.from.merc2SysCoordAsync(a))));e.coordinates?t=i(e.coordinates):t=i(e.lnglats,!0),t.then(r=>{this.mapObject.setVector(r,e.type,e.style)})}resetLine(){this.resetVector()}resetVector(){this.mapObject.resetVector()}redrawMarkers(e=void 0){if(e||(e=this.from),this.__redrawMarkerBlock){this.__redrawMarkerThrottle||(this.__redrawMarkerThrottle=[]);const i=this.__redrawMarkerThrottle;if(i.length==0||i[i.length-1]!==e){i.push(e);return}}this.__redrawMarkerBlock=!0;const t=i=>{const r=[];this.resetMarker();let s;if(!this.stateBuffer.hideMarker){for(const o of Object.keys(this.pois)){const l=this.pois[o];if(!l.hide)for(const c of l.pois){const h=zE(c,l,this);GE(h,l,this),this.__selectedMarker==h.namespaceID?s=h:r.push(this.setMarker(h))}}if(i.pois)for(const o of Object.keys(i.pois)){const l=i.pois[o];if(!l.hide)for(const c of l.pois){const h=zE(c,l,i,this);GE(h,l,i,this),this.__selectedMarker==h.namespaceID?s=h:r.push(this.setMarker(h))}}}let a=Promise.all(r);s&&(a=a.then(()=>this.setMarker(s))),a.then(()=>{this.__redrawMarkerThrottle&&this.__redrawMarkerThrottle.length>0?t(this.__redrawMarkerThrottle.shift()):this.__redrawMarkerBlock=!1})};t(e)}selectMarker(e){const t=this.getMarker(e);if(!t)return;this.__selectedMarker=e;const i={latitude:t.lnglat?t.lnglat[1]:t.lat?t.lat:t.latitude,longitude:t.lnglat?t.lnglat[0]:t.lng?t.lng:t.longitude};this.setViewpoint(i),this.redrawMarkers()}unselectMarker(){delete this.__selectedMarker,this.redrawMarkers()}getMarker(e){if(e.includes("#")){const t=e.split("#"),i=this.cacheHash[t[0]];return i==null?void 0:i.getPoi(t[1])}else{for(const t of Object.keys(this.pois))for(const i of this.pois[t].pois)if(i.id===e)return i;return}}updateMarker(e,t,i){const r=this.getMarker(e);if(r){if(t=du(t||{}),i){for(const s of Object.keys(r))s!=="id"&&s!=="namespaceID"&&delete r[s];Object.assign(r,t)}else for(const s of Object.keys(t))s==="id"||s==="namespaceID"||(t[s]==="____delete____"?delete r[s]:r[s]=t[s]);this.redrawMarkers()}}addMarker(e,t){if(t||(t="main"),t.includes("#")){const i=t.split("#"),r=this.cacheHash[i[0]];if(r){const s=r.addPoi(e,i[1]);return this.dispatchPoiNumber(),this.redrawMarkers(),s}}else if(this.pois[t])return this.pois[t].pois.push(du(e)),P0(this.pois,t,{name:this.appName}),this.dispatchPoiNumber(),this.redrawMarkers(),e.namespaceID}removeMarker(e){if(e.includes("#")){const t=e.split("#"),i=this.cacheHash[t[0]];i&&(i.removePoi(t[1]),this.dispatchPoiNumber(),this.redrawMarkers())}else for(const t of Object.keys(this.pois))for(let i=0;i<this.pois[t].pois.length;i++)this.pois[t].pois[i].id===e&&(delete this.pois[t].pois[i],this.dispatchPoiNumber(),this.redrawMarkers())}clearMarker(e){if(e||(e="main"),e.includes("#")){const t=e.split("#"),i=this.cacheHash[t[0]];i&&(i.clearPoi(t[1]),this.dispatchPoiNumber(),this.redrawMarkers())}else{if(e==="all")for(const t of Object.keys(this.pois))this.pois[t].pois=[];else if(this.pois[e])this.pois[e].pois=[];else return;this.dispatchPoiNumber(),this.redrawMarkers()}}showAllMarkers(){this.requestUpdateState({hideMarker:0}),this.redrawMarkers()}hideAllMarkers(){this.requestUpdateState({hideMarker:1}),this.redrawMarkers()}dispatchPoiNumber(){this.dispatchEvent(new hn("poi_number",this.listPoiLayers(!1,!0).reduce((e,t)=>e+t.pois.length,0)))}listPoiLayers(e=!1,t=!1){const i=Object.keys(this.pois).sort((s,a)=>s==="main"?-1:a==="main"?1:s<a?-1:s>a?1:0).map(s=>this.pois[s]).filter(s=>t?e?s.pois.length&&s.hide:s.pois.length:e?s.hide:!0),r=this.from.listPoiLayers(e,t);return i.concat(r)}showPoiLayer(e){const t=this.getPoiLayer(e);t&&(delete t.hide,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map(i=>i.namespaceID).join(",")}),this.redrawMarkers())}hidePoiLayer(e){const t=this.getPoiLayer(e);t&&(t.hide=!0,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map(i=>i.namespaceID).join(",")}),this.redrawMarkers())}getPoiLayer(e){if(e.includes("#")){const t=e.split("#"),i=this.cacheHash[t[0]];if(i)return i.getPoiLayer(t[1])}else return this.pois[e]}addPoiLayer(e,t){if(e!=="main"&&!this.pois[e])if(!e.includes("#"))this.pois[e]=so(t||[],e,{name:this.appName}),this.redrawMarkers();else{const i=e.split("#"),r=this.cacheHash[i[0]];r&&(r.addPoiLayer(i[1],t),this.redrawMarkers())}}removePoiLayer(e){if(e!=="main"&&this.pois[e])if(!e.includes("#"))delete this.pois[e],this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map(t=>t.namespaceID).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers();else{const t=e.split("#"),i=this.cacheHash[t[0]];i&&(i.removePoiLayer(t[1]),this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map(r=>r.namespaceID).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers())}}addLine(e){this.vectors.push(e),this.setLine(e)}addVector(e){this.vectors.push(e),this.setVector(e)}clearLine(){this.vectors=[],this.resetLine()}clearVector(){this.vectors=[],this.resetVector()}setGPSMarker(e){this.currentPosition=e,this.from.setGPSMarker(e,!0)}changeMap(e,t){t===void 0&&(t={});const i=this.mercSrc,r=this.cacheHash[e];return this.changeMapSeq||(this.changeMapSeq=Promise.resolve()),this.changeMapSeq=this.changeMapSeq.then(()=>new Promise((s,a)=>{this.convertParametersFromCurrent(r,o=>{let l=null,c=null;const h=t.backgroundID?this.cacheHash[t.backgroundID]:void 0;if(this.backMap&&(l=this.backMap.getSource(),r.isWmts()?this.backMap.exchangeSource():(h?(c=h,this.backMap.exchangeSource(c)):l?c=l:(c=i,this.from.isWmts()&&(c=this.from instanceof Eu?this.mapObject.getSource():this.from),this.backMap.exchangeSource(c)),this.requestUpdateState({backgroundID:c.mapID}))),r instanceof Eu){if(this.mapObject.setLayer(r),h)this.mapObject.exchangeSource(h);else if(!this.from.isWmts()){const g=l||i;this.mapObject.exchangeSource(g)}this.requestUpdateState({backgroundID:this.mapObject.getSource().mapID})}else this.mapObject.setLayer(),this.mapObject.exchangeSource(r);const u={mapID:r.mapID};r.isBasemap()&&(u.backgroundID="____delete____"),this.requestUpdateState(u),this.from=r,this.dispatchPoiNumber();const d=this.mapObject.getView();this.appData.zoomRestriction&&(d.setMaxZoom(r.maxZoom),d.setMinZoom(r.minZoom||0)),o&&r.insideCheckSysCoord(o[0])?(d.setCenter(o[0]),d.setZoom(o[1]),d.setRotation(this.noRotate?0:o[2])):this.__init?o||this.goHome(r):(this.dispatchEvent(new hn("outOfMap",{})),this.goHome(r)),r.setGPSMarker(this.currentPosition,!0),t.hideLayer&&(t.hideLayer.split(",").map(g=>{const f=this.getPoiLayer(g);f&&(f.hide=!0)}),this.requestUpdateState({hideLayer:t.hideLayer})),t.hideMarker?this.hideAllMarkers():this.redrawMarkers(),this.resetVector(),this.vectors.forEach(g=>{this.setVector(g)}),this.dispatchEvent(new hn("mapChanged",this.getMapMeta(r.mapID))),this.mapObject.updateSize(),this.mapObject.render(),t.position&&(this.__init=!1,r.setViewpoint(t.position)),t.transparency&&this.setTransparency(t.transparency),this.__init?(this.__init=!1,this.goHome(r)):this.backMap&&c&&this.convertParametersFromCurrent(c,g=>{const f=this.backMap.getView();f.setCenter(g[0]),f.setZoom(g[1]),f.setRotation(this.noRotate?0:g[2]),this.backMap.updateSize(),this.backMap.render()}),s(void 0)})}))}requestUpdateState(e){if(this.stateBuffer=Object.assign(this.stateBuffer,e),this.stateBuffer.backgroundID=="____delete____"&&delete this.stateBuffer.backgroundID,this.restoreSession){const t=Math.floor(new Date().getTime()/1e3);localStorage.setItem("epoch",`${t}`);const i=function(r){Object.keys(r).map(s=>{s=="position"?i(r[s]):s=="backgroundID"&&r[s]=="____delete____"?localStorage.removeItem(s):localStorage.setItem(s,r[s])})};i(e)}this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{this.timer=void 0,this.dispatchEvent(new hn("updateState",this.stateBuffer))},50)}setTransparency(e){this.__transparency=e,this.mapObject.setTransparency(e),this.requestUpdateState({transparency:e})}getTransparency(){return this.__transparency==null?0:this.__transparency}setViewpoint(e){this.from.setViewpoint(e)}goHome(e){(e||this.from).goHome()}resetRotation(){this.from.resetRotation()}resetDirection(){this.from.resetDirection()}resetCirculation(){this.from.resetCirculation()}getMapMeta(e){let t;if(e?t=this.cacheHash[e]:t=this.from,!!t)return fu.reduce((i,r)=>(i[r]=t.get(r),i),{mapID:t.mapID,label:t.label})}getMapCacheEnable(e){let t;return e?t=this.cacheHash[e]:t=this.from,t?t.getCacheEnable():!1}async getMapTileCacheStatsAsync(e){let t;return e?t=this.cacheHash[e]:t=this.from,t?await t.getTileCacheStatsAsync():{}}async getMapTileCacheSizeAsync(e){return(await this.getMapTileCacheStatsAsync(e)).size||0}async clearMapTileCacheAsync(e){let t;e?t=this.cacheHash[e]:t=this.from,t&&await t.clearTileCacheAsync()}async fetchAllMapTileCacheAsync(e,t){let i;if(e?i=this.cacheHash[e]:i=this.from,!i){t("stop",{});return}await i.fetchAllTileCacheAsync(t)}async cancelMapTileCacheAsync(e){let t;e?t=this.cacheHash[e]:t=this.from,t&&await t.cancelTileCacheAsync()}convertParametersFromCurrent(e,t){const i=this.mapObject.getView();if(!this.from){t&&t();return}let r=this.from.viewpoint2MercsAsync();const s=BC([i.getCenter(),i.getZoom(),i.getRotation()],10);if(this.mercBuffer&&this.mercBuffer.mercs&&this.mercBuffer.buffer[this.from.mapID]){const a=this.mercBuffer.buffer[this.from.mapID];a[0][0]==s[0][0]&&a[0][1]==s[0][1]&&a[1]==s[1]&&a[2]==s[2]?(this.logger.debug(a),this.logger.debug(s),this.logger.debug("From: Use buffer"),r=new Promise((o,l)=>{o(this.mercBuffer.mercs)})):(this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=s)}else this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=s;this.logger.debug(`From: Center: ${s[0]} Zoom: ${s[1]} Rotation: ${s[2]}`),this.logger.debug(`From: ${this.from.mapID}`),r.then(a=>{this.mercBuffer.mercs=a,this.logger.debug(`Mercs: ${a}`);let o=e.mercs2ViewpointAsync(a);const l=e.mapID;this.mercBuffer.buffer[l]&&(this.logger.debug("To: Use buffer"),o=new Promise((c,h)=>{c(this.mercBuffer.buffer[l])})),o.then(c=>{this.logger.debug(`To: Center: ${c[0]} Zoom: ${c[1]} Rotation: ${c[2]}`),this.logger.debug(`To: ${e.mapID}`),this.mercBuffer.buffer[e.mapID]=BC(c,10),t(c)}).catch(c=>{throw c})}).catch(a=>{throw a})}remove(){this.mapboxMap&&this.mapboxMap.remove(),this.mapDivDocument.innerHTML="",this.mapDivDocument.classList.remove("maplat")}};Ie(Sc,"createObject");Sc.createObject=function(n){return new Promise(e=>{const t=new Sc(n);t.waitReady.then(()=>{e(t)})})};if(typeof window<"u"){const n={createObject:Sc.createObject};window.Maplat=n,window.MaplatApp=Sc,window.assets=Xr}const kz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAOCAYAAADNGCeJAAABfWlDQ1BJQ0MgUHJvZmlsZQAAeNqtjjFLW1EYhp8TY1UMGEqwDiIHFOlwU1IdNNYlJmAiDhItJNlubm6icJMcbk5I+wPcXHQQXRT1L4guDo7ioIMgCMHfIAiClHA7XDRT26Xv9HzP8H4vBLSplBMEqjXtZhcXZC5fkH1tBgnxkTk+mVZDJVZWlvljXu4RAHdRUymnnHl9mN9sHZ5+WNofm9MGf89gyW5YIPoBq9SwqiAcwLCUq0HsAdGWVhrEFRBxc/kCiDYQqfj8BESKuXwBAkEg4q5lkxAYAcJFnz8D4YrPs0DYWjdLEEgDhr8BgIF0Ss7E4tEE/zlVp/n2QwAhu/Z9FQgDo6RJIZkhRpwoCW3/0ADJuvrpblTWtUwo5dgyWa+qprZdQ2Zq1hdDTsW+xgBy+YL0q5+zCEAM33Zd/Qji49Cz1XXFXTi/gJHrrps4gKFvcHajTNd8Hy5egv+6G+XpKZ9DC9D76HnPk9C3A51tz/t17HmdE+hpw6XzGyR3aeBUQPO7AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QgNBwsm52C7KAAAAk1JREFUOMttkztrVFEUhb99MpMxiRkTgkQjaHwVWlgKKSzEyiJFsNLCzloQf4C/QC1sRAVtRfANAUVRUIuAWEhEfBXJRM3DzCSZmUwyZy+Le3Nngh44cNhn32+ftfa+Vir7haFtdgxosHkVfGbiVseuo0+ySN7z6w0e5cwqWUwCs6BaeYlSReOSSy5JkntycElamn7ZTn/+TWeTu1Z+llstR35WvP/BB+2ur6sp15o3Y8KU5PU/SwBXHrw3gNKKHkpSjM0E5x4V1+WzH096rTLIr7obwNcFX5ak758n36TVXB6lZxeHkQBYrHtFkuZmpt6mMtbVXJPfONEvibCjKwigI5gBDMSZ+ysRDBkW4Mjpc5hx6YX2F7dYkVijUs3fzSwD6CyYmRFajiTVu3KN6mqTt2AATu+eMYCxwzofAKoLr2LvYG0j39INtMPShoXYnGswDgLJ1FE4BNjefkYBaFTuGeRa5VurDZby84Xum5PcA0slbGVq4vFoCDYsgM/Xn4ZAZ9sXGfQfmShXuDxinxYbYIYZUDxw/GZPDqjPux279iNAfgOl/8u0TVVqDR4lMykV+3q2C7DV8p1sUFGWm72sJm/dA+bJYXZVDyXDzEySzCOqz99tl5eZHzoTWLcljyt2JaaybccgwJnb9jhpAgKawrFTI68B1nK2s12O7RvpBaBU8avRNZ8NamxK8hLA75oW0njU8vQXgGVpPsaN/8jlLrnHRa+W3wUzdgXTACCTUOhA2BDAwiq3QBgEVqavpg4NhJB4mXZIZqHP4OBfhGGQCkGsJ74AAAAASUVORK5CYII=",Qz="data:image/png;base64,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",Oz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAARySURBVFhHxZjtU5RVGMb5N/oH+pgQqaiVNqVALOBiTuaIsuDU5EyUlZY09iEdE5nixd1lwQ1YYwbiRbIWUEN5WW2ZxkgCAReIhAQJ4iVakH3h6j6Hs7LLnmf32caZrplrlnnOnHP/9jn3fZ+zRFV9vA9mXTzMh8gZof2VLoG7THxyZ665LDPxscuF/Z8FWEfjWYmoPZmOqOI9L6I47QVls/F1Nvn7te1Sl6h06esvEYT2eXnwAIcB4f6PMDQ3Sh5UwTRBn7IFhYmxyN8VjfydG1Cw8xnyBhTGR+N80kawLxUpjGoIfXIcChNiUHYwCdZTH6LVcBYdpV/CdiEfHSVf4EbhaXybc4QHLHr1OT5HLYgqiPOaTTx4q/5zDNvbsfT3HGSan/gDPc0NaDx9DMbd28hbg0BkDg2hXQWofjcd99qvwuNaFuFCyzkzjc7KEpQfSoJRu00a2N8hIfTJmznAaFenWF69vG43ur+rRrlOQyDyPPFZEcJACWg5rMWQ7QexbORyP1qC3WLkELyiJADMUgg2yZC6BfavTbQFLrGkXCsrK+IvueYfjvMcYYn9uJzVQLA8qHk/A5ND/WIpiSi4o+Ma2oznMP2bQzyUq7+lEeb9uyjHKD98IH6WQrAS6zDl8depJK/bhfaSPJTuexmDthbxVK65B6O4/Gk29JrN6iAMqVtRdiARA9ebxBLKetD7C27XVPAgoeRefoS24nPUZ55VB6GnrajKTsd4X7dYIlgs82dGRzB25ydMDd+Da9EpRpTVVV8JI+UZixEWgrXe+hNv46/7w2J6sJyzM7BSsp2KfQoVumT8fvtHMaIsB22ZJTOVQKiBqYG4FAbCtbSIgdYraDxznN7aAfS1WMWIshy267Bk7VYJwStDh0nHXTFdWXNUfs1nT6D3aoN4oqxfrXV0TuxYPeDCQbAmVaFLwdCtG2K6smbHx9Ccm4OBtiviiVxejxs2cz4K4mOCAKQQrFGxds06HUtAmZYpEXua6tHwyRFqy8moPX6Y8uKWYuNamJ5E05mPUJS0KeBOwruoDIK5iO4Ll0++Q6fimFgmUM65WdqGHORtf5p6SiyKNBvxc51FEeJ+lx2Vb+3lXbh4D8VYByKFYMewae8O9FhrxDKB8no8WPjzIS/PKeqWUyODWJyfFaOBWlqYR6sxF3oOwM4QBuFvBQhm1t1qjmZg4u4dsVzk8no96LbW8q5qoLtFMMCqFSGY9SlxsH72QchyDaXhzjZcfDONtiFOGtznkBBsW9g+sn4wOdgnlg4vdvlhh1tV9n56A748UHZICGYfSPV7B6ki6jAzNsJLTqZl5z+Y6O+B/aIBF954Jewb8DksBDclFNsaVrrfEExnpYmO5+8xeLOF9xOH7Rp6my/RsZ6L8gwNb3hGrXIOrLdKCOE0dtmJ42VZQDfvArrmcydE08+AGF6qoRJQyeogmCWTIzMrT3+vjf2PEGtWD8EsXTwSPwkIZuniav2kIJilAdRYAYL9b0IaKJylQcI5GMCcFY9/ARsgfHzrCSGJAAAAAElFTkSuQmCC",Vz="data:image/png;base64,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",zz="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAUOSURBVFhHrZaLU9RVFMf3b+pFoVZUPhGI8MGAjIbSmE2vsXFGCx11CksqDBaWheVNCItEESoMQSAECyxvFOUlCPKQQKDlsTy+nXP5Lexv97IsW2fmO8zwu/ecz557zrlXY4wMQ9opX6SGH0Dqye0rxVNxvFMHYLwYBo3+iA/0h9/0WIn/UfpgH4I49IbUuSeSBdlSFF8jc+audO/tQsK73kgMel31f2kwF/IIIiFwB+IOvoLkkD3I+iAIusCdiN3/ooByXCsL6qhtQSQEeiPO9yWkn/RHhfYauiruYLDJhLaiPJRcuwDDsb30/WWC2Sndz/IMgs6Mf7mWfnn26cOoMdzAQFMtlhYXYG8LM9PoqS5HRew3SDvuS+u9RIakPkluQ+iCdiHe3ws5H4ei4WYKRrrasLK0pISV26LFgsFmE6qTY5AVEUT7X107JkkDuIagDfFUcPlfhKOVUj3xuAerKytKGPdsaWEeYw87UZ+TjJwzwVTAO5zjkKQQTJ0eHgCzMR0zYyOKS8+NMzc52Ify2K+lGZFCxAd4I+/zE5T6dsXN/2MddwthCN0r7SDn4yBSHfV90aXP0FtTAcvkhOJm+8ZZmB4dQmdJIYxn34fukHqe2LRpTeiUWfDL+Q9xv7RQpHR1ZVlx79qs83NUDx1oLsikog6B1o+KkwcaXxGSa0IC4SNaMjn4HTqW4/iT5kFZzGXSFTEPRumYlpesSji1Lf4zK9q3MS8VpdcjcS/xe5TfuIqfqTDZL49oKQQXhv0/uC1TwvajNl2LmfGNwhzvfoC/UmNR9uMVCpKGJy31WLYuim9z01N4VFkCU6YOpdGRMOenY9Zu7xjtLfn2KyQdfVsUoiOIE0R8wGswUmE+6+1SXKjt74E+NFDbVcRFEVScAKs2xBDcZcpULixTk8pKtXWV/Q5DyG6qC1s2NkCcIPgyMoTuQfHVs+iuKsUCpVhm06PDaPk1B1W6aHT9USyOQmYzY0/RXmzErXMRIsvrdWGTDcIJhGh/2vcCkmhR4ZcfoakgS3U07th4TxfqMhPEwOPxrfXzoqBvuQ/BvZxCPX2XLqWWwhzcLytCY24KGkhTQ4+VMDJbxciDNtxL+gHmWxkiQ2Yq0sILZ+gHEYDtKBzkBMGtmRERiPbb+ZinS8lmk0/60VNTDlN2IhVtPNVGL/13VXxbWlzEUKuZOikKTcYM9NdViWOwGWexmi6+5GAqTAmIEwQ/UnI/OYannc2KC7Wx80FzHeqz9aJ9TdlJ4ubkIxtuN2863DpuF9D7Y7d7EJyypKM+uEk3J6f0+cgwVpadh9Tc80nRQSOdreKCW5idUb5s2LLVimd9D0UXZdLjR8RxAFBB2IMwrXiY0IKs00dgytJjor97fS5sZdY5C2WyBZUJ1+ky9Eci+VFNTAepIOxBBAxtZBj+m3bCDzVpWgyTc+u8RQmntnkaWgONNWKgceo5MLel7AjWRXE0vMAViIChi4c7ht8EPEMqdd9hwFwrjoRfWFx4j2im3Ik6Dz1NRR77vEf4kgW2SfG/BuEAYg/gKF6rpdeSgR65pdEXxcT87dKnYh8/A8Sv5rWyoPay87kB4S6I4oTX8+uLgcQvt/vmUo7+SBqe5azNYKRAMufuSOaLtA6xbRCWLNBmku1XpIJwAmHRIpcwsoD2ku1xkEa0EQVzCcKixdsGka2VaA3CA5AtgWTfJGIfGkP4PmWoeAYjc+yueH9axEH8C3eTOZ+/XBfEAAAAAElFTkSuQmCC",Gz="data:image/png;base64,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",Wz=""+new URL("cc_by-nc-nd-BBVvE1NF.png",import.meta.url).href,Zz=""+new URL("cc_by-nc-sa-DuIs8K0R.png",import.meta.url).href,Hz=""+new URL("cc_by-nc-OGbgs_V7.png",import.meta.url).href,Xz=""+new URL("cc_by-nd-O8HP6cnR.png",import.meta.url).href,Jz=""+new URL("cc_by-sa-HCh8dhKF.png",import.meta.url).href,jz="data:image/png;base64,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",Yz="data:image/png;base64,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",Kz="data:image/png;base64,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",qz=""+new URL("fullscreen-BDPQAqsG.png",import.meta.url).href,$z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAUhSURBVFhHrVf5U1RHEOY/SqpyVA7RxGASwFLOFUhQi1OKcERTMVbwqPxgUhHyg+deyHILiBQimgBlkWwqsZDDwEIIlwZYYCOXIovh2E53v/d2376dPcR01VdTM6+3v29menpmw8wpEaBP2MUwKEh8zw2jFrr3vWBS48BuvzCLkBwB9V8mQ5gXuUZEIAEvRZ70gRvlGdEQ5iH3zN5HgEz8IgKE5ASVAI8ImTQUAV7E2F6JfRcu7X0T9NiaDkjjQmIFGgEsIlMgwiPA/+ypb07aDQ1HD0PbuSJoKDwIpRiQvoVKTv6ECo8IDKxAJhGRK0utj9sBNTmJMP57J6w/d8LYr3ehNkcHBhz3R6pAIfcSISJWQyuAxi5GvQb1BamwMPkQyBanHnH/UvTr6EOrFJoAjwiZTATfFQjnrbp5Mg9stxth7ekyi6DWdqcRWk7lsb8hfmdQcgUBRbgF6KTZG/EEXT+WBkNtzbDy2AEu1xYLUIz6K4/n+HvjF+lgQrG0NSJiNfyKUMgl4MxQQMupfJgbHpApJXO5XLC1ucmt2ub+7IdbpwtYSKlWCBao0uQgItzk8hYYE3ZCXf6nMN3fLVMArK85YeLez9D2fRF/oxNC/fW1NdkD2L8B88ScuEsjQIa3CFpuCT4CSBjOpvvaVdja2ODgq0vz8Iu+GCwHI6EmOwGqETVHdGA5FAVWfQl/J9vaWIfuujIwYwzeFrUAhlqETKiFPnYHn4LKzFiwD/Zx4E0M3FN3FSrT9kFfYwU4lxZYHLXUr0zbDz31ZexHZh98AFWZcXA5+g0wYrL6iECwCJEAOma1n6VAy+lC6KoxgnN5iYPOT4xA01fZ0FVtAhfmgtqoT+NNJ3LYj2x1eQHHDNB6phDq8j5xE6uFCEUYMAcq0mNg1NrBgdQ28dtdXP5EsNukldGafaAXqo9gEUM/rY1Z23FVYjBZMUfcYvyJiA/HQDqY7OuSf+6xkc4fcf8TwTEyKI94m+MvG1ZSHU6gXR7x2FTvPf5mwkm6E1XJCa0IOpJUYG59cxS6as1Ykjtg3bnKgWZsvXhPHAJbayP3tTbQeh0aPj8Ms3hEyf51PuMVuI9xWjEeEyMHtUoh4wvMRwQDb8j9b8P5D1+B2twk+Gd8WAq6ugpWQzHU56fC9EAPjyk23d+DxzUVrMYS9HvGY46xYf79hY9eBQPetEr1VAQEESFDh1UPHQewRCsFaf7RKCZsAVRlxcFP352Ajh/OcFuVFY8FqhC/j7EfVVDb7Ru473swlv/7JKgIOt9GzJHmr3NhcXKCg5M9mbXzqanOjofzOEtqqf9kbkb2wEttchyai3K52InIFYQkQik2nRfOwsq8Q6aQSvZTxwzMPxzlVl266Q7pvHgWSeQYAnIF/LISkWtBVbM0KQLai0/iPg+5q6fWaHx26A8u57QNVHFFxGqELIKBQugmrcqI4eSzY2JuPJfuCmqpbzWUQCXWGPJTTlkwvJgIBN8luMd0cpqOZ8Hi9N8sYglb6tO4WwD683YEQXlGFIpQXVih4krMO1iGU3D2UuWcenAfruFR1OM4k/tDQBFa4A8CgXMkZQ/c+fY49N2o5LcDkbhXIBBUAkwIi0eE8pDRAH/kF/idHryX972FD9xwMaEGPjEUEdJDJghEAQQISOgHlnRZhAKhAAWCAP8HLOmRouddIIgDvQwkEcH+8IggCLZdWNI+pufdNkQQBAG3g/KsvRBWe0wHZajGF5GoMghwKbcN5CABN89lw3+ZHqR2AaB1yQAAAABJRU5ErkJggg==",eG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAATPSURBVFhHrZb7U1RlGMf9h8oZ0bhZOBOIglwWFsqMuAtOY9Zojd3sF6uhMmDZC7cl7hAXTZpCKC5DhKQwoQ4TKJRmMaFDCCG3Bb49z7vvYc/unrPsZs/MZ87s2fd93s8573Oec3Y1nDHCnhm9TaVCxpNhzzwkqFLIot9q6Fx17hFcKsjFrtKU51BqdGFL3olnnSR5oDmWcqoxRnhRlR1DEuJPFfRbK5k7GhJqeEySRDXPSyg5AvZXokhCLSBRT/TEkhiG4pi9KIzejcKop1EY+RRBx6jdKD68B5aEUG8hFW4ihD39oP8SlsRwWiQIFUcjcfmD19FT8hEGyi/gh/LPMVB2AT2mD3H53ClUvBiJ4kMsE+aXjK6EgjLBHB+Kckre/dk5TPR1YmnuIbSCz0/0dqLr0/dR9sLzMMeFCAGrWkZB5q5M19kOBRvBArXHk3Hz6xasLS3K5XzH6tI/uEHja3OTUBIXLCQUApawGkiAEk3S1WNLruBv0PjJ/iuooQswx4foilToFSZjSwpHxbGDdEVfYmtzQ2YOLLY2NzHW0UxbGSUKWl/Co08omOOeQS8V24reFmxtYdPhcLKhL7my+IiK9jxMsft2kFCQAtbEUNTlJePe6FWZyj3mZ+6jz1qA6sx4VKXHoulkGsa+atKtmXujQ876oG1RC7hqIoWaxjYsEUHWQej65D0sL8zLNK7YWF/DT40VYlx1ZhyqsxJogWTY0w7j1rcX6QZ5F8/ywt/oLHgXRdRHnAI+JQi6E1zR15rsMoV7bDjWcXugG7e+aRNCHAuzf6L5tZfRa/4YjrVVcc4zWJy3xJa0f1tAV8JqCENtjgFTQ/1yun7wVT+Y+gVXCt4RVzjaXkf14ZD/usfUUB9qshOdHVUKcLPSlLBQPTSefAl/3ByR0/Xj4a930HwqTXRTrpFHVCt6wfkaXj0qHle/JJr8lLh/YwQXz+ZjpKVGdxuU4HyNKgnRtmnrK0Xb9pIIQ/2JVPx2/Uc5XT+4M87dncb6yrI8ox+cry4vRXRgISGeRHqLakko3ws/X2qU0/Vj4a8Z3L0+iMXZGXlGPzif1bBfoAgIiQwNCaY4Jgg9xeextvxYptAOLkRT7F5x9BWch/MV0duV30d+SXBdtJ7OwuztcZlGOyb7u9ByOkMcfcWD6Qm0nsmhrQiWEk4BnxJsajWEY7ihlHrBukzlHY7VVTyenxNHveBeMlxfBgvl421W3wWnRLSOBMH9oua4AdPDO/cLXzF9lfoD9R1zIj0VHgI7SjAWEml7Kwcz42MyZWDB81rfzBbbywKaEvRlv6s09QAtqOAScOLclva38/H72DXxavYneByPbz+bJx55m5GeOA0BdwkFLRmazCK1eUaMttVQkU3qNiY+z/+P0Dj+GhMC/Mjr3AXO7y2xLeMcoMZCL56ShBDUnUjB4BclGP+uA3cGvxfvBD6Od3dgsMqEuvwUemUHi61UFrfRgoynAONDgnENZGwC+uqmLy4TffBwLymK2SNezwx/iZuO7PNY3CXgJqHKqy+hoBrslNBheyHvhbehcep8CjtLMHKw18JaeCzqiXpxBf8kGBqslTRQPAWYACQOaCYNlP8uIR9b2/8goitRdizS5+LuEk8m4iZAdVOaGoH6N4z4F4ltgtiZBjuxAAAAAElFTkSuQmCC",tG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAANySURBVFhHvZf7S5NRGMf3FwXdlbKCEm9ZmUo3KieSkYUoBGKUZGU/VOqcu9nmIIOZWnmjm2JeE8qgkkzdNIUidbO85nTTp+ec7dV3xzPf17k88OFl87zP97PnPedsKsqzT4MpORJMSYgyQJIiKMb1cB5RRoAF8xX6xAOgT9gP+vh9eEXINUB0sgkD3XEPJFtBCxAJAfJ6A/BDOXgldHF7UUIsECQRAjeYB4rwJcTgRBZNbAioIrZCYfgWKEDIVRW5DTRHQlfN5QYzSEuIIK0rjt0NlitnoEV/Dz6Um6CrwgzvLUZoUt+BsgvxKBJC57EyawnJltBiYV1cGDQW3oKR3m5gh3thHoY/dkLNjXTQHtuDbZYvIkvCs5r3QVNRHsxNTtDQ8eFB6Hykhe4XVeCad9L3yBizfoNnWRdRmIjg6scQKRGFgRPqA5mIn6oiQwmOQSsNGnjXDG0l+dDX/ApGrT2w6HbR94XR3/IaSk4cpB1hBcT4SIhhJcgkckObsYC23DFkg1YU+NXz2Ru5ekyO/ITn2Wm0G3o/3RDgSrAiwoHypa6CBozZeuFTjQUWXb6fXjzmpiehUXWb3uvvkYjhSgj4SNRXYfklWFp0Y0cWPGl+hnNmCndLXnAkCHpclESi3awGl3POG7P2mLaPQN3NDBTAHcUJZZGUMJCJWKwSF6bd1ueNWXtY2xqg5OQh3Na4JrDGMky4gLQEQrshbNEpzxb1N+yD/VB9/bLnUZAQcr8YRkC2BIGcggYs/Baf9WjfV2/kynAvOOlhVZuDhxU52LyPkUugEgTyWDR4bD9JPwuthvvQUVoE7SYVdCCNhblQlpoAmqOhy4tZFuuVEFBH7wDjqXBoeJADbQ/z4eXdLHo4qQ/v4gdJEJBEccxOqM6+BLO/7fRROIYGoDJTSbskzOGF+SNwiWtpMPvHQSXI9wgrIcALZdlQJ2bGx6iE47vNr4QAL1xg0yQIPAHCpkoIBE2iBtfE34lxKuFZE8myJQjSEvhvgA/M34txKz69moJf2T+oxHBXJzxOTQQt/sZk50rBSDDBPLxzyelZei6K/s7seVML9bmZWMxz+q3Ukw9KcMJkQAJJ+9VR20GLpySvuFwUvADZcAoGwsYkxHCKyyV4EgKcECmCLyHACfPH/5MQ4ISyKMwp0fybgw0nnGBOiYF/Afga1FffGGwAAAAASUVORK5CYII=",iG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAOJSURBVFhHzZX5TxNBFMf7D6kRD+QQRUFaKacIQVGg0aAx0fQHjEqC+gMkJEopbZejWxAkAQxGBSEVY0U8YrwSDEbKFQ8IBozEiyiHz3nT3XbZnS67hB+Y5JNN3sy+7zcz780YWs/ngqfQCHx+EvAFa4dbBb5QwGKC1pI8MNRk7YKaA3GrYKcqXJA4BdI8tQd3ExOZ+NPyCX0oDYRgrZdB9A3MCd2wDCCstUrWyISIfgPIGptYHWwTpFhdadFgN0ZAVdJmSnXyNnp+ztQdUGUMxDRD1jtTo2helh7TBArdPFcE73o7YfSpj/KsyQXuQ/ugp/ws+Pu8wbgW/H33oPPiGag2b1doIUwTdtMW6K+/CtIxM+aHpuOZ4H/UK0T0jfcPesB9OAlc6TEKvbAmHrsrya//AhnImBkbhkZLKrxo4+Hv3C9YWljQzPzcb7qTrvRo4BhXgqFWFkDw/L0VF2B28hP8+fmdgtuKx1GfmwDXi7Kg5US2ZnC9OzcRuAzlLiBME9hiddl7wHPEBA1HkyloAOdwOx0pkbphHYMINaEwQqoYi9OWuAkqEzZQ7KYIoTui6HFh52iGrHemqXQHywSXEQuNhSlwq+QUdF6yUtqt+eSej4dmUpx3Sk8H41rA9dcsaQEjMi0kaEJqxL5/K/iqy2Bxfl4oS4DJwTe0MAe62oWIvvG6o5nuJJceS75ER4TosU2Q7XvitsHS4qKQAmB6ZIi0aAZptW4hom8Mem9Dfc5e4MglSB9NiZFlJkQjaKKPqxB+D4zp0SHgSaF2FB+D5y118LKtYQU8QXD9DWsBOMyBW1eOwgSC/dxyMgd8jnJyX9go3WXFtCawfWnBJm5URyhoxEZwiLelVhOh7gglqyJVTn8i7YuFuyKkJaXUkJhcXIRtgoA3G+5IiECfo8DyOAPSBXKoEZm4CNOEwxwJXZet8HngFcyMD1Pe3m0HPs8IPmc5TPkHg3EtfCHre6+U6quJ0NsRGviA4R0x3H9fiOgbQw+9wOMDFuyOVZj4Oj4CDQVm+rp+m/gAP6anNDM78ZEWOS1OmYGwJpjH0d1BHy+sCXxX6nJkYCw7ng3pKioYpjj1FyaNxygh26wGmmcZQMKawEkuU9Jy+IM4x0KSVC/hTeiBkVgPTBMIU0wNRnKtrG8TCFNMDYaAFlRNIEwxNRgiK7E+THgsRqa4FKaYGgwhFtj2vMUI/wEAF0bZnjkGWwAAAABJRU5ErkJggg==",nG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAATFSURBVFhHrVdrTxxVGH5mZnfZZaXulksRsLRIi0JJpVq30Vg/aBPT0MaIpibYGlOT1i9G/4H/wjTGmGhjE79o/GQaEy/V9CLR1ngJLQjlIgULC8zC3mZ3fN8zM8vMzuzsAj7k7Jw57znnfeY9z3vOQfpo+Jiu5fKQYIPkeHPB1+o/FLr5FBVZQsPDzZCZgNW2AefbpuAz1GFisrqOzNIqZKPFQK1EqlK0deCqVSrBQaKEql6ck/uVWuAiURooKhWmIc3oxQKyaylkVpeRS6/Te9E0mqiVAcE7EhYqENEyaQTqIug/PoRnzr6L7mdfgKQoKGiGvkrgoVbxgXKib8/7Zr0El8Bt2aJls4g8GMehV9/Ak6fOor3/ENoPDKBYKGBx/DYK+RxkIuQJj8yRg4EaSRD4Y4oFDfGOTiSGz+GxY4OQAwFhC4YjaO3pgxKqw8KdP6HlspWJlEEOVSDBsBPh9ebS2nMAiTNvY2/iKAXHuZJKMIiWfb2IxOJE5C/k1tcgy9Snyp5TEwkOM790HDyMI6fPo633cdPiBn99U9d+RJtbsTx7F+mVpBgr+RCRQ4o/iaKmQZIV7CPhJU6fQ+OebsPoA3bYuLsLsfZOqPdmkbp/z2yXPfWpUCQoXt7S1fJ5+rIA+l58CU+9fh6xtt2mpTZ09D+Bp998hyKYIA86CqSnSr6UQYqE5FAAUCBhBcNhDLw8jIGhM6inbNgKojub0Nzdg2wqheT03xTZgilYi4wkImGSMBoYrIH6+E4cfu0tHDx5Sih/O4jsiGHX/l5K3TwWJ8bEU6YltiCEyST4xdLAA00tZgqerDnNqiEUiWIXZRZHePHuOHT6UEusTKKkFn5wfjd2PoKuI8/5KnorqIs24NHnjyNOgtVoQ7PDSHZmQEUOBLE8N42JG1ewQsrms2G74OVN0/myNDOJ8as/QL0/L/yYLsWvMti7kaIc/rS6goXRP0hIE2hoacOOllbTujUUaZMbu3IZ1y9ewNQv15BRl2ljCxlG/nAjRZ1g0agLc5gf/R25/yESvKwr8/9g5tbPdNquGQT4xKULjRULFwkGh0sJhWmj8jSL03LmtxH8+sVF3PzyEm5+dQmLk3dMqxsKzRcM1xtZYfh1wNuLwAbTcmTUVYx++zWuf/YhRj7/GNc+uYDb31+mEzZj9qgMa9ZSoR8fEpXBKcYXmTwXulvk1+lyo6okwrKLjQ2WUzd0yN4GYy0rpim1s4h5WxdPOtL5UrMp2FiJSLiIkG/OZVa2F1gr5QT5oPPSkOhr2yHtzi3QKKPV+uM6D0wtLiA5OyU6lSNPd4X08hL922A6JUI5WhLXPZPB1/qUWqpb/uyF9olO91FOk+p6ERpfYGn91X/nkKTNhsvS1ATGfvwG07duiD5WQLLrqthxM7TPWH2T05OYHPkJE1e/ExtfeaSYAl/vpA9eOcp1T/BZouUy9IW2LuSUUzhAVzn7knAUODvEJcgCDZMUmfqGHeeQ3WEgSvP4kdg0qszkZWYSbiV5gUfbixcqtRM8h5UaKUX5sWlYE9hLGZwm2xuL0yFQzg7j6Q9nNvrCmNruxObAVi2B2uQtxsIFe4q74NPMm5z06XtDOv97vh3oIry1w1gN2o8CCmLdD+E/4YUVT2wGYzwAAAAASUVORK5CYII=",rG=""+new URL("loading-DjAwzjc-.png",import.meta.url).href,sG=""+new URL("loading_image-Dsm_Catc.png",import.meta.url).href,aG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAABfGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOrj1gQF3SmpxMgMDIweQnZxSnJwLZOcA2TrJBUUlQPYMIFu3vKQAxD4BZIsUAR0IZN8BsdMh7A8gdhKYzcQCVhMS5AxkSwDZAkkQtgaInQ5hW4DYyRmJKUC2B8guiBvAgNPDRcHcwFLXkYC7SQa5OaUwO0ChxZOaFxoMcgcQyzB4MLgwKDCYMxgwWDLoMjiWpFaUgBQ65xdUFmWmZ5QoOAJDNlXBOT+3oLQktUhHwTMvWU9HwcjA0ACkDhRnEKM/B4FNZxQ7jxDLX8jAYKnMwMDcgxBLmsbAsH0PA4PEKYSYyjwGBn5rBoZt5woSixLhDmf8xkKIX5xmbARh8zgxMLDe+///sxoDA/skBoa/E////73o//+/i4H2A+PsQA4AJHdp4IxrEg8AAAILaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+MTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4yPC90aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoPRSqTAAAAu0lEQVRYCWPc1tz2n2GAAdMA2w+2ftQRsFgYDYnRkICFAIweTROjIQELARg9miZGQwIWAjCaBcYglla0NGfgFhLCqfzvnz8Mt/cfZPjz6xdONegSJDtCWleXgVdMFN0cOP////8Mj8+eY/jy5i1cjBCDZEd8//iRgUtIkOEf0MfYwP+/fxlADiEFkOyIsytXk2I+UWpHywlYMI2GxGhIwEIARo+midGQgIUAjB5NE/CQULWzhbEHhAbZDwD01yRQcPLsTAAAAABJRU5ErkJggg==",oG=""+new URL("no_image-BW0FmrZO.png",import.meta.url).href,lG="data:image/png;base64,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",cG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAAAfCAQAAADJwcJrAAAAAmJLR0QA/4ePzL8AAAUASURBVFjD1dh9bJ1VGQDwp12/lm3ANuqFfcjoRANKJpQs0wE2MCGCDtQ00whubKDiooxMVExYhelsLJuuCkGnUTBGM2fMYGHiJmNuGQNqILpAFUm28jG1rGx2bG1p+/OPnr67t+uyy2Js+j5/3fec+97fPfec5znnxpVtu7tbnEo80/3UoVOJJ/fveuVUYse+i5+L6+Nxo+d6oq/sntg2isDbnb1mWPDfNFnko+b5lGU2OZK17NQ4gvF5U5qPA+8wWwyJ8RocBj0WHtf6/4wpPywAd7lZiRDOd6tGq9xmngohTLcL9LlpBMFn5YNfN0cIdf6gP+9rHNJoolDpIfCWuf8zQInxbw/8gwzc4wqh0r0F2MHrNZcIZbaC55Vnj8ilL9FitvCyu4TwT18X2sCrVghzHDQzved+m4RSDQ7iz84tGpw7Br5TKLE+D9mrQ2/26k0fECb5N1hWAF7iPL/z9DDgtWrcpU+lS/Hu9J4HbRc+64j5zrfdY8WDBxfdK8YKSzPe710uhHIX+VW6t99Zwu3g5WyMc7hWaNY6DPgRn7PBRjEM+DG/FMLpzikaXD0IHhixUh+3EysLOp3njUS+X6jSTkIemxIctWAY8E6NttrrHcOAn7FWCBUmFg9eG9vQb5pQlW5epFQIM9zhM2bYl417j5zwM3BfHniBicqE8KxmocpRNwltvimMR/0w4B/bo1JY5aWiwZMHwM8KJfZZ54KsqcKeNHL51y3CJ8HTQ6bEQCzXY5MW7XJCm5ds8YIOU12K5+y22wUJPF2bv9us1+Liwd+PbdggvAv025g1nuZ2e4dki58Ks0BH6lWl3tl5j7zScl+UE8K16tWrlxNylqQ40+WuEcKZlljug28jrU0aADenRQH7CjqUmufhPPBmoToVkNIRKByTvpeB5ybSP1LT3b6UJfW5fqsPbMnA/Qk8Ro0aU/MeWu592TKarkaZUKImywW5rPcZxglTVA+UXZNOCj5jAPwbYUYCH06QpejQmD18pmadfn7clBjMEgfcKISP6ADNSoVWzBfmoD39ZnsdNkEIe6wWdnhdtbDNd08OXpO36F5NHz03zeC/gG4PeX/qPtGF2aJ7siBL1GjSbaZqBzUqN8dRi4VWfR4UVnkrget06XBDAZifFAk+bU1eWrsvgR/OFt2n3eA6Xfija9K2aDCtNQ/JEhW6LXY9ThfCRhuEVlv9R5UXPZrAv7DBAx4vAD+q2+ziwKvzCkeNnkRemeFC+ETaXTyvLq9wXD0EXOJNX7BAv0oh/NojQquv+pdv6HSrdmG8Tg2W6TM9D/wd3/ZXO4sATxgEv2acsCrLBltcYYJQ5sOeyGbpFOGOVJrHDAEv0u9C79TtFmGqA74itFruR45Yb6F2YZGjWrTodGcBeJy9eosB35ttfu4RxthYkHXfyCsbR9QJubSklhZsfjod0m+FEL6syws6bTU2gS/DdQm8wzohrPaikjxwuIoiwOOOgXtdJZRbN+xpar/LhHJ/SpOjMi+J1apVm0pFCNPMV5sm1XvllKpVYbJZwsUphU1Wq0ytGuE9KRPNMu3k4Ka8DfyBtIG/2lNDxrlJdd4GvsslI3biGNt0giPSORZaoVGDjxmbxm1XKhg3j+ARaQj4xIfQFekQyua0PxiJqDO28YTH/Bt9yGzz3VZwzB/p/yWqvjXK/kgZdeCKldFg/aiJu1WsjPjaqIra/wK5cxOubJVgiQAAAABJRU5ErkJggg==",hG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAABfGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOrj1gQF3SmpxMgMDIweQnZxSnJwLZOcA2TrJBUUlQPYMIFu3vKQAxD4BZIsUAR0IZN8BsdMh7A8gdhKYzcQCVhMS5AxkSwDZAkkQtgaInQ5hW4DYyRmJKUC2B8guiBvAgNPDRcHcwFLXkYC7SQa5OaUwO0ChxZOaFxoMcgcQyzB4MLgwKDCYMxgwWDLoMjiWpFaUgBQ65xdUFmWmZ5QoOAJDNlXBOT+3oLQktUhHwTMvWU9HwcjA0ACkDhRnEKM/B4FNZxQ7jxDLX8jAYKnMwMDcgxBLmsbAsH0PA4PEKYSYyjwGBn5rBoZt5woSixLhDmf8xkKIX5xmbARh8zgxMLDe+///sxoDA/skBoa/E////73o//+/i4H2A+PsQA4AJHdp4IxrEg8AAAILaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICAgICAgICAgPHRpZmY6Q29tcHJlc3Npb24+MTwvdGlmZjpDb21wcmVzc2lvbj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPHRpZmY6UGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbj4yPC90aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgoPRSqTAAABU0lEQVRYCWO8ffDw/9uHDjMMBGBiZmZQtrZiYBooB4A8/e/vX4a7R48xMA1ECCDbCXLIgDsC5KBRR8CiZTQkRkMCFgIwejRNDKqQYIG5hhxa28uDgV9SkuH17TsMlNRBFKUJQWlpoCMkGKT1dcnxA1wPRY4AVT4g8Pf3b7iB5DBIjg5FS3MGbiEhhj8/fzKwcXOB7WTn4WHQdHVhYGZjZfj75w/D7f0HGf78+kW0e0h2hLSuLgOvmCiKBawcHAwK5qZgsf///zM8PnuO4cubtyhq8HFIjo7vHz+Cffvr+3e4uSCLf//4AcHfvjGA+KQAkkPi7MrVcPMt4mMZBGVlGL6+fctweMZsuDipDJJDAtkCZlZWMJeRiSJjKGvU/Pz8GeyI///+IbuNZDbJ0YFswxmkqEEWJ5VNWTiSahsO9aOOgAXMaEiMhgQsBGD0aJoYVCEBADSyXGYw+pZvAAAAAElFTkSuQmCC",uG="data:image/png;base64,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",dG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAAhCAIAAACHuxg0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIGSURBVGhD7ZrPT9swFMdrk4SSpChoYtJWcYEzZ8Rfv6m7gWDsiHboxi4RAmVpm4Y4/rGvW4shTUINq095H6lOnmPl8Onzy+GZmRVKKSEExgHxVoIgCMMQo4sHA6a1rut6sViQWYcxAkZmM91JiLE/yE3T0V68Nxzt76YJq6qqLEv4TpIEzxhj68X9BJt4WRQ/rq4eplMpxErZRpiBQZqKRmijkzR9Nx6fnJ+zPM8551mWwaxb2GOQrb9uvt1OJmK5dFNdWJcB/EXpaDQ+PeVSyjiOX1aKPmMzt/zdPj25uCNI0ygKldZt2y4eH7gxthL3vBq8xGhs8Y3LwT9wxqHS4C3acFgls9vECnW33F0JD5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj5Bcj1i55j9aRsQrcDK7XaxPa9T20Wzmtm1rp4ltoLWG2HXPl4dhWFUV+d0KSqm2FXwFQlbXdVEUCJIkiaKo5212JeX3yZfp5aVBAnbDKKVhVmszHA6RstnHD/YgXtM08/lcCIElf5vuvcQeZ/p6/fPiAqrc1AasPlsG6vjODhI0CAIk6+HJsT1CiifIZyklRCPss198jGZ5fvvpc5nnnfwCbHrIxcg4j7Ps+OzMySWeQUGY3d8/3t3Jxm7lNwDF++8PD46O/gBK2P0OZOpxlgAAAABJRU5ErkJggg==",ts={"Maplat.png":kz,"all_right_reserved.png":Qz,"attr.png":Oz,"basemap.png":Vz,"bluedot.png":Xr.bluedot,"bluedot_transparent.png":Xr.bluedot_transparent,"bluedot_small.png":Xr.bluedot_small,"border.png":zz,"cc0.png":Gz,"cc_by-nc-nd.png":Wz,"cc_by-nc-sa.png":Zz,"cc_by-nc.png":Hz,"cc_by-nd.png":Xz,"cc_by-sa.png":Jz,"cc_by.png":jz,"compass.png":Yz,"defaultpin.png":Xr.defaultpin,"defaultpin_selected.png":Xr.defaultpin_selected,"favicon.png":Kz,"fullscreen.png":qz,"gps.png":$z,"gsi.jpg":Xr.gsi,"gsi_ortho.jpg":Xr.gsi_ortho,"help.png":eG,"hide_marker.png":tG,"marker_list.png":iG,"home.png":nG,"loading.png":rG,"loading_image.png":sG,"minus.png":aG,"no_image.png":oG,"osm.jpg":Xr.osm,"overlay.png":lG,"pd.png":cG,"plus.png":hG,"redcircle.png":Xr.redcircle,"share.png":uG,"slider.png":dG},WE="data-maplat-close-attached";function wn(n){return n=n.replace(/(<\/?)d([ >])/g,"$1div$2").replace(/(<\/?)s([ >])/g,"$1span$2").replace(/ din="/g,' data-i18n="').replace(/ dinh="/g,' data-i18n-html="').replace(/ c="/g,' class="'),Ol(n)}function xo(n,e){const t=n;let i=$h.getInstance(t);return i||(i=new $h(t,e)),t.hasAttribute(WE)||(t.querySelectorAll(".close, .modal-footer button").forEach(s=>{s.addEventListener("click",()=>{i.hide()})}),t.setAttribute(WE,"true")),i}function DC(n,e){return e||(e="."),n.match(/\//)?n:`${e}/${n}`}function PR(n){const i=function(a){const o=a.innerText.split("");let l="";for(let c=0;c<o.length;c++)l+=`<span>${o[c]}</span>`;l+='<span class="omit-mark"></span>',a.innerHTML=l},r=function(a){const o=a.querySelectorAll("span"),l=a.querySelector(".omit-mark");let c=0,h=0;o[0].style.display="";for(let g=1;g<o.length;g++)o[g].style.display="none";l.style.display="";let u=a.offsetHeight,d=!1;for(let g=1;g<o.length-1;g++){if(o[g].style.display="",a.offsetHeight>u&&(d?(u=a.offsetHeight,c++):(d=!0,a.classList.add("minimize"))),c>=2){h=g-2;break}if(g>=o.length-2){l.style.display="none";return}}for(let g=h;g<o.length-1;g++)o[g].style.display="none"};n.querySelectorAll(".swiper-slide div").forEach(a=>{const o=a;i(o),r(o)})}function gG(n){return!!n&&typeof n.setGPSMarkerAsync=="function"}function fG(n){return!gG(n)||n.constructor&&n.constructor.isBasemap_===!1?!1:(n.constructor&&n.constructor.isBasemap_===!0,!0)}function pG(n){const e=["Bytes","KBytes","MBytes","GBytes"];let t="Bytes";for(let i=0;i<e.length&&(t=e[i],!(n<1e3));i++)n=n/1e3;return`${Math.floor(n*10)/10} ${t}`}const AG={house:{viewBox:"0 0 512 512",path:"M240 6.1c9.1-8.2 22.9-8.2 32 0l232 208c9.9 8.8 10.7 24 1.8 33.9s-24 10.7-33.9 1.8l-8-7.2 0 205.3c0 35.3-28.7 64-64 64l-288 0c-35.3 0-64-28.7-64-64l0-205.3-8 7.2c-9.9 8.8-25 8-33.9-1.8s-8-25 1.8-33.9L240 6.1zm16 50.1L96 199.7 96 448c0 8.8 7.2 16 16 16l48 0 0-104c0-39.8 32.2-72 72-72l48 0c39.8 0 72 32.2 72 72l0 104 48 0c8.8 0 16-7.2 16-16l0-248.3-160-143.4zM208 464l96 0 0-104c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24l0 104z"},"location-crosshairs":{viewBox:"0 0 576 512",path:"M288-16c17.7 0 32 14.3 32 32l0 18.3c98.1 14 175.7 91.6 189.7 189.7l18.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-18.3 0c-14 98.1-91.6 175.7-189.7 189.7l0 18.3c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-18.3C157.9 463.7 80.3 386.1 66.3 288L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l18.3 0C80.3 125.9 157.9 48.3 256 34.3L256 16c0-17.7 14.3-32 32-32zM128 256a160 160 0 1 0 320 0 160 160 0 1 0 -320 0zm160-96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"},compass:{viewBox:"0 0 512 512",path:"M464 256a208 208 0 1 0 -416 0 208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.3 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"},"share-from-square":{viewBox:"0 0 576 512",path:"M425.5 7c-6.9-6.9-17.2-8.9-26.2-5.2S384.5 14.3 384.5 24l0 56-48 0c-88.4 0-160 71.6-160 160 0 46.7 20.7 80.4 43.6 103.4 8.1 8.2 16.5 14.9 24.3 20.4 9.2 6.5 21.7 5.7 30.1-1.9s10.2-20 4.5-29.8c-3.6-6.3-6.5-14.9-6.5-26.7 0-36.2 29.3-65.5 65.5-65.5l46.5 0 0 56c0 9.7 5.8 18.5 14.8 22.2s19.3 1.7 26.2-5.2l136-136c9.4-9.4 9.4-24.6 0-33.9L425.5 7zm7 97l0-22.1 78.1 78.1-78.1 78.1 0-22.1c0-13.3-10.7-24-24-24L338 192c-50.9 0-93.9 33.5-108.3 79.6-3.3-9.4-5.2-19.8-5.2-31.6 0-61.9 50.1-112 112-112l72 0c13.3 0 24-10.7 24-24zm-320-8c-44.2 0-80 35.8-80 80l0 256c0 44.2 35.8 80 80 80l256 0c44.2 0 80-35.8 80-80l0-24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 24c0 17.7-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l24 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-24 0z"},"layer-group":{viewBox:"0 0 512 512",path:"M232.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 149.8C5.4 145.8 0 137.3 0 128s5.4-17.9 13.9-21.8L232.5 5.2zM48.1 218.4l164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 277.8C5.4 273.8 0 265.3 0 256s5.4-17.9 13.9-21.8l34.1-15.8zM13.9 362.2l34.1-15.8 164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 405.8C5.4 401.8 0 393.3 0 384s5.4-17.9 13.9-21.8z"},"circle-question":{viewBox:"0 0 512 512",path:"M464 256a208 208 0 1 0 -416 0 208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0 256 256 0 1 1 -512 0zm256-80c-17.7 0-32 14.3-32 32 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-44.2 35.8-80 80-80s80 35.8 80 80c0 47.2-36 67.2-56 74.5l0 3.8c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-8.1c0-20.5 14.8-35.2 30.1-40.2 6.4-2.1 13.2-5.5 18.2-10.3 4.3-4.2 7.7-10 7.7-19.6 0-17.7-14.3-32-32-32zM224 368a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"},"circle-info":{viewBox:"0 0 512 512",path:"M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM224 160a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm-8 64l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24z"},"map-pin":{viewBox:"0 0 320 512",path:"M192 284.4C256.1 269.9 304 212.5 304 144 304 64.5 239.5 0 160 0S16 64.5 16 144c0 68.5 47.9 125.9 112 140.4L128 480c0 17.7 14.3 32 32 32s32-14.3 32-32l0-195.6zM168 96c-30.9 0-56 25.1-56 56 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4 46.6-104 104-104 13.3 0 24 10.7 24 24s-10.7 24-24 24z"},list:{viewBox:"0 0 512 512",path:"M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"}};function Xs(n,e=""){const t=AG[n];return t?`<svg class="${e}" viewBox="${t.viewBox}" xmlns="http://www.w3.org/2000/svg" style="fill: currentColor; height: 1em; width: 1em; vertical-align: -0.125em;"><path d="${t.path}" /></svg>`:""}let Ft={};function mG(n){const e={red:0,green:0,blue:0};return n.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i)?(e.red=parseInt(RegExp.$1,16),e.green=parseInt(RegExp.$2,16),e.blue=parseInt(RegExp.$3,16)):n.match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i)&&(e.red=parseInt(`${RegExp.$1}${RegExp.$1}`,16),e.green=parseInt(`${RegExp.$2}${RegExp.$2}`,16),e.blue=parseInt(`${RegExp.$3}${RegExp.$3}`,16)),e}class CG extends ko{constructor(e){const t=e||{},i=document.createElement("input");i.type="range",i.min="0",i.max="1";const r=t.initialValue||0;i.value=`${1-r}`,i.step="0.01";const s=t.render?t.render:function(o){o.frameState};super({element:i,render:s});const a=t.className!==void 0?t.className:"ol-slidernew";if(this.set("slidervalue",r),i.title=t.tipLabel||"",i.className=`${a} ${Ju} ${jf}`,i.addEventListener("click",o=>{o.stopPropagation()}),i.addEventListener("pointerdown",o=>{o.stopPropagation()}),i.addEventListener("pointerup",o=>{o.stopPropagation()}),i.addEventListener("input",o=>{this.set("slidervalue",1-parseFloat(this.element.value))}),Ft.slider_color){const o=mG(Ft.slider_color);i.classList.add("ol-slider-originalcolor");const l=document.styleSheets,c=l[l.length-1];try{c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}::-webkit-slider-thumb {
          background: rgba(${o.red},${o.green},${o.blue}, 0.5);
        }`,c.cssRules.length),c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}::-moz-range-thumb {
          background: rgba(${o.red},${o.green},${o.blue}, 0.5);
        }`,c.cssRules.length),c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}[disabled]::-webkit-slider-thumb {
          background: rgba(${o.red},${o.green},${o.blue}, 0.2);
        }`,c.cssRules.length),c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}[disabled]::-moz-range-thumb {
          background: rgba(${o.red},${o.green},${o.blue}, 0.2);
        }`,c.cssRules.length),c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}:not([disabled])::-webkit-slider-thumb:hover {
          background: rgba(${o.red},${o.green},${o.blue}, 0.7);
        }`,c.cssRules.length),c.insertRule(`.maplat.with-opacity .ol-slider-originalcolor.${a}:not([disabled])::-moz-range-thumb:hover {
          background: rgba(${o.red},${o.green},${o.blue}, 0.7);
        }`,c.cssRules.length)}catch(h){console.error(h)}}}setMap(e){super.setMap(e),e&&e.render()}setEnable(e){const t=this.element;e?t.disabled=!1:t.disabled=!0}setValue(e){this.set("slidervalue",e),this.element.value=(1-e).toString()}}class za extends ko{constructor(t){const i=t||{},r=document.createElement("div");super({element:r,target:i.target,render:i.render});re(this,"center_");re(this,"zoom_");re(this,"callResetNorth_");re(this,"lastRotation_",0);re(this,"label_");re(this,"ui");re(this,"moveTo_",!1);const s=document.createElement("button");s.setAttribute("type","button"),s.title=i.tipLabel||"";const a=document.createElement("span");a.innerHTML=i.character||"",s.appendChild(a);let o,l;s.addEventListener("click",c=>{c.stopPropagation()}),s.addEventListener("mouseup",c=>{l||o&&(i.long_callback&&clearTimeout(o),o=null,i.callback&&i.callback.apply(this)),c.stopPropagation()},!1),s.addEventListener("mousemove",c=>{c.stopPropagation()},!1),s.addEventListener("mousedown",c=>{l||(i.long_callback?o=window.setTimeout(()=>{o=null,i.long_callback&&i.long_callback.apply(this)},1500):o=!0),c.stopPropagation()},!1),s.addEventListener("touchstart",c=>{l=!0,i.long_callback?o=window.setTimeout(()=>{o=null,i.long_callback&&i.long_callback.apply(this)},1500):o=!0,c.stopPropagation()},!1),s.addEventListener("touchend",c=>{o&&(i.long_callback&&clearTimeout(o),o=null,i.callback&&i.callback.apply(this)),c.stopPropagation()},!1),s.addEventListener("mouseout",c=>{i.long_callback&&typeof o=="number"&&clearTimeout(o),o=null,c.stopPropagation()},!1),s.addEventListener("dblclick",c=>{c.preventDefault()},!1),r.className=`${i.cls} ol-unselectable ol-control`,r.appendChild(s)}}class IG extends za{constructor(e){const t=e||{};if(t.character=Ft.home?`<img src="${Ft.home}">`:Xs("house","far fa-lg"),t.cls="home",t.callback=function(){const i=this.getMap();if(i){const r=i.getLayers().item(0).getSource();r&&r.goHome&&r.goHome()}},super(t),Ft.home){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class vG extends za{constructor(e){const t=e||{};if(t.character=Ft.gps?`<img src="${Ft.gps}">`:Xs("location-crosshairs","far fa-lg"),t.cls="gps",t.render=function(i){if(!i.frameState)return;const s=this.ui.core;if(s&&s.getGPSEnabled){const a=s.getGPSEnabled(),o=this.element.classList.contains("disable");a&&o?this.element.classList.remove("disable"):!a&&!o&&this.element.classList.add("disable")}},t.callback=function(){const i=this,r=i.ui.core,s=r.getGPSEnabled();r.alwaysGpsOn?(r.handleGPS(!0),i.ui.lastGPSError==="gps_out"&&i.ui.core.dispatchEvent(new CustomEvent("outOfMap"))):r.handleGPS(!s)},super(t),this.ui=t.ui,this.moveTo_=!1,Ft.gps){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class yG extends CM{constructor(t){const i=t||{};i.autoHide=!1;const r=document.createElement("span");r.innerHTML=Ft.compass?`<img src="${Ft.compass}">`:Xs("compass","far fa-lg ol-compass-fa"),i.label=r,i.render=function(s){const a=s.frameState;if(!a)return;const o=this.getMap().getView(),l=a.viewState.rotation,c=o.getCenter(),h=o.getDecimalZoom?o.getDecimalZoom():o.getZoom();if(l!=this.lastRotation_||c&&this.center_&&(c[0]!=this.center_[0]||c[1]!=this.center_[1])||h!=this.zoom_){if(!this.getMap().northUp){const g=this.element.classList.contains("disable");!g&&l===0?this.element.classList.add("disable"):g&&l!==0&&this.element.classList.remove("disable")}const u=this.getMap().getLayers().item(0),d=u.getSource?u.getSource():u.getLayers().item(0).getSource();if(!d){const g="rotate(0rad)";this.customLabel_.style.transform=g;return}d.viewpoint2MercsAsync&&d.viewpoint2MercsAsync().then(g=>{const f=d.mercs2MercViewpoint(g)[2],m=`rotate(${f}rad)`;if(this.customLabel_.style.transform=m,this.getMap().northUp){const p=this.element.classList.contains("disable");!p&&Math.abs(f)<.1?this.element.classList.add("disable"):p&&Math.abs(f)>=.1&&this.element.classList.remove("disable")}})}this.lastRotation_=l,this.center_=c,this.zoom_=h};super(i);re(this,"center_");re(this,"zoom_");re(this,"customLabel_");re(this,"lastRotation_",0);this.customLabel_=r}}class wG extends za{constructor(e){const t=e||{};if(t.character=Ft.share?`<img src="${Ft.share}">`:Xs("share-from-square","far fa-lg"),t.cls="ol-share",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"share"}))},super(t),Ft.share){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class EG extends za{constructor(e){const t=e||{};if(t.character=Ft.border?`<img src="${Ft.border}">`:Xs("layer-group","far fa-lg"),t.cls="ol-border",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"border"}))},super(t),Ft.border){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class bG extends za{constructor(e){const t=e||{};if(t.character=Ft.help?`<img src="${Ft.help}">`:Xs("circle-question","far fa-lg"),t.cls="ol-maplat",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"help"}))},super(t),Ft.help){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class _G extends za{constructor(e){const t=e||{};if(t.character=Ft.attr?`<img src="${Ft.attr}">`:Xs("circle-info","far fa-lg"),t.cls="ol-copyright",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"copyright"}))},super(t),Ft.attr){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class xG extends za{constructor(e){const t=e||{};if(t.character=Ft.hide_marker?`<img src="${Ft.hide_marker}">`:Xs("map-pin","far fa-lg"),t.cls="ol-hide-marker",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"hideMarker"}))},super(t),Ft.hide_marker){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class SG extends za{constructor(e){const t=e||{};if(t.character=Ft.marker_list?`<img src="${Ft.marker_list}">`:Xs("list","far fa-lg"),t.cls="ol-marker-list",t.callback=function(){const i=this.getMap();i&&i.dispatchEvent(new lr("click_control",i,{control:"markerList"}))},super(t),Ft.marker_list){const i=this.element.querySelector("button");i&&(i.style.backgroundColor="rgba(0,0,0,0)")}}}class MG extends IM{constructor(e={}){Ft.zoom_plus&&(e.zoomInLabel=wn(`<img src="${Ft.zoom_plus}">`)[0]),Ft.zoom_minus&&(e.zoomOutLabel=wn(`<img src="${Ft.zoom_minus}">`)[0]),super(e),Ft.compass&&this.element.querySelectorAll("button").forEach(i=>{i.style.backgroundColor="rgba(0,0,0,0)"})}}const Ja="ol-ctx-menu",Th={container:`${Ja}-container`,separator:`${Ja}-separator`,submenu:`${Ja}-submenu`,hidden:`${Ja}-hidden`,icon:`${Ja}-icon`,zoomIn:`${Ja}-zoom-in`,zoomOut:`${Ja}-zoom-out`,unselectable:"ol-unselectable"},Jn=Th,Uh={BEFOREOPEN:"beforeopen",OPEN:"open",CLOSE:"close",CONTEXTMENU:"contextmenu"},RG={width:150,scrollAt:4,eventType:Uh.CONTEXTMENU,defaultItems:!0},LC=[{text:"Zoom In",classname:`${Th.zoomIn} ${Th.icon}`,callback:(n,e)=>{const t=e.getView();t.animate({zoom:+t.getZoom()+1,duration:700,center:n.coordinate})}},{text:"Zoom Out",classname:`${Th.zoomOut} ${Th.icon}`,callback:(n,e)=>{const t=e.getView();t.animate({zoom:+t.getZoom()-1,duration:700,center:n.coordinate})}}];function TG(n,e){const t={};for(const i in n)t[i]=n[i];for(const i in e)t[i]=e[i];return t}function yA(n,e="Assertion failed"){if(!n)throw typeof Error<"u"?new Error(e):e}function UG(n,e){return e.includes(n)}function FG(n="id_"){return`${n}${Math.random().toString(36).substring(2,11)}`}function NR(n){return/^\d+$/.test(String(n))}function kR(n,e,t=null){if(Array.isArray(n)){n.forEach(s=>kR(s,e,null));return}const i=Array.isArray(e)?e:e.split(/\s+/);let r=i.length;for(;r--;)OR(n,i[r])||GR(n,i[r],t)}function QR(n,e,t=null){if(Array.isArray(n)){n.forEach(s=>QR(s,e,t));return}const i=Array.isArray(e)?e:e.split(/\s+/);let r=i.length;for(;r--;)OR(n,i[r])&&WR(n,i[r],t)}function OR(n,e){return n.classList?n.classList.contains(e):zR(e).test(n.className)}function VR(n,e=window.document,t=!1){const i=/^(#?[\w-]+|\.[\w-.]+)$/,r=/\./g,s=Array.prototype.slice;let a=[];if(i.test(n))switch(n[0]){case"#":{const o=BG(n.substr(1));a=o?[o]:[];break}case".":a=s.call(e.getElementsByClassName(n.substr(1).replace(r," ")));break;default:a=s.call(e.getElementsByTagName(n))}else a=s.call(e.querySelectorAll(n));return t?a:a[0]}function BG(n){return n=n[0]==="#"?n.substr(1,n.length):n,document.getElementById(n)}function DG(n){const e=n.getBoundingClientRect(),t=document.documentElement;return{left:e.left+window.pageXOffset-t.clientLeft,top:e.top+window.pageYOffset-t.clientTop,width:n.offsetWidth,height:n.offsetHeight}}function LG(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function Pd(n){const e=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=n;t.firstChild;)e.appendChild(t.firstChild);return e}function zR(n){return new RegExp(`(^|\\s+) ${n} (\\s+|$)`)}function GR(n,e,t){n.classList?n.classList.add(e):n.className=`${n.className} ${e}`.trim(),t&&NR(t)&&window.setTimeout(()=>WR(n,e,null),t)}function WR(n,e,t){n.classList?n.classList.remove(e):n.className=n.className.replace(zR(e)," ").trim(),t&&NR(t)&&window.setTimeout(()=>GR(n,e,null),t)}class PG{constructor(e){re(this,"Base");re(this,"map");re(this,"viewport");re(this,"coordinateClicked");re(this,"pixelClicked");re(this,"lineHeight");re(this,"items");re(this,"opened");re(this,"submenu");re(this,"eventHandler");re(this,"eventMapMoveHandler");return this.Base=e,this.map=void 0,this.viewport=void 0,this.coordinateClicked=void 0,this.pixelClicked=void 0,this.lineHeight=0,this.items={},this.opened=!1,this.submenu={left:`${e.options.width-15}px`,lastLeft:"",top:"0px",lastTop:""},this.eventHandler=this.handleEvent.bind(this),this.eventMapMoveHandler=this.handleMapMoveEvent.bind(this),this}init(e){this.map=e,this.viewport=e.getViewport(),this.setListeners(),this.Base.Html.createMenu(),this.lineHeight=this.getItemsLength()>0?this.Base.container.offsetHeight/this.getItemsLength():this.Base.Html.cloneAndGetLineHeight()}getItemsLength(){let e=0;for(const t of Object.keys(this.items))this.items[t].submenu||this.items[t].separator||e++;return e}getPixelClicked(){return this.pixelClicked}getCoordinateClicked(){return this.coordinateClicked}positionContainer(e){const t=this.Base.container,i=this.map.getSize();if(!i)return;const r=i[1]-e[1],s=i[0]-e[0],a={w:t.offsetWidth,h:Math.round(this.lineHeight*this.getItemsLength())},o=VR(`li.${Jn.submenu}>div`,t,!0);s>=a.w?(t.style.right="auto",t.style.left=`${e[0]+5}px`):(t.style.left="auto",t.style.right="15px"),r>=a.h?(t.style.bottom="auto",t.style.top=`${e[1]-10}px`):(t.style.top="auto",t.style.bottom="0px"),QR(t,Jn.hidden,null),o.length&&(s<a.w*2?this.submenu.lastLeft=`-${a.w}px`:this.submenu.lastLeft=this.submenu.left,o.forEach(l=>{const c=LG(),h=DG(l),u=h.height;let d=r-u;d<0&&(d=u-(c.h-h.top),l.style.top=`-${d}px`),l.style.left=this.submenu.lastLeft}))}openMenu(e,t){this.Base.dispatchEvent({type:Uh.OPEN,pixel:e,coordinate:t}),this.opened=!0,this.positionContainer(e)}closeMenu(){this.opened=!1,kR(this.Base.container,Jn.hidden,null),this.Base.dispatchEvent({type:Uh.CLOSE})}setListeners(){this.viewport.addEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map&&this.map.on("movestart",this.eventMapMoveHandler)}removeListeners(){this.viewport.removeEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map&&this.map.un("movestart",this.eventMapMoveHandler)}handleEvent(e){const t=this;this.map&&(this.coordinateClicked=this.map.getEventCoordinate(e),this.pixelClicked=this.map.getEventPixel(e),this.Base.dispatchEvent({type:Uh.BEFOREOPEN,pixel:this.pixelClicked,coordinate:this.coordinateClicked}),!this.Base.disabled&&(this.Base.options.eventType===Uh.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),this.openMenu(this.pixelClicked,this.coordinateClicked),e.target&&e.target.addEventListener("pointerdown",{handleEvent:i=>{t.opened&&(t.closeMenu(),i.stopPropagation(),e.target&&e.target.removeEventListener(i.type,this,!1))}},!1)))}handleMapMoveEvent(e){this.closeMenu()}setItemListener(e,t){const i=this;e&&typeof this.items[t].callback=="function"&&(function(r){e.addEventListener("click",s=>{s.preventDefault();const a={coordinate:i.getCoordinateClicked(),data:i.items[t].data||null};i.closeMenu(),r(a,i.map)},!1)})(this.items[t].callback)}}class NG{constructor(e){re(this,"Base");re(this,"container");return this.Base=e,this.container=this.Base.container,this}createMenu(){let e=[];if("items"in this.Base.options?e=(this.Base.options.defaultItems?(this.Base.options.items||[]).concat(LC):this.Base.options.items)||[]:this.Base.options.defaultItems&&(e=LC),e.length===0)return!1;e.forEach(this.addMenuEntry,this)}addMenuEntry(e){if(e.items&&Array.isArray(e.items)){e.classname=e.classname||"",UG(Jn.submenu,e.classname)||(e.classname=e.classname.length?` ${Jn.submenu}`:Jn.submenu);const t=this.generateHtmlAndPublish(this.container,e),i=ZR(!1,this.Base.options.width||150);i.style.left=this.Base.Internal.submenu.lastLeft||this.Base.Internal.submenu.left,t.appendChild(i),e.items.forEach(r=>{this.generateHtmlAndPublish(i,r,!0)})}else this.generateHtmlAndPublish(this.container,e)}generateHtmlAndPublish(e,t,i=void 0){const r=FG();let s,a,o,l=!1;if(typeof t=="string"&&t.trim()==="-")s=`<li id="${r}" class="${Jn.separator}"><hr></li>`,a=Pd(s),o=[].slice.call(a.childNodes,0)[0],e.firstChild?e.firstChild.appendChild(a):e.appendChild(a),l=!0;else{const h=t;h.classname=h.classname||"",s=`<span>${h.text}</span>`,a=Pd(s),o=document.createElement("li"),h.icon&&(h.classname===""?h.classname=Jn.icon:h.classname.includes(Jn.icon)||(h.classname+=` ${Jn.icon}`),o.setAttribute("style",`background-image:url(${h.icon})`)),o.id=r,o.className=h.classname,o.appendChild(a),e.firstChild?e.firstChild.appendChild(o):e.appendChild(o)}const c=t;return this.Base.Internal.items[r]={id:r,submenu:i?1:0,separator:l,callback:c.callback,data:c.data||null},this.Base.Internal.setItemListener(o,r),o}removeMenuEntry(e){const t=VR(`#${e}`,this.container.firstChild,!1);t&&this.container.firstChild&&this.container.firstChild.removeChild(t),delete this.Base.Internal.items[e]}cloneAndGetLineHeight(){const e=this.container.cloneNode(),t=Pd("<span>Foo</span>"),i=Pd("<span>Foo</span>"),r=document.createElement("li"),s=document.createElement("li");if(r.appendChild(t),s.appendChild(i),e.appendChild(r),e.appendChild(s),this.container.parentNode){this.container.parentNode.appendChild(e);const a=e.offsetHeight/2;return this.container.parentNode.removeChild(e),a}return 0}}/* Fork from ol-comtextmenu 4.1.0
 * https://github.com/jonataswalker/ol-contextmenu/tree/4.1.0
 * (c) Jonatas Walker
 * @license MIT
 **/const ZR=(n,e)=>{const t=document.createElement("div"),i=document.createElement("ul"),r=[Jn.container,Jn.unselectable];return n&&r.push(Jn.hidden),t.className=r.join(" "),t.style.width=`${parseInt(String(e),10)}px`,t.appendChild(i),t};class kG extends ko{constructor(t={}){yA(typeof t=="object","@param `opt_options` should be object type!");const i=TG(RG,t),r=ZR(!0,i.width);super({element:r});re(this,"options");re(this,"container");re(this,"disabled");re(this,"Internal");re(this,"Html");this.options=i,this.container=r,this.disabled=!1,this.Internal=new PG(this),this.Html=new NG(this)}clear(){for(const t of Object.keys(this.Internal.items))this.Html.removeMenuEntry(t)}close(){this.Internal.closeMenu()}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return LC}countItems(){return Object.keys(this.Internal.items).length}extend(t){yA(Array.isArray(t),"@param `arr` should be an Array."),t.forEach(this.push,this)}isOpen(){return this.Internal.opened}updatePosition(t){yA(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&this.Internal.positionContainer(t)}pop(){const t=Object.keys(this.Internal.items);this.Html.removeMenuEntry(t[t.length-1])}push(t){this.Html.addMenuEntry(t)}shift(){this.Html.removeMenuEntry(Object.keys(this.Internal.items)[0])}setMap(t){ko.prototype.setMap.call(this,t),t?this.Internal.init(t):this.Internal.removeListeners()}}class QG extends kG{constructor(e={}){super(e);const t=this.Internal;t.setItemListener=(i,r)=>{const s=t;i&&t.items[r]&&typeof t.items[r].callback=="function"&&(function(a){i.addEventListener("pointerdown",o=>{o.stopPropagation()}),i.addEventListener("click",o=>{o.preventDefault();const l={coordinate:s.getCoordinateClicked()||[],data:s.items[r].data||null};a&&(a(l,s.map)||s.closeMenu())},!1)})(t.items[r].callback)}}}function OG(n,e){const t=n.split("/"),i=e.split("/");t.pop();for(let r=0;r<i.length;r++)i[r]!="."&&(i[r]==".."?t.pop():t.push(i[r]));return t.join("/")}var ml={},wA,ZE;function VG(){return ZE||(ZE=1,wA=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),wA}var EA={},oa={},HE;function qo(){if(HE)return oa;HE=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return oa.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},oa.getSymbolTotalCodewords=function(i){return e[i]},oa.getBCHDigit=function(t){let i=0;for(;t!==0;)i++,t>>>=1;return i},oa.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');n=i},oa.isKanjiModeEnabled=function(){return typeof n<"u"},oa.toSJIS=function(i){return n(i)},oa}var bA={},XE;function rv(){return XE||(XE=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},n.from=function(i,r){if(n.isValid(i))return i;try{return e(i)}catch{return r}}})(bA)),bA}var _A,JE;function zG(){if(JE)return _A;JE=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let i=0;i<t;i++)this.putBit((e>>>t-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},_A=n,_A}var xA,jE;function GG(){if(jE)return xA;jE=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,i,r){const s=e*this.size+t;this.data[s]=i,r&&(this.reservedBit[s]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},xA=n,xA}var SA={},YE;function WG(){return YE||(YE=1,(function(n){const e=qo().getSymbolSize;n.getRowColCoords=function(i){if(i===1)return[];const r=Math.floor(i/7)+2,s=e(i),a=s===145?26:Math.ceil((s-13)/(2*r-2))*2,o=[s-7];for(let l=1;l<r-1;l++)o[l]=o[l-1]-a;return o.push(6),o.reverse()},n.getPositions=function(i){const r=[],s=n.getRowColCoords(i),a=s.length;for(let o=0;o<a;o++)for(let l=0;l<a;l++)o===0&&l===0||o===0&&l===a-1||o===a-1&&l===0||r.push([s[o],s[l]]);return r}})(SA)),SA}var MA={},KE;function ZG(){if(KE)return MA;KE=1;const n=qo().getSymbolSize,e=7;return MA.getPositions=function(i){const r=n(i);return[[0,0],[r-e,0],[0,r-e]]},MA}var RA={},qE;function HG(){return qE||(qE=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},n.from=function(r){return n.isValid(r)?parseInt(r,10):void 0},n.getPenaltyN1=function(r){const s=r.size;let a=0,o=0,l=0,c=null,h=null;for(let u=0;u<s;u++){o=l=0,c=h=null;for(let d=0;d<s;d++){let g=r.get(u,d);g===c?o++:(o>=5&&(a+=e.N1+(o-5)),c=g,o=1),g=r.get(d,u),g===h?l++:(l>=5&&(a+=e.N1+(l-5)),h=g,l=1)}o>=5&&(a+=e.N1+(o-5)),l>=5&&(a+=e.N1+(l-5))}return a},n.getPenaltyN2=function(r){const s=r.size;let a=0;for(let o=0;o<s-1;o++)for(let l=0;l<s-1;l++){const c=r.get(o,l)+r.get(o,l+1)+r.get(o+1,l)+r.get(o+1,l+1);(c===4||c===0)&&a++}return a*e.N2},n.getPenaltyN3=function(r){const s=r.size;let a=0,o=0,l=0;for(let c=0;c<s;c++){o=l=0;for(let h=0;h<s;h++)o=o<<1&2047|r.get(c,h),h>=10&&(o===1488||o===93)&&a++,l=l<<1&2047|r.get(h,c),h>=10&&(l===1488||l===93)&&a++}return a*e.N3},n.getPenaltyN4=function(r){let s=0;const a=r.data.length;for(let l=0;l<a;l++)s+=r.data[l];return Math.abs(Math.ceil(s*100/a/5)-10)*e.N4};function t(i,r,s){switch(i){case n.Patterns.PATTERN000:return(r+s)%2===0;case n.Patterns.PATTERN001:return r%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(r+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return r*s%2+r*s%3===0;case n.Patterns.PATTERN110:return(r*s%2+r*s%3)%2===0;case n.Patterns.PATTERN111:return(r*s%3+(r+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}n.applyMask=function(r,s){const a=s.size;for(let o=0;o<a;o++)for(let l=0;l<a;l++)s.isReserved(l,o)||s.xor(l,o,t(r,l,o))},n.getBestMask=function(r,s){const a=Object.keys(n.Patterns).length;let o=0,l=1/0;for(let c=0;c<a;c++){s(c),n.applyMask(c,r);const h=n.getPenaltyN1(r)+n.getPenaltyN2(r)+n.getPenaltyN3(r)+n.getPenaltyN4(r);n.applyMask(c,r),h<l&&(l=h,o=c)}return o}})(RA)),RA}var Nd={},$E;function HR(){if($E)return Nd;$E=1;const n=rv(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Nd.getBlocksCount=function(r,s){switch(s){case n.L:return e[(r-1)*4+0];case n.M:return e[(r-1)*4+1];case n.Q:return e[(r-1)*4+2];case n.H:return e[(r-1)*4+3];default:return}},Nd.getTotalCodewordsCount=function(r,s){switch(s){case n.L:return t[(r-1)*4+0];case n.M:return t[(r-1)*4+1];case n.Q:return t[(r-1)*4+2];case n.H:return t[(r-1)*4+3];default:return}},Nd}var TA={},ih={},eb;function XG(){if(eb)return ih;eb=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let i=1;for(let r=0;r<255;r++)n[r]=i,e[i]=r,i<<=1,i&256&&(i^=285);for(let r=255;r<512;r++)n[r]=n[r-255]})(),ih.log=function(i){if(i<1)throw new Error("log("+i+")");return e[i]},ih.exp=function(i){return n[i]},ih.mul=function(i,r){return i===0||r===0?0:n[e[i]+e[r]]},ih}var tb;function JG(){return tb||(tb=1,(function(n){const e=XG();n.mul=function(i,r){const s=new Uint8Array(i.length+r.length-1);for(let a=0;a<i.length;a++)for(let o=0;o<r.length;o++)s[a+o]^=e.mul(i[a],r[o]);return s},n.mod=function(i,r){let s=new Uint8Array(i);for(;s.length-r.length>=0;){const a=s[0];for(let l=0;l<r.length;l++)s[l]^=e.mul(r[l],a);let o=0;for(;o<s.length&&s[o]===0;)o++;s=s.slice(o)}return s},n.generateECPolynomial=function(i){let r=new Uint8Array([1]);for(let s=0;s<i;s++)r=n.mul(r,new Uint8Array([1,e.exp(s)]));return r}})(TA)),TA}var UA,ib;function jG(){if(ib)return UA;ib=1;const n=JG();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(i){this.degree=i,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(i.length+this.degree);r.set(i);const s=n.mod(r,this.genPoly),a=this.degree-s.length;if(a>0){const o=new Uint8Array(this.degree);return o.set(s,a),o}return s},UA=e,UA}var FA={},BA={},DA={},nb;function XR(){return nb||(nb=1,DA.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),DA}var Zr={},rb;function JR(){if(rb)return Zr;rb=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Zr.KANJI=new RegExp(t,"g"),Zr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Zr.BYTE=new RegExp(i,"g"),Zr.NUMERIC=new RegExp(n,"g"),Zr.ALPHANUMERIC=new RegExp(e,"g");const r=new RegExp("^"+t+"$"),s=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Zr.testKanji=function(l){return r.test(l)},Zr.testNumeric=function(l){return s.test(l)},Zr.testAlphanumeric=function(l){return a.test(l)},Zr}var sb;function $o(){return sb||(sb=1,(function(n){const e=XR(),t=JR();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,a){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?s.ccBits[0]:a<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+r)}}n.from=function(s,a){if(n.isValid(s))return s;try{return i(s)}catch{return a}}})(BA)),BA}var ab;function YG(){return ab||(ab=1,(function(n){const e=qo(),t=HR(),i=rv(),r=$o(),s=XR(),a=7973,o=e.getBCHDigit(a);function l(d,g,f){for(let m=1;m<=40;m++)if(g<=n.getCapacity(m,f,d))return m}function c(d,g){return r.getCharCountIndicator(d,g)+4}function h(d,g){let f=0;return d.forEach(function(m){const p=c(m.mode,g);f+=p+m.getBitsLength()}),f}function u(d,g){for(let f=1;f<=40;f++)if(h(d,f)<=n.getCapacity(f,g,r.MIXED))return f}n.from=function(g,f){return s.isValid(g)?parseInt(g,10):f},n.getCapacity=function(g,f,m){if(!s.isValid(g))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=r.BYTE);const p=e.getSymbolTotalCodewords(g),A=t.getTotalCodewordsCount(g,f),C=(p-A)*8;if(m===r.MIXED)return C;const v=C-c(m,g);switch(m){case r.NUMERIC:return Math.floor(v/10*3);case r.ALPHANUMERIC:return Math.floor(v/11*2);case r.KANJI:return Math.floor(v/13);case r.BYTE:default:return Math.floor(v/8)}},n.getBestVersionForData=function(g,f){let m;const p=i.from(f,i.M);if(Array.isArray(g)){if(g.length>1)return u(g,p);if(g.length===0)return 1;m=g[0]}else m=g;return l(m.mode,m.getLength(),p)},n.getEncodedBits=function(g){if(!s.isValid(g)||g<7)throw new Error("Invalid QR Code version");let f=g<<12;for(;e.getBCHDigit(f)-o>=0;)f^=a<<e.getBCHDigit(f)-o;return g<<12|f}})(FA)),FA}var LA={},ob;function KG(){if(ob)return LA;ob=1;const n=qo(),e=1335,t=21522,i=n.getBCHDigit(e);return LA.getEncodedBits=function(s,a){const o=s.bit<<3|a;let l=o<<10;for(;n.getBCHDigit(l)-i>=0;)l^=e<<n.getBCHDigit(l)-i;return(o<<10|l)^t},LA}var PA={},NA,lb;function qG(){if(lb)return NA;lb=1;const n=$o();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){let r,s,a;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),a=parseInt(s,10),i.put(a,10);const o=this.data.length-r;o>0&&(s=this.data.substr(r),a=parseInt(s,10),i.put(a,o*3+1))},NA=e,NA}var kA,cb;function $G(){if(cb)return kA;cb=1;const n=$o(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(i){this.mode=n.ALPHANUMERIC,this.data=i}return t.getBitsLength=function(r){return 11*Math.floor(r/2)+6*(r%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let s;for(s=0;s+2<=this.data.length;s+=2){let a=e.indexOf(this.data[s])*45;a+=e.indexOf(this.data[s+1]),r.put(a,11)}this.data.length%2&&r.put(e.indexOf(this.data[s]),6)},kA=t,kA}var QA,hb;function eW(){if(hb)return QA;hb=1;const n=$o();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(i){return i*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let i=0,r=this.data.length;i<r;i++)t.put(this.data[i],8)},QA=e,QA}var OA,ub;function tW(){if(ub)return OA;ub=1;const n=$o(),e=qo();function t(i){this.mode=n.KANJI,this.data=i}return t.getBitsLength=function(r){return r*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let r;for(r=0;r<this.data.length;r++){let s=e.toSJIS(this.data[r]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[r]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),i.put(s,13)}},OA=t,OA}var VA={exports:{}},db;function iW(){return db||(db=1,(function(n){var e={single_source_shortest_paths:function(t,i,r){var s={},a={};a[i]=0;var o=e.PriorityQueue.make();o.push(i,0);for(var l,c,h,u,d,g,f,m,p;!o.empty();){l=o.pop(),c=l.value,u=l.cost,d=t[c]||{};for(h in d)d.hasOwnProperty(h)&&(g=d[h],f=u+g,m=a[h],p=typeof a[h]>"u",(p||m>f)&&(a[h]=f,o.push(h,f),s[h]=c))}if(typeof r<"u"&&typeof a[r]>"u"){var A=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(t,i){for(var r=[],s=i;s;)r.push(s),t[s],s=t[s];return r.reverse(),r},find_path:function(t,i,r){var s=e.single_source_shortest_paths(t,i,r);return e.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(t){var i=e.PriorityQueue,r={},s;t=t||{};for(s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r.queue=[],r.sorter=t.sorter||i.default_sorter,r},default_sorter:function(t,i){return t.cost-i.cost},push:function(t,i){var r={value:t,cost:i};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(VA)),VA.exports}var gb;function nW(){return gb||(gb=1,(function(n){const e=$o(),t=qG(),i=$G(),r=eW(),s=tW(),a=JR(),o=qo(),l=iW();function c(A){return unescape(encodeURIComponent(A)).length}function h(A,C,v){const I=[];let w;for(;(w=A.exec(v))!==null;)I.push({data:w[0],index:w.index,mode:C,length:w[0].length});return I}function u(A){const C=h(a.NUMERIC,e.NUMERIC,A),v=h(a.ALPHANUMERIC,e.ALPHANUMERIC,A);let I,w;return o.isKanjiModeEnabled()?(I=h(a.BYTE,e.BYTE,A),w=h(a.KANJI,e.KANJI,A)):(I=h(a.BYTE_KANJI,e.BYTE,A),w=[]),C.concat(v,I,w).sort(function(_,x){return _.index-x.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function d(A,C){switch(C){case e.NUMERIC:return t.getBitsLength(A);case e.ALPHANUMERIC:return i.getBitsLength(A);case e.KANJI:return s.getBitsLength(A);case e.BYTE:return r.getBitsLength(A)}}function g(A){return A.reduce(function(C,v){const I=C.length-1>=0?C[C.length-1]:null;return I&&I.mode===v.mode?(C[C.length-1].data+=v.data,C):(C.push(v),C)},[])}function f(A){const C=[];for(let v=0;v<A.length;v++){const I=A[v];switch(I.mode){case e.NUMERIC:C.push([I,{data:I.data,mode:e.ALPHANUMERIC,length:I.length},{data:I.data,mode:e.BYTE,length:I.length}]);break;case e.ALPHANUMERIC:C.push([I,{data:I.data,mode:e.BYTE,length:I.length}]);break;case e.KANJI:C.push([I,{data:I.data,mode:e.BYTE,length:c(I.data)}]);break;case e.BYTE:C.push([{data:I.data,mode:e.BYTE,length:c(I.data)}])}}return C}function m(A,C){const v={},I={start:{}};let w=["start"];for(let b=0;b<A.length;b++){const _=A[b],x=[];for(let y=0;y<_.length;y++){const E=_[y],S=""+b+y;x.push(S),v[S]={node:E,lastCount:0},I[S]={};for(let R=0;R<w.length;R++){const M=w[R];v[M]&&v[M].node.mode===E.mode?(I[M][S]=d(v[M].lastCount+E.length,E.mode)-d(v[M].lastCount,E.mode),v[M].lastCount+=E.length):(v[M]&&(v[M].lastCount=E.length),I[M][S]=d(E.length,E.mode)+4+e.getCharCountIndicator(E.mode,C))}}w=x}for(let b=0;b<w.length;b++)I[w[b]].end=0;return{map:I,table:v}}function p(A,C){let v;const I=e.getBestModeForData(A);if(v=e.from(C,I),v!==e.BYTE&&v.bit<I.bit)throw new Error('"'+A+'" cannot be encoded with mode '+e.toString(v)+`.
 Suggested mode is: `+e.toString(I));switch(v===e.KANJI&&!o.isKanjiModeEnabled()&&(v=e.BYTE),v){case e.NUMERIC:return new t(A);case e.ALPHANUMERIC:return new i(A);case e.KANJI:return new s(A);case e.BYTE:return new r(A)}}n.fromArray=function(C){return C.reduce(function(v,I){return typeof I=="string"?v.push(p(I,null)):I.data&&v.push(p(I.data,I.mode)),v},[])},n.fromString=function(C,v){const I=u(C,o.isKanjiModeEnabled()),w=f(I),b=m(w,v),_=l.find_path(b.map,"start","end"),x=[];for(let y=1;y<_.length-1;y++)x.push(b.table[_[y]].node);return n.fromArray(g(x))},n.rawSplit=function(C){return n.fromArray(u(C,o.isKanjiModeEnabled()))}})(PA)),PA}var fb;function rW(){if(fb)return EA;fb=1;const n=qo(),e=rv(),t=zG(),i=GG(),r=WG(),s=ZG(),a=HG(),o=HR(),l=jG(),c=YG(),h=KG(),u=$o(),d=nW();function g(b,_){const x=b.size,y=s.getPositions(_);for(let E=0;E<y.length;E++){const S=y[E][0],R=y[E][1];for(let M=-1;M<=7;M++)if(!(S+M<=-1||x<=S+M))for(let T=-1;T<=7;T++)R+T<=-1||x<=R+T||(M>=0&&M<=6&&(T===0||T===6)||T>=0&&T<=6&&(M===0||M===6)||M>=2&&M<=4&&T>=2&&T<=4?b.set(S+M,R+T,!0,!0):b.set(S+M,R+T,!1,!0))}}function f(b){const _=b.size;for(let x=8;x<_-8;x++){const y=x%2===0;b.set(x,6,y,!0),b.set(6,x,y,!0)}}function m(b,_){const x=r.getPositions(_);for(let y=0;y<x.length;y++){const E=x[y][0],S=x[y][1];for(let R=-2;R<=2;R++)for(let M=-2;M<=2;M++)R===-2||R===2||M===-2||M===2||R===0&&M===0?b.set(E+R,S+M,!0,!0):b.set(E+R,S+M,!1,!0)}}function p(b,_){const x=b.size,y=c.getEncodedBits(_);let E,S,R;for(let M=0;M<18;M++)E=Math.floor(M/3),S=M%3+x-8-3,R=(y>>M&1)===1,b.set(E,S,R,!0),b.set(S,E,R,!0)}function A(b,_,x){const y=b.size,E=h.getEncodedBits(_,x);let S,R;for(S=0;S<15;S++)R=(E>>S&1)===1,S<6?b.set(S,8,R,!0):S<8?b.set(S+1,8,R,!0):b.set(y-15+S,8,R,!0),S<8?b.set(8,y-S-1,R,!0):S<9?b.set(8,15-S-1+1,R,!0):b.set(8,15-S-1,R,!0);b.set(y-8,8,1,!0)}function C(b,_){const x=b.size;let y=-1,E=x-1,S=7,R=0;for(let M=x-1;M>0;M-=2)for(M===6&&M--;;){for(let T=0;T<2;T++)if(!b.isReserved(E,M-T)){let P=!1;R<_.length&&(P=(_[R]>>>S&1)===1),b.set(E,M-T,P),S--,S===-1&&(R++,S=7)}if(E+=y,E<0||x<=E){E-=y,y=-y;break}}}function v(b,_,x){const y=new t;x.forEach(function(T){y.put(T.mode.bit,4),y.put(T.getLength(),u.getCharCountIndicator(T.mode,b)),T.write(y)});const E=n.getSymbolTotalCodewords(b),S=o.getTotalCodewordsCount(b,_),R=(E-S)*8;for(y.getLengthInBits()+4<=R&&y.put(0,4);y.getLengthInBits()%8!==0;)y.putBit(0);const M=(R-y.getLengthInBits())/8;for(let T=0;T<M;T++)y.put(T%2?17:236,8);return I(y,b,_)}function I(b,_,x){const y=n.getSymbolTotalCodewords(_),E=o.getTotalCodewordsCount(_,x),S=y-E,R=o.getBlocksCount(_,x),M=y%R,T=R-M,P=Math.floor(y/R),F=Math.floor(S/R),N=F+1,L=P-F,W=new l(L);let ne=0;const de=new Array(R),ee=new Array(R);let Me=0;const G=new Uint8Array(b.buffer);for(let Re=0;Re<R;Re++){const Fe=Re<T?F:N;de[Re]=G.slice(ne,ne+Fe),ee[Re]=W.encode(de[Re]),ne+=Fe,Me=Math.max(Me,Fe)}const te=new Uint8Array(y);let we=0,le,xe;for(le=0;le<Me;le++)for(xe=0;xe<R;xe++)le<de[xe].length&&(te[we++]=de[xe][le]);for(le=0;le<L;le++)for(xe=0;xe<R;xe++)te[we++]=ee[xe][le];return te}function w(b,_,x,y){let E;if(Array.isArray(b))E=d.fromArray(b);else if(typeof b=="string"){let P=_;if(!P){const F=d.rawSplit(b);P=c.getBestVersionForData(F,x)}E=d.fromString(b,P||40)}else throw new Error("Invalid data");const S=c.getBestVersionForData(E,x);if(!S)throw new Error("The amount of data is too big to be stored in a QR Code");if(!_)_=S;else if(_<S)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+S+`.
`);const R=v(_,x,E),M=n.getSymbolSize(_),T=new i(M);return g(T,_),f(T),m(T,_),A(T,x,0),_>=7&&p(T,_),C(T,R),isNaN(y)&&(y=a.getBestMask(T,A.bind(null,T,x))),a.applyMask(y,T),A(T,x,y),{modules:T,version:_,errorCorrectionLevel:x,maskPattern:y,segments:E}}return EA.create=function(_,x){if(typeof _>"u"||_==="")throw new Error("No input text");let y=e.M,E,S;return typeof x<"u"&&(y=e.from(x.errorCorrectionLevel,e.M),E=c.from(x.version),S=a.from(x.maskPattern),x.toSJISFunc&&n.setToSJISFunction(x.toSJISFunc)),w(_,E,y,S)},EA}var zA={},GA={},pb;function jR(){return pb||(pb=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let i=t.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+t);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const r=parseInt(i.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+i.slice(0,6).join("")}}n.getOptions=function(i){i||(i={}),i.color||(i.color={});const r=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,a=i.scale||4;return{width:s,scale:s?4:a,margin:r,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},n.getScale=function(i,r){return r.width&&r.width>=i+r.margin*2?r.width/(i+r.margin*2):r.scale},n.getImageWidth=function(i,r){const s=n.getScale(i,r);return Math.floor((i+r.margin*2)*s)},n.qrToImageData=function(i,r,s){const a=r.modules.size,o=r.modules.data,l=n.getScale(a,s),c=Math.floor((a+s.margin*2)*l),h=s.margin*l,u=[s.color.light,s.color.dark];for(let d=0;d<c;d++)for(let g=0;g<c;g++){let f=(d*c+g)*4,m=s.color.light;if(d>=h&&g>=h&&d<c-h&&g<c-h){const p=Math.floor((d-h)/l),A=Math.floor((g-h)/l);m=u[o[p*a+A]?1:0]}i[f++]=m.r,i[f++]=m.g,i[f++]=m.b,i[f]=m.a}}})(GA)),GA}var Ab;function sW(){return Ab||(Ab=1,(function(n){const e=jR();function t(r,s,a){r.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=a,s.width=a,s.style.height=a+"px",s.style.width=a+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,a,o){let l=o,c=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(c=i()),l=e.getOptions(l);const h=e.getImageWidth(s.modules.size,l),u=c.getContext("2d"),d=u.createImageData(h,h);return e.qrToImageData(d.data,s,l),t(u,c,h),u.putImageData(d,0,0),c},n.renderToDataURL=function(s,a,o){let l=o;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const c=n.render(s,a,l),h=l.type||"image/png",u=l.rendererOpts||{};return c.toDataURL(h,u.quality)}})(zA)),zA}var WA={},mb;function aW(){if(mb)return WA;mb=1;const n=jR();function e(r,s){const a=r.a/255,o=s+'="'+r.hex+'"';return a<1?o+" "+s+'-opacity="'+a.toFixed(2).slice(1)+'"':o}function t(r,s,a){let o=r+s;return typeof a<"u"&&(o+=" "+a),o}function i(r,s,a){let o="",l=0,c=!1,h=0;for(let u=0;u<r.length;u++){const d=Math.floor(u%s),g=Math.floor(u/s);!d&&!c&&(c=!0),r[u]?(h++,u>0&&d>0&&r[u-1]||(o+=c?t("M",d+a,.5+g+a):t("m",l,0),l=0,c=!1),d+1<s&&r[u+1]||(o+=t("h",h),h=0)):l++}return o}return WA.render=function(s,a,o){const l=n.getOptions(a),c=s.modules.size,h=s.modules.data,u=c+l.margin*2,d=l.color.light.a?"<path "+e(l.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",g="<path "+e(l.color.dark,"stroke")+' d="'+i(h,c,l.margin)+'"/>',f='viewBox="0 0 '+u+" "+u+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+f+' shape-rendering="crispEdges">'+d+g+`</svg>
`;return typeof o=="function"&&o(null,p),p},WA}var Cb;function oW(){if(Cb)return ml;Cb=1;const n=VG(),e=rW(),t=sW(),i=aW();function r(s,a,o,l,c){const h=[].slice.call(arguments,1),u=h.length,d=typeof h[u-1]=="function";if(!d&&!n())throw new Error("Callback required as last argument");if(d){if(u<2)throw new Error("Too few arguments provided");u===2?(c=o,o=a,a=l=void 0):u===3&&(a.getContext&&typeof c>"u"?(c=l,l=void 0):(c=l,l=o,o=a,a=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(o=a,a=l=void 0):u===2&&!a.getContext&&(l=o,o=a,a=void 0),new Promise(function(g,f){try{const m=e.create(o,l);g(s(m,a,l))}catch(m){f(m)}})}try{const g=e.create(o,l);c(null,s(g,a,l))}catch(g){c(g)}}return ml.create=e.create,ml.toCanvas=r.bind(null,t.render),ml.toDataURL=r.bind(null,t.renderToDataURL),ml.toString=r.bind(null,function(s,a,o){return i.render(s,o)}),ml}var Ug=oW();const lW=Y3(Ug);var cW=Object.defineProperty,hW=(n,e,t)=>e in n?cW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xe=(n,e,t)=>hW(n,typeof e!="symbol"?e+"":e,t);class cp extends HTMLElement{constructor(){super(),Xe(this,"_shadowRoot"),Xe(this,"_connected",!1),this._shadowRoot=this.attachShadow({mode:"open"})}connectedCallback(){this._connected?this.render():(this._connected=!0,this.render(),this.firstUpdated())}disconnectedCallback(){this._connected=!1}attributeChangedCallback(e,t,i){t!==i&&this.render()}firstUpdated(){}html(e,...t){return e.reduce((i,r,s)=>i+r+(t[s]||""),"")}css(e,...t){return`<style>${e.reduce((i,r,s)=>i+r+(t[s]||""),"")}</style>`}updateShadowRoot(e){this._shadowRoot.innerHTML=e}query(e){return this._shadowRoot.querySelector(e)}queryAll(e){return this._shadowRoot.querySelectorAll(e)}dispatch(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}}function Ib(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function sv(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:Ib(e[i])&&Ib(n[i])&&Object.keys(e[i]).length>0&&sv(n[i],e[i])})}const YR={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function On(){const n=typeof document<"u"?document:{};return sv(n,YR),n}const uW={document:YR,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Yi(){const n=typeof window<"u"?window:{};return sv(n,uW),n}function ma(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function dW(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function av(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function df(){return Date.now()}function gW(n){const e=Yi();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function fW(n,e){e===void 0&&(e="x");const t=Yi();let i,r,s;const a=gW(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Fh(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function pW(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function jn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!pW(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(Fh(n[o])&&Fh(i[o])?i[o].__swiper__?n[o]=i[o]:jn(n[o],i[o]):!Fh(n[o])&&Fh(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:jn(n[o],i[o])):n[o]=i[o])}}}return n}function kd(n,e,t){n.style.setProperty(e,t)}function KR(n){let{swiper:e,targetPosition:t,side:i}=n;const r=Yi(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",h=(d,g)=>c==="next"&&d>=g||c==="prev"&&d<=g,u=()=>{o=new Date().getTime(),a===null&&(a=o);const d=Math.max(Math.min((o-a)/l,1),0),g=.5-Math.cos(d*Math.PI)/2;let f=s+g*(t-s);if(h(f,t)&&(f=t),e.wrapperEl.scrollTo({[i]:f}),h(f,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:f})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(u)};u()}function Dr(n,e){e===void 0&&(e="");const t=Yi(),i=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&i.push(...n.assignedElements()),e?i.filter(r=>r.matches(e)):i}function AW(n,e){const t=[e];for(;t.length>0;){const i=t.shift();if(n===i)return!0;t.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function mW(n,e){const t=Yi();let i=e.contains(n);return!i&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(i=[...e.assignedElements()].includes(n),i||(i=AW(n,e))),i}function gf(n){try{console.warn(n);return}catch{}}function bu(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:ma(e)),t}function qR(n){const e=Yi(),t=On(),i=n.getBoundingClientRect(),r=t.body,s=n.clientTop||r.clientTop||0,a=n.clientLeft||r.clientLeft||0,o=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:i.top+o-s,left:i.left+l-a}}function CW(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function IW(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Ta(n,e){return Yi().getComputedStyle(n,null).getPropertyValue(e)}function ff(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function pf(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function PC(n,e,t){const i=Yi();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function _i(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function vb(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let ZA;function vW(){const n=Yi(),e=On();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function $R(){return ZA||(ZA=vW()),ZA}let HA;function yW(n){let{userAgent:e}=n===void 0?{}:n;const t=$R(),i=Yi(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let h=s.match(/(iPad).*OS\s([\d_]+)/);const u=s.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=r==="Win32";let f=r==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!h&&f&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(h=s.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),f=!1),c&&!g&&(a.os="android",a.android=!0),(h||d||u)&&(a.os="ios",a.ios=!0),a}function eT(n){return n===void 0&&(n={}),HA||(HA=yW(n)),HA}let XA;function wW(){const n=Yi(),e=eT();let t=!1;function i(){const o=n.navigator.userAgent.toLowerCase();return o.indexOf("safari")>=0&&o.indexOf("chrome")<0&&o.indexOf("android")<0}if(i()){const o=String(n.navigator.userAgent);if(o.includes("Version/")){const[l,c]=o.split("Version/")[1].split(" ")[0].split(".").map(h=>Number(h));t=l<16||l===16&&c<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),s=i(),a=s||r&&e.ios;return{isSafari:t||s,needPerspectiveFix:t,need3dFix:a,isWebView:r}}function tT(){return XA||(XA=wW()),XA}function EW(n){let{swiper:e,on:t,emit:i}=n;const r=Yi();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(u=>{a=r.requestAnimationFrame(()=>{const{width:d,height:g}=e;let f=d,m=g;u.forEach(p=>{let{contentBoxSize:A,contentRect:C,target:v}=p;v&&v!==e.el||(f=C?C.width:(A[0]||A).inlineSize,m=C?C.height:(A[0]||A).blockSize)}),(f!==d||m!==g)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},h=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",h)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",h)})}function bW(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=Yi(),o=function(h,u){u===void 0&&(u={});const d=a.MutationObserver||a.WebkitMutationObserver,g=new d(f=>{if(e.__preventObserver__)return;if(f.length===1){r("observerUpdate",f[0]);return}const m=function(){r("observerUpdate",f[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});g.observe(h,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:e.isElement||(typeof u.childList>"u"?!0:u).childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),s.push(g)},l=()=>{if(e.params.observer){if(e.params.observeParents){const h=pf(e.hostEl);for(let u=0;u<h.length;u+=1)o(h[u])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(h=>{h.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var _W={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(o=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(l=>{l.apply(i,[o,...t])}),n.eventsListeners&&n.eventsListeners[o]&&n.eventsListeners[o].forEach(l=>{l.apply(i,t)})}),n}};function xW(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Ta(i,"padding-left")||0,10)-parseInt(Ta(i,"padding-right")||0,10),t=t-parseInt(Ta(i,"padding-top")||0,10)-parseInt(Ta(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function SW(){const n=this;function e(E,S){return parseFloat(E.getPropertyValue(n.getDirectionLabel(S))||0)}const t=n.params,{wrapperEl:i,slidesEl:r,size:s,rtlTranslate:a,wrongRTL:o}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,h=Dr(r,`.${n.params.slideClass}, swiper-slide`),u=l?n.virtual.slides.length:h.length;let d=[];const g=[],f=[];let m=t.slidesOffsetBefore;typeof m=="function"&&(m=t.slidesOffsetBefore.call(n));let p=t.slidesOffsetAfter;typeof p=="function"&&(p=t.slidesOffsetAfter.call(n));const A=n.snapGrid.length,C=n.slidesGrid.length;let v=t.spaceBetween,I=-m,w=0,b=0;if(typeof s>"u")return;typeof v=="string"&&v.indexOf("%")>=0?v=parseFloat(v.replace("%",""))/100*s:typeof v=="string"&&(v=parseFloat(v)),n.virtualSize=-v,h.forEach(E=>{a?E.style.marginLeft="":E.style.marginRight="",E.style.marginBottom="",E.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(kd(i,"--swiper-centered-offset-before",""),kd(i,"--swiper-centered-offset-after",""));const _=t.grid&&t.grid.rows>1&&n.grid;_?n.grid.initSlides(h):n.grid&&n.grid.unsetSlides();let x;const y=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(E=>typeof t.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<u;E+=1){x=0;let S;if(h[E]&&(S=h[E]),_&&n.grid.updateSlide(E,S,h),!(h[E]&&Ta(S,"display")==="none")){if(t.slidesPerView==="auto"){y&&(h[E].style[n.getDirectionLabel("width")]="");const R=getComputedStyle(S),M=S.style.transform,T=S.style.webkitTransform;if(M&&(S.style.transform="none"),T&&(S.style.webkitTransform="none"),t.roundLengths)x=n.isHorizontal()?PC(S,"width"):PC(S,"height");else{const P=e(R,"width"),F=e(R,"padding-left"),N=e(R,"padding-right"),L=e(R,"margin-left"),W=e(R,"margin-right"),ne=R.getPropertyValue("box-sizing");if(ne&&ne==="border-box")x=P+L+W;else{const{clientWidth:de,offsetWidth:ee}=S;x=P+F+N+L+W+(ee-de)}}M&&(S.style.transform=M),T&&(S.style.webkitTransform=T),t.roundLengths&&(x=Math.floor(x))}else x=(s-(t.slidesPerView-1)*v)/t.slidesPerView,t.roundLengths&&(x=Math.floor(x)),h[E]&&(h[E].style[n.getDirectionLabel("width")]=`${x}px`);h[E]&&(h[E].swiperSlideSize=x),f.push(x),t.centeredSlides?(I=I+x/2+w/2+v,w===0&&E!==0&&(I=I-s/2-v),E===0&&(I=I-s/2-v),Math.abs(I)<1/1e3&&(I=0),t.roundLengths&&(I=Math.floor(I)),b%t.slidesPerGroup===0&&d.push(I),g.push(I)):(t.roundLengths&&(I=Math.floor(I)),(b-Math.min(n.params.slidesPerGroupSkip,b))%n.params.slidesPerGroup===0&&d.push(I),g.push(I),I=I+x+v),n.virtualSize+=x+v,w=x,b+=1}}if(n.virtualSize=Math.max(n.virtualSize,s)+p,a&&o&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+v}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+v}px`),_&&n.grid.updateWrapperSize(x,d),!t.centeredSlides){const E=[];for(let S=0;S<d.length;S+=1){let R=d[S];t.roundLengths&&(R=Math.floor(R)),d[S]<=n.virtualSize-s&&E.push(R)}d=E,Math.floor(n.virtualSize-s)-Math.floor(d[d.length-1])>1&&d.push(n.virtualSize-s)}if(l&&t.loop){const E=f[0]+v;if(t.slidesPerGroup>1){const S=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),R=E*t.slidesPerGroup;for(let M=0;M<S;M+=1)d.push(d[d.length-1]+R)}for(let S=0;S<n.virtual.slidesBefore+n.virtual.slidesAfter;S+=1)t.slidesPerGroup===1&&d.push(d[d.length-1]+E),g.push(g[g.length-1]+E),n.virtualSize+=E}if(d.length===0&&(d=[0]),v!==0){const E=n.isHorizontal()&&a?"marginLeft":n.getDirectionLabel("marginRight");h.filter((S,R)=>!t.cssMode||t.loop?!0:R!==h.length-1).forEach(S=>{S.style[E]=`${v}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let E=0;f.forEach(R=>{E+=R+(v||0)}),E-=v;const S=E>s?E-s:0;d=d.map(R=>R<=0?-m:R>S?S+p:R)}if(t.centerInsufficientSlides){let E=0;f.forEach(R=>{E+=R+(v||0)}),E-=v;const S=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(E+S<s){const R=(s-E-S)/2;d.forEach((M,T)=>{d[T]=M-R}),g.forEach((M,T)=>{g[T]=M+R})}}if(Object.assign(n,{slides:h,snapGrid:d,slidesGrid:g,slidesSizesGrid:f}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){kd(i,"--swiper-centered-offset-before",`${-d[0]}px`),kd(i,"--swiper-centered-offset-after",`${n.size/2-f[f.length-1]/2}px`);const E=-n.snapGrid[0],S=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(R=>R+E),n.slidesGrid=n.slidesGrid.map(R=>R+S)}if(u!==c&&n.emit("slidesLengthChange"),d.length!==A&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),g.length!==C&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const E=`${t.containerModifierClass}backface-hidden`,S=n.el.classList.contains(E);u<=t.maxBackfaceHiddenSlides?S||n.el.classList.add(E):S&&n.el.classList.remove(E)}}function MW(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function RW(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const yb=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function TW(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let h=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(h-=i[0].swiperSlideOffset);const u=(a+(t.centeredSlides?e.minTranslate():0)-h)/(c.swiperSlideSize+o),d=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-h)/(c.swiperSlideSize+o),g=-(a-h),f=g+e.slidesSizesGrid[l],m=g>=0&&g<=e.size-e.slidesSizesGrid[l],p=g>=0&&g<e.size-1||f>1&&f<=e.size||g<=0&&f>=e.size;p&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),yb(c,p,t.slideVisibleClass),yb(c,m,t.slideFullyVisibleClass),c.progress=r?-u:u,c.originalProgress=r?-d:d}}function UW(n){const e=this;if(typeof n>"u"){const h=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*h||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const h=Math.abs(n-e.minTranslate())<1,u=Math.abs(n-e.maxTranslate())<1;s=h||r<=0,a=u||r>=1,h&&(r=0),u&&(r=1)}if(t.loop){const h=e.getSlideIndexByData(0),u=e.getSlideIndexByData(e.slides.length-1),d=e.slidesGrid[h],g=e.slidesGrid[u],f=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=d?o=(m-d)/f:o=(m+f-g)/f,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}const JA=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function FW(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=n.grid&&t.grid&&t.grid.rows>1,o=u=>Dr(i,`.${t.slideClass}${u}, swiper-slide${u}`)[0];let l,c,h;if(s)if(t.loop){let u=r-n.virtual.slidesBefore;u<0&&(u=n.virtual.slides.length+u),u>=n.virtual.slides.length&&(u-=n.virtual.slides.length),l=o(`[data-swiper-slide-index="${u}"]`)}else l=o(`[data-swiper-slide-index="${r}"]`);else a?(l=e.find(u=>u.column===r),h=e.find(u=>u.column===r+1),c=e.find(u=>u.column===r-1)):l=e[r];l&&(a||(h=IW(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!h&&(h=e[0]),c=CW(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(u=>{JA(u,u===l,t.slideActiveClass),JA(u,u===h,t.slideNextClass),JA(u,u===c,t.slidePrevClass)}),n.emitSlidesClasses()}const Fg=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},jA=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},NC=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&jA(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&jA(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&jA(n,a)};function BW(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function DW(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const h=g=>{let f=g-e.virtual.slidesBefore;return f<0&&(f=e.virtual.slides.length+f),f>=e.virtual.slides.length&&(f-=e.virtual.slides.length),f};if(typeof l>"u"&&(l=BW(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const g=Math.min(r.slidesPerGroupSkip,l);c=g+Math.floor((l-g)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s&&!e.params.loop){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=h(l);return}const u=e.grid&&r.grid&&r.grid.rows>1;let d;if(e.virtual&&r.virtual.enabled&&r.loop)d=h(l);else if(u){const g=e.slides.find(m=>m.column===l);let f=parseInt(g.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(e.slides.indexOf(g),0)),d=Math.floor(f/r.grid.rows)}else if(e.slides[l]){const g=e.slides[l].getAttribute("data-swiper-slide-index");g?d=parseInt(g,10):d=l}else d=l;Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&NC(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function LW(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var PW={updateSize:xW,updateSlides:SW,updateAutoHeight:MW,updateSlidesOffset:RW,updateSlidesProgress:TW,updateProgress:UW,updateSlidesClasses:FW,updateActiveIndex:DW,updateClickedSlide:LW};function NW(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=fW(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function kW(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let h;const u=t.maxTranslate()-t.minTranslate();u===0?h=0:h=(n-t.minTranslate())/u,h!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function QW(){return-this.snapGrid[0]}function OW(){return-this.snapGrid[this.snapGrid.length-1]}function VW(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let h;if(i&&n>l?h=l:i&&n<c?h=c:h=n,s.updateProgress(h),a.cssMode){const u=s.isHorizontal();if(e===0)o[u?"scrollLeft":"scrollTop"]=-h;else{if(!s.support.smoothScroll)return KR({swiper:s,targetPosition:-h,side:u?"left":"top"}),!0;o.scrollTo({[u?"left":"top"]:-h,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(h),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(u){!s||s.destroyed||u.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var zW={getTranslate:NW,setTranslate:kW,minTranslate:QW,maxTranslate:OW,translateTo:VW};function GW(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function iT(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&o==="reset"?e.emit(`slideResetTransition${r}`):t&&s!==a&&(e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`))}function WW(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),iT({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function ZW(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),iT({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var HW={setTransition:GW,transitionStart:WW,transitionEnd:ZW};function XW(n,e,t,i,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:g,enabled:f}=s;if(!f&&!i&&!r||s.destroyed||s.animating&&o.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const m=Math.min(s.params.slidesPerGroupSkip,a);let p=m+Math.floor((a-m)/s.params.slidesPerGroup);p>=l.length&&(p=l.length-1);const A=-l[p];if(o.normalizeSlideIndex)for(let w=0;w<c.length;w+=1){const b=-Math.floor(A*100),_=Math.floor(c[w]*100),x=Math.floor(c[w+1]*100);typeof c[w+1]<"u"?b>=_&&b<x-(x-_)/2?a=w:b>=_&&b<x&&(a=w+1):b>=_&&(a=w)}if(s.initialized&&a!==u&&(!s.allowSlideNext&&(d?A>s.translate&&A>s.minTranslate():A<s.translate&&A<s.minTranslate())||!s.allowSlidePrev&&A>s.translate&&A>s.maxTranslate()&&(u||0)!==a))return!1;a!==(h||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(A);let C;a>u?C="next":a<u?C="prev":C="reset";const v=s.virtual&&s.params.virtual.enabled;if(!(v&&r)&&(d&&-A===s.translate||!d&&A===s.translate))return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(A),C!=="reset"&&(s.transitionStart(t,C),s.transitionEnd(t,C)),!1;if(o.cssMode){const w=s.isHorizontal(),b=d?A:-A;if(e===0)v&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),v&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{g[w?"scrollLeft":"scrollTop"]=b})):g[w?"scrollLeft":"scrollTop"]=b,v&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return KR({swiper:s,targetPosition:b,side:w?"left":"top"}),!0;g.scrollTo({[w?"left":"top"]:b,behavior:"smooth"})}return!0}const I=tT().isSafari;return v&&!r&&I&&s.isElement&&s.virtual.update(!1,!1,a),s.setTransition(e),s.setTranslate(A),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,C),e===0?s.transitionEnd(t,C):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(w){!s||s.destroyed||w.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,C))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function JW(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let a=n;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)a=a+r.virtual.slidesBefore;else{let o;if(s){const d=a*r.params.grid.rows;o=r.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===d).column}else o=r.getSlideIndexByData(a);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:c}=r.params;let h=r.params.slidesPerView;h==="auto"?h=r.slidesPerViewDynamic():(h=Math.ceil(parseFloat(r.params.slidesPerView,10)),c&&h%2===0&&(h=h+1));let u=l-o<h;if(c&&(u=u||o<Math.ceil(h/2)),i&&c&&r.params.slidesPerView!=="auto"&&!s&&(u=!1),u){const d=c?o<r.activeIndex?"prev":"next":o-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:d,slideTo:!0,activeSlideIndex:d==="next"?o+1:o-l+1,slideRealIndex:d==="next"?r.realIndex:void 0})}if(s){const d=a*r.params.grid.rows;a=r.slides.find(g=>g.getAttribute("data-swiper-slide-index")*1===d).column}else a=r.getSlideIndexByData(a)}return requestAnimationFrame(()=>{r.slideTo(a,e,t,i)}),r}function jW(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function YW(n,e,t){e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const h=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!h&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const u=o?i.translate:-i.translate;function d(C){return C<0?-Math.floor(Math.abs(C)):Math.floor(C)}const g=d(u),f=s.map(C=>d(C)),m=r.freeMode&&r.freeMode.enabled;let p=s[f.indexOf(g)-1];if(typeof p>"u"&&(r.cssMode||m)){let C;s.forEach((v,I)=>{g>=v&&(C=I)}),typeof C<"u"&&(p=m?s[C]:s[C>0?C-1:C])}let A=0;if(typeof p<"u"&&(A=a.indexOf(p),A<0&&(A=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(A=A-i.slidesPerViewDynamic("previous",!0)+1,A=Math.max(A,0))),r.rewind&&i.isBeginning){const C=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(C,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(A,n,e,t)}),!0;return i.slideTo(A,n,e,t)}function KW(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function qW(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;if(r.destroyed)return;typeof n>"u"&&(n=r.params.speed);let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],h=r.snapGrid[o+1];l-c>(h-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],h=r.snapGrid[o];l-c<=(h-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function $W(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.getSlideIndexWhenGrid(n.clickedIndex),s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`,o=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(s):r>(o?(n.slides.length-i)/2-(n.params.grid.rows-1):n.slides.length-i)?(n.loopFix(),r=n.getSlideIndex(Dr(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),av(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var e4={slideTo:XW,slideToLoop:JW,slideNext:jW,slidePrev:YW,slideReset:KW,slideToClosest:qW,slideToClickedSlide:$W};function t4(n,e){const t=this,{params:i,slidesEl:r}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const s=()=>{Dr(r,`.${i.slideClass}, swiper-slide`).forEach((d,g)=>{d.setAttribute("data-swiper-slide-index",g)})},a=()=>{const d=Dr(r,`.${i.slideBlankClass}`);d.forEach(g=>{g.remove()}),d.length>0&&(t.recalcSlides(),t.updateSlides())},o=t.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||o)&&a();const l=i.slidesPerGroup*(o?i.grid.rows:1),c=t.slides.length%l!==0,h=o&&t.slides.length%i.grid.rows!==0,u=d=>{for(let g=0;g<d;g+=1){const f=t.isElement?bu("swiper-slide",[i.slideBlankClass]):bu("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(f)}};if(c){if(i.loopAddBlankSlides){const d=l-t.slides.length%l;u(d),t.recalcSlides(),t.updateSlides()}else gf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(h){if(i.loopAddBlankSlides){const d=i.grid.rows-t.slides.length%i.grid.rows;u(d),t.recalcSlides(),t.updateSlides()}else gf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();t.loopFix({slideRealIndex:n,direction:i.centeredSlides?void 0:"next",initial:e})}function i4(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,initial:a,byController:o,byMousewheel:l}=n===void 0?{}:n;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:h,allowSlidePrev:u,allowSlideNext:d,slidesEl:g,params:f}=c,{centeredSlides:m,initialSlide:p}=f;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&f.virtual.enabled){t&&(!f.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):f.centeredSlides&&c.snapIndex<f.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=u,c.allowSlideNext=d,c.emit("loopFix");return}let A=f.slidesPerView;A==="auto"?A=c.slidesPerViewDynamic():(A=Math.ceil(parseFloat(f.slidesPerView,10)),m&&A%2===0&&(A=A+1));const C=f.slidesPerGroupAuto?A:f.slidesPerGroup;let v=m?Math.max(C,Math.ceil(A/2)):C;v%C!==0&&(v+=C-v%C),v+=f.loopAdditionalSlides,c.loopedSlides=v;const I=c.grid&&f.grid&&f.grid.rows>1;h.length<A+v||c.params.effect==="cards"&&h.length<A+v*2?gf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):I&&f.grid.fill==="row"&&gf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],b=[],_=I?Math.ceil(h.length/f.grid.rows):h.length,x=a&&_-p<A&&!m;let y=x?p:c.activeIndex;typeof s>"u"?s=c.getSlideIndex(h.find(P=>P.classList.contains(f.slideActiveClass))):y=s;const E=i==="next"||!i,S=i==="prev"||!i;let R=0,M=0;const T=(I?h[s].column:s)+(m&&typeof r>"u"?-A/2+.5:0);if(T<v){R=Math.max(v-T,C);for(let P=0;P<v-T;P+=1){const F=P-Math.floor(P/_)*_;if(I){const N=_-F-1;for(let L=h.length-1;L>=0;L-=1)h[L].column===N&&w.push(L)}else w.push(_-F-1)}}else if(T+A>_-v){M=Math.max(T-(_-v*2),C),x&&(M=Math.max(M,A-_+p+1));for(let P=0;P<M;P+=1){const F=P-Math.floor(P/_)*_;I?h.forEach((N,L)=>{N.column===F&&b.push(L)}):b.push(F)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&h.length<A+v*2&&(b.includes(s)&&b.splice(b.indexOf(s),1),w.includes(s)&&w.splice(w.indexOf(s),1)),S&&w.forEach(P=>{h[P].swiperLoopMoveDOM=!0,g.prepend(h[P]),h[P].swiperLoopMoveDOM=!1}),E&&b.forEach(P=>{h[P].swiperLoopMoveDOM=!0,g.append(h[P]),h[P].swiperLoopMoveDOM=!1}),c.recalcSlides(),f.slidesPerView==="auto"?c.updateSlides():I&&(w.length>0&&S||b.length>0&&E)&&c.slides.forEach((P,F)=>{c.grid.updateSlide(F,P,c.slides)}),f.watchSlidesProgress&&c.updateSlidesOffset(),t){if(w.length>0&&S){if(typeof e>"u"){const P=c.slidesGrid[y],F=c.slidesGrid[y+R]-P;l?c.setTranslate(c.translate-F):(c.slideTo(y+Math.ceil(R),0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-F,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-F))}else if(r){const P=I?w.length/f.grid.rows:w.length;c.slideTo(c.activeIndex+P,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(b.length>0&&E)if(typeof e>"u"){const P=c.slidesGrid[y],F=c.slidesGrid[y-M]-P;l?c.setTranslate(c.translate-F):(c.slideTo(y-M,0,!1,!0),r&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-F,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-F))}else{const P=I?b.length/f.grid.rows:b.length;c.slideTo(c.activeIndex-P,0,!1,!0)}}if(c.allowSlidePrev=u,c.allowSlideNext=d,c.controller&&c.controller.control&&!o){const P={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(F=>{!F.destroyed&&F.params.loop&&F.loopFix({...P,slideTo:F.params.slidesPerView===f.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...P,slideTo:c.controller.control.params.slidesPerView===f.slidesPerView?t:!1})}c.emit("loopFix")}function n4(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var r4={loopCreate:t4,loopFix:i4,loopDestroy:n4};function s4(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function a4(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var o4={setGrabCursor:s4,unsetGrabCursor:a4};function l4(n,e){e===void 0&&(e=this);function t(i){if(!i||i===On()||i===Yi())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function wb(n,e,t){const i=Yi(),{params:r}=n,s=r.edgeSwipeDetection,a=r.edgeSwipeThreshold;return s&&(t<=a||t>=i.innerWidth-a)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function c4(n){const e=this,t=On();let i=n;i.originalEvent&&(i=i.originalEvent);const r=e.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){wb(e,i,i.targetTouches[0].pageX);return}const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&i.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!mW(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",h=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&h&&(l=h[0]);const u=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,d=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(d?l4(u,l):l.closest(u))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;a.currentX=i.pageX,a.currentY=i.pageY;const g=a.currentX,f=a.currentY;if(!wb(e,i,g))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=g,a.startY=f,r.touchStartTime=df(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let m=!0;l.matches(r.focusableElements)&&(m=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(r.focusableElements))&&t.activeElement.blur();const p=m&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||p)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function h4(n){const e=On(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(w=>w.identifier===i.touchId),!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const h=c.pageX,u=c.pageY;if(l.preventedByNestedSwiper){s.startX=h,s.startY=u;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:h,startY:u,currentX:h,currentY:u}),i.touchStartTime=df());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(u<s.startY&&t.translate<=t.maxTranslate()||u>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(a&&(h>s.startX&&-t.translate<=t.maxTranslate()||h<s.startX&&-t.translate>=t.minTranslate())||!a&&(h<s.startX&&t.translate<=t.maxTranslate()||h>s.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=h,s.currentY=u;const d=s.currentX-s.startX,g=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(d**2+g**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let w;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:d*d+g*g>=25&&(w=Math.atan2(Math.abs(g),Math.abs(d))*180/Math.PI,i.isScrolling=t.isHorizontal()?w>r.touchAngle:90-w>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let f=t.isHorizontal()?d:g,m=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(f=Math.abs(f)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),s.diff=f,f*=r.touchRatio,a&&(f=-f,m=-m);const p=t.touchesDirection;t.swipeDirection=f>0?"prev":"next",t.touchesDirection=m>0?"prev":"next";const A=t.params.loop&&!r.cssMode,C=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(A&&C&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const w=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(w)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}if(new Date().getTime(),r._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&p!==t.touchesDirection&&A&&C&&Math.abs(f)>=1){Object.assign(s,{startX:h,startY:u,currentX:h,currentY:u,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=f+i.startTranslate;let v=!0,I=r.resistanceRatio;if(r.touchReleaseOnEdges&&(I=0),f>0?(A&&C&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(v=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+f)**I))):f<0&&(A&&C&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(r.slidesPerView!=="auto"&&t.slides.length-r.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(v=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-f)**I))),v&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(f)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function u4(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].find(I=>I.identifier===t.touchId),!r||r.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:s,touches:a,rtlTranslate:o,slidesGrid:l,enabled:c}=e;if(!c||!s.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&s.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}s.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=df(),u=h-t.touchStartTime;if(e.allowClick){const I=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(I&&I[0]||i.target,I),e.emit("tap click",i),u<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=df(),av(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let d;if(s.followFinger?d=o?e.translate:-e.translate:d=-t.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:d});return}const g=d>=-e.maxTranslate()&&!e.params.loop;let f=0,m=e.slidesSizesGrid[0];for(let I=0;I<l.length;I+=I<s.slidesPerGroupSkip?1:s.slidesPerGroup){const w=I<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof l[I+w]<"u"?(g||d>=l[I]&&d<l[I+w])&&(f=I,m=l[I+w]-l[I]):(g||d>=l[I])&&(f=I,m=l[l.length-1]-l[l.length-2])}let p=null,A=null;s.rewind&&(e.isBeginning?A=s.virtual&&s.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(p=0));const C=(d-l[f])/m,v=f<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(u>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(C>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?p:f+v):e.slideTo(f)),e.swipeDirection==="prev"&&(C>1-s.longSwipesRatio?e.slideTo(f+v):A!==null&&C<0&&Math.abs(C)>s.longSwipesRatio?e.slideTo(A):e.slideTo(f))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(f+v):e.slideTo(f):(e.swipeDirection==="next"&&e.slideTo(p!==null?p:f+v),e.swipeDirection==="prev"&&e.slideTo(A!==null?A:f))}}function Eb(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function d4(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function g4(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function f4(n){const e=this;Fg(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function p4(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const nT=(n,e)=>{const t=On(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!r||typeof r=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:o}),r[l]("touchstart",n.onTouchStart,{passive:!1}),r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",Eb,!0):n[c]("observerUpdate",Eb,!0),r[l]("load",n.onLoad,{capture:!0}))};function A4(){const n=this,{params:e}=n;n.onTouchStart=c4.bind(n),n.onTouchMove=h4.bind(n),n.onTouchEnd=u4.bind(n),n.onDocumentTouchStart=p4.bind(n),e.cssMode&&(n.onScroll=g4.bind(n)),n.onClick=d4.bind(n),n.onLoad=f4.bind(n),nT(n,"on")}function m4(){nT(this,"off")}var C4={attachEvents:A4,detachEvents:m4};const bb=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function I4(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=On(),o=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",l=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?n.el:a.querySelector(i.breakpointsBase),c=n.getBreakpoint(s,o,l);if(!c||n.currentBreakpoint===c)return;const h=(c in s?s[c]:void 0)||n.originalParams,u=bb(n,i),d=bb(n,h),g=n.params.grabCursor,f=h.grabCursor,m=i.enabled;u&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!u&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(h.grid.fill&&h.grid.fill==="column"||!h.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),g&&!f?n.unsetGrabCursor():!g&&f&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof h[w]>"u")return;const b=i[w]&&i[w].enabled,_=h[w]&&h[w].enabled;b&&!_&&n[w].disable(),!b&&_&&n[w].enable()});const p=h.direction&&h.direction!==i.direction,A=i.loop&&(h.slidesPerView!==i.slidesPerView||p),C=i.loop;p&&t&&n.changeDirection(),jn(n.params,h);const v=n.params.enabled,I=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),m&&!v?n.disable():!m&&v&&n.enable(),n.currentBreakpoint=c,n.emit("_beforeBreakpoint",h),t&&(A?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!C&&I?(n.loopCreate(e),n.updateSlides()):C&&!I&&n.loopDestroy()),n.emit("breakpoint",h)}function v4(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=Yi(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var y4={setBreakpoint:I4,getBreakpoint:v4};function w4(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function E4(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=w4(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function b4(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var _4={addClasses:E4,removeClasses:b4};function x4(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var S4={checkOverflow:x4},_b={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function M4(n,e){return function(t){t===void 0&&(t={});const i=Object.keys(t)[0],r=t[i];if(typeof r!="object"||r===null){jn(e,t);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in r)){jn(e,t);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),jn(e,t)}}const YA={eventsEmitter:_W,update:PW,translate:zW,transition:HW,slide:e4,loop:r4,grabCursor:o4,events:C4,breakpoints:y4,checkOverflow:S4,classes:_4},KA={};class Xn{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=jn({},t),e&&!t.el&&(t.el=e);const a=On();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const h=[];return a.querySelectorAll(t.el).forEach(u=>{const d=jn({},t,{el:u});h.push(new Xn(d))}),h}const o=this;o.__swiper__=!0,o.support=$R(),o.device=eT({userAgent:t.userAgent}),o.browser=tT(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(h=>{h({params:t,swiper:o,extendParams:M4(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=jn({},_b,l);return o.params=jn({},c,KA,t),o.originalParams=jn({},o.params),o.passedParams=jn({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(h=>{o.on(h,o.params.on[h])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=Dr(t,`.${i.slideClass}, swiper-slide`),s=ff(r[0]);return ff(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Dr(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),s=(i.maxTranslate()-r)*e+r;i.translateTo(s,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let h=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let u=s[c]?Math.ceil(s[c].swiperSlideSize):0,d;for(let g=c+1;g<s.length;g+=1)s[g]&&!d&&(u+=Math.ceil(s[g].swiperSlideSize),h+=1,u>l&&(d=!0));for(let g=c-1;g>=0;g-=1)s[g]&&!d&&(u+=s[g].swiperSlideSize,h+=1,u>l&&(d=!0))}else if(e==="current")for(let u=c+1;u<s.length;u+=1)(t?a[u]+o[u]-a[c]<l:a[u]-a[c]<l)&&(h+=1);else for(let u=c-1;u>=0;u-=1)a[c]-a[u]<l&&(h+=1);return h}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&Fg(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Dr(i,r())[0];return!s&&t.params.createElements&&(s=bu("div",t.params.wrapperClass),i.append(s),Dr(i,`.${t.params.slideClass}`).forEach(a=>{s.append(a)})),Object.assign(t,{el:i,wrapperEl:s,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:s,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Ta(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Ta(i,"direction")==="rtl"),wrongRTL:Ta(s,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(r=>{r.complete?Fg(t,r):r.addEventListener("load",s=>{Fg(t,s.target)})}),NC(t),t.initialized=!0,NC(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),a&&a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),dW(i)),i.destroyed=!0),null}static extendDefaults(e){jn(KA,e)}static get extendedDefaults(){return KA}static get defaults(){return _b}static installModule(e){Xn.prototype.__modules__||(Xn.prototype.__modules__=[]);const t=Xn.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Xn.installModule(t)),Xn):(Xn.installModule(e),Xn)}}Object.keys(YA).forEach(n=>{Object.keys(YA[n]).forEach(e=>{Xn.prototype[e]=YA[n][e]})});Xn.use([EW,bW]);function R4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=On(),a=Yi();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(h){if(!e.enabled)return;const{rtlTranslate:u}=e;let d=h;d.originalEvent&&(d=d.originalEvent);const g=d.keyCode||d.charCode,f=e.params.keyboard.pageUpDown,m=f&&g===33,p=f&&g===34,A=g===37,C=g===39,v=g===38,I=g===40;if(!e.allowSlideNext&&(e.isHorizontal()&&C||e.isVertical()&&I||p)||!e.allowSlidePrev&&(e.isHorizontal()&&A||e.isVertical()&&v||m))return!1;if(!(d.shiftKey||d.altKey||d.ctrlKey||d.metaKey)&&!(s.activeElement&&(s.activeElement.isContentEditable||s.activeElement.nodeName&&(s.activeElement.nodeName.toLowerCase()==="input"||s.activeElement.nodeName.toLowerCase()==="textarea")))){if(e.params.keyboard.onlyInViewport&&(m||p||A||C||v||I)){let w=!1;if(pf(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&pf(e.el,`.${e.params.slideActiveClass}`).length===0)return;const b=e.el,_=b.clientWidth,x=b.clientHeight,y=a.innerWidth,E=a.innerHeight,S=qR(b);u&&(S.left-=b.scrollLeft);const R=[[S.left,S.top],[S.left+_,S.top],[S.left,S.top+x],[S.left+_,S.top+x]];for(let M=0;M<R.length;M+=1){const T=R[M];if(T[0]>=0&&T[0]<=y&&T[1]>=0&&T[1]<=E){if(T[0]===0&&T[1]===0)continue;w=!0}}if(!w)return}e.isHorizontal()?((m||p||A||C)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),((p||C)&&!u||(m||A)&&u)&&e.slideNext(),((m||A)&&!u||(p||C)&&u)&&e.slidePrev()):((m||p||v||I)&&(d.preventDefault?d.preventDefault():d.returnValue=!1),(p||I)&&e.slideNext(),(m||v)&&e.slidePrev()),r("keyPress",g)}}function l(){e.keyboard.enabled||(s.addEventListener("keydown",o),e.keyboard.enabled=!0)}function c(){e.keyboard.enabled&&(s.removeEventListener("keydown",o),e.keyboard.enabled=!1)}i("init",()=>{e.params.keyboard.enabled&&l()}),i("destroy",()=>{e.keyboard.enabled&&c()}),Object.assign(e.keyboard,{enable:l,disable:c})}function ov(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Dr(n.el,`.${i[r]}`)[0];s||(s=bu("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function T4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(f){let m;return f&&typeof f=="string"&&e.isElement&&(m=e.el.querySelector(f)||e.hostEl.querySelector(f),m)?m:(f&&(typeof f=="string"&&(m=[...document.querySelectorAll(f)]),e.params.uniqueNavElements&&typeof f=="string"&&m&&m.length>1&&e.el.querySelectorAll(f).length===1?m=e.el.querySelector(f):m&&m.length===1&&(m=m[0])),f&&!m?f:m)}function a(f,m){const p=e.params.navigation;f=_i(f),f.forEach(A=>{A&&(A.classList[m?"add":"remove"](...p.disabledClass.split(" ")),A.tagName==="BUTTON"&&(A.disabled=m),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](p.lockClass))})}function o(){const{nextEl:f,prevEl:m}=e.navigation;if(e.params.loop){a(m,!1),a(f,!1);return}a(m,e.isBeginning&&!e.params.rewind),a(f,e.isEnd&&!e.params.rewind)}function l(f){f.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(f){f.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function h(){const f=e.params.navigation;if(e.params.navigation=ov(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(f.nextEl||f.prevEl))return;let m=s(f.nextEl),p=s(f.prevEl);Object.assign(e.navigation,{nextEl:m,prevEl:p}),m=_i(m),p=_i(p);const A=(C,v)=>{C&&C.addEventListener("click",v==="next"?c:l),!e.enabled&&C&&C.classList.add(...f.lockClass.split(" "))};m.forEach(C=>A(C,"next")),p.forEach(C=>A(C,"prev"))}function u(){let{nextEl:f,prevEl:m}=e.navigation;f=_i(f),m=_i(m);const p=(A,C)=>{A.removeEventListener("click",C==="next"?c:l),A.classList.remove(...e.params.navigation.disabledClass.split(" "))};f.forEach(A=>p(A,"next")),m.forEach(A=>p(A,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?g():(h(),o())}),i("toEdge fromEdge lock unlock",()=>{o()}),i("destroy",()=>{u()}),i("enable disable",()=>{let{nextEl:f,prevEl:m}=e.navigation;if(f=_i(f),m=_i(m),e.enabled){o();return}[...f,...m].filter(p=>!!p).forEach(p=>p.classList.add(e.params.navigation.lockClass))}),i("click",(f,m)=>{let{nextEl:p,prevEl:A}=e.navigation;p=_i(p),A=_i(A);const C=m.target;let v=A.includes(C)||p.includes(C);if(e.isElement&&!v){const I=m.path||m.composedPath&&m.composedPath();I&&(v=I.find(w=>p.includes(w)||A.includes(w)))}if(e.params.navigation.hideOnClick&&!v){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===C||e.pagination.el.contains(C)))return;let I;p.length?I=p[0].classList.contains(e.params.navigation.hiddenClass):A.length&&(I=A[0].classList.contains(e.params.navigation.hiddenClass)),r(I===!0?"navigationShow":"navigationHide"),[...p,...A].filter(w=>!!w).forEach(w=>w.classList.toggle(e.params.navigation.hiddenClass))}});const d=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),h(),o()},g=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(e.navigation,{enable:d,disable:g,update:o,init:h,destroy:u})}function Vl(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function U4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:C=>C,formatFractionTotal:C=>C,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(C,v){const{bulletActiveClass:I}=e.params.pagination;C&&(C=C[`${v==="prev"?"previous":"next"}ElementSibling`],C&&(C.classList.add(`${I}-${v}`),C=C[`${v==="prev"?"previous":"next"}ElementSibling`],C&&C.classList.add(`${I}-${v}-${v}`)))}function h(C,v,I){if(C=C%I,v=v%I,v===C+1)return"next";if(v===C-1)return"previous"}function u(C){const v=C.target.closest(Vl(e.params.pagination.bulletClass));if(!v)return;C.preventDefault();const I=ff(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===I)return;const w=h(e.realIndex,I,e.slides.length);w==="next"?e.slideNext():w==="previous"?e.slidePrev():e.slideToLoop(I)}else e.slideTo(I)}function d(){const C=e.rtl,v=e.params.pagination;if(l())return;let I=e.pagination.el;I=_i(I);let w,b;const _=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,x=e.params.loop?Math.ceil(_/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(b=e.previousRealIndex||0,w=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(w=e.snapIndex,b=e.previousSnapIndex):(b=e.previousIndex||0,w=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const y=e.pagination.bullets;let E,S,R;if(v.dynamicBullets&&(a=PC(y[0],e.isHorizontal()?"width":"height"),I.forEach(M=>{M.style[e.isHorizontal()?"width":"height"]=`${a*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&b!==void 0&&(o+=w-(b||0),o>v.dynamicMainBullets-1?o=v.dynamicMainBullets-1:o<0&&(o=0)),E=Math.max(w-o,0),S=E+(Math.min(y.length,v.dynamicMainBullets)-1),R=(S+E)/2),y.forEach(M=>{const T=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(P=>`${v.bulletActiveClass}${P}`)].map(P=>typeof P=="string"&&P.includes(" ")?P.split(" "):P).flat();M.classList.remove(...T)}),I.length>1)y.forEach(M=>{const T=ff(M);T===w?M.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&M.setAttribute("part","bullet"),v.dynamicBullets&&(T>=E&&T<=S&&M.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),T===E&&c(M,"prev"),T===S&&c(M,"next"))});else{const M=y[w];if(M&&M.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&y.forEach((T,P)=>{T.setAttribute("part",P===w?"bullet-active":"bullet")}),v.dynamicBullets){const T=y[E],P=y[S];for(let F=E;F<=S;F+=1)y[F]&&y[F].classList.add(...`${v.bulletActiveClass}-main`.split(" "));c(T,"prev"),c(P,"next")}}if(v.dynamicBullets){const M=Math.min(y.length,v.dynamicMainBullets+4),T=(a*M-a)/2-R*a,P=C?"right":"left";y.forEach(F=>{F.style[e.isHorizontal()?P:"top"]=`${T}px`})}}I.forEach((y,E)=>{if(v.type==="fraction"&&(y.querySelectorAll(Vl(v.currentClass)).forEach(S=>{S.textContent=v.formatFractionCurrent(w+1)}),y.querySelectorAll(Vl(v.totalClass)).forEach(S=>{S.textContent=v.formatFractionTotal(x)})),v.type==="progressbar"){let S;v.progressbarOpposite?S=e.isHorizontal()?"vertical":"horizontal":S=e.isHorizontal()?"horizontal":"vertical";const R=(w+1)/x;let M=1,T=1;S==="horizontal"?M=R:T=R,y.querySelectorAll(Vl(v.progressbarFillClass)).forEach(P=>{P.style.transform=`translate3d(0,0,0) scaleX(${M}) scaleY(${T})`,P.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(vb(y,v.renderCustom(e,w+1,x)),E===0&&r("paginationRender",y)):(E===0&&r("paginationRender",y),r("paginationUpdate",y)),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](v.lockClass)})}function g(){const C=e.params.pagination;if(l())return;const v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let I=e.pagination.el;I=_i(I);let w="";if(C.type==="bullets"){let b=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&b>v&&(b=v);for(let _=0;_<b;_+=1)C.renderBullet?w+=C.renderBullet.call(e,_,C.bulletClass):w+=`<${C.bulletElement} ${e.isElement?'part="bullet"':""} class="${C.bulletClass}"></${C.bulletElement}>`}C.type==="fraction"&&(C.renderFraction?w=C.renderFraction.call(e,C.currentClass,C.totalClass):w=`<span class="${C.currentClass}"></span> / <span class="${C.totalClass}"></span>`),C.type==="progressbar"&&(C.renderProgressbar?w=C.renderProgressbar.call(e,C.progressbarFillClass):w=`<span class="${C.progressbarFillClass}"></span>`),e.pagination.bullets=[],I.forEach(b=>{C.type!=="custom"&&vb(b,w||""),C.type==="bullets"&&e.pagination.bullets.push(...b.querySelectorAll(Vl(C.bulletClass)))}),C.type!=="custom"&&r("paginationRender",I[0])}function f(){e.params.pagination=ov(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const C=e.params.pagination;if(!C.el)return;let v;typeof C.el=="string"&&e.isElement&&(v=e.el.querySelector(C.el)),!v&&typeof C.el=="string"&&(v=[...document.querySelectorAll(C.el)]),v||(v=C.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof C.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(C.el)],v.length>1&&(v=v.find(I=>pf(I,".swiper")[0]===e.el))),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=_i(v),v.forEach(I=>{C.type==="bullets"&&C.clickable&&I.classList.add(...(C.clickableClass||"").split(" ")),I.classList.add(C.modifierClass+C.type),I.classList.add(e.isHorizontal()?C.horizontalClass:C.verticalClass),C.type==="bullets"&&C.dynamicBullets&&(I.classList.add(`${C.modifierClass}${C.type}-dynamic`),o=0,C.dynamicMainBullets<1&&(C.dynamicMainBullets=1)),C.type==="progressbar"&&C.progressbarOpposite&&I.classList.add(C.progressbarOppositeClass),C.clickable&&I.addEventListener("click",u),e.enabled||I.classList.add(C.lockClass)}))}function m(){const C=e.params.pagination;if(l())return;let v=e.pagination.el;v&&(v=_i(v),v.forEach(I=>{I.classList.remove(C.hiddenClass),I.classList.remove(C.modifierClass+C.type),I.classList.remove(e.isHorizontal()?C.horizontalClass:C.verticalClass),C.clickable&&(I.classList.remove(...(C.clickableClass||"").split(" ")),I.removeEventListener("click",u))})),e.pagination.bullets&&e.pagination.bullets.forEach(I=>I.classList.remove(...C.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const C=e.params.pagination;let{el:v}=e.pagination;v=_i(v),v.forEach(I=>{I.classList.remove(C.horizontalClass,C.verticalClass),I.classList.add(e.isHorizontal()?C.horizontalClass:C.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?A():(f(),g(),d())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&d()}),i("snapIndexChange",()=>{d()}),i("snapGridLengthChange",()=>{g(),d()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:C}=e.pagination;C&&(C=_i(C),C.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{d()}),i("click",(C,v)=>{const I=v.target,w=_i(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&w&&w.length>0&&!I.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&I===e.navigation.nextEl||e.navigation.prevEl&&I===e.navigation.prevEl))return;const b=w[0].classList.contains(e.params.pagination.hiddenClass);r(b===!0?"paginationShow":"paginationHide"),w.forEach(_=>_.classList.toggle(e.params.pagination.hiddenClass))}});const p=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:C}=e.pagination;C&&(C=_i(C),C.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),f(),g(),d()},A=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:C}=e.pagination;C&&(C=_i(C),C.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:p,disable:A,render:g,update:d,init:f,destroy:m})}function F4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=On();let a=!1,o=null,l=null,c,h,u,d;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function g(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:R,rtlTranslate:M}=e,{dragEl:T,el:P}=R,F=e.params.scrollbar,N=e.params.loop?e.progressLoop:e.progress;let L=h,W=(u-h)*N;M?(W=-W,W>0?(L=h-W,W=0):-W+h>u&&(L=u+W)):W<0?(L=h+W,W=0):W+h>u&&(L=u-W),e.isHorizontal()?(T.style.transform=`translate3d(${W}px, 0, 0)`,T.style.width=`${L}px`):(T.style.transform=`translate3d(0px, ${W}px, 0)`,T.style.height=`${L}px`),F.hide&&(clearTimeout(o),P.style.opacity=1,o=setTimeout(()=>{P.style.opacity=0,P.style.transitionDuration="400ms"},1e3))}function f(R){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${R}ms`)}function m(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:R}=e,{dragEl:M,el:T}=R;M.style.width="",M.style.height="",u=e.isHorizontal()?T.offsetWidth:T.offsetHeight,d=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?h=u*d:h=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?M.style.width=`${h}px`:M.style.height=`${h}px`,d>=1?T.style.display="none":T.style.display="",e.params.scrollbar.hide&&(T.style.opacity=0),e.params.watchOverflow&&e.enabled&&R.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function p(R){return e.isHorizontal()?R.clientX:R.clientY}function A(R){const{scrollbar:M,rtlTranslate:T}=e,{el:P}=M;let F;F=(p(R)-qR(P)[e.isHorizontal()?"left":"top"]-(c!==null?c:h/2))/(u-h),F=Math.max(Math.min(F,1),0),T&&(F=1-F);const N=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*F;e.updateProgress(N),e.setTranslate(N),e.updateActiveIndex(),e.updateSlidesClasses()}function C(R){const M=e.params.scrollbar,{scrollbar:T,wrapperEl:P}=e,{el:F,dragEl:N}=T;a=!0,c=R.target===N?p(R)-R.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,R.preventDefault(),R.stopPropagation(),P.style.transitionDuration="100ms",N.style.transitionDuration="100ms",A(R),clearTimeout(l),F.style.transitionDuration="0ms",M.hide&&(F.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),r("scrollbarDragStart",R)}function v(R){const{scrollbar:M,wrapperEl:T}=e,{el:P,dragEl:F}=M;a&&(R.preventDefault&&R.cancelable?R.preventDefault():R.returnValue=!1,A(R),T.style.transitionDuration="0ms",P.style.transitionDuration="0ms",F.style.transitionDuration="0ms",r("scrollbarDragMove",R))}function I(R){const M=e.params.scrollbar,{scrollbar:T,wrapperEl:P}=e,{el:F}=T;a&&(a=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",P.style.transitionDuration=""),M.hide&&(clearTimeout(l),l=av(()=>{F.style.opacity=0,F.style.transitionDuration="400ms"},1e3)),r("scrollbarDragEnd",R),M.snapOnRelease&&e.slideToClosest())}function w(R){const{scrollbar:M,params:T}=e,P=M.el;if(!P)return;const F=P,N=T.passiveListeners?{passive:!1,capture:!1}:!1,L=T.passiveListeners?{passive:!0,capture:!1}:!1;if(!F)return;const W=R==="on"?"addEventListener":"removeEventListener";F[W]("pointerdown",C,N),s[W]("pointermove",v,N),s[W]("pointerup",I,L)}function b(){!e.params.scrollbar.el||!e.scrollbar.el||w("on")}function _(){!e.params.scrollbar.el||!e.scrollbar.el||w("off")}function x(){const{scrollbar:R,el:M}=e;e.params.scrollbar=ov(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const T=e.params.scrollbar;if(!T.el)return;let P;if(typeof T.el=="string"&&e.isElement&&(P=e.el.querySelector(T.el)),!P&&typeof T.el=="string"){if(P=s.querySelectorAll(T.el),!P.length)return}else P||(P=T.el);e.params.uniqueNavElements&&typeof T.el=="string"&&P.length>1&&M.querySelectorAll(T.el).length===1&&(P=M.querySelector(T.el)),P.length>0&&(P=P[0]),P.classList.add(e.isHorizontal()?T.horizontalClass:T.verticalClass);let F;P&&(F=P.querySelector(Vl(e.params.scrollbar.dragClass)),F||(F=bu("div",e.params.scrollbar.dragClass),P.append(F))),Object.assign(R,{el:P,dragEl:F}),T.draggable&&b(),P&&P.classList[e.enabled?"remove":"add"](...ma(e.params.scrollbar.lockClass))}function y(){const R=e.params.scrollbar,M=e.scrollbar.el;M&&M.classList.remove(...ma(e.isHorizontal()?R.horizontalClass:R.verticalClass)),_()}i("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const R=e.params.scrollbar;let{el:M}=e.scrollbar;M=_i(M),M.forEach(T=>{T.classList.remove(R.horizontalClass,R.verticalClass),T.classList.add(e.isHorizontal()?R.horizontalClass:R.verticalClass)})}),i("init",()=>{e.params.scrollbar.enabled===!1?S():(x(),m(),g())}),i("update resize observerUpdate lock unlock changeDirection",()=>{m()}),i("setTranslate",()=>{g()}),i("setTransition",(R,M)=>{f(M)}),i("enable disable",()=>{const{el:R}=e.scrollbar;R&&R.classList[e.enabled?"remove":"add"](...ma(e.params.scrollbar.lockClass))}),i("destroy",()=>{y()});const E=()=>{e.el.classList.remove(...ma(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...ma(e.params.scrollbar.scrollbarDisabledClass)),x(),m(),g()},S=()=>{e.el.classList.add(...ma(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...ma(e.params.scrollbar.scrollbarDisabledClass)),y()};Object.assign(e.scrollbar,{enable:E,disable:S,updateSize:m,setTranslate:g,init:x,destroy:y})}function B4(n){let{swiper:e,extendParams:t,on:i,emit:r,params:s}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,h,u=new Date().getTime(),d,g,f,m,p,A,C;function v(L){!e||e.destroyed||!e.wrapperEl||L.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",v),!(C||L.detail&&L.detail.bySwiperTouchMove)&&E())}const I=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?d=!0:d&&(c=h,d=!1);const L=e.autoplay.paused?h:u+c-new Date().getTime();e.autoplay.timeLeft=L,r("autoplayTimeLeft",L,L/l),o=requestAnimationFrame(()=>{I()})},w=()=>{let L;return e.virtual&&e.params.virtual.enabled?L=e.slides.find(W=>W.classList.contains("swiper-slide-active")):L=e.slides[e.activeIndex],L?parseInt(L.getAttribute("data-swiper-autoplay"),10):void 0},b=L=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),I();let W=typeof L>"u"?e.params.autoplay.delay:L;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const ne=w();!Number.isNaN(ne)&&ne>0&&typeof L>"u"&&(W=ne,l=ne,c=ne),h=W;const de=e.params.speed,ee=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(de,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,de,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(de,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,de,!0,!0),r("autoplay")),e.params.cssMode&&(u=new Date().getTime(),requestAnimationFrame(()=>{b()})))};return W>0?(clearTimeout(a),a=setTimeout(()=>{ee()},W)):requestAnimationFrame(()=>{ee()}),W},_=()=>{u=new Date().getTime(),e.autoplay.running=!0,b(),r("autoplayStart")},x=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),r("autoplayStop")},y=(L,W)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),L||(A=!0);const ne=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",v):E()};if(e.autoplay.paused=!0,W){p&&(h=e.params.autoplay.delay),p=!1,ne();return}h=(h||e.params.autoplay.delay)-(new Date().getTime()-u),!(e.isEnd&&h<0&&!e.params.loop)&&(h<0&&(h=0),ne())},E=()=>{e.isEnd&&h<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(u=new Date().getTime(),A?(A=!1,b(h)):b(),e.autoplay.paused=!1,r("autoplayResume"))},S=()=>{if(e.destroyed||!e.autoplay.running)return;const L=On();L.visibilityState==="hidden"&&(A=!0,y(!0)),L.visibilityState==="visible"&&E()},R=L=>{L.pointerType==="mouse"&&(A=!0,C=!0,!(e.animating||e.autoplay.paused)&&y(!0))},M=L=>{L.pointerType==="mouse"&&(C=!1,e.autoplay.paused&&E())},T=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",R),e.el.addEventListener("pointerleave",M))},P=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",R),e.el.removeEventListener("pointerleave",M))},F=()=>{On().addEventListener("visibilitychange",S)},N=()=>{On().removeEventListener("visibilitychange",S)};i("init",()=>{e.params.autoplay.enabled&&(T(),F(),_())}),i("destroy",()=>{P(),N(),e.autoplay.running&&x()}),i("_freeModeStaticRelease",()=>{(f||A)&&E()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?x():y(!0,!0)}),i("beforeTransitionStart",(L,W,ne)=>{e.destroyed||!e.autoplay.running||(ne||!e.params.autoplay.disableOnInteraction?y(!0,!0):x())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){x();return}g=!0,f=!1,A=!1,m=setTimeout(()=>{A=!0,f=!0,y(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!g)){if(clearTimeout(m),clearTimeout(a),e.params.autoplay.disableOnInteraction){f=!1,g=!1;return}f&&e.params.cssMode&&E(),f=!1,g=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(p=!0)}),Object.assign(e.autoplay,{start:_,stop:x,pause:y,resume:E})}function D4(n){let{swiper:e,extendParams:t,on:i}=n;t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let r=!1,s=!1;e.thumbs={swiper:null};function a(){const c=e.thumbs.swiper;if(!c||c.destroyed)return;const h=c.clickedIndex,u=c.clickedSlide;if(u&&u.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof h>"u"||h===null)return;let d;c.params.loop?d=parseInt(c.clickedSlide.getAttribute("data-swiper-slide-index"),10):d=h,e.params.loop?e.slideToLoop(d):e.slideTo(d)}function o(){const{thumbs:c}=e.params;if(r)return!1;r=!0;const h=e.constructor;if(c.swiper instanceof h){if(c.swiper.destroyed)return r=!1,!1;e.thumbs.swiper=c.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(Fh(c.swiper)){const u=Object.assign({},c.swiper);Object.assign(u,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new h(u),s=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",a),!0}function l(c){const h=e.thumbs.swiper;if(!h||h.destroyed)return;const u=h.params.slidesPerView==="auto"?h.slidesPerViewDynamic():h.params.slidesPerView;let d=1;const g=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(d=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(d=1),d=Math.floor(d),h.slides.forEach(p=>p.classList.remove(g)),h.params.loop||h.params.virtual&&h.params.virtual.enabled)for(let p=0;p<d;p+=1)Dr(h.slidesEl,`[data-swiper-slide-index="${e.realIndex+p}"]`).forEach(A=>{A.classList.add(g)});else for(let p=0;p<d;p+=1)h.slides[e.realIndex+p]&&h.slides[e.realIndex+p].classList.add(g);const f=e.params.thumbs.autoScrollOffset,m=f&&!h.params.loop;if(e.realIndex!==h.realIndex||m){const p=h.activeIndex;let A,C;if(h.params.loop){const v=h.slides.find(I=>I.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);A=h.slides.indexOf(v),C=e.activeIndex>e.previousIndex?"next":"prev"}else A=e.realIndex,C=A>e.previousIndex?"next":"prev";m&&(A+=C==="next"?f:-1*f),h.visibleSlidesIndexes&&h.visibleSlidesIndexes.indexOf(A)<0&&(h.params.centeredSlides?A>p?A=A-Math.floor(u/2)+1:A=A+Math.floor(u/2)-1:A>p&&h.params.slidesPerGroup,h.slideTo(A,c?0:void 0))}}i("beforeInit",()=>{const{thumbs:c}=e.params;if(!(!c||!c.swiper))if(typeof c.swiper=="string"||c.swiper instanceof HTMLElement){const h=On(),u=()=>{const g=typeof c.swiper=="string"?h.querySelector(c.swiper):c.swiper;if(g&&g.swiper)c.swiper=g.swiper,o(),l(!0);else if(g){const f=`${e.params.eventsPrefix}init`,m=p=>{c.swiper=p.detail[0],g.removeEventListener(f,m),o(),l(!0),c.swiper.update(),e.update()};g.addEventListener(f,m)}return g},d=()=>{e.destroyed||u()||requestAnimationFrame(d)};requestAnimationFrame(d)}else o(),l(!0)}),i("slideChange update resize observerUpdate",()=>{l()}),i("setTransition",(c,h)=>{const u=e.thumbs.swiper;!u||u.destroyed||u.setTransition(h)}),i("beforeDestroy",()=>{const c=e.thumbs.swiper;!c||c.destroyed||s&&c.destroy()}),Object.assign(e.thumbs,{init:o,update:l})}const L4='@font-face{font-family:swiper-icons;src:url(data:application/font-woff;charset=utf-8;base64,\\ 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);font-weight:400;font-style:normal}:root{--swiper-theme-color: #007aff}:host{position:relative;display:block;margin-left:auto;margin-right:auto;z-index:1}.swiper{margin-left:auto;margin-right:auto;position:relative;overflow:hidden;list-style:none;padding:0;z-index:1;display:block}.swiper-vertical>.swiper-wrapper{flex-direction:column}.swiper-wrapper{position:relative;width:100%;height:100%;z-index:1;display:flex;transition-property:transform;transition-timing-function:var(--swiper-wrapper-transition-timing-function, initial);box-sizing:content-box}.swiper-android .swiper-slide,.swiper-ios .swiper-slide,.swiper-wrapper{transform:translateZ(0)}.swiper-horizontal{touch-action:pan-y}.swiper-vertical{touch-action:pan-x}.swiper-slide{flex-shrink:0;width:100%;height:100%;position:relative;transition-property:transform;display:block}.swiper-slide-invisible-blank{visibility:hidden}.swiper-autoheight,.swiper-autoheight .swiper-slide{height:auto}.swiper-autoheight .swiper-wrapper{align-items:flex-start;transition-property:transform,height}.swiper-backface-hidden .swiper-slide{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.swiper-3d.swiper-css-mode .swiper-wrapper{perspective:1200px}.swiper-3d .swiper-wrapper{transform-style:preserve-3d}.swiper-3d{perspective:1200px}.swiper-3d .swiper-slide,.swiper-3d .swiper-cube-shadow{transform-style:preserve-3d}.swiper-css-mode>.swiper-wrapper{overflow:auto;scrollbar-width:none;-ms-overflow-style:none}.swiper-css-mode>.swiper-wrapper::-webkit-scrollbar{display:none}.swiper-css-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:start start}.swiper-css-mode.swiper-horizontal>.swiper-wrapper{scroll-snap-type:x mandatory}.swiper-css-mode.swiper-vertical>.swiper-wrapper{scroll-snap-type:y mandatory}.swiper-css-mode.swiper-free-mode>.swiper-wrapper{scroll-snap-type:none}.swiper-css-mode.swiper-free-mode>.swiper-wrapper>.swiper-slide{scroll-snap-align:none}.swiper-css-mode.swiper-centered>.swiper-wrapper:before{content:"";flex-shrink:0;order:9999}.swiper-css-mode.swiper-centered>.swiper-wrapper>.swiper-slide{scroll-snap-align:center center;scroll-snap-stop:always}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper>.swiper-slide:first-child{margin-inline-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-horizontal>.swiper-wrapper:before{height:100%;min-height:1px;width:var(--swiper-centered-offset-after)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper>.swiper-slide:first-child{margin-block-start:var(--swiper-centered-offset-before)}.swiper-css-mode.swiper-centered.swiper-vertical>.swiper-wrapper:before{width:100%;min-width:1px;height:var(--swiper-centered-offset-after)}.swiper-3d .swiper-slide-shadow,.swiper-3d .swiper-slide-shadow-left,.swiper-3d .swiper-slide-shadow-right,.swiper-3d .swiper-slide-shadow-top,.swiper-3d .swiper-slide-shadow-bottom{position:absolute;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:10}.swiper-3d .swiper-slide-shadow{background:#00000026}.swiper-3d .swiper-slide-shadow-left{background-image:linear-gradient(to left,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-right{background-image:linear-gradient(to right,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-top{background-image:linear-gradient(to top,#00000080,#0000)}.swiper-3d .swiper-slide-shadow-bottom{background-image:linear-gradient(to bottom,#00000080,#0000)}.swiper-lazy-preloader{width:42px;height:42px;position:absolute;left:50%;top:50%;margin-left:-21px;margin-top:-21px;z-index:10;transform-origin:50%;box-sizing:border-box;border:4px solid var(--swiper-preloader-color, var(--swiper-theme-color));border-radius:50%;border-top-color:transparent}.swiper:not(.swiper-watch-progress) .swiper-lazy-preloader,.swiper-watch-progress .swiper-slide-visible .swiper-lazy-preloader{animation:swiper-preloader-spin 1s infinite linear}.swiper-lazy-preloader-white{--swiper-preloader-color: #fff}.swiper-lazy-preloader-black{--swiper-preloader-color: #000}@keyframes swiper-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}:root{--swiper-navigation-size: 44px}.swiper-button-prev,.swiper-button-next{position:absolute;top:var(--swiper-navigation-top-offset, 50%);width:calc(var(--swiper-navigation-size) / 44 * 27);height:var(--swiper-navigation-size);margin-top:calc(0px - (var(--swiper-navigation-size) / 2));z-index:10;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--swiper-navigation-color, var(--swiper-theme-color))}.swiper-button-prev.swiper-button-disabled,.swiper-button-next.swiper-button-disabled{opacity:.35;cursor:auto;pointer-events:none}.swiper-button-prev.swiper-button-hidden,.swiper-button-next.swiper-button-hidden{opacity:0;cursor:auto;pointer-events:none}.swiper-navigation-disabled .swiper-button-prev,.swiper-navigation-disabled .swiper-button-next{display:none!important}.swiper-button-prev svg,.swiper-button-next svg{width:100%;height:100%;object-fit:contain;transform-origin:center}.swiper-rtl .swiper-button-prev svg,.swiper-rtl .swiper-button-next svg{transform:rotate(180deg)}.swiper-button-prev,.swiper-rtl .swiper-button-next{left:var(--swiper-navigation-sides-offset, 10px);right:auto}.swiper-button-lock{display:none}.swiper-button-prev:after,.swiper-button-next:after{font-family:swiper-icons;font-size:var(--swiper-navigation-size);text-transform:none!important;letter-spacing:0;font-variant:initial;line-height:1}.swiper-button-prev:after,.swiper-rtl .swiper-button-next:after{content:"prev"}.swiper-button-next,.swiper-rtl .swiper-button-prev{right:var(--swiper-navigation-sides-offset, 10px);left:auto}.swiper-button-next:after,.swiper-rtl .swiper-button-prev:after{content:"next"}.swiper-pagination{position:absolute;text-align:center;transition:.3s opacity;transform:translateZ(0);z-index:10}.swiper-pagination.swiper-pagination-hidden{opacity:0}.swiper-pagination-disabled>.swiper-pagination,.swiper-pagination.swiper-pagination-disabled{display:none!important}.swiper-pagination-fraction,.swiper-pagination-custom,.swiper-horizontal>.swiper-pagination-bullets,.swiper-pagination-bullets.swiper-pagination-horizontal{bottom:var(--swiper-pagination-bottom, 8px);top:var(--swiper-pagination-top, auto);left:0;width:100%}.swiper-pagination-bullets-dynamic{overflow:hidden;font-size:0}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transform:scale(.33);position:relative}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active,.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-main{transform:scale(1)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-prev-prev{transform:scale(.33)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next{transform:scale(.66)}.swiper-pagination-bullets-dynamic .swiper-pagination-bullet-active-next-next{transform:scale(.33)}.swiper-pagination-bullet{width:var(--swiper-pagination-bullet-width, var(--swiper-pagination-bullet-size, 8px));height:var(--swiper-pagination-bullet-height, var(--swiper-pagination-bullet-size, 8px));display:inline-block;border-radius:var(--swiper-pagination-bullet-border-radius, 50%);background:var(--swiper-pagination-bullet-inactive-color, #000);opacity:var(--swiper-pagination-bullet-inactive-opacity, .2)}button.swiper-pagination-bullet{border:none;margin:0;padding:0;box-shadow:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.swiper-pagination-clickable .swiper-pagination-bullet{cursor:pointer}.swiper-pagination-bullet:only-child{display:none!important}.swiper-pagination-bullet-active{opacity:var(--swiper-pagination-bullet-opacity, 1);background:var(--swiper-pagination-color, var(--swiper-theme-color))}.swiper-vertical>.swiper-pagination-bullets,.swiper-pagination-vertical.swiper-pagination-bullets{right:var(--swiper-pagination-right, 8px);left:var(--swiper-pagination-left, auto);top:50%;transform:translate3d(0,-50%,0)}.swiper-vertical>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets .swiper-pagination-bullet{margin:var(--swiper-pagination-bullet-vertical-gap, 6px) 0;display:block}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{top:50%;transform:translateY(-50%);width:8px}.swiper-vertical>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-vertical.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{display:inline-block;transition:.2s transform,.2s top}.swiper-horizontal>.swiper-pagination-bullets .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets .swiper-pagination-bullet{margin:0 var(--swiper-pagination-bullet-horizontal-gap, 4px)}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic{left:50%;transform:translate(-50%);white-space:nowrap}.swiper-horizontal>.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet,.swiper-pagination-horizontal.swiper-pagination-bullets.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s left}.swiper-horizontal.swiper-rtl>.swiper-pagination-bullets-dynamic .swiper-pagination-bullet{transition:.2s transform,.2s right}.swiper-pagination-fraction{color:var(--swiper-pagination-fraction-color, inherit)}.swiper-pagination-progressbar{background:var(--swiper-pagination-progressbar-bg-color, rgba(0, 0, 0, .25));position:absolute}.swiper-pagination-progressbar .swiper-pagination-progressbar-fill{background:var(--swiper-pagination-color, var(--swiper-theme-color));position:absolute;left:0;top:0;width:100%;height:100%;transform:scale(0);transform-origin:left top}.swiper-rtl .swiper-pagination-progressbar .swiper-pagination-progressbar-fill{transform-origin:right top}.swiper-horizontal>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-horizontal,.swiper-vertical>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-vertical.swiper-pagination-progressbar-opposite{width:100%;height:var(--swiper-pagination-progressbar-size, 4px);left:0;top:0}.swiper-vertical>.swiper-pagination-progressbar,.swiper-pagination-progressbar.swiper-pagination-vertical,.swiper-horizontal>.swiper-pagination-progressbar.swiper-pagination-progressbar-opposite,.swiper-pagination-progressbar.swiper-pagination-horizontal.swiper-pagination-progressbar-opposite{width:var(--swiper-pagination-progressbar-size, 4px);height:100%;left:0;top:0}.swiper-pagination-lock{display:none}.swiper-scrollbar{border-radius:var(--swiper-scrollbar-border-radius, 10px);position:relative;touch-action:none;background:var(--swiper-scrollbar-bg-color, rgba(0, 0, 0, .1))}.swiper-scrollbar-disabled>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-disabled{display:none!important}.swiper-horizontal>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-horizontal{position:absolute;left:var(--swiper-scrollbar-sides-offset, 1%);bottom:var(--swiper-scrollbar-bottom, 4px);top:var(--swiper-scrollbar-top, auto);z-index:50;height:var(--swiper-scrollbar-size, 4px);width:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-vertical>.swiper-scrollbar,.swiper-scrollbar.swiper-scrollbar-vertical{position:absolute;left:var(--swiper-scrollbar-left, auto);right:var(--swiper-scrollbar-right, 4px);top:var(--swiper-scrollbar-sides-offset, 1%);z-index:50;width:var(--swiper-scrollbar-size, 4px);height:calc(100% - 2 * var(--swiper-scrollbar-sides-offset, 1%))}.swiper-scrollbar-drag{height:100%;width:100%;position:relative;background:var(--swiper-scrollbar-drag-bg-color, rgba(0, 0, 0, .5));border-radius:var(--swiper-scrollbar-border-radius, 10px);left:0;top:0}.swiper-scrollbar-cursor-drag{cursor:move}.swiper-scrollbar-lock{display:none}';class P4 extends cp{constructor(){super(...arguments),Xe(this,"slider"),Xe(this,"divContainer"),Xe(this,"divSlides"),Xe(this,"divGallery"),Xe(this,"divPagination"),Xe(this,"divPrevious"),Xe(this,"divNext"),Xe(this,"isDragging",!1)}static get observedAttributes(){return["has-thumb","autoplay"]}get hasThumb(){return this.hasAttribute("has-thumb")}get autoplay(){return this.hasAttribute("autoplay")}get slides(){var e;return[...Array.from(this.querySelectorAll("cc-swiper-slide")),...Array.from(((e=this.divSlides)==null?void 0:e.querySelectorAll("cc-swiper-slide"))??[])]}async openViewer(e,t,i){var r,s;let a=document.querySelector("cc-viewer");if(!a){const c=document.createElement("cc-viewer");document.body.appendChild(c),await customElements.whenDefined("cc-viewer"),a=await new Promise(h=>{setTimeout(()=>{h(document.querySelector("cc-viewer"))},100)})}a.setSwiper(this),a.setCurrentSlideIndex(i??((r=this.slider)==null?void 0:r.activeIndex)??0);const o=this.slides[i??((s=this.slider)==null?void 0:s.activeIndex)??0],l={};o!=null&&o.hasAttribute("fit-to-container")&&(l.fitToContainer=!0),o!=null&&o.hasAttribute("debug-mode")&&(l.debugMode=!0),o!=null&&o.hasAttribute("camera-position")&&(l.cameraPosition=o.getAttribute("camera-position")),o!=null&&o.hasAttribute("camera-target")&&(l.cameraTarget=o.getAttribute("camera-target")),o!=null&&o.hasAttribute("show-texture")&&(l.showTexture=o.getAttribute("show-texture")==="true"),t==="3dmodel"&&o!=null&&o.hasAttribute("material-url")&&(l.materialUrl=o.getAttribute("material-url")),a.open(e,t,l)}firstUpdated(){}render(){const e=`
      <style>
        ${L4}
      </style>
    `,t=this.css`
      :host {
        display: block;
        height: 100%;
        width: 100%;
        --swiper-theme-color: var(--cc-slider-theme-color, #007aff);
        --swiper-navigation-color: var(--cc-slider-navigation-color, #007aff);
        --swiper-gallery-height: 0px;
        --swiper-slider-margin-bottom: 0px;
        --swiper-navigation-size: 44px;
      }

      :host([has-thumb]) {
        --swiper-slider-margin-bottom: 10px;
        --swiper-gallery-height: calc(100px - var(--swiper-slider-margin-bottom));
      }

      #divContainer {
        height: calc(100% - var(--swiper-gallery-height) - var(--swiper-slider-margin-bottom));
        margin-bottom: var(--swiper-slider-margin-bottom);
      }
      
      .swiper {
        height: 100%;
      }

      #divGallery {
        height: var(--swiper-gallery-height);
      }

      .gallery-thumbs .swiper-slide {
        height: 100%;
        opacity: 0.25;
        transition: 200ms;
        cursor: pointer;
      }

      .gallery-thumbs .swiper-slide-thumb-active {
        opacity: 1;
      }

      .gallery-thumb {
        background-position: center !important;
        background-repeat: no-repeat !important;
        background-size: cover !important;
      }

      .swiper-wrapper {
        text-align: center;
      }

      .swiper-slide {
        background-color: white;
        height: 100%;
      }

      img.viewer {
        object-fit: contain;
        height: 100%;
        width: 100%;
        cursor: pointer;
        pointer-events: auto !important;
        user-select: none;
      }

      img.viewer.w-caption {
        height: calc(100% - 10px - 1.5rem);
      }

      .slider-caption {
        padding: 5px;
        margin: 0;
        line-height: 1.5em;
        background: #000000;
        color: #ffffff;
        font-size: 0.6rem;
        font-weight: 700;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 10;
      }

      /* Adjust pagination position when caption exists */
      .swiper-pagination {
        bottom: 10px !important;
      }

      /* When captions exist, move pagination up */
      #divContainer.has-captions .swiper-pagination {
        bottom: calc(1.5rem + 20px) !important;
      }

      /* Navigation button styles with SVG icons */
      .swiper-button-prev,
      .swiper-button-next {
        color: var(--swiper-navigation-color);
        font-size: 0; /* Hide text */
        width: var(--swiper-navigation-size);
        height: var(--swiper-navigation-size);
      }

      .swiper-button-prev:after {
        content: '';
        display: block;
        width: var(--swiper-navigation-size);
        height: var(--swiper-navigation-size);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23007aff'%3E%3Cpath d='M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z'/%3E%3C/svg%3E");
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }
      
      .swiper-button-next:after {
        content: '';
        display: block;
        width: var(--swiper-navigation-size);
        height: var(--swiper-navigation-size);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23007aff'%3E%3Cpath d='M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z'/%3E%3C/svg%3E");
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }
    `,i=this.slides.map((a,o)=>{const l=a.getAttribute("thumbnail-url")||"",c=a.getAttribute("image-url")||"",h=a.getAttribute("image-type")||"image",u=a.getAttribute("caption")||"";return`
        <div class='swiper-slide'>
          <img src="${l}" data-image-url="${c}" data-image-type="${h}" data-index="${o}" class="viewer${u!==""?" w-caption":""}">
          ${u!==""?`<p class="slider-caption">${u}</p>`:""}
        </div>
      `}).join(""),r=this.slides.map((a,o)=>{const l=a.getAttribute("thumbnail-url")||"";return`
        <div class='swiper-slide gallery-thumb' data-index="${o}" style="background-image: url('${l}')"></div>
      `}).join(""),s=`
      ${e}
      ${t}
      <div id='divContainer' class='swiper gallery-top'>
        <div id='divSlides' class='swiper-wrapper'>
          ${i}
        </div>

        <div id='divPagination' class='swiper-pagination'></div>
        <div id='divPrevious' class='swiper-button-prev'></div>
        <div id='divNext' class='swiper-button-next'></div>
      </div>
      <div id='divGallery' class='swiper gallery-thumbs'>
        <div class='swiper-wrapper'>
          ${r}
        </div>
      </div>
    `;this.updateShadowRoot(s),setTimeout(()=>{this.initializeSwiper(),this.queryAll(".gallery-thumb").forEach((a,o)=>{a.addEventListener("click",()=>{var l;return(l=this.slider)==null?void 0:l.slideTo(o)})}),this.queryAll("img.viewer").forEach(a=>{a.addEventListener("dragstart",o=>o.preventDefault()),a.addEventListener("click",o=>{if(this.isDragging){this.isDragging=!1;return}o.preventDefault(),o.stopPropagation(),o.stopImmediatePropagation();const l=o.target,c=l.getAttribute("data-image-url")||"",h=l.getAttribute("data-image-type")||"image",u=parseInt(l.getAttribute("data-index")||"0",10);return this.openViewer(c,h,u),!1},!0)})},0)}initializeSwiper(){this.divContainer=this.query("#divContainer")??void 0,this.divSlides=this.query("#divSlides")??void 0,this.divGallery=this.query("#divGallery")??void 0,this.divPagination=this.query("#divPagination")??void 0,this.divPrevious=this.query("#divPrevious")??void 0,this.divNext=this.query("#divNext")??void 0,this.slides.some(t=>t.getAttribute("caption"))&&this.divContainer&&this.divContainer.classList.add("has-captions");const e=this.slides.length>=2;this.divContainer&&(this.slider&&this.slider.destroy(),this.slider=new Xn(this.divContainer,{modules:[T4,U4,F4,B4,D4,R4],navigation:{prevEl:this.divPrevious,nextEl:this.divNext},pagination:this.hasThumb?{}:{el:this.divPagination},autoplay:this.autoplay?{delay:5e3,disableOnInteraction:!1,reverseDirection:!1,stopOnLastSlide:!1,waitForTransition:!0}:!1,thumbs:this.hasThumb&&this.divGallery?{swiper:new Xn(this.divGallery,{spaceBetween:10,slidesPerView:Math.min(Math.max(4,this.slides.length),8),watchSlidesProgress:!0})}:{},preventClicks:!1,preventClicksPropagation:!1,simulateTouch:!0,allowTouchMove:!0,loop:e,on:{sliderMove:()=>{this.isDragging=!0},touchEnd:()=>{setTimeout(()=>{this.isDragging=!1},50)}}}))}}customElements.get("cc-swiper")||customElements.define("cc-swiper",P4);class N4 extends cp{static get observedAttributes(){return["thumbnail-url","image-url","image-type","caption"]}get thumbnailUrl(){return this.getAttribute("thumbnail-url")||""}get imageUrl(){return this.getAttribute("image-url")||""}get imageType(){return this.getAttribute("image-type")||""}get caption(){return this.getAttribute("caption")||""}render(){const e=this.css`
      :host {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        background-size: cover !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
      }
    `;this.updateShadowRoot(e)}}customElements.get("cc-swiper-slide")||customElements.define("cc-swiper-slide",N4);class zc extends cp{constructor(){super(...arguments),Xe(this,"_showPrevButton",!0),Xe(this,"_showNextButton",!0),Xe(this,"isShow",!1),Xe(this,"isLoading",!1)}get showPrevButton(){return this._showPrevButton}set showPrevButton(e){this._showPrevButton=e,this.updateNavigationVisibility()}get showNextButton(){return this._showNextButton}set showNextButton(e){this._showNextButton=e,this.updateNavigationVisibility()}open(e){this.isShow=!0,this.isLoading=!0;const t=Promise.resolve(this.doOpen(e));Promise.resolve().then(()=>{this.render()}),t.then(()=>{this.isLoading=!1,this.render()}).catch(i=>{this.isLoading=!1,this.render()})}close(){this.cleanupNavigationListeners(),this.doClose(),this.isShow=!1,this.isLoading=!1,this.render(),this.dispatch("close")}cleanupNavigationListeners(){const e=this.query(".nav-prev"),t=this.query(".nav-next"),i=this.query(".nav-close");e&&e.removeAttribute("data-listener-attached"),t&&t.removeAttribute("data-listener-attached"),i&&i.removeAttribute("data-listener-attached")}render(){if(this.shouldUseCustomRender()){this.customRender();return}const e=`
      ${this.css`
      :host {
        --cc-viewer-z-index-each: 1000;
      }
      
      .backdrop {
        justify-content: center;
        align-items: center;
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: var(--cc-viewer-z-index-each);
      }
      
      .viewer {
        position: absolute;
        width: 90%;
        height: 85%;
        inset: 0px;
        margin: auto;
        align-self: center;
        background-color: #000;
      }
      
      ${this.getNavigationStyles()}
      ${this.getCustomStyles()}
    `}
      <div class="backdrop" style="${this.isShow?"visibility: visible":"visibility: hidden"}">
        ${this.getNavigationButtons()}
        <div class="viewer">
          ${this.getViewerContent()}
        </div>
      </div>
    `;this.updateShadowRoot(e),setTimeout(()=>{this.addNavigationListeners(),this.onAfterRender()},0)}shouldUseCustomRender(){return!1}customRender(){}getCustomStyles(){return""}onAfterRender(){}navigatePrev(){this.dispatch("navigate-prev")}navigateNext(){this.dispatch("navigate-next")}getNavigationButtons(){const e=this.showPrevButton?"":"display: none;",t=this.showNextButton?"":"display: none;";return`
      <button class="nav-button nav-prev" style="${e}" aria-label="Previous">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <button class="nav-button nav-next" style="${t}" aria-label="Next">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
      <button class="nav-button nav-close" aria-label="Close">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    `}getNavigationStyles(){return`
      .nav-button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        border-radius: 4px;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background 0.3s;
        z-index: calc(var(--cc-viewer-z-index-each, 1000) + 2);
        pointer-events: auto;
      }
      
      .nav-button:hover {
        background: rgba(0, 0, 0, 0.7);
      }
      
      .nav-prev {
        left: 20px;
      }
      
      .nav-next {
        right: 20px;
      }
      
      .nav-close {
        top: 20px;
        right: 20px;
        transform: none;
      }
    `}addNavigationListeners(){const e=this.query(".backdrop");e&&e.style.visibility==="hidden"||setTimeout(()=>{const t=this.query(".nav-prev"),i=this.query(".nav-next"),r=this.query(".nav-close");t&&!t.hasAttribute("data-listener-attached")&&(t.setAttribute("data-listener-attached","true"),t.addEventListener("click",s=>{s.stopPropagation(),s.preventDefault(),this.navigatePrev()},!0)),i&&!i.hasAttribute("data-listener-attached")&&(i.setAttribute("data-listener-attached","true"),i.addEventListener("click",s=>{s.stopPropagation(),this.navigateNext()})),r&&!r.hasAttribute("data-listener-attached")&&(r.setAttribute("data-listener-attached","true"),r.addEventListener("click",s=>{s.stopPropagation(),this.close()}))},0)}updateNavigationVisibility(){const e=this.query(".nav-prev"),t=this.query(".nav-next");e&&(e.style.display=this._showPrevButton?"":"none"),t&&(t.style.display=this._showNextButton?"":"none")}}/*!
 * Viewer.js v1.11.7
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-11-24T04:32:19.116Z
 */function k4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function xb(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,rT(i.key),i)}}function Q4(n,e,t){return e&&xb(n.prototype,e),t&&xb(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function O4(n,e,t){return(e=rT(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Sb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sb(Object(t),!0).forEach(function(i){O4(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Sb(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function V4(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function rT(n){var e=V4(n,"string");return typeof e=="symbol"?e:e+""}function kC(n){"@babel/helpers - typeof";return kC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kC(n)}var Mb={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},z4='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',hp=typeof window<"u"&&typeof window.document<"u",ks=hp?window:{},hc=hp&&ks.document.documentElement?"ontouchstart"in ks.document.documentElement:!1,cv=hp?"PointerEvent"in ks:!1,vt="viewer",Bg="move",sT="switch",Bh="zoom",Qd="".concat(vt,"-active"),G4="".concat(vt,"-close"),Dg="".concat(vt,"-fade"),QC="".concat(vt,"-fixed"),W4="".concat(vt,"-fullscreen"),Rb="".concat(vt,"-fullscreen-exit"),oo="".concat(vt,"-hide"),Z4="".concat(vt,"-hide-md-down"),H4="".concat(vt,"-hide-sm-down"),X4="".concat(vt,"-hide-xs-down"),ir="".concat(vt,"-in"),zh="".concat(vt,"-invisible"),uc="".concat(vt,"-loading"),J4="".concat(vt,"-move"),Tb="".concat(vt,"-open"),Cl="".concat(vt,"-show"),li="".concat(vt,"-transition"),Mc="click",OC="dblclick",Ub="dragstart",Fb="focusin",Bb="keydown",cr="load",So="error",j4=hc?"touchend touchcancel":"mouseup",Y4=hc?"touchmove":"mousemove",K4=hc?"touchstart":"mousedown",Db=cv?"pointerdown":K4,Lb=cv?"pointermove":Y4,Pb=cv?"pointerup pointercancel":j4,Nb="resize",Sr="transitionend",kb="wheel",Qb="ready",Ob="show",Vb="shown",zb="hide",Gb="hidden",Wb="view",_u="viewed",Zb="move",Hb="moved",Xb="rotate",Jb="rotated",jb="scale",Yb="scaled",Kb="zoom",qb="zoomed",$b="play",e_="stop",Af="".concat(vt,"Action"),hv=/\s\s*/,Od=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function xu(n){return typeof n=="string"}var q4=Number.isNaN||ks.isNaN;function ai(n){return typeof n=="number"&&!q4(n)}function Xl(n){return typeof n>"u"}function Rc(n){return kC(n)==="object"&&n!==null}var $4=Object.prototype.hasOwnProperty;function Jl(n){if(!Rc(n))return!1;try{var e=n.constructor,t=e.prototype;return e&&t&&$4.call(t,"isPrototypeOf")}catch{return!1}}function Kt(n){return typeof n=="function"}function ei(n,e){if(n&&Kt(e))if(Array.isArray(n)||ai(n.length)){var t=n.length,i;for(i=0;i<t&&e.call(n,n[i],i,n)!==!1;i+=1);}else Rc(n)&&Object.keys(n).forEach(function(r){e.call(n,n[r],r,n)});return n}var Yn=Object.assign||function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Rc(n)&&t.length>0&&t.forEach(function(r){Rc(r)&&Object.keys(r).forEach(function(s){n[s]=r[s]})}),n},e5=/^(?:width|height|left|top|marginLeft|marginTop)$/;function Lr(n,e){var t=n.style;ei(e,function(i,r){e5.test(r)&&ai(i)&&(i+="px"),t[r]=i})}function t5(n){return xu(n)?n.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n}function zl(n,e){return!n||!e?!1:n.classList?n.classList.contains(e):n.className.indexOf(e)>-1}function rt(n,e){if(!(!n||!e)){if(ai(n.length)){ei(n,function(i){rt(i,e)});return}if(n.classList){n.classList.add(e);return}var t=n.className.trim();t?t.indexOf(e)<0&&(n.className="".concat(t," ").concat(e)):n.className=e}}function Ot(n,e){if(!(!n||!e)){if(ai(n.length)){ei(n,function(t){Ot(t,e)});return}if(n.classList){n.classList.remove(e);return}n.className.indexOf(e)>=0&&(n.className=n.className.replace(e,""))}}function Su(n,e,t){if(e){if(ai(n.length)){ei(n,function(i){Su(i,e,t)});return}t?rt(n,e):Ot(n,e)}}var i5=/([a-z\d])([A-Z])/g;function uv(n){return n.replace(i5,"$1-$2").toLowerCase()}function jl(n,e){return Rc(n[e])?n[e]:n.dataset?n.dataset[e]:n.getAttribute("data-".concat(uv(e)))}function VC(n,e,t){Rc(t)?n[e]=t:n.dataset?n.dataset[e]=t:n.setAttribute("data-".concat(uv(e)),t)}var aT=(function(){var n=!1;if(hp){var e=!1,t=function(){},i=Object.defineProperty({},"once",{get:function(){return n=!0,e},set:function(r){e=r}});ks.addEventListener("test",t,i),ks.removeEventListener("test",t,i)}return n})();function qt(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(hv).forEach(function(s){if(!aT){var a=n.listeners;a&&a[s]&&a[s][t]&&(r=a[s][t],delete a[s][t],Object.keys(a[s]).length===0&&delete a[s],Object.keys(a).length===0&&delete n.listeners)}n.removeEventListener(s,r,i)})}function at(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},r=t;e.trim().split(hv).forEach(function(s){if(i.once&&!aT){var a=n.listeners,o=a===void 0?{}:a;r=function(){delete o[s][t],n.removeEventListener(s,r,i);for(var l=arguments.length,c=new Array(l),h=0;h<l;h++)c[h]=arguments[h];t.apply(n,c)},o[s]||(o[s]={}),o[s][t]&&n.removeEventListener(s,o[s][t],i),o[s][t]=r,n.listeners=o}n.addEventListener(s,r,i)})}function ui(n,e,t,i){var r;return Kt(Event)&&Kt(CustomEvent)?r=new CustomEvent(e,lv({bubbles:!0,cancelable:!0,detail:t},i)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,t)),n.dispatchEvent(r)}function n5(n){var e=n.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function Lg(n){var e=n.rotate,t=n.scaleX,i=n.scaleY,r=n.translateX,s=n.translateY,a=[];ai(r)&&r!==0&&a.push("translateX(".concat(r,"px)")),ai(s)&&s!==0&&a.push("translateY(".concat(s,"px)")),ai(e)&&e!==0&&a.push("rotate(".concat(e,"deg)")),ai(t)&&t!==1&&a.push("scaleX(".concat(t,")")),ai(i)&&i!==1&&a.push("scaleY(".concat(i,")"));var o=a.length?a.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function r5(n){return xu(n)?decodeURIComponent(n.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var qA=ks.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(ks.navigator.userAgent);function oT(n,e,t){var i=document.createElement("img");if(n.naturalWidth&&!qA)return t(n.naturalWidth,n.naturalHeight),i;var r=document.body||document.documentElement;return i.onload=function(){t(i.width,i.height),qA||r.removeChild(i)},ei(e.inheritedAttributes,function(s){var a=n.getAttribute(s);a!==null&&i.setAttribute(s,a)}),i.src=n.src,qA||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(i)),i}function Vd(n){switch(n){case 2:return X4;case 3:return H4;case 4:return Z4;default:return""}}function s5(n){var e=lv({},n),t=[];return ei(n,function(i,r){delete e[r],ei(e,function(s){var a=Math.abs(i.startX-s.startX),o=Math.abs(i.startY-s.startY),l=Math.abs(i.endX-s.endX),c=Math.abs(i.endY-s.endY),h=Math.sqrt(a*a+o*o),u=Math.sqrt(l*l+c*c),d=(u-h)/h;t.push(d)})}),t.sort(function(i,r){return Math.abs(i)<Math.abs(r)}),t[0]}function zd(n,e){var t=n.pageX,i=n.pageY,r={endX:t,endY:i};return e?r:lv({timeStamp:Date.now(),startX:t,startY:i},r)}function a5(n){var e=0,t=0,i=0;return ei(n,function(r){var s=r.startX,a=r.startY;e+=s,t+=a,i+=1}),e/=i,t/=i,{pageX:e,pageY:t}}var o5={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var n=this.element.ownerDocument,e=n.body||n.documentElement;this.body=e,this.scrollbarWidth=window.innerWidth-n.documentElement.clientWidth,this.initialBodyPaddingRight=e.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(e).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var n=this.options,e=this.parent,t;n.inline&&(t={width:Math.max(e.offsetWidth,n.minWidth),height:Math.max(e.offsetHeight,n.minHeight)},this.parentData=t),(this.fulled||!t)&&(t=this.containerData),this.viewerData=Yn({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&Lr(this.viewer,this.viewerData)},initList:function(){var n=this,e=this.element,t=this.options,i=this.list,r=[];i.innerHTML="",ei(this.images,function(s,a){var o=s.src,l=s.alt||r5(o),c=n.getImageURL(s);if(o||c){var h=document.createElement("li"),u=document.createElement("img");ei(t.inheritedAttributes,function(d){var g=s.getAttribute(d);g!==null&&u.setAttribute(d,g)}),t.navbar&&(u.src=o||c),u.alt=l,u.setAttribute("data-original-url",c||o),h.setAttribute("data-index",a),h.setAttribute("data-viewer-action","view"),h.setAttribute("role","button"),t.keyboard&&h.setAttribute("tabindex",0),h.appendChild(u),i.appendChild(h),r.push(h)}}),this.items=r,ei(r,function(s){var a=s.firstElementChild,o,l;VC(a,"filled",!0),t.loading&&rt(s,uc),at(a,cr,o=function(c){qt(a,So,l),t.loading&&Ot(s,uc),n.loadImage(c)},{once:!0}),at(a,So,l=function(){qt(a,cr,o),t.loading&&Ot(s,uc)},{once:!0})}),t.transition&&at(e,_u,function(){rt(i,li)},{once:!0})},renderList:function(){var n=this.index,e=this.items[n];if(e){var t=e.nextElementSibling,i=parseInt(window.getComputedStyle(t||e).marginLeft,10),r=e.offsetWidth,s=r+i;Lr(this.list,Yn({width:s*this.length-i},Lg({translateX:(this.viewerData.width-r)/2-s*n})))}},resetList:function(){var n=this.list;n.innerHTML="",Ot(n,li),Lr(n,Lg({translateX:0}))},initImage:function(n){var e=this,t=this.options,i=this.image,r=this.viewerData,s=this.footer.offsetHeight,a=r.width,o=Math.max(r.height-s,s),l=this.imageData||{},c;this.imageInitializing={abort:function(){c.onload=null}},c=oT(i,t,function(h,u){var d=h/u,g=Math.max(0,Math.min(1,t.initialCoverage)),f=a,m=o;e.imageInitializing=!1,o*d>a?m=a/d:f=o*d,g=ai(g)?g:.9,f=Math.min(f*g,h),m=Math.min(m*g,u);var p=(a-f)/2,A=(o-m)/2,C={left:p,top:A,x:p,y:A,width:f,height:m,oldRatio:1,ratio:f/h,aspectRatio:d,naturalWidth:h,naturalHeight:u},v=Yn({},C);t.rotatable&&(C.rotate=l.rotate||0,v.rotate=0),t.scalable&&(C.scaleX=l.scaleX||1,C.scaleY=l.scaleY||1,v.scaleX=1,v.scaleY=1),e.imageData=C,e.initialImageData=v,n&&n()})},renderImage:function(n){var e=this,t=this.image,i=this.imageData;if(Lr(t,Yn({width:i.width,height:i.height,marginLeft:i.x,marginTop:i.y},Lg(i))),n)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&zl(t,li)){var r=function(){e.imageRendering=!1,n()};this.imageRendering={abort:function(){qt(t,Sr,r)}},at(t,Sr,r,{once:!0})}else n()},resetImage:function(){var n=this.image;n&&(this.viewing&&this.viewing.abort(),n.parentNode.removeChild(n),this.image=null,this.title.innerHTML="")}},l5={bind:function(){var n=this.options,e=this.viewer,t=this.canvas,i=this.element.ownerDocument;at(e,Mc,this.onClick=this.click.bind(this)),at(e,Ub,this.onDragStart=this.dragstart.bind(this)),at(t,Db,this.onPointerDown=this.pointerdown.bind(this)),at(i,Lb,this.onPointerMove=this.pointermove.bind(this)),at(i,Pb,this.onPointerUp=this.pointerup.bind(this)),at(i,Bb,this.onKeyDown=this.keydown.bind(this)),at(window,Nb,this.onResize=this.resize.bind(this)),n.zoomable&&n.zoomOnWheel&&at(e,kb,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),n.toggleOnDblclick&&at(t,OC,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var n=this.options,e=this.viewer,t=this.canvas,i=this.element.ownerDocument;qt(e,Mc,this.onClick),qt(e,Ub,this.onDragStart),qt(t,Db,this.onPointerDown),qt(i,Lb,this.onPointerMove),qt(i,Pb,this.onPointerUp),qt(i,Bb,this.onKeyDown),qt(window,Nb,this.onResize),n.zoomable&&n.zoomOnWheel&&qt(e,kb,this.onWheel,{passive:!1,capture:!0}),n.toggleOnDblclick&&qt(t,OC,this.onDblclick)}},c5={click:function(n){var e=this.options,t=this.imageData,i=n.target,r=jl(i,Af);switch(!r&&i.localName==="img"&&i.parentElement.localName==="li"&&(i=i.parentElement,r=jl(i,Af)),hc&&n.isTrusted&&i===this.canvas&&clearTimeout(this.clickCanvasTimeout),r){case"mix":this.played?this.stop():e.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(jl(i,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(e.loop);break;case"play":this.play(e.fullscreen);break;case"next":this.next(e.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-t.scaleX||-1);break;case"flip-vertical":this.scaleY(-t.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(n){n.preventDefault(),this.viewed&&n.target===this.image&&(hc&&n.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(n.isTrusted?n:n.detail&&n.detail.originalEvent))},load:function(){var n=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var e=this.element,t=this.options,i=this.image,r=this.index,s=this.viewerData;Ot(i,zh),t.loading&&Ot(this.canvas,uc),i.style.cssText="height:0;"+"margin-left:".concat(s.width/2,"px;")+"margin-top:".concat(s.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){Su(i,J4,t.movable),Su(i,li,t.transition),n.renderImage(function(){n.viewed=!0,n.viewing=!1,Kt(t.viewed)&&at(e,_u,t.viewed,{once:!0}),ui(e,_u,{originalImage:n.images[r],index:r,image:i},{cancelable:!1})})})},loadImage:function(n){var e=n.target,t=e.parentNode,i=t.offsetWidth||30,r=t.offsetHeight||50,s=!!jl(e,"filled");oT(e,this.options,function(a,o){var l=a/o,c=i,h=r;r*l>i?s?c=r*l:h=i/l:s?h=i/l:c=r*l,Lr(e,Yn({width:c,height:h},Lg({translateX:(i-c)/2,translateY:(r-h)/2})))})},keydown:function(n){var e=this.options;if(e.keyboard){var t=n.keyCode||n.which||n.charCode;switch(t){case 13:this.viewer.contains(n.target)&&this.click(n);break}if(this.fulled)switch(t){case 27:this.played?this.stop():e.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(e.loop);break;case 38:n.preventDefault(),this.zoom(e.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(e.loop);break;case 40:n.preventDefault(),this.zoom(-e.zoomRatio,!0);break;case 48:case 49:n.ctrlKey&&(n.preventDefault(),this.toggle());break}}},dragstart:function(n){n.target.localName==="img"&&n.preventDefault()},pointerdown:function(n){var e=this.options,t=this.pointers,i=n.buttons,r=n.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(n.type==="mousedown"||n.type==="pointerdown"&&n.pointerType==="mouse")&&(ai(i)&&i!==1||ai(r)&&r!==0||n.ctrlKey))){n.preventDefault(),n.changedTouches?ei(n.changedTouches,function(a){t[a.identifier]=zd(a)}):t[n.pointerId||0]=zd(n);var s=e.movable?Bg:!1;e.zoomOnTouch&&e.zoomable&&Object.keys(t).length>1?s=Bh:e.slideOnTouch&&(n.pointerType==="touch"||n.type==="touchstart")&&this.isSwitchable()&&(s=sT),e.transition&&(s===Bg||s===Bh)&&Ot(this.image,li),this.action=s}},pointermove:function(n){var e=this.pointers,t=this.action;!this.viewed||!t||(n.preventDefault(),n.changedTouches?ei(n.changedTouches,function(i){Yn(e[i.identifier]||{},zd(i,!0))}):Yn(e[n.pointerId||0]||{},zd(n,!0)),this.change(n))},pointerup:function(n){var e=this,t=this.options,i=this.action,r=this.pointers,s;n.changedTouches?ei(n.changedTouches,function(a){s=r[a.identifier],delete r[a.identifier]}):(s=r[n.pointerId||0],delete r[n.pointerId||0]),i&&(n.preventDefault(),t.transition&&(i===Bg||i===Bh)&&rt(this.image,li),this.action=!1,hc&&i!==Bh&&s&&Date.now()-s.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),t.toggleOnDblclick&&this.viewed&&n.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){ui(e.image,OC,{originalEvent:n})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){e.imageClicked=!1},500)):(this.imageClicked=!1,t.backdrop&&t.backdrop!=="static"&&n.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){ui(e.canvas,Mc,{originalEvent:n})},50)))))},resize:function(){var n=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){n.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}ei(this.player.getElementsByTagName("img"),function(e){at(e,cr,n.loadImage.bind(n),{once:!0}),ui(e,cr)})}},wheel:function(n){var e=this;if(this.viewed&&(n.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50);var t=Number(this.options.zoomRatio)||.1,i=1;n.deltaY?i=n.deltaY>0?1:-1:n.wheelDelta?i=-n.wheelDelta/120:n.detail&&(i=n.detail>0?1:-1),this.zoom(-i*t,!0,null,n)}}},h5={show:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.element,t=this.options;if(t.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(n),this;if(Kt(t.show)&&at(e,Ob,t.show,{once:!0}),ui(e,Ob)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var i=this.viewer;if(Ot(i,oo),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("aria-hidden"),t.transition&&!n){var r=this.shown.bind(this);this.transitioning={abort:function(){qt(i,Sr,r),Ot(i,ir)}},rt(i,li),i.initialOffsetWidth=i.offsetWidth,at(i,Sr,r,{once:!0}),rt(i,ir)}else rt(i,ir),this.shown();return this},hide:function(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.element,i=this.options;if(i.inline||this.hiding||!(this.isShown||this.showing))return this;if(Kt(i.hide)&&at(t,zb,i.hide,{once:!0}),ui(t,zb)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var r=this.viewer,s=this.image,a=function(){Ot(r,ir),n.hidden()};if(i.transition&&!e){var o=function(c){c&&c.target===r&&(qt(r,Sr,o),n.hidden())},l=function(){zl(r,li)?(at(r,Sr,o),Ot(r,ir)):a()};this.transitioning={abort:function(){n.viewed&&zl(s,li)?qt(s,Sr,l):zl(r,li)&&qt(r,Sr,o)}},this.viewed&&zl(s,li)?(at(s,Sr,l,{once:!0}),this.zoomTo(0,!1,null,null,!0)):l()}else a();return this},view:function(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(e=Number(e)||0,this.hiding||this.played||e<0||e>=this.length||this.viewed&&e===this.index)return this;if(!this.isShown)return this.index=e,this.show();this.viewing&&this.viewing.abort();var t=this.element,i=this.options,r=this.title,s=this.canvas,a=this.items[e],o=a.querySelector("img"),l=jl(o,"originalUrl"),c=o.getAttribute("alt"),h=document.createElement("img");if(ei(i.inheritedAttributes,function(m){var p=o.getAttribute(m);p!==null&&h.setAttribute(m,p)}),h.src=l,h.alt=c,Kt(i.view)&&at(t,Wb,i.view,{once:!0}),ui(t,Wb,{originalImage:this.images[e],index:e,image:h})===!1||!this.isShown||this.hiding||this.played)return this;var u=this.items[this.index];u&&(Ot(u,Qd),u.removeAttribute("aria-selected")),rt(a,Qd),a.setAttribute("aria-selected",!0),i.focus&&a.focus(),this.image=h,this.viewed=!1,this.index=e,this.imageData={},rt(h,zh),i.loading&&rt(s,uc),s.innerHTML="",s.appendChild(h),this.renderList(),r.innerHTML="";var d=function(){var m=n.imageData,p=Array.isArray(i.title)?i.title[1]:i.title;r.innerHTML=t5(Kt(p)?p.call(n,h,m):"".concat(c," (").concat(m.naturalWidth,"  ").concat(m.naturalHeight,")"))},g,f;return at(t,_u,d,{once:!0}),this.viewing={abort:function(){qt(t,_u,d),h.complete?n.imageRendering?n.imageRendering.abort():n.imageInitializing&&n.imageInitializing.abort():(h.src="",qt(h,cr,g),n.timeout&&clearTimeout(n.timeout))}},h.complete?this.load():(at(h,cr,g=function(){qt(h,So,f),n.load()},{once:!0}),at(h,So,f=function(){qt(h,cr,g),n.timeout&&(clearTimeout(n.timeout),n.timeout=!1),Ot(h,zh),i.loading&&Ot(n.canvas,uc)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){Ot(h,zh),n.timeout=!1},1e3)),this},prev:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.index-1;return e<0&&(e=n?this.length-1:0),this.view(e),this},next:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.length-1,t=this.index+1;return t>e&&(t=n?0:e),this.view(t),this},move:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,t=this.imageData;return this.moveTo(Xl(n)?n:t.x+Number(n),Xl(e)?e:t.y+Number(e)),this},moveTo:function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=this.element,s=this.options,a=this.imageData;if(n=Number(n),t=Number(t),this.viewed&&!this.played&&s.movable){var o=a.x,l=a.y,c=!1;if(ai(n)?c=!0:n=o,ai(t)?c=!0:t=l,c){if(Kt(s.move)&&at(r,Zb,s.move,{once:!0}),ui(r,Zb,{x:n,y:t,oldX:o,oldY:l,originalEvent:i})===!1)return this;a.x=n,a.y=t,a.left=n,a.top=t,this.moving=!0,this.renderImage(function(){e.moving=!1,Kt(s.moved)&&at(r,Hb,s.moved,{once:!0}),ui(r,Hb,{x:n,y:t,oldX:o,oldY:l,originalEvent:i},{cancelable:!1})})}}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n)),this},rotateTo:function(n){var e=this,t=this.element,i=this.options,r=this.imageData;if(n=Number(n),ai(n)&&this.viewed&&!this.played&&i.rotatable){var s=r.rotate;if(Kt(i.rotate)&&at(t,Xb,i.rotate,{once:!0}),ui(t,Xb,{degree:n,oldDegree:s})===!1)return this;r.rotate=n,this.rotating=!0,this.renderImage(function(){e.rotating=!1,Kt(i.rotated)&&at(t,Jb,i.rotated,{once:!0}),ui(t,Jb,{degree:n,oldDegree:s},{cancelable:!1})})}return this},scaleX:function(n){return this.scale(n,this.imageData.scaleY),this},scaleY:function(n){return this.scale(this.imageData.scaleX,n),this},scale:function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,i=this.element,r=this.options,s=this.imageData;if(n=Number(n),t=Number(t),this.viewed&&!this.played&&r.scalable){var a=s.scaleX,o=s.scaleY,l=!1;if(ai(n)?l=!0:n=a,ai(t)?l=!0:t=o,l){if(Kt(r.scale)&&at(i,jb,r.scale,{once:!0}),ui(i,jb,{scaleX:n,scaleY:t,oldScaleX:a,oldScaleY:o})===!1)return this;s.scaleX=n,s.scaleY=t,this.scaling=!0,this.renderImage(function(){e.scaling=!1,Kt(r.scaled)&&at(i,Yb,r.scaled,{once:!0}),ui(i,Yb,{scaleX:n,scaleY:t,oldScaleX:a,oldScaleY:o},{cancelable:!1})})}}return this},zoom:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=this.imageData;return n=Number(n),n<0?n=1/(1-n):n=1+n,this.zoomTo(r.width*n/r.naturalWidth,e,t,i),this},zoomTo:function(n){var e=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,a=this.element,o=this.options,l=this.pointers,c=this.imageData,h=c.x,u=c.y,d=c.width,g=c.height,f=c.naturalWidth,m=c.naturalHeight;if(n=Math.max(0,n),ai(n)&&this.viewed&&!this.played&&(s||o.zoomable)){if(!s){var p=Math.max(.01,o.minZoomRatio),A=Math.min(100,o.maxZoomRatio);n=Math.min(Math.max(n,p),A)}if(r)switch(r.type){case"wheel":o.zoomRatio>=.055&&n>.95&&n<1.05&&(n=1);break;case"pointermove":case"touchmove":case"mousemove":n>.99&&n<1.01&&(n=1);break}var C=f*n,v=m*n,I=C-d,w=v-g,b=c.ratio;if(Kt(o.zoom)&&at(a,Kb,o.zoom,{once:!0}),ui(a,Kb,{ratio:n,oldRatio:b,originalEvent:r})===!1)return this;if(this.zooming=!0,r){var _=n5(this.viewer),x=l&&Object.keys(l).length>0?a5(l):{pageX:r.pageX,pageY:r.pageY};c.x-=I*((x.pageX-_.left-h)/d),c.y-=w*((x.pageY-_.top-u)/g)}else Jl(i)&&ai(i.x)&&ai(i.y)?(c.x-=I*((i.x-h)/d),c.y-=w*((i.y-u)/g)):(c.x-=I/2,c.y-=w/2);c.left=c.x,c.top=c.y,c.width=C,c.height=v,c.oldRatio=b,c.ratio=n,this.renderImage(function(){e.zooming=!1,Kt(o.zoomed)&&at(a,qb,o.zoomed,{once:!0}),ui(a,qb,{ratio:n,oldRatio:b,originalEvent:r},{cancelable:!1})}),t&&this.tooltip()}return this},play:function(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var t=this.element,i=this.options;if(Kt(i.play)&&at(t,$b,i.play,{once:!0}),ui(t,$b)===!1)return this;var r=this.player,s=this.loadImage.bind(this),a=[],o=0,l=0;if(this.played=!0,this.onLoadWhenPlay=s,e&&this.requestFullscreen(e),rt(r,Cl),ei(this.items,function(u,d){var g=u.querySelector("img"),f=document.createElement("img");f.src=jl(g,"originalUrl"),f.alt=g.getAttribute("alt"),f.referrerPolicy=g.referrerPolicy,o+=1,rt(f,Dg),Su(f,li,i.transition),zl(u,Qd)&&(rt(f,ir),l=d),a.push(f),at(f,cr,s,{once:!0}),r.appendChild(f)}),ai(i.interval)&&i.interval>0){var c=function(){clearTimeout(n.playing.timeout),Ot(a[l],ir),l-=1,l=l>=0?l:o-1,rt(a[l],ir),n.playing.timeout=setTimeout(c,i.interval)},h=function(){clearTimeout(n.playing.timeout),Ot(a[l],ir),l+=1,l=l<o?l:0,rt(a[l],ir),n.playing.timeout=setTimeout(h,i.interval)};o>1&&(this.playing={prev:c,next:h,timeout:setTimeout(h,i.interval)})}return this},stop:function(){var n=this;if(!this.played)return this;var e=this.element,t=this.options;if(Kt(t.stop)&&at(e,e_,t.stop,{once:!0}),ui(e,e_)===!1)return this;var i=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,ei(i.getElementsByTagName("img"),function(r){qt(r,cr,n.onLoadWhenPlay)}),Ot(i,Cl),i.innerHTML="",this.exitFullscreen(),this},full:function(){var n=this,e=this.options,t=this.viewer,i=this.image,r=this.list;return!this.isShown||this.played||this.fulled||!e.inline?this:(this.fulled=!0,this.open(),rt(this.button,Rb),e.transition&&(Ot(r,li),this.viewed&&Ot(i,li)),rt(t,QC),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),Lr(t,{zIndex:e.zIndex}),e.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Yn({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){n.renderImage(function(){e.transition&&setTimeout(function(){rt(i,li),rt(r,li)},0)})}),this)},exit:function(){var n=this,e=this.options,t=this.viewer,i=this.image,r=this.list;return!this.isShown||this.played||!this.fulled||!e.inline?this:(this.fulled=!1,this.close(),Ot(this.button,Rb),e.transition&&(Ot(r,li),this.viewed&&Ot(i,li)),e.focus&&this.clearEnforceFocus(),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),Ot(t,QC),Lr(t,{zIndex:e.zIndexInline}),this.viewerData=Yn({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){n.renderImage(function(){e.transition&&setTimeout(function(){rt(i,li),rt(r,li)},0)})}),this)},tooltip:function(){var n=this,e=this.options,t=this.tooltipBox,i=this.imageData;return!this.viewed||this.played||!e.tooltip?this:(t.textContent="".concat(Math.round(i.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):e.transition?(this.fading&&ui(t,Sr),rt(t,Cl),rt(t,Dg),rt(t,li),t.removeAttribute("aria-hidden"),t.initialOffsetWidth=t.offsetWidth,rt(t,ir)):(rt(t,Cl),t.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){e.transition?(at(t,Sr,function(){Ot(t,Cl),Ot(t,Dg),Ot(t,li),t.setAttribute("aria-hidden",!0),n.fading=!1},{once:!0}),Ot(t,ir),n.fading=!0):(Ot(t,Cl),t.setAttribute("aria-hidden",!0)),n.tooltipping=!1},1e3),this)},toggle:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,n):this.zoomTo(1,!0,null,n),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Yn({},this.initialImageData),this.renderImage()),this},update:function(){var n=this,e=this.element,t=this.options,i=this.isImg;if(i&&!e.parentNode)return this.destroy();var r=[];if(ei(i?[e]:e.querySelectorAll("img"),function(l){Kt(t.filter)?t.filter.call(n,l)&&r.push(l):n.getImageURL(l)&&r.push(l)}),!r.length)return this;if(this.images=r,this.length=r.length,this.ready){var s=[];if(ei(this.items,function(l,c){var h=l.querySelector("img"),u=r[c];u&&h?(u.src!==h.src||u.alt!==h.alt)&&s.push(c):s.push(c)}),Lr(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var a=s.indexOf(this.index);if(a>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-a,this.length-1),0));else{var o=this.items[this.index];rt(o,Qd),o.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var n=this.element,e=this.options;return n[vt]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),e.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):e.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),e.inline||qt(n,Mc,this.onStart),n[vt]=void 0,this):this}},u5={getImageURL:function(n){var e=this.options.url;return xu(e)?e=n.getAttribute(e):Kt(e)?e=e.call(this,n):e="",e},enforceFocus:function(){var n=this;this.clearEnforceFocus(),at(document,Fb,this.onFocusin=function(e){var t=n.viewer,i=e.target;if(!(i===document||i===t||t.contains(i))){for(;i;){if(i.getAttribute("tabindex")!==null||i.getAttribute("aria-modal")==="true")return;i=i.parentElement}t.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(qt(document,Fb,this.onFocusin),this.onFocusin=null)},open:function(){var n=this.body;rt(n,Tb),this.scrollbarWidth>0&&(n.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var n=this.body;Ot(n,Tb),this.scrollbarWidth>0&&(n.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var n=this.element,e=this.options,t=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,e.focus&&(t.focus(),this.enforceFocus()),Kt(e.shown)&&at(n,Vb,e.shown,{once:!0}),ui(n,Vb)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var n=this.element,e=this.options,t=this.viewer;e.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),rt(t,oo),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),t.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(Kt(e.hidden)&&at(n,Gb,e.hidden,{once:!0}),ui(n,Gb,null,{cancelable:!1}))},requestFullscreen:function(n){var e=this.element.ownerDocument;if(this.fulled&&!(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)){var t=e.documentElement;t.requestFullscreen?Jl(n)?t.requestFullscreen(n):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},exitFullscreen:function(){var n=this.element.ownerDocument;this.fulled&&(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)&&(n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen())},change:function(n){var e=this.options,t=this.pointers,i=t[Object.keys(t)[0]];if(i){var r=i.endX-i.startX,s=i.endY-i.startY;switch(this.action){case Bg:(r!==0||s!==0)&&(this.pointerMoved=!0,this.move(r,s,n));break;case Bh:this.zoom(s5(t),!1,null,n);break;case sT:{this.action="switched";var a=Math.abs(r);a>1&&a>Math.abs(s)&&(this.pointers={},r>1?this.prev(e.loop):r<-1&&this.next(e.loop));break}}ei(t,function(o){o.startX=o.endX,o.startY=o.endY})}},isSwitchable:function(){var n=this.imageData,e=this.viewerData;return this.length>1&&n.x>=0&&n.y>=0&&n.width<=e.width&&n.height<=e.height}},d5=ks.Viewer,g5=(function(n){return function(){return n+=1,n}})(-1),zC=(function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(k4(this,n),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Yn({},Mb,Jl(t)&&t),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=g5(),this.init()}return Q4(n,[{key:"init",value:function(){var e=this,t=this.element,i=this.options;if(!t[vt]){t[vt]=this,i.focus&&!i.keyboard&&(i.focus=!1);var r=t.localName==="img",s=[];if(ei(r?[t]:t.querySelectorAll("img"),function(l){Kt(i.filter)?i.filter.call(e,l)&&s.push(l):e.getImageURL(l)&&s.push(l)}),this.isImg=r,this.length=s.length,this.images=s,this.initBody(),Xl(document.createElement(vt).style.transition)&&(i.transition=!1),i.inline){var a=0,o=function(){if(a+=1,a===e.length){var l;e.initializing=!1,e.delaying={abort:function(){clearTimeout(l)}},l=setTimeout(function(){e.delaying=!1,e.build()},0)}};this.initializing={abort:function(){ei(s,function(l){l.complete||(qt(l,cr,o),qt(l,So,o))})}},ei(s,function(l){if(l.complete)o();else{var c,h;at(l,cr,c=function(){qt(l,So,h),o()},{once:!0}),at(l,So,h=function(){qt(l,cr,c),o()},{once:!0})}})}else at(t,Mc,this.onStart=function(l){var c=l.target;c.localName==="img"&&(!Kt(i.filter)||i.filter.call(e,c))&&e.view(e.images.indexOf(c))})}}},{key:"build",value:function(){if(!this.ready){var e=this.element,t=this.options,i=e.parentNode,r=document.createElement("div");r.innerHTML=z4;var s=r.querySelector(".".concat(vt,"-container")),a=s.querySelector(".".concat(vt,"-title")),o=s.querySelector(".".concat(vt,"-toolbar")),l=s.querySelector(".".concat(vt,"-navbar")),c=s.querySelector(".".concat(vt,"-button")),h=s.querySelector(".".concat(vt,"-canvas"));if(this.parent=i,this.viewer=s,this.title=a,this.toolbar=o,this.navbar=l,this.button=c,this.canvas=h,this.footer=s.querySelector(".".concat(vt,"-footer")),this.tooltipBox=s.querySelector(".".concat(vt,"-tooltip")),this.player=s.querySelector(".".concat(vt,"-player")),this.list=s.querySelector(".".concat(vt,"-list")),s.id="".concat(vt).concat(this.id),a.id="".concat(vt,"Title").concat(this.id),rt(a,t.title?Vd(Array.isArray(t.title)?t.title[0]:t.title):oo),rt(l,t.navbar?Vd(t.navbar):oo),Su(c,oo,!t.button),t.keyboard&&c.setAttribute("tabindex",0),t.backdrop&&(rt(s,"".concat(vt,"-backdrop")),!t.inline&&t.backdrop!=="static"&&VC(h,Af,"hide")),xu(t.className)&&t.className&&t.className.split(hv).forEach(function(C){rt(s,C)}),t.toolbar){var u=document.createElement("ul"),d=Jl(t.toolbar),g=Od.slice(0,3),f=Od.slice(7,9),m=Od.slice(9);d||rt(o,Vd(t.toolbar)),ei(d?t.toolbar:Od,function(C,v){var I=d&&Jl(C),w=d?uv(v):C,b=I&&!Xl(C.show)?C.show:C;if(!(!b||!t.zoomable&&g.indexOf(w)!==-1||!t.rotatable&&f.indexOf(w)!==-1||!t.scalable&&m.indexOf(w)!==-1)){var _=I&&!Xl(C.size)?C.size:C,x=I&&!Xl(C.click)?C.click:C,y=document.createElement("li");t.keyboard&&y.setAttribute("tabindex",0),y.setAttribute("role","button"),rt(y,"".concat(vt,"-").concat(w)),Kt(x)||VC(y,Af,w),ai(b)&&rt(y,Vd(b)),["small","large"].indexOf(_)!==-1?rt(y,"".concat(vt,"-").concat(_)):w==="play"&&rt(y,"".concat(vt,"-large")),Kt(x)&&at(y,Mc,x),u.appendChild(y)}}),o.appendChild(u)}else rt(o,oo);if(!t.rotatable){var p=o.querySelectorAll('li[class*="rotate"]');rt(p,zh),ei(p,function(C){o.appendChild(C)})}if(t.inline)rt(c,W4),Lr(s,{zIndex:t.zIndexInline}),window.getComputedStyle(i).position==="static"&&Lr(i,{position:"relative"}),i.insertBefore(s,e.nextSibling);else{rt(c,G4),rt(s,QC),rt(s,Dg),rt(s,oo),Lr(s,{zIndex:t.zIndex});var A=t.container;xu(A)&&(A=e.ownerDocument.querySelector(A)),A||(A=this.body),A.appendChild(s)}if(t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,Kt(t.ready)&&at(e,Qb,t.ready,{once:!0}),ui(e,Qb)===!1){this.ready=!1;return}this.ready&&t.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=d5,n}},{key:"setDefaults",value:function(e){Yn(Mb,Jl(e)&&e)}}])})();Yn(zC.prototype,o5,l5,c5,h5,u5);const f5=`/*!
 * Viewer.js v1.11.7
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-11-24T04:32:14.526Z
 */.viewer-zoom-in:before,.viewer-zoom-out:before,.viewer-one-to-one:before,.viewer-reset:before,.viewer-prev:before,.viewer-play:before,.viewer-next:before,.viewer-rotate-left:before,.viewer-rotate-right:before,.viewer-flip-horizontal:before,.viewer-flip-vertical:before,.viewer-fullscreen:before,.viewer-fullscreen-exit:before,.viewer-close:before{background-image:url("data:image/svg+xml,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 viewBox%3D%220 0 560 40%22%3E%3Cpath fill%3D%22%23fff%22 d%3D%22M49.6 17.9h20.2v3.9H49.6zm123.1 2 10.9-11 2.7 2.8-8.2 8.2 8.2 8.2-2.7 2.7-10.9-10.9zm94 0-10.8-11-2.7 2.8 8.1 8.2-8.1 8.2 2.7 2.7 10.8-10.9zM212 9.3l20.1 10.6L212 30.5V9.3zm161.5 4.6-7.2 6 7.2 5.9v-4h12.4v4l7.3-5.9-7.3-6v4h-12.4v-4zm40.2 12.3 5.9 7.2 5.9-7.2h-4V13.6h4l-5.9-7.3-5.9 7.3h4v12.6h-4zm35.9-16.5h6.3v2h-4.3V16h-2V9.7Zm14 0h6.2V16h-2v-4.3h-4.2v-2Zm6.2 14V30h-6.2v-2h4.2v-4.3h2Zm-14 6.3h-6.2v-6.3h2v4.4h4.3v2Zm-438 .1v-8.3H9.6v-3.9h8.2V9.7h3.9v8.2h8.1v3.9h-8.1v8.3h-3.9zM93.6 9.7h-5.8v3.9h2V30h3.8V9.7zm16.1 0h-5.8v3.9h1.9V30h3.9V9.7zm-11.9 4.1h3.9v3.9h-3.9zm0 8.2h3.9v3.9h-3.9zm244.6-11.7 7.2 5.9-7.2 6v-3.6c-5.4-.4-7.8.8-8.7 2.8-.8 1.7-1.8 4.9 2.8 8.2-6.3-2-7.5-6.9-6-11.3 1.6-4.4 8-5 11.9-4.9v-3.1Zm147.2 13.4h6.3V30h-2v-4.3h-4.3v-2zm14 6.3v-6.3h6.2v2h-4.3V30h-1.9zm6.2-14h-6.2V9.7h1.9V14h4.3v2zm-13.9 0h-6.3v-2h4.3V9.7h2V16zm33.3 12.5 8.6-8.6-8.6-8.7 1.9-1.9 8.6 8.7 8.6-8.7 1.9 1.9-8.6 8.7 8.6 8.6-1.9 2-8.6-8.7-8.6 8.7-1.9-2zM297 10.3l-7.1 5.9 7.2 6v-3.6c5.3-.4 7.7.8 8.7 2.8.8 1.7 1.7 4.9-2.9 8.2 6.3-2 7.5-6.9 6-11.3-1.6-4.4-7.9-5-11.8-4.9v-3.1Zm-157.3-.6c2.3 0 4.4.7 6 2l2.5-3 1.9 9.2h-9.3l2.6-3.1a6.2 6.2 0 0 0-9.9 5.1c0 3.4 2.8 6.3 6.2 6.3 2.8 0 5.1-1.9 6-4.4h4c-1 4.7-5 8.3-10 8.3a10 10 0 0 1-10-10.2 10 10 0 0 1 10-10.2Z%22%2F%3E%3C%2Fsvg%3E");background-repeat:no-repeat;background-size:280px;color:transparent;display:block;font-size:0;height:20px;line-height:0;width:20px}.viewer-zoom-in:before{background-position:0 0;content:"Zoom In"}.viewer-zoom-out:before{background-position:-20px 0;content:"Zoom Out"}.viewer-one-to-one:before{background-position:-40px 0;content:"One to One"}.viewer-reset:before{background-position:-60px 0;content:"Reset"}.viewer-prev:before{background-position:-80px 0;content:"Previous"}.viewer-play:before{background-position:-100px 0;content:"Play"}.viewer-next:before{background-position:-120px 0;content:"Next"}.viewer-rotate-left:before{background-position:-140px 0;content:"Rotate Left"}.viewer-rotate-right:before{background-position:-160px 0;content:"Rotate Right"}.viewer-flip-horizontal:before{background-position:-180px 0;content:"Flip Horizontal"}.viewer-flip-vertical:before{background-position:-200px 0;content:"Flip Vertical"}.viewer-fullscreen:before{background-position:-220px 0;content:"Enter Full Screen"}.viewer-fullscreen-exit:before{background-position:-240px 0;content:"Exit Full Screen"}.viewer-close:before{background-position:-260px 0;content:"Close"}.viewer-container{bottom:0;direction:ltr;font-size:0;left:0;line-height:0;overflow:hidden;position:absolute;right:0;-webkit-tap-highlight-color:transparent;top:0;-ms-touch-action:none;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.viewer-container::-moz-selection,.viewer-container *::-moz-selection{background-color:transparent}.viewer-container::selection,.viewer-container *::selection{background-color:transparent}.viewer-container:focus{outline:0}.viewer-container img{display:block;height:auto;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.viewer-canvas{bottom:0;left:0;overflow:hidden;position:absolute;right:0;top:0}.viewer-canvas>img{height:auto;margin:15px auto;max-width:90%!important;width:auto}.viewer-footer{bottom:0;left:0;overflow:hidden;position:absolute;right:0;text-align:center}.viewer-navbar{background-color:#00000080;overflow:hidden}.viewer-list{box-sizing:content-box;height:50px;margin:0;overflow:hidden;padding:1px 0}.viewer-list>li{color:transparent;cursor:pointer;float:left;font-size:0;height:50px;line-height:0;opacity:.5;overflow:hidden;transition:opacity .15s;width:30px}.viewer-list>li:focus,.viewer-list>li:hover{opacity:.75}.viewer-list>li:focus{outline:0}.viewer-list>li+li{margin-left:1px}.viewer-list>.viewer-loading{position:relative}.viewer-list>.viewer-loading:after{border-width:2px;height:20px;margin-left:-10px;margin-top:-10px;width:20px}.viewer-list>.viewer-active,.viewer-list>.viewer-active:focus,.viewer-list>.viewer-active:hover{opacity:1}.viewer-player{background-color:#000;bottom:0;cursor:none;display:none;left:0;position:absolute;right:0;top:0;z-index:1}.viewer-player>img{left:0;position:absolute;top:0}.viewer-toolbar>ul{display:inline-block;margin:0 auto 5px;overflow:hidden;padding:6px 3px}.viewer-toolbar>ul>li{background-color:#00000080;border-radius:50%;cursor:pointer;float:left;height:24px;overflow:hidden;transition:background-color .15s;width:24px}.viewer-toolbar>ul>li:focus,.viewer-toolbar>ul>li:hover{background-color:#000c}.viewer-toolbar>ul>li:focus{box-shadow:0 0 3px #fff;outline:0;position:relative;z-index:1}.viewer-toolbar>ul>li:before{margin:2px}.viewer-toolbar>ul>li+li{margin-left:1px}.viewer-toolbar>ul>.viewer-small{height:18px;margin-bottom:3px;margin-top:3px;width:18px}.viewer-toolbar>ul>.viewer-small:before{margin:-1px}.viewer-toolbar>ul>.viewer-large{height:30px;margin-bottom:-3px;margin-top:-3px;width:30px}.viewer-toolbar>ul>.viewer-large:before{margin:5px}.viewer-tooltip{background-color:#000c;border-radius:10px;color:#fff;display:none;font-size:12px;height:20px;left:50%;line-height:20px;margin-left:-25px;margin-top:-10px;position:absolute;text-align:center;top:50%;width:50px}.viewer-title{color:#ccc;display:inline-block;font-size:12px;line-height:1.2;margin:5px 5%;max-width:90%;min-height:14px;opacity:.8;overflow:hidden;text-overflow:ellipsis;transition:opacity .15s;white-space:nowrap}.viewer-title:hover{opacity:1}.viewer-button{-webkit-app-region:no-drag;background-color:#00000080;border-radius:50%;cursor:pointer;height:80px;overflow:hidden;position:absolute;right:-40px;top:-40px;transition:background-color .15s;width:80px}.viewer-button:focus,.viewer-button:hover{background-color:#000c}.viewer-button:focus{box-shadow:0 0 3px #fff;outline:0}.viewer-button:before{bottom:15px;left:15px;position:absolute}.viewer-fixed{position:fixed}.viewer-open{overflow:hidden}.viewer-show{display:block}.viewer-hide{display:none}.viewer-backdrop{background-color:#00000080}.viewer-invisible{visibility:hidden}.viewer-move{cursor:move;cursor:grab}.viewer-fade{opacity:0}.viewer-in{opacity:1}.viewer-transition{transition:all .3s}@keyframes viewer-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.viewer-loading:after{animation:viewer-spinner 1s linear infinite;border:4px solid rgba(255,255,255,.1);border-left-color:#ffffff80;border-radius:50%;content:"";display:inline-block;height:40px;left:50%;margin-left:-20px;margin-top:-20px;position:absolute;top:50%;width:40px;z-index:1}@media(max-width:767px){.viewer-hide-xs-down{display:none}}@media(max-width:991px){.viewer-hide-sm-down{display:none}}@media(max-width:1199px){.viewer-hide-md-down{display:none}}`;class p5 extends zc{constructor(){super(...arguments),Xe(this,"viewer"),Xe(this,"container"),Xe(this,"imageUrl","")}doOpen(e){this.imageUrl=e,setTimeout(()=>{if(this.container=this.query("#imageContainer")??void 0,!this.container)return;const t=document.createElement("img");t.src=this.imageUrl,t.style.display="none",this.container.appendChild(t),this.viewer=new zC(t,{inline:!0,container:this.container,toolbar:{zoomIn:!0,zoomOut:!0,oneToOne:!0,reset:!0,prev:!1,play:!1,next:!1,rotateLeft:!0,rotateRight:!0,flipHorizontal:!0,flipVertical:!0},navbar:!1,title:!1,keyboard:!0,backdrop:!1,button:!1,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!1,ready:()=>{this.addNavigationListeners()}})},0)}doClose(){this.viewer&&(this.viewer.destroy(),this.viewer=void 0),this.imageUrl=""}getViewerContent(){return`
      <div id="imageContainer">
        ${this.isLoading?'<div class="loading">Loading...</div>':""}
      </div>
    `}getCustomStyles(){return this.css`
      ${f5}
      
      :host {
        --cc-viewer-z-index-each: 1000;
      }
      
      #imageContainer {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: var(--cc-viewer-z-index-each, 1000);
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      /* ViewerJS inline mode adjustments */
      .viewer-container {
        width: 100% !important;
        height: 100% !important;
        position: relative !important;
      }
      
      .viewer-canvas {
        width: 100% !important;
        height: 100% !important;
      }
      
      /* Hide the original image */
      #imageContainer > img {
        display: none !important;
      }
      
      /* Ensure viewer takes full space */
      .viewer-container.viewer-inline {
        width: 100% !important;
        height: 100% !important;
      }
      
      ${this.getNavigationStyles()}
      
      /* Override viewerjs styles for navigation */
      :host ::ng-deep .viewer-container {
        position: relative;
      }
    `}onAfterRender(){if(!this.isShow||!this.imageUrl||this.viewer||(this.container=this.query("#imageContainer"),!this.container))return;const e=document.createElement("img");e.src=this.imageUrl,e.style.display="none",this.container.appendChild(e),this.viewer=new zC(e,{inline:!0,container:this.container,toolbar:{zoomIn:!0,zoomOut:!0,oneToOne:!0,reset:!0,prev:!1,play:!1,next:!1,rotateLeft:!0,rotateRight:!0,flipHorizontal:!0,flipVertical:!0},navbar:!1,title:!1,keyboard:!0,backdrop:!1,button:!1,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!1,ready:()=>{this.isLoading=!1}})}}customElements.get("cc-viewer-image")||customElements.define("cc-viewer-image",p5);class A5 extends zc{constructor(){super(...arguments),Xe(this,"imgUrl","")}static get observedAttributes(){return["show"]}attributeChangedCallback(e,t,i){e==="show"&&(this.isShow=i==="true"),super.attributeChangedCallback(e,t,i)}doOpen(e){this.imgUrl=e}doClose(){const e=this.query(".iframe");e&&(e.srcdoc=""),this.imgUrl=""}getViewerContent(){return'<iframe class="iframe"></iframe>'}getCustomStyles(){return`
      .iframe {
        width: 100%;
        height: 100%;
        border: 0;
      }
    `}onAfterRender(){if(this.imgUrl&&this.isShow){const e=this.query(".iframe");if(e){const t=`
          <!DOCTYPE html>
          <html>
            <head>
              <title>A-Frame Panorama</title>
              <style>
              html,body {
                width:100%;
                height:100vh;
                overflow: hidden;
              }
              .a-enter-vr, .a-enter-ar {
                display: none;
              }
              </style>
              <script src="https://aframe.io/releases/1.4.0/aframe.min.js"><\/script>
            </head>
            <body>
              <a-scene embedded xr-mode-ui="enabled: false; XRMode: false;">
                <a-sky src="${this.imgUrl}" rotation="0 -90 0"></a-sky>
                <a-entity camera look-controls="reverseMouseDrag: true"></a-entity>
              </a-scene>
            </body>
          </html>
        `;e.srcdoc=t}}}}customElements.get("cc-viewer-panorama")||customElements.define("cc-viewer-panorama",A5);class m5 extends zc{constructor(){super(...arguments),Xe(this,"videoUrl","")}static get observedAttributes(){return["show"]}attributeChangedCallback(e,t,i){e==="show"&&(this.isShow=i==="true"),super.attributeChangedCallback(e,t,i)}doOpen(e){const t=this.extractYouTubeId(e);t?this.videoUrl=`https://www.youtube.com/embed/${t}`:this.videoUrl=e}extractYouTubeId(e){const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const i of t){const r=e.match(i);if(r)return r[1]}return null}doClose(){const e=this.query(".iframe");e&&(e.src=""),this.videoUrl=""}getViewerContent(){return`<iframe class="iframe" src="${this.videoUrl}" allowfullscreen></iframe>`}getCustomStyles(){return`
      .iframe {
        position: relative;
        width: 100%;
        height: 100%;
        border: 0;
      }
    `}}customElements.get("cc-viewer-youtube")||customElements.define("cc-viewer-youtube",m5);class C5 extends zc{constructor(){super(...arguments),Xe(this,"videoUrl",""),Xe(this,"fitToContainer",!1)}static get observedAttributes(){return["show","fit-to-container"]}attributeChangedCallback(e,t,i){e==="show"?this.isShow=i==="true":e==="fit-to-container"&&(this.fitToContainer=i==="true"),super.attributeChangedCallback(e,t,i)}doOpen(e){this.videoUrl=e}doClose(){const e=this.query("video");e&&"pause"in e&&e.pause(),this.videoUrl=""}getViewerContent(){return`
      <div class="video-container">
        ${this.videoUrl?`
          <video
            src="${this.videoUrl}"
            controls
            controlsList="nodownload"
            class="${this.fitToContainer?"fit-to-container":""}"
          >
            Your browser does not support the video tag.
          </video>
        `:'<div class="video-error">No video URL provided</div>'}
      </div>
    `}getCustomStyles(){return`
      .video-container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        background: #000;
      }
      
      video {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        outline: none;
      }
      
      video.fit-to-container {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      
      .video-error {
        color: #fff;
        text-align: center;
        padding: 20px;
      }
    `}onAfterRender(){const e=this.query("video");e&&e.addEventListener("error",t=>this.handleVideoError(t))}handleVideoError(e){const t=this.query(".video-container");t&&(t.innerHTML=`
        <div class="video-error">
          Failed to load video: ${this.videoUrl}
        </div>
      `)}}customElements.get("cc-viewer-video")||customElements.define("cc-viewer-video",C5);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const dv="171",dc={ROTATE:0,DOLLY:1,PAN:2},Yl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},I5=0,t_=1,v5=2,lT=1,y5=2,vs=3,Qs=0,Vn=1,Es=2,Da=0,gc=1,i_=2,n_=3,r_=4,w5=5,lo=100,E5=101,b5=102,_5=103,x5=104,S5=200,M5=201,R5=202,T5=203,GC=204,WC=205,U5=206,F5=207,B5=208,D5=209,L5=210,P5=211,N5=212,k5=213,Q5=214,ZC=0,HC=1,XC=2,Tc=3,JC=4,jC=5,YC=6,KC=7,gv=0,O5=1,V5=2,La=0,z5=1,G5=2,W5=3,Z5=4,H5=5,X5=6,J5=7,cT=300,Uc=301,Fc=302,qC=303,$C=304,up=306,mf=1e3,Io=1001,eI=1002,kr=1003,j5=1004,Gd=1005,qr=1006,$A=1007,vo=1008,Os=1009,hT=1010,uT=1011,Mu=1012,fv=1013,zo=1014,bs=1015,nd=1016,pv=1017,Av=1018,Bc=1020,dT=35902,gT=1021,fT=1022,Pr=1023,pT=1024,AT=1025,fc=1026,Dc=1027,mT=1028,mv=1029,CT=1030,Cv=1031,Iv=1033,Pg=33776,Ng=33777,kg=33778,Qg=33779,tI=35840,iI=35841,nI=35842,rI=35843,sI=36196,aI=37492,oI=37496,lI=37808,cI=37809,hI=37810,uI=37811,dI=37812,gI=37813,fI=37814,pI=37815,AI=37816,mI=37817,CI=37818,II=37819,vI=37820,yI=37821,Og=36492,wI=36494,EI=36495,IT=36283,bI=36284,_I=36285,xI=36286,Y5=3200,K5=3201,vT=0,q5=1,ba="",Zi="srgb",Lc="srgb-linear",Cf="linear",Jt="srgb",Il=7680,s_=519,$5=512,eZ=513,tZ=514,yT=515,iZ=516,nZ=517,rZ=518,sZ=519,a_=35044,o_="300 es",_s=2e3,If=2001;class el{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,e);e.target=null}}}const qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Vg=Math.PI/180,SI=180/Math.PI;function rd(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qi[n&255]+qi[n>>8&255]+qi[n>>16&255]+qi[n>>24&255]+"-"+qi[e&255]+qi[e>>8&255]+"-"+qi[e>>16&15|64]+qi[e>>24&255]+"-"+qi[t&63|128]+qi[t>>8&255]+"-"+qi[t>>16&255]+qi[t>>24&255]+qi[i&255]+qi[i>>8&255]+qi[i>>16&255]+qi[i>>24&255]).toLowerCase()}function Et(n,e,t){return Math.max(e,Math.min(t,n))}function aZ(n,e){return(n%e+e)%e}function em(n,e,t){return(1-t)*n+t*e}function nh(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Sn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const oZ={DEG2RAD:Vg};class ct{constructor(e=0,t=0){ct.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Et(this.x,e.x,t.x),this.y=Et(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Et(this.x,e,t),this.y=Et(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Et(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Et(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gt{constructor(e,t,i,r,s,a,o,l,c){gt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const h=this.elements;return h[0]=e,h[1]=r,h[2]=o,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=a,h[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],h=i[4],u=i[7],d=i[2],g=i[5],f=i[8],m=r[0],p=r[3],A=r[6],C=r[1],v=r[4],I=r[7],w=r[2],b=r[5],_=r[8];return s[0]=a*m+o*C+l*w,s[3]=a*p+o*v+l*b,s[6]=a*A+o*I+l*_,s[1]=c*m+h*C+u*w,s[4]=c*p+h*v+u*b,s[7]=c*A+h*I+u*_,s[2]=d*m+g*C+f*w,s[5]=d*p+g*v+f*b,s[8]=d*A+g*I+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8];return t*a*h-t*o*c-i*s*h+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=h*a-o*c,d=o*l-h*s,g=c*s-a*l,f=t*u+i*d+r*g;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=u*m,e[1]=(r*c-h*i)*m,e[2]=(o*i-r*a)*m,e[3]=d*m,e[4]=(h*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=g*m,e[7]=(i*l-c*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(tm.makeScale(e,t)),this}rotate(e){return this.premultiply(tm.makeRotation(-e)),this}translate(e,t){return this.premultiply(tm.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tm=new gt;function wT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Ru(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function lZ(){const n=Ru("canvas");return n.style.display="block",n}const l_={};function Gl(n){n in l_||(l_[n]=!0,console.warn(n))}function cZ(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function hZ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function uZ(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const c_=new gt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),h_=new gt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function dZ(){const n={enabled:!0,workingColorSpace:Lc,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Jt&&(r.r=Fs(r.r),r.g=Fs(r.g),r.b=Fs(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Jt&&(r.r=pc(r.r),r.g=pc(r.g),r.b=pc(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===ba?Cf:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Lc]:{primaries:e,whitePoint:i,transfer:Cf,toXYZ:c_,fromXYZ:h_,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Zi},outputColorSpaceConfig:{drawingBufferColorSpace:Zi}},[Zi]:{primaries:e,whitePoint:i,transfer:Jt,toXYZ:c_,fromXYZ:h_,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Zi}}}),n}const Rt=dZ();function Fs(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function pc(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let vl;class gZ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vl===void 0&&(vl=Ru("canvas")),vl.width=e.width,vl.height=e.height;const i=vl.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=vl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ru("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Fs(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Fs(t[i]/255)*255):t[i]=Fs(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fZ=0;class ET{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fZ++}),this.uuid=rd(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(im(r[a].image)):s.push(im(r[a]))}else s=im(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function im(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?gZ.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pZ=0;class En extends el{constructor(e=En.DEFAULT_IMAGE,t=En.DEFAULT_MAPPING,i=Io,r=Io,s=qr,a=vo,o=Pr,l=Os,c=En.DEFAULT_ANISOTROPY,h=ba){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pZ++}),this.uuid=rd(),this.name="",this.source=new ET(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ct(0,0),this.repeat=new ct(1,1),this.center=new ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cT)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case mf:e.x=e.x-Math.floor(e.x);break;case Io:e.x=e.x<0?0:1;break;case eI:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case mf:e.y=e.y-Math.floor(e.y);break;case Io:e.y=e.y<0?0:1;break;case eI:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=cT;En.DEFAULT_ANISOTROPY=1;class hi{constructor(e=0,t=0,i=0,r=1){hi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const a=e.elements,o=a[0],l=a[4],c=a[8],h=a[1],u=a[5],d=a[9],g=a[2],f=a[6],m=a[10];if(Math.abs(l-h)<.01&&Math.abs(c-g)<.01&&Math.abs(d-f)<.01){if(Math.abs(l+h)<.1&&Math.abs(c+g)<.1&&Math.abs(d+f)<.1&&Math.abs(o+u+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(o+1)/2,C=(u+1)/2,v=(m+1)/2,I=(l+h)/4,w=(c+g)/4,b=(d+f)/4;return A>C&&A>v?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=I/i,s=w/i):C>v?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=I/r,s=b/r):v<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(v),i=w/s,r=b/s),this.set(i,r,s,t),this}let p=Math.sqrt((f-d)*(f-d)+(c-g)*(c-g)+(h-l)*(h-l));return Math.abs(p)<.001&&(p=1),this.x=(f-d)/p,this.y=(c-g)/p,this.z=(h-l)/p,this.w=Math.acos((o+u+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Et(this.x,e.x,t.x),this.y=Et(this.y,e.y,t.y),this.z=Et(this.z,e.z,t.z),this.w=Et(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Et(this.x,e,t),this.y=Et(this.y,e,t),this.z=Et(this.z,e,t),this.w=Et(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Et(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class AZ extends el{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hi(0,0,e,t),this.scissorTest=!1,this.viewport=new hi(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new En(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ET(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Go extends AZ{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class bT extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=kr,this.minFilter=kr,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class mZ extends En{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=kr,this.minFilter=kr,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wo{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],h=i[r+2],u=i[r+3];const d=s[a+0],g=s[a+1],f=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u;return}if(o===1){e[t+0]=d,e[t+1]=g,e[t+2]=f,e[t+3]=m;return}if(u!==m||l!==d||c!==g||h!==f){let p=1-o;const A=l*d+c*g+h*f+u*m,C=A>=0?1:-1,v=1-A*A;if(v>Number.EPSILON){const w=Math.sqrt(v),b=Math.atan2(w,A*C);p=Math.sin(p*b)/w,o=Math.sin(o*b)/w}const I=o*C;if(l=l*p+d*I,c=c*p+g*I,h=h*p+f*I,u=u*p+m*I,p===1-o){const w=1/Math.sqrt(l*l+c*c+h*h+u*u);l*=w,c*=w,h*=w,u*=w}}e[t]=l,e[t+1]=c,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],h=i[r+3],u=s[a],d=s[a+1],g=s[a+2],f=s[a+3];return e[t]=o*f+h*u+l*g-c*d,e[t+1]=l*f+h*d+c*u-o*g,e[t+2]=c*f+h*g+o*d-l*u,e[t+3]=h*f-o*u-l*d-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),h=o(r/2),u=o(s/2),d=l(i/2),g=l(r/2),f=l(s/2);switch(a){case"XYZ":this._x=d*h*u+c*g*f,this._y=c*g*u-d*h*f,this._z=c*h*f+d*g*u,this._w=c*h*u-d*g*f;break;case"YXZ":this._x=d*h*u+c*g*f,this._y=c*g*u-d*h*f,this._z=c*h*f-d*g*u,this._w=c*h*u+d*g*f;break;case"ZXY":this._x=d*h*u-c*g*f,this._y=c*g*u+d*h*f,this._z=c*h*f+d*g*u,this._w=c*h*u-d*g*f;break;case"ZYX":this._x=d*h*u-c*g*f,this._y=c*g*u+d*h*f,this._z=c*h*f-d*g*u,this._w=c*h*u+d*g*f;break;case"YZX":this._x=d*h*u+c*g*f,this._y=c*g*u+d*h*f,this._z=c*h*f-d*g*u,this._w=c*h*u-d*g*f;break;case"XZY":this._x=d*h*u-c*g*f,this._y=c*g*u-d*h*f,this._z=c*h*f+d*g*u,this._w=c*h*u+d*g*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],h=t[6],u=t[10],d=i+o+u;if(d>0){const g=.5/Math.sqrt(d+1);this._w=.25/g,this._x=(h-l)*g,this._y=(s-c)*g,this._z=(a-r)*g}else if(i>o&&i>u){const g=2*Math.sqrt(1+i-o-u);this._w=(h-l)/g,this._x=.25*g,this._y=(r+a)/g,this._z=(s+c)/g}else if(o>u){const g=2*Math.sqrt(1+o-i-u);this._w=(s-c)/g,this._x=(r+a)/g,this._y=.25*g,this._z=(l+h)/g}else{const g=2*Math.sqrt(1+u-i-o);this._w=(a-r)/g,this._x=(s+c)/g,this._y=(l+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Et(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,h=t._w;return this._x=i*h+a*o+r*c-s*l,this._y=r*h+a*l+s*o-i*c,this._z=s*h+a*c+i*l-r*o,this._w=a*h-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const g=1-t;return this._w=g*a+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),h=Math.atan2(c,o),u=Math.sin((1-t)*h)/c,d=Math.sin(t*h)/c;return this._w=a*u+this._w*d,this._x=i*u+this._x*d,this._y=r*u+this._y*d,this._z=s*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ie{constructor(e=0,t=0,i=0){ie.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(u_.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(u_.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),h=2*(o*t-s*r),u=2*(s*i-a*t);return this.x=t+l*c+a*u-o*h,this.y=i+l*h+o*c-s*u,this.z=r+l*u+s*h-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Et(this.x,e.x,t.x),this.y=Et(this.y,e.y,t.y),this.z=Et(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Et(this.x,e,t),this.y=Et(this.y,e,t),this.z=Et(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Et(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return nm.copy(this).projectOnVector(e),this.sub(nm)}reflect(e){return this.sub(nm.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Et(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const nm=new ie,u_=new Wo;class Gc{constructor(e=new ie(1/0,1/0,1/0),t=new ie(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(br.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(br.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=br.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,br):br.fromBufferAttribute(s,a),br.applyMatrix4(e.matrixWorld),this.expandByPoint(br);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wd.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Wd.copy(i.boundingBox)),Wd.applyMatrix4(e.matrixWorld),this.union(Wd)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,br),br.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(rh),Zd.subVectors(this.max,rh),yl.subVectors(e.a,rh),wl.subVectors(e.b,rh),El.subVectors(e.c,rh),la.subVectors(wl,yl),ca.subVectors(El,wl),ja.subVectors(yl,El);let t=[0,-la.z,la.y,0,-ca.z,ca.y,0,-ja.z,ja.y,la.z,0,-la.x,ca.z,0,-ca.x,ja.z,0,-ja.x,-la.y,la.x,0,-ca.y,ca.x,0,-ja.y,ja.x,0];return!rm(t,yl,wl,El,Zd)||(t=[1,0,0,0,1,0,0,0,1],!rm(t,yl,wl,El,Zd))?!1:(Hd.crossVectors(la,ca),t=[Hd.x,Hd.y,Hd.z],rm(t,yl,wl,El,Zd))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,br).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(br).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(gs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gs=[new ie,new ie,new ie,new ie,new ie,new ie,new ie,new ie],br=new ie,Wd=new Gc,yl=new ie,wl=new ie,El=new ie,la=new ie,ca=new ie,ja=new ie,rh=new ie,Zd=new ie,Hd=new ie,Ya=new ie;function rm(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Ya.fromArray(n,s);const o=r.x*Math.abs(Ya.x)+r.y*Math.abs(Ya.y)+r.z*Math.abs(Ya.z),l=e.dot(Ya),c=t.dot(Ya),h=i.dot(Ya);if(Math.max(-Math.max(l,c,h),Math.min(l,c,h))>o)return!1}return!0}const CZ=new Gc,sh=new ie,sm=new ie;class sd{constructor(e=new ie,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):CZ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;sh.subVectors(e,this.center);const t=sh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(sh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sm.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(sh.copy(e.center).add(sm)),this.expandByPoint(sh.copy(e.center).sub(sm))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fs=new ie,am=new ie,Xd=new ie,ha=new ie,om=new ie,Jd=new ie,lm=new ie;class dp{constructor(e=new ie,t=new ie(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fs.copy(this.origin).addScaledVector(this.direction,t),fs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){am.copy(e).add(t).multiplyScalar(.5),Xd.copy(t).sub(e).normalize(),ha.copy(this.origin).sub(am);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Xd),o=ha.dot(this.direction),l=-ha.dot(Xd),c=ha.lengthSq(),h=Math.abs(1-a*a);let u,d,g,f;if(h>0)if(u=a*l-o,d=a*o-l,f=s*h,u>=0)if(d>=-f)if(d<=f){const m=1/h;u*=m,d*=m,g=u*(u+a*d+2*o)+d*(a*u+d+2*l)+c}else d=s,u=Math.max(0,-(a*d+o)),g=-u*u+d*(d+2*l)+c;else d=-s,u=Math.max(0,-(a*d+o)),g=-u*u+d*(d+2*l)+c;else d<=-f?(u=Math.max(0,-(-a*s+o)),d=u>0?-s:Math.min(Math.max(-s,-l),s),g=-u*u+d*(d+2*l)+c):d<=f?(u=0,d=Math.min(Math.max(-s,-l),s),g=d*(d+2*l)+c):(u=Math.max(0,-(a*s+o)),d=u>0?s:Math.min(Math.max(-s,-l),s),g=-u*u+d*(d+2*l)+c);else d=a>0?-s:s,u=Math.max(0,-(a*d+o)),g=-u*u+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(am).addScaledVector(Xd,d),g}intersectSphere(e,t){fs.subVectors(e.center,this.origin);const i=fs.dot(this.direction),r=fs.dot(fs)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),h>=0?(s=(e.min.y-d.y)*h,a=(e.max.y-d.y)*h):(s=(e.max.y-d.y)*h,a=(e.min.y-d.y)*h),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),u>=0?(o=(e.min.z-d.z)*u,l=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,l=(e.min.z-d.z)*u),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,fs)!==null}intersectTriangle(e,t,i,r,s){om.subVectors(t,e),Jd.subVectors(i,e),lm.crossVectors(om,Jd);let a=this.direction.dot(lm),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;ha.subVectors(this.origin,e);const l=o*this.direction.dot(Jd.crossVectors(ha,Jd));if(l<0)return null;const c=o*this.direction.dot(om.cross(ha));if(c<0||l+c>a)return null;const h=-o*ha.dot(lm);return h<0?null:this.at(h/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ni{constructor(e,t,i,r,s,a,o,l,c,h,u,d,g,f,m,p){ni.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,h,u,d,g,f,m,p)}set(e,t,i,r,s,a,o,l,c,h,u,d,g,f,m,p){const A=this.elements;return A[0]=e,A[4]=t,A[8]=i,A[12]=r,A[1]=s,A[5]=a,A[9]=o,A[13]=l,A[2]=c,A[6]=h,A[10]=u,A[14]=d,A[3]=g,A[7]=f,A[11]=m,A[15]=p,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ni().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/bl.setFromMatrixColumn(e,0).length(),s=1/bl.setFromMatrixColumn(e,1).length(),a=1/bl.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),h=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const d=a*h,g=a*u,f=o*h,m=o*u;t[0]=l*h,t[4]=-l*u,t[8]=c,t[1]=g+f*c,t[5]=d-m*c,t[9]=-o*l,t[2]=m-d*c,t[6]=f+g*c,t[10]=a*l}else if(e.order==="YXZ"){const d=l*h,g=l*u,f=c*h,m=c*u;t[0]=d+m*o,t[4]=f*o-g,t[8]=a*c,t[1]=a*u,t[5]=a*h,t[9]=-o,t[2]=g*o-f,t[6]=m+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*h,g=l*u,f=c*h,m=c*u;t[0]=d-m*o,t[4]=-a*u,t[8]=f+g*o,t[1]=g+f*o,t[5]=a*h,t[9]=m-d*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*h,g=a*u,f=o*h,m=o*u;t[0]=l*h,t[4]=f*c-g,t[8]=d*c+m,t[1]=l*u,t[5]=m*c+d,t[9]=g*c-f,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,g=a*c,f=o*l,m=o*c;t[0]=l*h,t[4]=m-d*u,t[8]=f*u+g,t[1]=u,t[5]=a*h,t[9]=-o*h,t[2]=-c*h,t[6]=g*u+f,t[10]=d-m*u}else if(e.order==="XZY"){const d=a*l,g=a*c,f=o*l,m=o*c;t[0]=l*h,t[4]=-u,t[8]=c*h,t[1]=d*u+m,t[5]=a*h,t[9]=g*u-f,t[2]=f*u-g,t[6]=o*h,t[10]=m*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(IZ,e,vZ)}lookAt(e,t,i){const r=this.elements;return Zn.subVectors(e,t),Zn.lengthSq()===0&&(Zn.z=1),Zn.normalize(),ua.crossVectors(i,Zn),ua.lengthSq()===0&&(Math.abs(i.z)===1?Zn.x+=1e-4:Zn.z+=1e-4,Zn.normalize(),ua.crossVectors(i,Zn)),ua.normalize(),jd.crossVectors(Zn,ua),r[0]=ua.x,r[4]=jd.x,r[8]=Zn.x,r[1]=ua.y,r[5]=jd.y,r[9]=Zn.y,r[2]=ua.z,r[6]=jd.z,r[10]=Zn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],h=i[1],u=i[5],d=i[9],g=i[13],f=i[2],m=i[6],p=i[10],A=i[14],C=i[3],v=i[7],I=i[11],w=i[15],b=r[0],_=r[4],x=r[8],y=r[12],E=r[1],S=r[5],R=r[9],M=r[13],T=r[2],P=r[6],F=r[10],N=r[14],L=r[3],W=r[7],ne=r[11],de=r[15];return s[0]=a*b+o*E+l*T+c*L,s[4]=a*_+o*S+l*P+c*W,s[8]=a*x+o*R+l*F+c*ne,s[12]=a*y+o*M+l*N+c*de,s[1]=h*b+u*E+d*T+g*L,s[5]=h*_+u*S+d*P+g*W,s[9]=h*x+u*R+d*F+g*ne,s[13]=h*y+u*M+d*N+g*de,s[2]=f*b+m*E+p*T+A*L,s[6]=f*_+m*S+p*P+A*W,s[10]=f*x+m*R+p*F+A*ne,s[14]=f*y+m*M+p*N+A*de,s[3]=C*b+v*E+I*T+w*L,s[7]=C*_+v*S+I*P+w*W,s[11]=C*x+v*R+I*F+w*ne,s[15]=C*y+v*M+I*N+w*de,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],h=e[2],u=e[6],d=e[10],g=e[14],f=e[3],m=e[7],p=e[11],A=e[15];return f*(+s*l*u-r*c*u-s*o*d+i*c*d+r*o*g-i*l*g)+m*(+t*l*g-t*c*d+s*a*d-r*a*g+r*c*h-s*l*h)+p*(+t*c*u-t*o*g-s*a*u+i*a*g+s*o*h-i*c*h)+A*(-r*o*h-t*l*u+t*o*d+r*a*u-i*a*d+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],u=e[9],d=e[10],g=e[11],f=e[12],m=e[13],p=e[14],A=e[15],C=u*p*c-m*d*c+m*l*g-o*p*g-u*l*A+o*d*A,v=f*d*c-h*p*c-f*l*g+a*p*g+h*l*A-a*d*A,I=h*m*c-f*u*c+f*o*g-a*m*g-h*o*A+a*u*A,w=f*u*l-h*m*l-f*o*d+a*m*d+h*o*p-a*u*p,b=t*C+i*v+r*I+s*w;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/b;return e[0]=C*_,e[1]=(m*d*s-u*p*s-m*r*g+i*p*g+u*r*A-i*d*A)*_,e[2]=(o*p*s-m*l*s+m*r*c-i*p*c-o*r*A+i*l*A)*_,e[3]=(u*l*s-o*d*s-u*r*c+i*d*c+o*r*g-i*l*g)*_,e[4]=v*_,e[5]=(h*p*s-f*d*s+f*r*g-t*p*g-h*r*A+t*d*A)*_,e[6]=(f*l*s-a*p*s-f*r*c+t*p*c+a*r*A-t*l*A)*_,e[7]=(a*d*s-h*l*s+h*r*c-t*d*c-a*r*g+t*l*g)*_,e[8]=I*_,e[9]=(f*u*s-h*m*s-f*i*g+t*m*g+h*i*A-t*u*A)*_,e[10]=(a*m*s-f*o*s+f*i*c-t*m*c-a*i*A+t*o*A)*_,e[11]=(h*o*s-a*u*s-h*i*c+t*u*c+a*i*g-t*o*g)*_,e[12]=w*_,e[13]=(h*m*r-f*u*r+f*i*d-t*m*d-h*i*p+t*u*p)*_,e[14]=(f*o*r-a*m*r-f*i*l+t*m*l+a*i*p-t*o*p)*_,e[15]=(a*u*r-h*o*r+h*i*l-t*u*l-a*i*d+t*o*d)*_,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,h=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,h*o+i,h*l-r*a,0,c*l-r*o,h*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,h=a+a,u=o+o,d=s*c,g=s*h,f=s*u,m=a*h,p=a*u,A=o*u,C=l*c,v=l*h,I=l*u,w=i.x,b=i.y,_=i.z;return r[0]=(1-(m+A))*w,r[1]=(g+I)*w,r[2]=(f-v)*w,r[3]=0,r[4]=(g-I)*b,r[5]=(1-(d+A))*b,r[6]=(p+C)*b,r[7]=0,r[8]=(f+v)*_,r[9]=(p-C)*_,r[10]=(1-(d+m))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=bl.set(r[0],r[1],r[2]).length();const a=bl.set(r[4],r[5],r[6]).length(),o=bl.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],_r.copy(this);const l=1/s,c=1/a,h=1/o;return _r.elements[0]*=l,_r.elements[1]*=l,_r.elements[2]*=l,_r.elements[4]*=c,_r.elements[5]*=c,_r.elements[6]*=c,_r.elements[8]*=h,_r.elements[9]*=h,_r.elements[10]*=h,t.setFromRotationMatrix(_r),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=_s){const l=this.elements,c=2*s/(t-e),h=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r);let g,f;if(o===_s)g=-(a+s)/(a-s),f=-2*a*s/(a-s);else if(o===If)g=-a/(a-s),f=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=h,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=_s){const l=this.elements,c=1/(t-e),h=1/(i-r),u=1/(a-s),d=(t+e)*c,g=(i+r)*h;let f,m;if(o===_s)f=(a+s)*u,m=-2*u;else if(o===If)f=s*u,m=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const bl=new ie,_r=new ni,IZ=new ie(0,0,0),vZ=new ie(1,1,1),ua=new ie,jd=new ie,Zn=new ie,d_=new ni,g_=new Wo;class ss{constructor(e=0,t=0,i=0,r=ss.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],h=r[9],u=r[2],d=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(Et(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Et(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(Et(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,g),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Et(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Et(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-Et(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return d_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d_,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return g_.setFromEuler(this),this.setFromQuaternion(g_,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ss.DEFAULT_ORDER="XYZ";class _T{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let yZ=0;const f_=new ie,_l=new Wo,ps=new ni,Yd=new ie,ah=new ie,wZ=new ie,EZ=new Wo,p_=new ie(1,0,0),A_=new ie(0,1,0),m_=new ie(0,0,1),C_={type:"added"},bZ={type:"removed"},xl={type:"childadded",child:null},cm={type:"childremoved",child:null};class Oi extends el{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yZ++}),this.uuid=rd(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Oi.DEFAULT_UP.clone();const e=new ie,t=new ss,i=new Wo,r=new ie(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ni},normalMatrix:{value:new gt}}),this.matrix=new ni,this.matrixWorld=new ni,this.matrixAutoUpdate=Oi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Oi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _T,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _l.setFromAxisAngle(e,t),this.quaternion.multiply(_l),this}rotateOnWorldAxis(e,t){return _l.setFromAxisAngle(e,t),this.quaternion.premultiply(_l),this}rotateX(e){return this.rotateOnAxis(p_,e)}rotateY(e){return this.rotateOnAxis(A_,e)}rotateZ(e){return this.rotateOnAxis(m_,e)}translateOnAxis(e,t){return f_.copy(e).applyQuaternion(this.quaternion),this.position.add(f_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(p_,e)}translateY(e){return this.translateOnAxis(A_,e)}translateZ(e){return this.translateOnAxis(m_,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ps.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Yd.copy(e):Yd.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ah.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ps.lookAt(ah,Yd,this.up):ps.lookAt(Yd,ah,this.up),this.quaternion.setFromRotationMatrix(ps),r&&(ps.extractRotation(r.matrixWorld),_l.setFromRotationMatrix(ps),this.quaternion.premultiply(_l.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(C_),xl.child=e,this.dispatchEvent(xl),xl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(bZ),cm.child=e,this.dispatchEvent(cm),cm.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ps.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ps.multiply(e.parent.matrixWorld)),e.applyMatrix4(ps),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(C_),xl.child=e,this.dispatchEvent(xl),xl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ah,e,wZ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ah,EZ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,h=l.length;c<h;c++){const u=l[c];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),h=a(e.images),u=a(e.shapes),d=a(e.skeletons),g=a(e.animations),f=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),h.length>0&&(i.images=h),u.length>0&&(i.shapes=u),d.length>0&&(i.skeletons=d),g.length>0&&(i.animations=g),f.length>0&&(i.nodes=f)}return i.object=r,i;function a(o){const l=[];for(const c in o){const h=o[c];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Oi.DEFAULT_UP=new ie(0,1,0);Oi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Oi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xr=new ie,As=new ie,hm=new ie,ms=new ie,Sl=new ie,Ml=new ie,I_=new ie,um=new ie,dm=new ie,gm=new ie,fm=new hi,pm=new hi,Am=new hi;class Fr{constructor(e=new ie,t=new ie,i=new ie){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),xr.subVectors(e,t),r.cross(xr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){xr.subVectors(r,t),As.subVectors(i,t),hm.subVectors(e,t);const a=xr.dot(xr),o=xr.dot(As),l=xr.dot(hm),c=As.dot(As),h=As.dot(hm),u=a*c-o*o;if(u===0)return s.set(0,0,0),null;const d=1/u,g=(c*l-o*h)*d,f=(a*h-o*l)*d;return s.set(1-g-f,f,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ms)===null?!1:ms.x>=0&&ms.y>=0&&ms.x+ms.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,ms)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ms.x),l.addScaledVector(a,ms.y),l.addScaledVector(o,ms.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return fm.setScalar(0),pm.setScalar(0),Am.setScalar(0),fm.fromBufferAttribute(e,t),pm.fromBufferAttribute(e,i),Am.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(fm,s.x),a.addScaledVector(pm,s.y),a.addScaledVector(Am,s.z),a}static isFrontFacing(e,t,i,r){return xr.subVectors(i,t),As.subVectors(e,t),xr.cross(As).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xr.subVectors(this.c,this.b),As.subVectors(this.a,this.b),xr.cross(As).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Fr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Fr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Sl.subVectors(r,i),Ml.subVectors(s,i),um.subVectors(e,i);const l=Sl.dot(um),c=Ml.dot(um);if(l<=0&&c<=0)return t.copy(i);dm.subVectors(e,r);const h=Sl.dot(dm),u=Ml.dot(dm);if(h>=0&&u<=h)return t.copy(r);const d=l*u-h*c;if(d<=0&&l>=0&&h<=0)return a=l/(l-h),t.copy(i).addScaledVector(Sl,a);gm.subVectors(e,s);const g=Sl.dot(gm),f=Ml.dot(gm);if(f>=0&&g<=f)return t.copy(s);const m=g*c-l*f;if(m<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(i).addScaledVector(Ml,o);const p=h*f-g*u;if(p<=0&&u-h>=0&&g-f>=0)return I_.subVectors(s,r),o=(u-h)/(u-h+(g-f)),t.copy(r).addScaledVector(I_,o);const A=1/(p+m+d);return a=m*A,o=d*A,t.copy(i).addScaledVector(Sl,a).addScaledVector(Ml,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const xT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},da={h:0,s:0,l:0},Kd={h:0,s:0,l:0};function mm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class mt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Rt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Rt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Rt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Rt.workingColorSpace){if(e=aZ(e,1),t=Et(t,0,1),i=Et(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=mm(a,s,e+1/3),this.g=mm(a,s,e),this.b=mm(a,s,e-1/3)}return Rt.toWorkingColorSpace(this,r),this}setStyle(e,t=Zi){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zi){const i=xT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Fs(e.r),this.g=Fs(e.g),this.b=Fs(e.b),this}copyLinearToSRGB(e){return this.r=pc(e.r),this.g=pc(e.g),this.b=pc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zi){return Rt.fromWorkingColorSpace($i.copy(this),e),Math.round(Et($i.r*255,0,255))*65536+Math.round(Et($i.g*255,0,255))*256+Math.round(Et($i.b*255,0,255))}getHexString(e=Zi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rt.workingColorSpace){Rt.fromWorkingColorSpace($i.copy(this),t);const i=$i.r,r=$i.g,s=$i.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const h=(o+a)/2;if(o===a)l=0,c=0;else{const u=a-o;switch(c=h<=.5?u/(a+o):u/(2-a-o),a){case i:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-i)/u+2;break;case s:l=(i-r)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=h,e}getRGB(e,t=Rt.workingColorSpace){return Rt.fromWorkingColorSpace($i.copy(this),t),e.r=$i.r,e.g=$i.g,e.b=$i.b,e}getStyle(e=Zi){Rt.fromWorkingColorSpace($i.copy(this),e);const t=$i.r,i=$i.g,r=$i.b;return e!==Zi?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(da),this.setHSL(da.h+e,da.s+t,da.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(da),e.getHSL(Kd);const i=em(da.h,Kd.h,t),r=em(da.s,Kd.s,t),s=em(da.l,Kd.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $i=new mt;mt.NAMES=xT;let _Z=0;class Vs extends el{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_Z++}),this.uuid=rd(),this.name="",this.type="Material",this.blending=gc,this.side=Qs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=GC,this.blendDst=WC,this.blendEquation=lo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mt(0,0,0),this.blendAlpha=0,this.depthFunc=Tc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=s_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Il,this.stencilZFail=Il,this.stencilZPass=Il,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==gc&&(i.blending=this.blending),this.side!==Qs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==GC&&(i.blendSrc=this.blendSrc),this.blendDst!==WC&&(i.blendDst=this.blendDst),this.blendEquation!==lo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Tc&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==s_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Il&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Il&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Il&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ST extends Vs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ss,this.combine=gv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const mi=new ie,qd=new ct;class is{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=a_,this.updateRanges=[],this.gpuType=bs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)qd.fromBufferAttribute(this,t),qd.applyMatrix3(e),this.setXY(t,qd.x,qd.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix3(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix4(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyNormalMatrix(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.transformDirection(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=nh(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Sn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=nh(t,this.array)),t}setX(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=nh(t,this.array)),t}setY(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=nh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=nh(t,this.array)),t}setW(e,t){return this.normalized&&(t=Sn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Sn(t,this.array),i=Sn(i,this.array),r=Sn(r,this.array),s=Sn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==a_&&(e.usage=this.usage),e}}class MT extends is{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class RT extends is{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class mn extends is{constructor(e,t,i){super(new Float32Array(e),t,i)}}let xZ=0;const nr=new ni,Cm=new Oi,Rl=new ie,Hn=new Gc,oh=new Gc,Li=new ie;class Vr extends el{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:xZ++}),this.uuid=rd(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(wT(e)?RT:MT)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new gt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return nr.makeRotationFromQuaternion(e),this.applyMatrix4(nr),this}rotateX(e){return nr.makeRotationX(e),this.applyMatrix4(nr),this}rotateY(e){return nr.makeRotationY(e),this.applyMatrix4(nr),this}rotateZ(e){return nr.makeRotationZ(e),this.applyMatrix4(nr),this}translate(e,t,i){return nr.makeTranslation(e,t,i),this.applyMatrix4(nr),this}scale(e,t,i){return nr.makeScale(e,t,i),this.applyMatrix4(nr),this}lookAt(e){return Cm.lookAt(e),Cm.updateMatrix(),this.applyMatrix4(Cm.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rl).negate(),this.translate(Rl.x,Rl.y,Rl.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new mn(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Gc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ie(-1/0,-1/0,-1/0),new ie(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Hn.setFromBufferAttribute(s),this.morphTargetsRelative?(Li.addVectors(this.boundingBox.min,Hn.min),this.boundingBox.expandByPoint(Li),Li.addVectors(this.boundingBox.max,Hn.max),this.boundingBox.expandByPoint(Li)):(this.boundingBox.expandByPoint(Hn.min),this.boundingBox.expandByPoint(Hn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new sd);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ie,1/0);return}if(e){const i=this.boundingSphere.center;if(Hn.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];oh.setFromBufferAttribute(o),this.morphTargetsRelative?(Li.addVectors(Hn.min,oh.min),Hn.expandByPoint(Li),Li.addVectors(Hn.max,oh.max),Hn.expandByPoint(Li)):(Hn.expandByPoint(oh.min),Hn.expandByPoint(oh.max))}Hn.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Li.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Li));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,h=o.count;c<h;c++)Li.fromBufferAttribute(o,c),l&&(Rl.fromBufferAttribute(e,c),Li.add(Rl)),r=Math.max(r,i.distanceToSquared(Li))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new is(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let x=0;x<i.count;x++)o[x]=new ie,l[x]=new ie;const c=new ie,h=new ie,u=new ie,d=new ct,g=new ct,f=new ct,m=new ie,p=new ie;function A(x,y,E){c.fromBufferAttribute(i,x),h.fromBufferAttribute(i,y),u.fromBufferAttribute(i,E),d.fromBufferAttribute(s,x),g.fromBufferAttribute(s,y),f.fromBufferAttribute(s,E),h.sub(c),u.sub(c),g.sub(d),f.sub(d);const S=1/(g.x*f.y-f.x*g.y);isFinite(S)&&(m.copy(h).multiplyScalar(f.y).addScaledVector(u,-g.y).multiplyScalar(S),p.copy(u).multiplyScalar(g.x).addScaledVector(h,-f.x).multiplyScalar(S),o[x].add(m),o[y].add(m),o[E].add(m),l[x].add(p),l[y].add(p),l[E].add(p))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let x=0,y=C.length;x<y;++x){const E=C[x],S=E.start,R=E.count;for(let M=S,T=S+R;M<T;M+=3)A(e.getX(M+0),e.getX(M+1),e.getX(M+2))}const v=new ie,I=new ie,w=new ie,b=new ie;function _(x){w.fromBufferAttribute(r,x),b.copy(w);const y=o[x];v.copy(y),v.sub(w.multiplyScalar(w.dot(y))).normalize(),I.crossVectors(b,y);const E=I.dot(l[x])<0?-1:1;a.setXYZW(x,v.x,v.y,v.z,E)}for(let x=0,y=C.length;x<y;++x){const E=C[x],S=E.start,R=E.count;for(let M=S,T=S+R;M<T;M+=3)_(e.getX(M+0)),_(e.getX(M+1)),_(e.getX(M+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new is(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,g=i.count;d<g;d++)i.setXYZ(d,0,0,0);const r=new ie,s=new ie,a=new ie,o=new ie,l=new ie,c=new ie,h=new ie,u=new ie;if(e)for(let d=0,g=e.count;d<g;d+=3){const f=e.getX(d+0),m=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,p),h.subVectors(a,s),u.subVectors(r,s),h.cross(u),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,p),o.add(h),l.add(h),c.add(h),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(p,c.x,c.y,c.z)}else for(let d=0,g=t.count;d<g;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),h.subVectors(a,s),u.subVectors(r,s),h.cross(u),i.setXYZ(d+0,h.x,h.y,h.z),i.setXYZ(d+1,h.x,h.y,h.z),i.setXYZ(d+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Li.fromBufferAttribute(e,t),Li.normalize(),e.setXYZ(t,Li.x,Li.y,Li.z)}toNonIndexed(){function e(o,l){const c=o.array,h=o.itemSize,u=o.normalized,d=new c.constructor(l.length*h);let g=0,f=0;for(let m=0,p=l.length;m<p;m++){o.isInterleavedBufferAttribute?g=l[m]*o.data.stride+o.offset:g=l[m]*h;for(let A=0;A<h;A++)d[f++]=c[g++]}return new is(d,h,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vr,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let h=0,u=c.length;h<u;h++){const d=c[h],g=e(d,i);l.push(g)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],h=[];for(let u=0,d=c.length;u<d;u++){const g=c[u];h.push(g.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const h=r[c];this.setAttribute(c,h.clone(t))}const s=e.morphAttributes;for(const c in s){const h=[],u=s[c];for(let d=0,g=u.length;d<g;d++)h.push(u[d].clone(t));this.morphAttributes[c]=h}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,h=a.length;c<h;c++){const u=a[c];this.addGroup(u.start,u.count,u.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const v_=new ni,Ka=new dp,$d=new sd,y_=new ie,eg=new ie,tg=new ie,ig=new ie,Im=new ie,ng=new ie,w_=new ie,rg=new ie;class kn extends Oi{constructor(e=new Vr,t=new ST){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){ng.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const h=o[l],u=s[l];h!==0&&(Im.fromBufferAttribute(u,e),a?ng.addScaledVector(Im,h):ng.addScaledVector(Im.sub(t),h))}t.add(ng)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),$d.copy(i.boundingSphere),$d.applyMatrix4(s),Ka.copy(e.ray).recast(e.near),!($d.containsPoint(Ka.origin)===!1&&(Ka.intersectSphere($d,y_)===null||Ka.origin.distanceToSquared(y_)>(e.far-e.near)**2))&&(v_.copy(s).invert(),Ka.copy(e.ray).applyMatrix4(v_),!(i.boundingBox!==null&&Ka.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ka)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,h=s.attributes.uv1,u=s.attributes.normal,d=s.groups,g=s.drawRange;if(o!==null)if(Array.isArray(a))for(let f=0,m=d.length;f<m;f++){const p=d[f],A=a[p.materialIndex],C=Math.max(p.start,g.start),v=Math.min(o.count,Math.min(p.start+p.count,g.start+g.count));for(let I=C,w=v;I<w;I+=3){const b=o.getX(I),_=o.getX(I+1),x=o.getX(I+2);r=sg(this,A,e,i,c,h,u,b,_,x),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=p.materialIndex,t.push(r))}}else{const f=Math.max(0,g.start),m=Math.min(o.count,g.start+g.count);for(let p=f,A=m;p<A;p+=3){const C=o.getX(p),v=o.getX(p+1),I=o.getX(p+2);r=sg(this,a,e,i,c,h,u,C,v,I),r&&(r.faceIndex=Math.floor(p/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let f=0,m=d.length;f<m;f++){const p=d[f],A=a[p.materialIndex],C=Math.max(p.start,g.start),v=Math.min(l.count,Math.min(p.start+p.count,g.start+g.count));for(let I=C,w=v;I<w;I+=3){const b=I,_=I+1,x=I+2;r=sg(this,A,e,i,c,h,u,b,_,x),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=p.materialIndex,t.push(r))}}else{const f=Math.max(0,g.start),m=Math.min(l.count,g.start+g.count);for(let p=f,A=m;p<A;p+=3){const C=p,v=p+1,I=p+2;r=sg(this,a,e,i,c,h,u,C,v,I),r&&(r.faceIndex=Math.floor(p/3),t.push(r))}}}}function SZ(n,e,t,i,r,s,a,o){let l;if(e.side===Vn?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Qs,o),l===null)return null;rg.copy(o),rg.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(rg);return c<t.near||c>t.far?null:{distance:c,point:rg.clone(),object:n}}function sg(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,eg),n.getVertexPosition(l,tg),n.getVertexPosition(c,ig);const h=SZ(n,e,t,i,eg,tg,ig,w_);if(h){const u=new ie;Fr.getBarycoord(w_,eg,tg,ig,u),r&&(h.uv=Fr.getInterpolatedAttribute(r,o,l,c,u,new ct)),s&&(h.uv1=Fr.getInterpolatedAttribute(s,o,l,c,u,new ct)),a&&(h.normal=Fr.getInterpolatedAttribute(a,o,l,c,u,new ie),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new ie,materialIndex:0};Fr.getNormal(eg,tg,ig,d.normal),h.face=d,h.barycoord=u}return h}class ad extends Vr{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],h=[],u=[];let d=0,g=0;f("z","y","x",-1,-1,i,t,e,a,s,0),f("z","y","x",1,-1,i,t,-e,a,s,1),f("x","z","y",1,1,e,i,t,r,a,2),f("x","z","y",1,-1,e,i,-t,r,a,3),f("x","y","z",1,-1,e,t,i,r,s,4),f("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new mn(c,3)),this.setAttribute("normal",new mn(h,3)),this.setAttribute("uv",new mn(u,2));function f(m,p,A,C,v,I,w,b,_,x,y){const E=I/_,S=w/x,R=I/2,M=w/2,T=b/2,P=_+1,F=x+1;let N=0,L=0;const W=new ie;for(let ne=0;ne<F;ne++){const de=ne*S-M;for(let ee=0;ee<P;ee++){const Me=ee*E-R;W[m]=Me*C,W[p]=de*v,W[A]=T,c.push(W.x,W.y,W.z),W[m]=0,W[p]=0,W[A]=b>0?1:-1,h.push(W.x,W.y,W.z),u.push(ee/_),u.push(1-ne/x),N+=1}}for(let ne=0;ne<x;ne++)for(let de=0;de<_;de++){const ee=d+de+P*ne,Me=d+de+P*(ne+1),G=d+(de+1)+P*(ne+1),te=d+(de+1)+P*ne;l.push(ee,Me,te),l.push(Me,G,te),L+=6}o.addGroup(g,L,y),g+=L,d+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function gn(n){const e={};for(let t=0;t<n.length;t++){const i=Pc(n[t]);for(const r in i)e[r]=i[r]}return e}function MZ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function TT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Rt.workingColorSpace}const RZ={clone:Pc,merge:gn};var TZ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,UZ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qa extends Vs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=TZ,this.fragmentShader=UZ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pc(e.uniforms),this.uniformsGroups=MZ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class UT extends Oi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ni,this.projectionMatrix=new ni,this.projectionMatrixInverse=new ni,this.coordinateSystem=_s}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ga=new ie,E_=new ct,b_=new ct;class ar extends UT{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=SI*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return SI*2*Math.atan(Math.tan(Vg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ga.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ga.x,ga.y).multiplyScalar(-e/ga.z),ga.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ga.x,ga.y).multiplyScalar(-e/ga.z)}getViewSize(e,t){return this.getViewBounds(e,E_,b_),t.subVectors(b_,E_)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Vg*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Tl=-90,Ul=1;class FZ extends Oi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ar(Tl,Ul,e,t);r.layers=this.layers,this.add(r);const s=new ar(Tl,Ul,e,t);s.layers=this.layers,this.add(s);const a=new ar(Tl,Ul,e,t);a.layers=this.layers,this.add(a);const o=new ar(Tl,Ul,e,t);o.layers=this.layers,this.add(o);const l=new ar(Tl,Ul,e,t);l.layers=this.layers,this.add(l);const c=new ar(Tl,Ul,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===_s)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===If)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,h]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(u,d,g),e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class FT extends En{constructor(e,t,i,r,s,a,o,l,c,h){e=e!==void 0?e:[],t=t!==void 0?t:Uc,super(e,t,i,r,s,a,o,l,c,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class BZ extends Go{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new FT(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ad(5,5,5),s=new Qa({name:"CubemapFromEquirect",uniforms:Pc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Vn,blending:Da});s.uniforms.tEquirect.value=t;const a=new kn(r,s),o=t.minFilter;return t.minFilter===vo&&(t.minFilter=qr),new FZ(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class DZ extends Oi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ss,this.environmentIntensity=1,this.environmentRotation=new ss,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const vm=new ie,LZ=new ie,PZ=new gt;class va{constructor(e=new ie(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=vm.subVectors(i,t).cross(LZ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(vm),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||PZ.getNormalMatrix(e),r=this.coplanarPoint(vm).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qa=new sd,ag=new ie;class vv{constructor(e=new va,t=new va,i=new va,r=new va,s=new va,a=new va){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=_s){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],h=r[5],u=r[6],d=r[7],g=r[8],f=r[9],m=r[10],p=r[11],A=r[12],C=r[13],v=r[14],I=r[15];if(i[0].setComponents(l-s,d-c,p-g,I-A).normalize(),i[1].setComponents(l+s,d+c,p+g,I+A).normalize(),i[2].setComponents(l+a,d+h,p+f,I+C).normalize(),i[3].setComponents(l-a,d-h,p-f,I-C).normalize(),i[4].setComponents(l-o,d-u,p-m,I-v).normalize(),t===_s)i[5].setComponents(l+o,d+u,p+m,I+v).normalize();else if(t===If)i[5].setComponents(o,u,m,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qa)}intersectsSprite(e){return qa.center.set(0,0,0),qa.radius=.7071067811865476,qa.applyMatrix4(e.matrixWorld),this.intersectsSphere(qa)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ag.x=r.normal.x>0?e.max.x:e.min.x,ag.y=r.normal.y>0?e.max.y:e.min.y,ag.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ag)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class zg extends Vs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const vf=new ie,yf=new ie,__=new ni,lh=new dp,og=new sd,ym=new ie,x_=new ie;class NZ extends Oi{constructor(e=new Vr,t=new zg){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)vf.fromBufferAttribute(t,r-1),yf.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=vf.distanceTo(yf);e.setAttribute("lineDistance",new mn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),og.copy(i.boundingSphere),og.applyMatrix4(r),og.radius+=s,e.ray.intersectsSphere(og)===!1)return;__.copy(r).invert(),lh.copy(e.ray).applyMatrix4(__);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=this.isLineSegments?2:1,h=i.index,u=i.attributes.position;if(h!==null){const d=Math.max(0,a.start),g=Math.min(h.count,a.start+a.count);for(let f=d,m=g-1;f<m;f+=c){const p=h.getX(f),A=h.getX(f+1),C=lg(this,e,lh,l,p,A);C&&t.push(C)}if(this.isLineLoop){const f=h.getX(g-1),m=h.getX(d),p=lg(this,e,lh,l,f,m);p&&t.push(p)}}else{const d=Math.max(0,a.start),g=Math.min(u.count,a.start+a.count);for(let f=d,m=g-1;f<m;f+=c){const p=lg(this,e,lh,l,f,f+1);p&&t.push(p)}if(this.isLineLoop){const f=lg(this,e,lh,l,g-1,d);f&&t.push(f)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function lg(n,e,t,i,r,s){const a=n.geometry.attributes.position;if(vf.fromBufferAttribute(a,r),yf.fromBufferAttribute(a,s),t.distanceSqToSegment(vf,yf,ym,x_)>i)return;ym.applyMatrix4(n.matrixWorld);const o=e.ray.origin.distanceTo(ym);if(!(o<e.near||o>e.far))return{distance:o,point:x_.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const S_=new ie,M_=new ie;class R_ extends NZ{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)S_.fromBufferAttribute(t,r),M_.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+S_.distanceTo(M_);e.setAttribute("lineDistance",new mn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Dh extends Vs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const T_=new ni,MI=new dp,cg=new sd,hg=new ie;class wm extends Oi{constructor(e=new Vr,t=new Dh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),cg.copy(i.boundingSphere),cg.applyMatrix4(r),cg.radius+=s,e.ray.intersectsSphere(cg)===!1)return;T_.copy(r).invert(),MI.copy(e.ray).applyMatrix4(T_);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,h=i.attributes.position;if(c!==null){const u=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let g=u,f=d;g<f;g++){const m=c.getX(g);hg.fromBufferAttribute(h,m),U_(hg,m,l,r,e,t,this)}}else{const u=Math.max(0,a.start),d=Math.min(h.count,a.start+a.count);for(let g=u,f=d;g<f;g++)hg.fromBufferAttribute(h,g),U_(hg,g,l,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function U_(n,e,t,i,r,s,a){const o=MI.distanceSqToPoint(n);if(o<t){const l=new ie;MI.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class Lh extends Oi{constructor(){super(),this.isGroup=!0,this.type="Group"}}class BT extends En{constructor(e,t,i,r,s,a,o,l,c,h=fc){if(h!==fc&&h!==Dc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===fc&&(i=zo),i===void 0&&h===Dc&&(i=Bc),super(null,r,s,a,o,l,h,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:kr,this.minFilter=l!==void 0?l:kr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class gp extends Vr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,h=l+1,u=e/o,d=t/l,g=[],f=[],m=[],p=[];for(let A=0;A<h;A++){const C=A*d-a;for(let v=0;v<c;v++){const I=v*u-s;f.push(I,-C,0),m.push(0,0,1),p.push(v/o),p.push(1-A/l)}}for(let A=0;A<l;A++)for(let C=0;C<o;C++){const v=C+c*A,I=C+c*(A+1),w=C+1+c*(A+1),b=C+1+c*A;g.push(v,I,b),g.push(I,w,b)}this.setIndex(g),this.setAttribute("position",new mn(f,3)),this.setAttribute("normal",new mn(m,3)),this.setAttribute("uv",new mn(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gp(e.width,e.height,e.widthSegments,e.heightSegments)}}class yv extends Vs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=vT,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ss,this.combine=gv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kZ extends Vs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Y5,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class QZ extends Vs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const wf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class OZ{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){o++,s===!1&&r.onStart!==void 0&&r.onStart(h,a,o),s=!0},this.itemEnd=function(h){a++,r.onProgress!==void 0&&r.onProgress(h,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,u){return c.push(h,u),this},this.removeHandler=function(h){const u=c.indexOf(h);return u!==-1&&c.splice(u,2),this},this.getHandler=function(h){for(let u=0,d=c.length;u<d;u+=2){const g=c[u],f=c[u+1];if(g.global&&(g.lastIndex=0),g.test(h))return f}return null}}}const DT=new OZ;class Wc{constructor(e){this.manager=e!==void 0?e:DT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wc.DEFAULT_MATERIAL_NAME="__DEFAULT";const Cs={};class VZ extends Error{constructor(e,t){super(e),this.response=t}}class LT extends Wc{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=wf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Cs[e]!==void 0){Cs[e].push({onLoad:t,onProgress:i,onError:r});return}Cs[e]=[],Cs[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const h=Cs[e],u=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),g=d?parseInt(d):0,f=g!==0;let m=0;const p=new ReadableStream({start(A){C();function C(){u.read().then(({done:v,value:I})=>{if(v)A.close();else{m+=I.byteLength;const w=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:g});for(let b=0,_=h.length;b<_;b++){const x=h[b];x.onProgress&&x.onProgress(w)}A.enqueue(I),C()}},v=>{A.error(v)})}}});return new Response(p)}else throw new VZ(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(h=>new DOMParser().parseFromString(h,o));case"json":return c.json();default:if(o===void 0)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),u=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(u);return c.arrayBuffer().then(g=>d.decode(g))}}}).then(c=>{wf.add(e,c);const h=Cs[e];delete Cs[e];for(let u=0,d=h.length;u<d;u++){const g=h[u];g.onLoad&&g.onLoad(c)}}).catch(c=>{const h=Cs[e];if(h===void 0)throw this.manager.itemError(e),c;delete Cs[e];for(let u=0,d=h.length;u<d;u++){const g=h[u];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class zZ extends Wc{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=wf.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Ru("img");function l(){h(),wf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){h(),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class GZ extends Wc{constructor(e){super(e)}load(e,t,i,r){const s=new En,a=new zZ(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class PT extends Oi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}const Em=new ni,F_=new ie,B_=new ie;class WZ{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ct(512,512),this.map=null,this.mapPass=null,this.matrix=new ni,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vv,this._frameExtents=new ct(1,1),this._viewportCount=1,this._viewports=[new hi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;F_.setFromMatrixPosition(e.matrixWorld),t.position.copy(F_),B_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(B_),t.updateMatrixWorld(),Em.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Em),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Em)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class NT extends UT{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=h*this.view.offsetY,l=o-h*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class ZZ extends WZ{constructor(){super(new NT(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class HZ extends PT{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Oi.DEFAULT_UP),this.updateMatrix(),this.target=new Oi,this.shadow=new ZZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class XZ extends PT{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class JZ{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class jZ extends ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class D_{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Et(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Et(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class YZ extends el{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function L_(n,e,t,i){const r=KZ(i);switch(t){case gT:return n*e;case pT:return n*e;case AT:return n*e*2;case mT:return n*e/r.components*r.byteLength;case mv:return n*e/r.components*r.byteLength;case CT:return n*e*2/r.components*r.byteLength;case Cv:return n*e*2/r.components*r.byteLength;case fT:return n*e*3/r.components*r.byteLength;case Pr:return n*e*4/r.components*r.byteLength;case Iv:return n*e*4/r.components*r.byteLength;case Pg:case Ng:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case kg:case Qg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case iI:case rI:return Math.max(n,16)*Math.max(e,8)/4;case tI:case nI:return Math.max(n,8)*Math.max(e,8)/2;case sI:case aI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case oI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case lI:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case cI:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case hI:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case uI:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case dI:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case gI:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case fI:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case pI:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case AI:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case mI:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case CI:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case II:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case vI:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case yI:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Og:case wI:case EI:return Math.ceil(n/4)*Math.ceil(e/4)*16;case IT:case bI:return Math.ceil(n/4)*Math.ceil(e/4)*8;case _I:case xI:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function KZ(n){switch(n){case Os:case hT:return{byteLength:1,components:1};case Mu:case uT:case nd:return{byteLength:2,components:1};case pv:case Av:return{byteLength:2,components:4};case zo:case fv:case bs:return{byteLength:4,components:1};case dT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dv);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kT(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function qZ(n){const e=new WeakMap;function t(o,l){const c=o.array,h=o.usage,u=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,h),o.onUploadCallback();let g;if(c instanceof Float32Array)g=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)g=n.SHORT;else if(c instanceof Uint32Array)g=n.UNSIGNED_INT;else if(c instanceof Int32Array)g=n.INT;else if(c instanceof Int8Array)g=n.BYTE;else if(c instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:u}}function i(o,l,c){const h=l.array,u=l.updateRanges;if(n.bindBuffer(c,o),u.length===0)n.bufferSubData(c,0,h);else{u.sort((g,f)=>g.start-f.start);let d=0;for(let g=1;g<u.length;g++){const f=u[d],m=u[g];m.start<=f.start+f.count+1?f.count=Math.max(f.count,m.start+m.count-f.start):(++d,u[d]=m)}u.length=d+1;for(let g=0,f=u.length;g<f;g++){const m=u[g];n.bufferSubData(c,m.start*h.BYTES_PER_ELEMENT,h,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const h=e.get(o);(!h||h.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var $Z=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,eH=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,tH=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,iH=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nH=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,rH=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,sH=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aH=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,oH=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,lH=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,cH=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,hH=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,uH=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,dH=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,gH=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fH=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,pH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,AH=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mH=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CH=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,IH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vH=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,yH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,wH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,EH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_H=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,SH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,MH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,RH="gl_FragColor = linearToOutputTexel( gl_FragColor );",TH=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,UH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,FH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,BH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,DH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,LH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,PH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,NH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,kH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,QH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,OH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,VH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,GH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,WH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,HH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,XH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,JH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,jH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,YH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,KH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$H=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,tX=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iX=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nX=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rX=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,sX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,aX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,oX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lX=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uX=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,dX=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,gX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fX=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,pX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,AX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mX=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,IX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,wX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,EX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,bX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,_X=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,SX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,MX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,RX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,TX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,UX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,FX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,BX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,DX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,LX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,PX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,NX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,kX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,OX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,VX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,WX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ZX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,HX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,XX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,JX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,jX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,YX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,KX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$X=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tJ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,aJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,dJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,IJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wJ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,EJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_J=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,SJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,TJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,UJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,At={alphahash_fragment:$Z,alphahash_pars_fragment:eH,alphamap_fragment:tH,alphamap_pars_fragment:iH,alphatest_fragment:nH,alphatest_pars_fragment:rH,aomap_fragment:sH,aomap_pars_fragment:aH,batching_pars_vertex:oH,batching_vertex:lH,begin_vertex:cH,beginnormal_vertex:hH,bsdfs:uH,iridescence_fragment:dH,bumpmap_pars_fragment:gH,clipping_planes_fragment:fH,clipping_planes_pars_fragment:pH,clipping_planes_pars_vertex:AH,clipping_planes_vertex:mH,color_fragment:CH,color_pars_fragment:IH,color_pars_vertex:vH,color_vertex:yH,common:wH,cube_uv_reflection_fragment:EH,defaultnormal_vertex:bH,displacementmap_pars_vertex:_H,displacementmap_vertex:xH,emissivemap_fragment:SH,emissivemap_pars_fragment:MH,colorspace_fragment:RH,colorspace_pars_fragment:TH,envmap_fragment:UH,envmap_common_pars_fragment:FH,envmap_pars_fragment:BH,envmap_pars_vertex:DH,envmap_physical_pars_fragment:ZH,envmap_vertex:LH,fog_vertex:PH,fog_pars_vertex:NH,fog_fragment:kH,fog_pars_fragment:QH,gradientmap_pars_fragment:OH,lightmap_pars_fragment:VH,lights_lambert_fragment:zH,lights_lambert_pars_fragment:GH,lights_pars_begin:WH,lights_toon_fragment:HH,lights_toon_pars_fragment:XH,lights_phong_fragment:JH,lights_phong_pars_fragment:jH,lights_physical_fragment:YH,lights_physical_pars_fragment:KH,lights_fragment_begin:qH,lights_fragment_maps:$H,lights_fragment_end:eX,logdepthbuf_fragment:tX,logdepthbuf_pars_fragment:iX,logdepthbuf_pars_vertex:nX,logdepthbuf_vertex:rX,map_fragment:sX,map_pars_fragment:aX,map_particle_fragment:oX,map_particle_pars_fragment:lX,metalnessmap_fragment:cX,metalnessmap_pars_fragment:hX,morphinstance_vertex:uX,morphcolor_vertex:dX,morphnormal_vertex:gX,morphtarget_pars_vertex:fX,morphtarget_vertex:pX,normal_fragment_begin:AX,normal_fragment_maps:mX,normal_pars_fragment:CX,normal_pars_vertex:IX,normal_vertex:vX,normalmap_pars_fragment:yX,clearcoat_normal_fragment_begin:wX,clearcoat_normal_fragment_maps:EX,clearcoat_pars_fragment:bX,iridescence_pars_fragment:_X,opaque_fragment:xX,packing:SX,premultiplied_alpha_fragment:MX,project_vertex:RX,dithering_fragment:TX,dithering_pars_fragment:UX,roughnessmap_fragment:FX,roughnessmap_pars_fragment:BX,shadowmap_pars_fragment:DX,shadowmap_pars_vertex:LX,shadowmap_vertex:PX,shadowmask_pars_fragment:NX,skinbase_vertex:kX,skinning_pars_vertex:QX,skinning_vertex:OX,skinnormal_vertex:VX,specularmap_fragment:zX,specularmap_pars_fragment:GX,tonemapping_fragment:WX,tonemapping_pars_fragment:ZX,transmission_fragment:HX,transmission_pars_fragment:XX,uv_pars_fragment:JX,uv_pars_vertex:jX,uv_vertex:YX,worldpos_vertex:KX,background_vert:qX,background_frag:$X,backgroundCube_vert:eJ,backgroundCube_frag:tJ,cube_vert:iJ,cube_frag:nJ,depth_vert:rJ,depth_frag:sJ,distanceRGBA_vert:aJ,distanceRGBA_frag:oJ,equirect_vert:lJ,equirect_frag:cJ,linedashed_vert:hJ,linedashed_frag:uJ,meshbasic_vert:dJ,meshbasic_frag:gJ,meshlambert_vert:fJ,meshlambert_frag:pJ,meshmatcap_vert:AJ,meshmatcap_frag:mJ,meshnormal_vert:CJ,meshnormal_frag:IJ,meshphong_vert:vJ,meshphong_frag:yJ,meshphysical_vert:wJ,meshphysical_frag:EJ,meshtoon_vert:bJ,meshtoon_frag:_J,points_vert:xJ,points_frag:SJ,shadow_vert:MJ,shadow_frag:RJ,sprite_vert:TJ,sprite_frag:UJ},Be={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gt}},envmap:{envMap:{value:null},envMapRotation:{value:new gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gt},normalScale:{value:new ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0},uvTransform:{value:new gt}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new ct(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}}},Jr={basic:{uniforms:gn([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:gn([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new mt(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:gn([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:gn([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:gn([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new mt(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:gn([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:gn([Be.points,Be.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:gn([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:gn([Be.common,Be.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:gn([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:gn([Be.sprite,Be.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gt}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:gn([Be.common,Be.displacementmap,{referencePosition:{value:new ie},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:gn([Be.lights,Be.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};Jr.physical={uniforms:gn([Jr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gt},clearcoatNormalScale:{value:new ct(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gt},sheen:{value:0},sheenColor:{value:new mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gt},transmissionSamplerSize:{value:new ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gt},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)},specularColor:{value:new mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gt},anisotropyVector:{value:new ct},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};const ug={r:0,b:0,g:0},$a=new ss,FJ=new ni;function BJ(n,e,t,i,r,s,a){const o=new mt(0);let l=s===!0?0:1,c,h,u=null,d=0,g=null;function f(v){let I=v.isScene===!0?v.background:null;return I&&I.isTexture&&(I=(v.backgroundBlurriness>0?t:e).get(I)),I}function m(v){let I=!1;const w=f(v);w===null?A(o,l):w&&w.isColor&&(A(w,1),I=!0);const b=n.xr.getEnvironmentBlendMode();b==="additive"?i.buffers.color.setClear(0,0,0,1,a):b==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function p(v,I){const w=f(I);w&&(w.isCubeTexture||w.mapping===up)?(h===void 0&&(h=new kn(new ad(1,1,1),new Qa({name:"BackgroundCubeMaterial",uniforms:Pc(Jr.backgroundCube.uniforms),vertexShader:Jr.backgroundCube.vertexShader,fragmentShader:Jr.backgroundCube.fragmentShader,side:Vn,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(b,_,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),$a.copy(I.backgroundRotation),$a.x*=-1,$a.y*=-1,$a.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&($a.y*=-1,$a.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(FJ.makeRotationFromEuler($a)),h.material.toneMapped=Rt.getTransfer(w.colorSpace)!==Jt,(u!==w||d!==w.version||g!==n.toneMapping)&&(h.material.needsUpdate=!0,u=w,d=w.version,g=n.toneMapping),h.layers.enableAll(),v.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new kn(new gp(2,2),new Qa({name:"BackgroundMaterial",uniforms:Pc(Jr.background.uniforms),vertexShader:Jr.background.vertexShader,fragmentShader:Jr.background.fragmentShader,side:Qs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,c.material.toneMapped=Rt.getTransfer(w.colorSpace)!==Jt,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(u!==w||d!==w.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,u=w,d=w.version,g=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function A(v,I){v.getRGB(ug,TT(n)),i.buffers.color.setClear(ug.r,ug.g,ug.b,I,a)}function C(){h!==void 0&&(h.geometry.dispose(),h.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(v,I=1){o.set(v),l=I,A(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,A(o,l)},render:m,addToRenderList:p,dispose:C}}function DJ(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=d(null);let s=r,a=!1;function o(E,S,R,M,T){let P=!1;const F=u(M,R,S);s!==F&&(s=F,c(s.object)),P=g(E,M,R,T),P&&f(E,M,R,T),T!==null&&e.update(T,n.ELEMENT_ARRAY_BUFFER),(P||a)&&(a=!1,I(E,S,R,M),T!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(T).buffer))}function l(){return n.createVertexArray()}function c(E){return n.bindVertexArray(E)}function h(E){return n.deleteVertexArray(E)}function u(E,S,R){const M=R.wireframe===!0;let T=i[E.id];T===void 0&&(T={},i[E.id]=T);let P=T[S.id];P===void 0&&(P={},T[S.id]=P);let F=P[M];return F===void 0&&(F=d(l()),P[M]=F),F}function d(E){const S=[],R=[],M=[];for(let T=0;T<t;T++)S[T]=0,R[T]=0,M[T]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:S,enabledAttributes:R,attributeDivisors:M,object:E,attributes:{},index:null}}function g(E,S,R,M){const T=s.attributes,P=S.attributes;let F=0;const N=R.getAttributes();for(const L in N)if(N[L].location>=0){const W=T[L];let ne=P[L];if(ne===void 0&&(L==="instanceMatrix"&&E.instanceMatrix&&(ne=E.instanceMatrix),L==="instanceColor"&&E.instanceColor&&(ne=E.instanceColor)),W===void 0||W.attribute!==ne||ne&&W.data!==ne.data)return!0;F++}return s.attributesNum!==F||s.index!==M}function f(E,S,R,M){const T={},P=S.attributes;let F=0;const N=R.getAttributes();for(const L in N)if(N[L].location>=0){let W=P[L];W===void 0&&(L==="instanceMatrix"&&E.instanceMatrix&&(W=E.instanceMatrix),L==="instanceColor"&&E.instanceColor&&(W=E.instanceColor));const ne={};ne.attribute=W,W&&W.data&&(ne.data=W.data),T[L]=ne,F++}s.attributes=T,s.attributesNum=F,s.index=M}function m(){const E=s.newAttributes;for(let S=0,R=E.length;S<R;S++)E[S]=0}function p(E){A(E,0)}function A(E,S){const R=s.newAttributes,M=s.enabledAttributes,T=s.attributeDivisors;R[E]=1,M[E]===0&&(n.enableVertexAttribArray(E),M[E]=1),T[E]!==S&&(n.vertexAttribDivisor(E,S),T[E]=S)}function C(){const E=s.newAttributes,S=s.enabledAttributes;for(let R=0,M=S.length;R<M;R++)S[R]!==E[R]&&(n.disableVertexAttribArray(R),S[R]=0)}function v(E,S,R,M,T,P,F){F===!0?n.vertexAttribIPointer(E,S,R,T,P):n.vertexAttribPointer(E,S,R,M,T,P)}function I(E,S,R,M){m();const T=M.attributes,P=R.getAttributes(),F=S.defaultAttributeValues;for(const N in P){const L=P[N];if(L.location>=0){let W=T[N];if(W===void 0&&(N==="instanceMatrix"&&E.instanceMatrix&&(W=E.instanceMatrix),N==="instanceColor"&&E.instanceColor&&(W=E.instanceColor)),W!==void 0){const ne=W.normalized,de=W.itemSize,ee=e.get(W);if(ee===void 0)continue;const Me=ee.buffer,G=ee.type,te=ee.bytesPerElement,we=G===n.INT||G===n.UNSIGNED_INT||W.gpuType===fv;if(W.isInterleavedBufferAttribute){const le=W.data,xe=le.stride,Re=W.offset;if(le.isInstancedInterleavedBuffer){for(let Fe=0;Fe<L.locationSize;Fe++)A(L.location+Fe,le.meshPerAttribute);E.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Fe=0;Fe<L.locationSize;Fe++)p(L.location+Fe);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let Fe=0;Fe<L.locationSize;Fe++)v(L.location+Fe,de/L.locationSize,G,ne,xe*te,(Re+de/L.locationSize*Fe)*te,we)}else{if(W.isInstancedBufferAttribute){for(let le=0;le<L.locationSize;le++)A(L.location+le,W.meshPerAttribute);E.isInstancedMesh!==!0&&M._maxInstanceCount===void 0&&(M._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let le=0;le<L.locationSize;le++)p(L.location+le);n.bindBuffer(n.ARRAY_BUFFER,Me);for(let le=0;le<L.locationSize;le++)v(L.location+le,de/L.locationSize,G,ne,de*te,de/L.locationSize*le*te,we)}}else if(F!==void 0){const ne=F[N];if(ne!==void 0)switch(ne.length){case 2:n.vertexAttrib2fv(L.location,ne);break;case 3:n.vertexAttrib3fv(L.location,ne);break;case 4:n.vertexAttrib4fv(L.location,ne);break;default:n.vertexAttrib1fv(L.location,ne)}}}}C()}function w(){x();for(const E in i){const S=i[E];for(const R in S){const M=S[R];for(const T in M)h(M[T].object),delete M[T];delete S[R]}delete i[E]}}function b(E){if(i[E.id]===void 0)return;const S=i[E.id];for(const R in S){const M=S[R];for(const T in M)h(M[T].object),delete M[T];delete S[R]}delete i[E.id]}function _(E){for(const S in i){const R=i[S];if(R[E.id]===void 0)continue;const M=R[E.id];for(const T in M)h(M[T].object),delete M[T];delete R[E.id]}}function x(){y(),a=!0,s!==r&&(s=r,c(s.object))}function y(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:x,resetDefaultState:y,dispose:w,releaseStatesOfGeometry:b,releaseStatesOfProgram:_,initAttributes:m,enableAttribute:p,disableUnusedAttributes:C}}function LJ(n,e,t){let i;function r(c){i=c}function s(c,h){n.drawArrays(i,c,h),t.update(h,i,1)}function a(c,h,u){u!==0&&(n.drawArraysInstanced(i,c,h,u),t.update(h,i,u))}function o(c,h,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,h,0,u);let d=0;for(let g=0;g<u;g++)d+=h[g];t.update(d,i,1)}function l(c,h,u,d){if(u===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let f=0;f<c.length;f++)a(c[f],h[f],d[f]);else{g.multiDrawArraysInstancedWEBGL(i,c,0,h,0,d,0,u);let f=0;for(let m=0;m<u;m++)f+=h[m]*d[m];t.update(f,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function PJ(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const _=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(_){return!(_!==Pr&&i.convert(_)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(_){const x=_===nd&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(_!==Os&&i.convert(_)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&_!==bs&&!x)}function l(_){if(_==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";_="mediump"}return _==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const h=l(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);const u=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=f>0,b=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:u,reverseDepthBuffer:d,maxTextures:g,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:p,maxAttributes:A,maxVertexUniforms:C,maxVaryings:v,maxFragmentUniforms:I,vertexTextures:w,maxSamples:b}}function NJ(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new va,o=new gt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){const g=u.length!==0||d||i!==0||r;return r=d,i=u.length,g},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){t=h(u,d,0)},this.setState=function(u,d,g){const f=u.clippingPlanes,m=u.clipIntersection,p=u.clipShadows,A=n.get(u);if(!r||f===null||f.length===0||s&&!p)s?h(null):c();else{const C=s?0:i,v=C*4;let I=A.clippingState||null;l.value=I,I=h(f,d,v,g);for(let w=0;w!==v;++w)I[w]=t[w];A.clippingState=I,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=C}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(u,d,g,f){const m=u!==null?u.length:0;let p=null;if(m!==0){if(p=l.value,f!==!0||p===null){const A=g+m*4,C=d.matrixWorldInverse;o.getNormalMatrix(C),(p===null||p.length<A)&&(p=new Float32Array(A));for(let v=0,I=g;v!==m;++v,I+=4)a.copy(u[v]).applyMatrix4(C,o),a.normal.toArray(p,I),p[I+3]=a.constant}l.value=p,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,p}}function kJ(n){let e=new WeakMap;function t(a,o){return o===qC?a.mapping=Uc:o===$C&&(a.mapping=Fc),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===qC||o===$C)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new BZ(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Kl=4,P_=[.125,.215,.35,.446,.526,.582],co=20,bm=new NT,N_=new mt;let _m=null,xm=0,Sm=0,Mm=!1;const io=(1+Math.sqrt(5))/2,Fl=1/io,k_=[new ie(-io,Fl,0),new ie(io,Fl,0),new ie(-Fl,0,io),new ie(Fl,0,io),new ie(0,io,-Fl),new ie(0,io,Fl),new ie(-1,1,-1),new ie(1,1,-1),new ie(-1,1,1),new ie(1,1,1)];class Q_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){_m=this._renderer.getRenderTarget(),xm=this._renderer.getActiveCubeFace(),Sm=this._renderer.getActiveMipmapLevel(),Mm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=z_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=V_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_m,xm,Sm),this._renderer.xr.enabled=Mm,e.scissorTest=!1,dg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Uc||e.mapping===Fc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_m=this._renderer.getRenderTarget(),xm=this._renderer.getActiveCubeFace(),Sm=this._renderer.getActiveMipmapLevel(),Mm=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qr,minFilter:qr,generateMipmaps:!1,type:nd,format:Pr,colorSpace:Lc,depthBuffer:!1},r=O_(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=O_(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=QJ(s)),this._blurMaterial=OJ(s,e,t)}return r}_compileMaterial(e){const t=new kn(this._lodPlanes[0],e);this._renderer.compile(t,bm)}_sceneToCubeUV(e,t,i,r){const s=new ar(90,1,t,i),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,h=l.toneMapping;l.getClearColor(N_),l.toneMapping=La,l.autoClear=!1;const u=new ST({name:"PMREM.Background",side:Vn,depthWrite:!1,depthTest:!1}),d=new kn(new ad,u);let g=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,g=!0):(u.color.copy(N_),g=!0);for(let m=0;m<6;m++){const p=m%3;p===0?(s.up.set(0,a[m],0),s.lookAt(o[m],0,0)):p===1?(s.up.set(0,0,a[m]),s.lookAt(0,o[m],0)):(s.up.set(0,a[m],0),s.lookAt(0,0,o[m]));const A=this._cubeSize;dg(r,p*A,m>2?A:0,A,A),l.setRenderTarget(r),g&&l.render(d,s),l.render(e,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=h,l.autoClear=c,e.background=f}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Uc||e.mapping===Fc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=z_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=V_());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new kn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;dg(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,bm)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=k_[(r-s-1)%k_.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,u=new kn(this._lodPlanes[r],c),d=c.uniforms,g=this._sizeLods[i]-1,f=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*co-1),m=s/f,p=isFinite(s)?1+Math.floor(h*m):co;p>co&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${p} samples when the maximum is set to ${co}`);const A=[];let C=0;for(let _=0;_<co;++_){const x=_/m,y=Math.exp(-x*x/2);A.push(y),_===0?C+=y:_<p&&(C+=2*y)}for(let _=0;_<A.length;_++)A[_]=A[_]/C;d.envMap.value=e.texture,d.samples.value=p,d.weights.value=A,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:v}=this;d.dTheta.value=f,d.mipInt.value=v-i;const I=this._sizeLods[r],w=3*I*(r>v-Kl?r-v+Kl:0),b=4*(this._cubeSize-I);dg(t,w,b,3*I,2*I),l.setRenderTarget(t),l.render(u,bm)}}function QJ(n){const e=[],t=[],i=[];let r=n;const s=n-Kl+1+P_.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Kl?l=P_[a-n+Kl-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),h=-c,u=1+c,d=[h,h,u,h,u,u,h,h,u,u,h,u],g=6,f=6,m=3,p=2,A=1,C=new Float32Array(m*f*g),v=new Float32Array(p*f*g),I=new Float32Array(A*f*g);for(let b=0;b<g;b++){const _=b%3*2/3-1,x=b>2?0:-1,y=[_,x,0,_+2/3,x,0,_+2/3,x+1,0,_,x,0,_+2/3,x+1,0,_,x+1,0];C.set(y,m*f*b),v.set(d,p*f*b);const E=[b,b,b,b,b,b];I.set(E,A*f*b)}const w=new Vr;w.setAttribute("position",new is(C,m)),w.setAttribute("uv",new is(v,p)),w.setAttribute("faceIndex",new is(I,A)),e.push(w),r>Kl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function O_(n,e,t){const i=new Go(n,e,t);return i.texture.mapping=up,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function dg(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function OJ(n,e,t){const i=new Float32Array(co),r=new ie(0,1,0);return new Qa({name:"SphericalGaussianBlur",defines:{n:co,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function V_(){return new Qa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function z_(){return new Qa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Da,depthTest:!1,depthWrite:!1})}function wv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function VJ(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===qC||l===$C,h=l===Uc||l===Fc;if(c||h){let u=e.get(o);const d=u!==void 0?u.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new Q_(n)),u=c?t.fromEquirectangular(o,u):t.fromCubemap(o,u),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),u.texture;if(u!==void 0)return u.texture;{const g=o.image;return c&&g&&g.height>0||h&&g&&r(g)?(t===null&&(t=new Q_(n)),u=c?t.fromEquirectangular(o):t.fromCubemap(o),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),o.addEventListener("dispose",s),u.texture):null}}}return o}function r(o){let l=0;const c=6;for(let h=0;h<c;h++)o[h]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function zJ(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Gl("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function GJ(n,e,t,i){const r={},s=new WeakMap;function a(u){const d=u.target;d.index!==null&&e.remove(d.index);for(const f in d.attributes)e.remove(d.attributes[f]);d.removeEventListener("dispose",a),delete r[d.id];const g=s.get(d);g&&(e.remove(g),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(u,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(u){const d=u.attributes;for(const g in d)e.update(d[g],n.ARRAY_BUFFER)}function c(u){const d=[],g=u.index,f=u.attributes.position;let m=0;if(g!==null){const C=g.array;m=g.version;for(let v=0,I=C.length;v<I;v+=3){const w=C[v+0],b=C[v+1],_=C[v+2];d.push(w,b,b,_,_,w)}}else if(f!==void 0){const C=f.array;m=f.version;for(let v=0,I=C.length/3-1;v<I;v+=3){const w=v+0,b=v+1,_=v+2;d.push(w,b,b,_,_,w)}}else return;const p=new(wT(d)?RT:MT)(d,1);p.version=m;const A=s.get(u);A&&e.remove(A),s.set(u,p)}function h(u){const d=s.get(u);if(d){const g=u.index;g!==null&&d.version<g.version&&c(u)}else c(u);return s.get(u)}return{get:o,update:l,getWireframeAttribute:h}}function WJ(n,e,t){let i;function r(d){i=d}let s,a;function o(d){s=d.type,a=d.bytesPerElement}function l(d,g){n.drawElements(i,g,s,d*a),t.update(g,i,1)}function c(d,g,f){f!==0&&(n.drawElementsInstanced(i,g,s,d*a,f),t.update(g,i,f))}function h(d,g,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,s,d,0,f);let m=0;for(let p=0;p<f;p++)m+=g[p];t.update(m,i,1)}function u(d,g,f,m){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let A=0;A<d.length;A++)c(d[A]/a,g[A],m[A]);else{p.multiDrawElementsInstancedWEBGL(i,g,0,s,d,0,m,0,f);let A=0;for(let C=0;C<f;C++)A+=g[C]*m[C];t.update(A,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=u}function ZJ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function HJ(n,e,t){const i=new WeakMap,r=new hi;function s(a,o,l){const c=a.morphTargetInfluences,h=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=h!==void 0?h.length:0;let d=i.get(o);if(d===void 0||d.count!==u){let g=function(){x.dispose(),i.delete(o),o.removeEventListener("dispose",g)};d!==void 0&&d.texture.dispose();const f=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,p=o.morphAttributes.color!==void 0,A=o.morphAttributes.position||[],C=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let I=0;f===!0&&(I=1),m===!0&&(I=2),p===!0&&(I=3);let w=o.attributes.position.count*I,b=1;w>e.maxTextureSize&&(b=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const _=new Float32Array(w*b*4*u),x=new bT(_,w,b,u);x.type=bs,x.needsUpdate=!0;const y=I*4;for(let E=0;E<u;E++){const S=A[E],R=C[E],M=v[E],T=w*b*4*E;for(let P=0;P<S.count;P++){const F=P*y;f===!0&&(r.fromBufferAttribute(S,P),_[T+F+0]=r.x,_[T+F+1]=r.y,_[T+F+2]=r.z,_[T+F+3]=0),m===!0&&(r.fromBufferAttribute(R,P),_[T+F+4]=r.x,_[T+F+5]=r.y,_[T+F+6]=r.z,_[T+F+7]=0),p===!0&&(r.fromBufferAttribute(M,P),_[T+F+8]=r.x,_[T+F+9]=r.y,_[T+F+10]=r.z,_[T+F+11]=M.itemSize===4?r.w:1)}}d={count:u,texture:x,size:new ct(w,b)},i.set(o,d),o.addEventListener("dispose",g)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let g=0;for(let m=0;m<c.length;m++)g+=c[m];const f=o.morphTargetsRelative?1:1-g;l.getUniforms().setValue(n,"morphTargetBaseInfluence",f),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function XJ(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,h=l.geometry,u=e.get(l,h);if(r.get(u)!==c&&(e.update(u),r.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return u}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const QT=new En,G_=new BT(1,1),OT=new bT,VT=new mZ,zT=new FT,W_=[],Z_=[],H_=new Float32Array(16),X_=new Float32Array(9),J_=new Float32Array(4);function Zc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=W_[r];if(s===void 0&&(s=new Float32Array(r),W_[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Ti(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ui(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function fp(n,e){let t=Z_[e];t===void 0&&(t=new Int32Array(e),Z_[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function JJ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function jJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ti(t,e))return;n.uniform2fv(this.addr,e),Ui(t,e)}}function YJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ti(t,e))return;n.uniform3fv(this.addr,e),Ui(t,e)}}function KJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ti(t,e))return;n.uniform4fv(this.addr,e),Ui(t,e)}}function qJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ti(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ui(t,e)}else{if(Ti(t,i))return;J_.set(i),n.uniformMatrix2fv(this.addr,!1,J_),Ui(t,i)}}function $J(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ti(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ui(t,e)}else{if(Ti(t,i))return;X_.set(i),n.uniformMatrix3fv(this.addr,!1,X_),Ui(t,i)}}function ej(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ti(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ui(t,e)}else{if(Ti(t,i))return;H_.set(i),n.uniformMatrix4fv(this.addr,!1,H_),Ui(t,i)}}function tj(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ij(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ti(t,e))return;n.uniform2iv(this.addr,e),Ui(t,e)}}function nj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ti(t,e))return;n.uniform3iv(this.addr,e),Ui(t,e)}}function rj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ti(t,e))return;n.uniform4iv(this.addr,e),Ui(t,e)}}function sj(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function aj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ti(t,e))return;n.uniform2uiv(this.addr,e),Ui(t,e)}}function oj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ti(t,e))return;n.uniform3uiv(this.addr,e),Ui(t,e)}}function lj(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ti(t,e))return;n.uniform4uiv(this.addr,e),Ui(t,e)}}function cj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(G_.compareFunction=yT,s=G_):s=QT,t.setTexture2D(e||s,r)}function hj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||VT,r)}function uj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||zT,r)}function dj(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||OT,r)}function gj(n){switch(n){case 5126:return JJ;case 35664:return jJ;case 35665:return YJ;case 35666:return KJ;case 35674:return qJ;case 35675:return $J;case 35676:return ej;case 5124:case 35670:return tj;case 35667:case 35671:return ij;case 35668:case 35672:return nj;case 35669:case 35673:return rj;case 5125:return sj;case 36294:return aj;case 36295:return oj;case 36296:return lj;case 35678:case 36198:case 36298:case 36306:case 35682:return cj;case 35679:case 36299:case 36307:return hj;case 35680:case 36300:case 36308:case 36293:return uj;case 36289:case 36303:case 36311:case 36292:return dj}}function fj(n,e){n.uniform1fv(this.addr,e)}function pj(n,e){const t=Zc(e,this.size,2);n.uniform2fv(this.addr,t)}function Aj(n,e){const t=Zc(e,this.size,3);n.uniform3fv(this.addr,t)}function mj(n,e){const t=Zc(e,this.size,4);n.uniform4fv(this.addr,t)}function Cj(n,e){const t=Zc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Ij(n,e){const t=Zc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function vj(n,e){const t=Zc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function yj(n,e){n.uniform1iv(this.addr,e)}function wj(n,e){n.uniform2iv(this.addr,e)}function Ej(n,e){n.uniform3iv(this.addr,e)}function bj(n,e){n.uniform4iv(this.addr,e)}function _j(n,e){n.uniform1uiv(this.addr,e)}function xj(n,e){n.uniform2uiv(this.addr,e)}function Sj(n,e){n.uniform3uiv(this.addr,e)}function Mj(n,e){n.uniform4uiv(this.addr,e)}function Rj(n,e,t){const i=this.cache,r=e.length,s=fp(t,r);Ti(i,s)||(n.uniform1iv(this.addr,s),Ui(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||QT,s[a])}function Tj(n,e,t){const i=this.cache,r=e.length,s=fp(t,r);Ti(i,s)||(n.uniform1iv(this.addr,s),Ui(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||VT,s[a])}function Uj(n,e,t){const i=this.cache,r=e.length,s=fp(t,r);Ti(i,s)||(n.uniform1iv(this.addr,s),Ui(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||zT,s[a])}function Fj(n,e,t){const i=this.cache,r=e.length,s=fp(t,r);Ti(i,s)||(n.uniform1iv(this.addr,s),Ui(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||OT,s[a])}function Bj(n){switch(n){case 5126:return fj;case 35664:return pj;case 35665:return Aj;case 35666:return mj;case 35674:return Cj;case 35675:return Ij;case 35676:return vj;case 5124:case 35670:return yj;case 35667:case 35671:return wj;case 35668:case 35672:return Ej;case 35669:case 35673:return bj;case 5125:return _j;case 36294:return xj;case 36295:return Sj;case 36296:return Mj;case 35678:case 36198:case 36298:case 36306:case 35682:return Rj;case 35679:case 36299:case 36307:return Tj;case 35680:case 36300:case 36308:case 36293:return Uj;case 36289:case 36303:case 36311:case 36292:return Fj}}class Dj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=gj(t.type)}}class Lj{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Bj(t.type)}}class Pj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const Rm=/(\w+)(\])?(\[|\.)?/g;function j_(n,e){n.seq.push(e),n.map[e.id]=e}function Nj(n,e,t){const i=n.name,r=i.length;for(Rm.lastIndex=0;;){const s=Rm.exec(i),a=Rm.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){j_(t,c===void 0?new Dj(o,n,e):new Lj(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new Pj(o),j_(t,h)),t=h}}}class Gg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Nj(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function Y_(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const kj=37297;let Qj=0;function Oj(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const K_=new gt;function Vj(n){Rt._getMatrix(K_,Rt.workingColorSpace,n);const e=`mat3( ${K_.elements.map(t=>t.toFixed(4))} )`;switch(Rt.getTransfer(n)){case Cf:return[e,"LinearTransferOETF"];case Jt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function q_(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Oj(n.getShaderSource(e),a)}else return r}function zj(n,e){const t=Vj(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Gj(n,e){let t;switch(e){case z5:t="Linear";break;case G5:t="Reinhard";break;case W5:t="Cineon";break;case Z5:t="ACESFilmic";break;case X5:t="AgX";break;case J5:t="Neutral";break;case H5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const gg=new ie;function Wj(){Rt.getLuminanceCoefficients(gg);const n=gg.x.toFixed(4),e=gg.y.toFixed(4),t=gg.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Zj(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Ph).join(`
`)}function Hj(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Xj(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Ph(n){return n!==""}function $_(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ex(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Jj=/^[ \t]*#include +<([\w\d./]+)>/gm;function RI(n){return n.replace(Jj,Yj)}const jj=new Map;function Yj(n,e){let t=At[e];if(t===void 0){const i=jj.get(e);if(i!==void 0)t=At[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return RI(t)}const Kj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function tx(n){return n.replace(Kj,qj)}function qj(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ix(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function $j(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===lT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===y5?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===vs&&(e="SHADOWMAP_TYPE_VSM"),e}function eY(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Uc:case Fc:e="ENVMAP_TYPE_CUBE";break;case up:e="ENVMAP_TYPE_CUBE_UV";break}return e}function tY(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Fc:e="ENVMAP_MODE_REFRACTION";break}return e}function iY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case gv:e="ENVMAP_BLENDING_MULTIPLY";break;case O5:e="ENVMAP_BLENDING_MIX";break;case V5:e="ENVMAP_BLENDING_ADD";break}return e}function nY(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function rY(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=$j(t),c=eY(t),h=tY(t),u=iY(t),d=nY(t),g=Zj(t),f=Hj(s),m=r.createProgram();let p,A,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(p=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Ph).join(`
`),p.length>0&&(p+=`
`),A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Ph).join(`
`),A.length>0&&(A+=`
`)):(p=[ix(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ph).join(`
`),A=[ix(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==La?"#define TONE_MAPPING":"",t.toneMapping!==La?At.tonemapping_pars_fragment:"",t.toneMapping!==La?Gj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",At.colorspace_pars_fragment,zj("linearToOutputTexel",t.outputColorSpace),Wj(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ph).join(`
`)),a=RI(a),a=$_(a,t),a=ex(a,t),o=RI(o),o=$_(o,t),o=ex(o,t),a=tx(a),o=tx(o),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,p=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+p,A=["#define varying in",t.glslVersion===o_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===o_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const v=C+p+a,I=C+A+o,w=Y_(r,r.VERTEX_SHADER,v),b=Y_(r,r.FRAGMENT_SHADER,I);r.attachShader(m,w),r.attachShader(m,b),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m);function _(S){if(n.debug.checkShaderErrors){const R=r.getProgramInfoLog(m).trim(),M=r.getShaderInfoLog(w).trim(),T=r.getShaderInfoLog(b).trim();let P=!0,F=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1)if(P=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,m,w,b);else{const N=q_(r,w,"vertex"),L=q_(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Material Name: `+S.name+`
Material Type: `+S.type+`

Program Info Log: `+R+`
`+N+`
`+L)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(M===""||T==="")&&(F=!1);F&&(S.diagnostics={runnable:P,programLog:R,vertexShader:{log:M,prefix:p},fragmentShader:{log:T,prefix:A}})}r.deleteShader(w),r.deleteShader(b),x=new Gg(r,m),y=Xj(r,m)}let x;this.getUniforms=function(){return x===void 0&&_(this),x};let y;this.getAttributes=function(){return y===void 0&&_(this),y};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=r.getProgramParameter(m,kj)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Qj++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=b,this}let sY=0;class aY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new oY(e),t.set(e,i)),i}}class oY{constructor(e){this.id=sY++,this.code=e,this.usedTimes=0}}function lY(n,e,t,i,r,s,a){const o=new _T,l=new aY,c=new Set,h=[],u=r.logarithmicDepthBuffer,d=r.vertexTextures;let g=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(y){return c.add(y),y===0?"uv":`uv${y}`}function p(y,E,S,R,M){const T=R.fog,P=M.geometry,F=y.isMeshStandardMaterial?R.environment:null,N=(y.isMeshStandardMaterial?t:e).get(y.envMap||F),L=N&&N.mapping===up?N.image.height:null,W=f[y.type];y.precision!==null&&(g=r.getMaxPrecision(y.precision),g!==y.precision&&console.warn("THREE.WebGLProgram.getParameters:",y.precision,"not supported, using",g,"instead."));const ne=P.morphAttributes.position||P.morphAttributes.normal||P.morphAttributes.color,de=ne!==void 0?ne.length:0;let ee=0;P.morphAttributes.position!==void 0&&(ee=1),P.morphAttributes.normal!==void 0&&(ee=2),P.morphAttributes.color!==void 0&&(ee=3);let Me,G,te,we;if(W){const Ue=Jr[W];Me=Ue.vertexShader,G=Ue.fragmentShader}else Me=y.vertexShader,G=y.fragmentShader,l.update(y),te=l.getVertexShaderID(y),we=l.getFragmentShaderID(y);const le=n.getRenderTarget(),xe=n.state.buffers.depth.getReversed(),Re=M.isInstancedMesh===!0,Fe=M.isBatchedMesh===!0,Ve=!!y.map,$e=!!y.matcap,xt=!!N,z=!!y.aoMap,St=!!y.lightMap,Ze=!!y.bumpMap,We=!!y.normalMap,Le=!!y.displacementMap,ht=!!y.emissiveMap,Pe=!!y.metalnessMap,k=!!y.roughnessMap,U=y.anisotropy>0,Y=y.clearcoat>0,ge=y.dispersion>0,pe=y.iridescence>0,D=y.sheen>0,O=y.transmission>0,H=U&&!!y.anisotropyMap,K=Y&&!!y.clearcoatMap,ye=Y&&!!y.clearcoatNormalMap,J=Y&&!!y.clearcoatRoughnessMap,se=pe&&!!y.iridescenceMap,fe=pe&&!!y.iridescenceThicknessMap,ue=D&&!!y.sheenColorMap,ce=D&&!!y.sheenRoughnessMap,be=!!y.specularMap,he=!!y.specularColorMap,Ee=!!y.specularIntensityMap,Q=O&&!!y.transmissionMap,ve=O&&!!y.thicknessMap,V=!!y.gradientMap,X=!!y.alphaMap,$=y.alphaTest>0,Ae=!!y.alphaHash,Te=!!y.extensions;let Qe=La;y.toneMapped&&(le===null||le.isXRRenderTarget===!0)&&(Qe=n.toneMapping);const Ge={shaderID:W,shaderType:y.type,shaderName:y.name,vertexShader:Me,fragmentShader:G,defines:y.defines,customVertexShaderID:te,customFragmentShaderID:we,isRawShaderMaterial:y.isRawShaderMaterial===!0,glslVersion:y.glslVersion,precision:g,batching:Fe,batchingColor:Fe&&M._colorsTexture!==null,instancing:Re,instancingColor:Re&&M.instanceColor!==null,instancingMorph:Re&&M.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:le===null?n.outputColorSpace:le.isXRRenderTarget===!0?le.texture.colorSpace:Lc,alphaToCoverage:!!y.alphaToCoverage,map:Ve,matcap:$e,envMap:xt,envMapMode:xt&&N.mapping,envMapCubeUVHeight:L,aoMap:z,lightMap:St,bumpMap:Ze,normalMap:We,displacementMap:d&&Le,emissiveMap:ht,normalMapObjectSpace:We&&y.normalMapType===q5,normalMapTangentSpace:We&&y.normalMapType===vT,metalnessMap:Pe,roughnessMap:k,anisotropy:U,anisotropyMap:H,clearcoat:Y,clearcoatMap:K,clearcoatNormalMap:ye,clearcoatRoughnessMap:J,dispersion:ge,iridescence:pe,iridescenceMap:se,iridescenceThicknessMap:fe,sheen:D,sheenColorMap:ue,sheenRoughnessMap:ce,specularMap:be,specularColorMap:he,specularIntensityMap:Ee,transmission:O,transmissionMap:Q,thicknessMap:ve,gradientMap:V,opaque:y.transparent===!1&&y.blending===gc&&y.alphaToCoverage===!1,alphaMap:X,alphaTest:$,alphaHash:Ae,combine:y.combine,mapUv:Ve&&m(y.map.channel),aoMapUv:z&&m(y.aoMap.channel),lightMapUv:St&&m(y.lightMap.channel),bumpMapUv:Ze&&m(y.bumpMap.channel),normalMapUv:We&&m(y.normalMap.channel),displacementMapUv:Le&&m(y.displacementMap.channel),emissiveMapUv:ht&&m(y.emissiveMap.channel),metalnessMapUv:Pe&&m(y.metalnessMap.channel),roughnessMapUv:k&&m(y.roughnessMap.channel),anisotropyMapUv:H&&m(y.anisotropyMap.channel),clearcoatMapUv:K&&m(y.clearcoatMap.channel),clearcoatNormalMapUv:ye&&m(y.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&m(y.clearcoatRoughnessMap.channel),iridescenceMapUv:se&&m(y.iridescenceMap.channel),iridescenceThicknessMapUv:fe&&m(y.iridescenceThicknessMap.channel),sheenColorMapUv:ue&&m(y.sheenColorMap.channel),sheenRoughnessMapUv:ce&&m(y.sheenRoughnessMap.channel),specularMapUv:be&&m(y.specularMap.channel),specularColorMapUv:he&&m(y.specularColorMap.channel),specularIntensityMapUv:Ee&&m(y.specularIntensityMap.channel),transmissionMapUv:Q&&m(y.transmissionMap.channel),thicknessMapUv:ve&&m(y.thicknessMap.channel),alphaMapUv:X&&m(y.alphaMap.channel),vertexTangents:!!P.attributes.tangent&&(We||U),vertexColors:y.vertexColors,vertexAlphas:y.vertexColors===!0&&!!P.attributes.color&&P.attributes.color.itemSize===4,pointsUvs:M.isPoints===!0&&!!P.attributes.uv&&(Ve||X),fog:!!T,useFog:y.fog===!0,fogExp2:!!T&&T.isFogExp2,flatShading:y.flatShading===!0,sizeAttenuation:y.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:xe,skinning:M.isSkinnedMesh===!0,morphTargets:P.morphAttributes.position!==void 0,morphNormals:P.morphAttributes.normal!==void 0,morphColors:P.morphAttributes.color!==void 0,morphTargetsCount:de,morphTextureStride:ee,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:y.dithering,shadowMapEnabled:n.shadowMap.enabled&&S.length>0,shadowMapType:n.shadowMap.type,toneMapping:Qe,decodeVideoTexture:Ve&&y.map.isVideoTexture===!0&&Rt.getTransfer(y.map.colorSpace)===Jt,decodeVideoTextureEmissive:ht&&y.emissiveMap.isVideoTexture===!0&&Rt.getTransfer(y.emissiveMap.colorSpace)===Jt,premultipliedAlpha:y.premultipliedAlpha,doubleSided:y.side===Es,flipSided:y.side===Vn,useDepthPacking:y.depthPacking>=0,depthPacking:y.depthPacking||0,index0AttributeName:y.index0AttributeName,extensionClipCullDistance:Te&&y.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Te&&y.extensions.multiDraw===!0||Fe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:y.customProgramCacheKey()};return Ge.vertexUv1s=c.has(1),Ge.vertexUv2s=c.has(2),Ge.vertexUv3s=c.has(3),c.clear(),Ge}function A(y){const E=[];if(y.shaderID?E.push(y.shaderID):(E.push(y.customVertexShaderID),E.push(y.customFragmentShaderID)),y.defines!==void 0)for(const S in y.defines)E.push(S),E.push(y.defines[S]);return y.isRawShaderMaterial===!1&&(C(E,y),v(E,y),E.push(n.outputColorSpace)),E.push(y.customProgramCacheKey),E.join()}function C(y,E){y.push(E.precision),y.push(E.outputColorSpace),y.push(E.envMapMode),y.push(E.envMapCubeUVHeight),y.push(E.mapUv),y.push(E.alphaMapUv),y.push(E.lightMapUv),y.push(E.aoMapUv),y.push(E.bumpMapUv),y.push(E.normalMapUv),y.push(E.displacementMapUv),y.push(E.emissiveMapUv),y.push(E.metalnessMapUv),y.push(E.roughnessMapUv),y.push(E.anisotropyMapUv),y.push(E.clearcoatMapUv),y.push(E.clearcoatNormalMapUv),y.push(E.clearcoatRoughnessMapUv),y.push(E.iridescenceMapUv),y.push(E.iridescenceThicknessMapUv),y.push(E.sheenColorMapUv),y.push(E.sheenRoughnessMapUv),y.push(E.specularMapUv),y.push(E.specularColorMapUv),y.push(E.specularIntensityMapUv),y.push(E.transmissionMapUv),y.push(E.thicknessMapUv),y.push(E.combine),y.push(E.fogExp2),y.push(E.sizeAttenuation),y.push(E.morphTargetsCount),y.push(E.morphAttributeCount),y.push(E.numDirLights),y.push(E.numPointLights),y.push(E.numSpotLights),y.push(E.numSpotLightMaps),y.push(E.numHemiLights),y.push(E.numRectAreaLights),y.push(E.numDirLightShadows),y.push(E.numPointLightShadows),y.push(E.numSpotLightShadows),y.push(E.numSpotLightShadowsWithMaps),y.push(E.numLightProbes),y.push(E.shadowMapType),y.push(E.toneMapping),y.push(E.numClippingPlanes),y.push(E.numClipIntersection),y.push(E.depthPacking)}function v(y,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),y.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),y.push(o.mask)}function I(y){const E=f[y.type];let S;if(E){const R=Jr[E];S=RZ.clone(R.uniforms)}else S=y.uniforms;return S}function w(y,E){let S;for(let R=0,M=h.length;R<M;R++){const T=h[R];if(T.cacheKey===E){S=T,++S.usedTimes;break}}return S===void 0&&(S=new rY(n,E,y,s),h.push(S)),S}function b(y){if(--y.usedTimes===0){const E=h.indexOf(y);h[E]=h[h.length-1],h.pop(),y.destroy()}}function _(y){l.remove(y)}function x(){l.dispose()}return{getParameters:p,getProgramCacheKey:A,getUniforms:I,acquireProgram:w,releaseProgram:b,releaseShaderCache:_,programs:h,dispose:x}}function cY(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function hY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function nx(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function rx(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(u,d,g,f,m,p){let A=n[e];return A===void 0?(A={id:u.id,object:u,geometry:d,material:g,groupOrder:f,renderOrder:u.renderOrder,z:m,group:p},n[e]=A):(A.id=u.id,A.object=u,A.geometry=d,A.material=g,A.groupOrder=f,A.renderOrder=u.renderOrder,A.z=m,A.group=p),e++,A}function o(u,d,g,f,m,p){const A=a(u,d,g,f,m,p);g.transmission>0?i.push(A):g.transparent===!0?r.push(A):t.push(A)}function l(u,d,g,f,m,p){const A=a(u,d,g,f,m,p);g.transmission>0?i.unshift(A):g.transparent===!0?r.unshift(A):t.unshift(A)}function c(u,d){t.length>1&&t.sort(u||hY),i.length>1&&i.sort(d||nx),r.length>1&&r.sort(d||nx)}function h(){for(let u=e,d=n.length;u<d;u++){const g=n[u];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:h,sort:c}}function uY(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new rx,n.set(i,[a])):r>=s.length?(a=new rx,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function dY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ie,color:new mt};break;case"SpotLight":t={position:new ie,direction:new ie,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ie,color:new mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ie,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":t={color:new mt,position:new ie,halfWidth:new ie,halfHeight:new ie};break}return n[e.id]=t,t}}}function gY(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fY=0;function pY(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function AY(n){const e=new dY,t=gY(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new ie);const r=new ie,s=new ni,a=new ni;function o(c){let h=0,u=0,d=0;for(let y=0;y<9;y++)i.probe[y].set(0,0,0);let g=0,f=0,m=0,p=0,A=0,C=0,v=0,I=0,w=0,b=0,_=0;c.sort(pY);for(let y=0,E=c.length;y<E;y++){const S=c[y],R=S.color,M=S.intensity,T=S.distance,P=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)h+=R.r*M,u+=R.g*M,d+=R.b*M;else if(S.isLightProbe){for(let F=0;F<9;F++)i.probe[F].addScaledVector(S.sh.coefficients[F],M);_++}else if(S.isDirectionalLight){const F=e.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity),S.castShadow){const N=S.shadow,L=t.get(S);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,i.directionalShadow[g]=L,i.directionalShadowMap[g]=P,i.directionalShadowMatrix[g]=S.shadow.matrix,C++}i.directional[g]=F,g++}else if(S.isSpotLight){const F=e.get(S);F.position.setFromMatrixPosition(S.matrixWorld),F.color.copy(R).multiplyScalar(M),F.distance=T,F.coneCos=Math.cos(S.angle),F.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),F.decay=S.decay,i.spot[m]=F;const N=S.shadow;if(S.map&&(i.spotLightMap[w]=S.map,w++,N.updateMatrices(S),S.castShadow&&b++),i.spotLightMatrix[m]=N.matrix,S.castShadow){const L=t.get(S);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,i.spotShadow[m]=L,i.spotShadowMap[m]=P,I++}m++}else if(S.isRectAreaLight){const F=e.get(S);F.color.copy(R).multiplyScalar(M),F.halfWidth.set(S.width*.5,0,0),F.halfHeight.set(0,S.height*.5,0),i.rectArea[p]=F,p++}else if(S.isPointLight){const F=e.get(S);if(F.color.copy(S.color).multiplyScalar(S.intensity),F.distance=S.distance,F.decay=S.decay,S.castShadow){const N=S.shadow,L=t.get(S);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,L.shadowCameraNear=N.camera.near,L.shadowCameraFar=N.camera.far,i.pointShadow[f]=L,i.pointShadowMap[f]=P,i.pointShadowMatrix[f]=S.shadow.matrix,v++}i.point[f]=F,f++}else if(S.isHemisphereLight){const F=e.get(S);F.skyColor.copy(S.color).multiplyScalar(M),F.groundColor.copy(S.groundColor).multiplyScalar(M),i.hemi[A]=F,A++}}p>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Be.LTC_FLOAT_1,i.rectAreaLTC2=Be.LTC_FLOAT_2):(i.rectAreaLTC1=Be.LTC_HALF_1,i.rectAreaLTC2=Be.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=u,i.ambient[2]=d;const x=i.hash;(x.directionalLength!==g||x.pointLength!==f||x.spotLength!==m||x.rectAreaLength!==p||x.hemiLength!==A||x.numDirectionalShadows!==C||x.numPointShadows!==v||x.numSpotShadows!==I||x.numSpotMaps!==w||x.numLightProbes!==_)&&(i.directional.length=g,i.spot.length=m,i.rectArea.length=p,i.point.length=f,i.hemi.length=A,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=I+w-b,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=_,x.directionalLength=g,x.pointLength=f,x.spotLength=m,x.rectAreaLength=p,x.hemiLength=A,x.numDirectionalShadows=C,x.numPointShadows=v,x.numSpotShadows=I,x.numSpotMaps=w,x.numLightProbes=_,i.version=fY++)}function l(c,h){let u=0,d=0,g=0,f=0,m=0;const p=h.matrixWorldInverse;for(let A=0,C=c.length;A<C;A++){const v=c[A];if(v.isDirectionalLight){const I=i.directional[u];I.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(p),u++}else if(v.isSpotLight){const I=i.spot[g];I.position.setFromMatrixPosition(v.matrixWorld),I.position.applyMatrix4(p),I.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(p),g++}else if(v.isRectAreaLight){const I=i.rectArea[f];I.position.setFromMatrixPosition(v.matrixWorld),I.position.applyMatrix4(p),a.identity(),s.copy(v.matrixWorld),s.premultiply(p),a.extractRotation(s),I.halfWidth.set(v.width*.5,0,0),I.halfHeight.set(0,v.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),f++}else if(v.isPointLight){const I=i.point[d];I.position.setFromMatrixPosition(v.matrixWorld),I.position.applyMatrix4(p),d++}else if(v.isHemisphereLight){const I=i.hemi[m];I.direction.setFromMatrixPosition(v.matrixWorld),I.direction.transformDirection(p),m++}}}return{setup:o,setupView:l,state:i}}function sx(n){const e=new AY(n),t=[],i=[];function r(h){c.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function a(h){i.push(h)}function o(){e.setup(t)}function l(h){e.setupView(t,h)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function mY(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new sx(n),e.set(r,[o])):s>=a.length?(o=new sx(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const CY=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,IY=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vY(n,e,t){let i=new vv;const r=new ct,s=new ct,a=new hi,o=new kZ({depthPacking:K5}),l=new QZ,c={},h=t.maxTextureSize,u={[Qs]:Vn,[Vn]:Qs,[Es]:Es},d=new Qa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ct},radius:{value:4}},vertexShader:CY,fragmentShader:IY}),g=d.clone();g.defines.HORIZONTAL_PASS=1;const f=new Vr;f.setAttribute("position",new is(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new kn(f,d),p=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lT;let A=this.type;this.render=function(b,_,x){if(p.enabled===!1||p.autoUpdate===!1&&p.needsUpdate===!1||b.length===0)return;const y=n.getRenderTarget(),E=n.getActiveCubeFace(),S=n.getActiveMipmapLevel(),R=n.state;R.setBlending(Da),R.buffers.color.setClear(1,1,1,1),R.buffers.depth.setTest(!0),R.setScissorTest(!1);const M=A!==vs&&this.type===vs,T=A===vs&&this.type!==vs;for(let P=0,F=b.length;P<F;P++){const N=b[P],L=N.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);const W=L.getFrameExtents();if(r.multiply(W),s.copy(L.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/W.x),r.x=s.x*W.x,L.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/W.y),r.y=s.y*W.y,L.mapSize.y=s.y)),L.map===null||M===!0||T===!0){const de=this.type!==vs?{minFilter:kr,magFilter:kr}:{};L.map!==null&&L.map.dispose(),L.map=new Go(r.x,r.y,de),L.map.texture.name=N.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const ne=L.getViewportCount();for(let de=0;de<ne;de++){const ee=L.getViewport(de);a.set(s.x*ee.x,s.y*ee.y,s.x*ee.z,s.y*ee.w),R.viewport(a),L.updateMatrices(N,de),i=L.getFrustum(),I(_,x,L.camera,N,this.type)}L.isPointLightShadow!==!0&&this.type===vs&&C(L,x),L.needsUpdate=!1}A=this.type,p.needsUpdate=!1,n.setRenderTarget(y,E,S)};function C(b,_){const x=e.update(m);d.defines.VSM_SAMPLES!==b.blurSamples&&(d.defines.VSM_SAMPLES=b.blurSamples,g.defines.VSM_SAMPLES=b.blurSamples,d.needsUpdate=!0,g.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Go(r.x,r.y)),d.uniforms.shadow_pass.value=b.map.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(_,null,x,d,m,null),g.uniforms.shadow_pass.value=b.mapPass.texture,g.uniforms.resolution.value=b.mapSize,g.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(_,null,x,g,m,null)}function v(b,_,x,y){let E=null;const S=x.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(S!==void 0)E=S;else if(E=x.isPointLight===!0?l:o,n.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){const R=E.uuid,M=_.uuid;let T=c[R];T===void 0&&(T={},c[R]=T);let P=T[M];P===void 0&&(P=E.clone(),T[M]=P,_.addEventListener("dispose",w)),E=P}if(E.visible=_.visible,E.wireframe=_.wireframe,y===vs?E.side=_.shadowSide!==null?_.shadowSide:_.side:E.side=_.shadowSide!==null?_.shadowSide:u[_.side],E.alphaMap=_.alphaMap,E.alphaTest=_.alphaTest,E.map=_.map,E.clipShadows=_.clipShadows,E.clippingPlanes=_.clippingPlanes,E.clipIntersection=_.clipIntersection,E.displacementMap=_.displacementMap,E.displacementScale=_.displacementScale,E.displacementBias=_.displacementBias,E.wireframeLinewidth=_.wireframeLinewidth,E.linewidth=_.linewidth,x.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const R=n.properties.get(E);R.light=x}return E}function I(b,_,x,y,E){if(b.visible===!1)return;if(b.layers.test(_.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&E===vs)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,b.matrixWorld);const R=e.update(b),M=b.material;if(Array.isArray(M)){const T=R.groups;for(let P=0,F=T.length;P<F;P++){const N=T[P],L=M[N.materialIndex];if(L&&L.visible){const W=v(b,L,y,E);b.onBeforeShadow(n,b,_,x,R,W,N),n.renderBufferDirect(x,null,R,W,b,N),b.onAfterShadow(n,b,_,x,R,W,N)}}}else if(M.visible){const T=v(b,M,y,E);b.onBeforeShadow(n,b,_,x,R,T,null),n.renderBufferDirect(x,null,R,T,b,null),b.onAfterShadow(n,b,_,x,R,T,null)}}const S=b.children;for(let R=0,M=S.length;R<M;R++)I(S[R],_,x,y,E)}function w(b){b.target.removeEventListener("dispose",w);for(const _ in c){const x=c[_],y=b.target.uuid;y in x&&(x[y].dispose(),delete x[y])}}}const yY={[ZC]:HC,[XC]:YC,[JC]:KC,[Tc]:jC,[HC]:ZC,[YC]:XC,[KC]:JC,[jC]:Tc};function wY(n,e){function t(){let Q=!1;const ve=new hi;let V=null;const X=new hi(0,0,0,0);return{setMask:function($){V!==$&&!Q&&(n.colorMask($,$,$,$),V=$)},setLocked:function($){Q=$},setClear:function($,Ae,Te,Qe,Ge){Ge===!0&&($*=Qe,Ae*=Qe,Te*=Qe),ve.set($,Ae,Te,Qe),X.equals(ve)===!1&&(n.clearColor($,Ae,Te,Qe),X.copy(ve))},reset:function(){Q=!1,V=null,X.set(-1,0,0,0)}}}function i(){let Q=!1,ve=!1,V=null,X=null,$=null;return{setReversed:function(Ae){if(ve!==Ae){const Te=e.get("EXT_clip_control");ve?Te.clipControlEXT(Te.LOWER_LEFT_EXT,Te.ZERO_TO_ONE_EXT):Te.clipControlEXT(Te.LOWER_LEFT_EXT,Te.NEGATIVE_ONE_TO_ONE_EXT);const Qe=$;$=null,this.setClear(Qe)}ve=Ae},getReversed:function(){return ve},setTest:function(Ae){Ae?le(n.DEPTH_TEST):xe(n.DEPTH_TEST)},setMask:function(Ae){V!==Ae&&!Q&&(n.depthMask(Ae),V=Ae)},setFunc:function(Ae){if(ve&&(Ae=yY[Ae]),X!==Ae){switch(Ae){case ZC:n.depthFunc(n.NEVER);break;case HC:n.depthFunc(n.ALWAYS);break;case XC:n.depthFunc(n.LESS);break;case Tc:n.depthFunc(n.LEQUAL);break;case JC:n.depthFunc(n.EQUAL);break;case jC:n.depthFunc(n.GEQUAL);break;case YC:n.depthFunc(n.GREATER);break;case KC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}X=Ae}},setLocked:function(Ae){Q=Ae},setClear:function(Ae){$!==Ae&&(ve&&(Ae=1-Ae),n.clearDepth(Ae),$=Ae)},reset:function(){Q=!1,V=null,X=null,$=null,ve=!1}}}function r(){let Q=!1,ve=null,V=null,X=null,$=null,Ae=null,Te=null,Qe=null,Ge=null;return{setTest:function(Ue){Q||(Ue?le(n.STENCIL_TEST):xe(n.STENCIL_TEST))},setMask:function(Ue){ve!==Ue&&!Q&&(n.stencilMask(Ue),ve=Ue)},setFunc:function(Ue,Ye,Ct){(V!==Ue||X!==Ye||$!==Ct)&&(n.stencilFunc(Ue,Ye,Ct),V=Ue,X=Ye,$=Ct)},setOp:function(Ue,Ye,Ct){(Ae!==Ue||Te!==Ye||Qe!==Ct)&&(n.stencilOp(Ue,Ye,Ct),Ae=Ue,Te=Ye,Qe=Ct)},setLocked:function(Ue){Q=Ue},setClear:function(Ue){Ge!==Ue&&(n.clearStencil(Ue),Ge=Ue)},reset:function(){Q=!1,ve=null,V=null,X=null,$=null,Ae=null,Te=null,Qe=null,Ge=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,c=new WeakMap;let h={},u={},d=new WeakMap,g=[],f=null,m=!1,p=null,A=null,C=null,v=null,I=null,w=null,b=null,_=new mt(0,0,0),x=0,y=!1,E=null,S=null,R=null,M=null,T=null;const P=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,N=0;const L=n.getParameter(n.VERSION);L.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(L)[1]),F=N>=1):L.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),F=N>=2);let W=null,ne={};const de=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),Me=new hi().fromArray(de),G=new hi().fromArray(ee);function te(Q,ve,V,X){const $=new Uint8Array(4),Ae=n.createTexture();n.bindTexture(Q,Ae),n.texParameteri(Q,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Q,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Te=0;Te<V;Te++)Q===n.TEXTURE_3D||Q===n.TEXTURE_2D_ARRAY?n.texImage3D(ve,0,n.RGBA,1,1,X,0,n.RGBA,n.UNSIGNED_BYTE,$):n.texImage2D(ve+Te,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,$);return Ae}const we={};we[n.TEXTURE_2D]=te(n.TEXTURE_2D,n.TEXTURE_2D,1),we[n.TEXTURE_CUBE_MAP]=te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[n.TEXTURE_2D_ARRAY]=te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),we[n.TEXTURE_3D]=te(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),le(n.DEPTH_TEST),a.setFunc(Tc),Ze(!1),We(t_),le(n.CULL_FACE),z(Da);function le(Q){h[Q]!==!0&&(n.enable(Q),h[Q]=!0)}function xe(Q){h[Q]!==!1&&(n.disable(Q),h[Q]=!1)}function Re(Q,ve){return u[Q]!==ve?(n.bindFramebuffer(Q,ve),u[Q]=ve,Q===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=ve),Q===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=ve),!0):!1}function Fe(Q,ve){let V=g,X=!1;if(Q){V=d.get(ve),V===void 0&&(V=[],d.set(ve,V));const $=Q.textures;if(V.length!==$.length||V[0]!==n.COLOR_ATTACHMENT0){for(let Ae=0,Te=$.length;Ae<Te;Ae++)V[Ae]=n.COLOR_ATTACHMENT0+Ae;V.length=$.length,X=!0}}else V[0]!==n.BACK&&(V[0]=n.BACK,X=!0);X&&n.drawBuffers(V)}function Ve(Q){return f!==Q?(n.useProgram(Q),f=Q,!0):!1}const $e={[lo]:n.FUNC_ADD,[E5]:n.FUNC_SUBTRACT,[b5]:n.FUNC_REVERSE_SUBTRACT};$e[_5]=n.MIN,$e[x5]=n.MAX;const xt={[S5]:n.ZERO,[M5]:n.ONE,[R5]:n.SRC_COLOR,[GC]:n.SRC_ALPHA,[L5]:n.SRC_ALPHA_SATURATE,[B5]:n.DST_COLOR,[U5]:n.DST_ALPHA,[T5]:n.ONE_MINUS_SRC_COLOR,[WC]:n.ONE_MINUS_SRC_ALPHA,[D5]:n.ONE_MINUS_DST_COLOR,[F5]:n.ONE_MINUS_DST_ALPHA,[P5]:n.CONSTANT_COLOR,[N5]:n.ONE_MINUS_CONSTANT_COLOR,[k5]:n.CONSTANT_ALPHA,[Q5]:n.ONE_MINUS_CONSTANT_ALPHA};function z(Q,ve,V,X,$,Ae,Te,Qe,Ge,Ue){if(Q===Da){m===!0&&(xe(n.BLEND),m=!1);return}if(m===!1&&(le(n.BLEND),m=!0),Q!==w5){if(Q!==p||Ue!==y){if((A!==lo||I!==lo)&&(n.blendEquation(n.FUNC_ADD),A=lo,I=lo),Ue)switch(Q){case gc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i_:n.blendFunc(n.ONE,n.ONE);break;case n_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case gc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case i_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case n_:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case r_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}C=null,v=null,w=null,b=null,_.set(0,0,0),x=0,p=Q,y=Ue}return}$=$||ve,Ae=Ae||V,Te=Te||X,(ve!==A||$!==I)&&(n.blendEquationSeparate($e[ve],$e[$]),A=ve,I=$),(V!==C||X!==v||Ae!==w||Te!==b)&&(n.blendFuncSeparate(xt[V],xt[X],xt[Ae],xt[Te]),C=V,v=X,w=Ae,b=Te),(Qe.equals(_)===!1||Ge!==x)&&(n.blendColor(Qe.r,Qe.g,Qe.b,Ge),_.copy(Qe),x=Ge),p=Q,y=!1}function St(Q,ve){Q.side===Es?xe(n.CULL_FACE):le(n.CULL_FACE);let V=Q.side===Vn;ve&&(V=!V),Ze(V),Q.blending===gc&&Q.transparent===!1?z(Da):z(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),a.setFunc(Q.depthFunc),a.setTest(Q.depthTest),a.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const X=Q.stencilWrite;o.setTest(X),X&&(o.setMask(Q.stencilWriteMask),o.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),o.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),ht(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?le(n.SAMPLE_ALPHA_TO_COVERAGE):xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ze(Q){E!==Q&&(Q?n.frontFace(n.CW):n.frontFace(n.CCW),E=Q)}function We(Q){Q!==I5?(le(n.CULL_FACE),Q!==S&&(Q===t_?n.cullFace(n.BACK):Q===v5?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):xe(n.CULL_FACE),S=Q}function Le(Q){Q!==R&&(F&&n.lineWidth(Q),R=Q)}function ht(Q,ve,V){Q?(le(n.POLYGON_OFFSET_FILL),(M!==ve||T!==V)&&(n.polygonOffset(ve,V),M=ve,T=V)):xe(n.POLYGON_OFFSET_FILL)}function Pe(Q){Q?le(n.SCISSOR_TEST):xe(n.SCISSOR_TEST)}function k(Q){Q===void 0&&(Q=n.TEXTURE0+P-1),W!==Q&&(n.activeTexture(Q),W=Q)}function U(Q,ve,V){V===void 0&&(W===null?V=n.TEXTURE0+P-1:V=W);let X=ne[V];X===void 0&&(X={type:void 0,texture:void 0},ne[V]=X),(X.type!==Q||X.texture!==ve)&&(W!==V&&(n.activeTexture(V),W=V),n.bindTexture(Q,ve||we[Q]),X.type=Q,X.texture=ve)}function Y(){const Q=ne[W];Q!==void 0&&Q.type!==void 0&&(n.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function ge(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function pe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function D(){try{n.texSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function O(){try{n.texSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function H(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function K(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ye(){try{n.texStorage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function J(){try{n.texStorage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function se(){try{n.texImage2D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function fe(){try{n.texImage3D.apply(n,arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ue(Q){Me.equals(Q)===!1&&(n.scissor(Q.x,Q.y,Q.z,Q.w),Me.copy(Q))}function ce(Q){G.equals(Q)===!1&&(n.viewport(Q.x,Q.y,Q.z,Q.w),G.copy(Q))}function be(Q,ve){let V=c.get(ve);V===void 0&&(V=new WeakMap,c.set(ve,V));let X=V.get(Q);X===void 0&&(X=n.getUniformBlockIndex(ve,Q.name),V.set(Q,X))}function he(Q,ve){const V=c.get(ve).get(Q);l.get(ve)!==V&&(n.uniformBlockBinding(ve,V,Q.__bindingPointIndex),l.set(ve,V))}function Ee(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},W=null,ne={},u={},d=new WeakMap,g=[],f=null,m=!1,p=null,A=null,C=null,v=null,I=null,w=null,b=null,_=new mt(0,0,0),x=0,y=!1,E=null,S=null,R=null,M=null,T=null,Me.set(0,0,n.canvas.width,n.canvas.height),G.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:le,disable:xe,bindFramebuffer:Re,drawBuffers:Fe,useProgram:Ve,setBlending:z,setMaterial:St,setFlipSided:Ze,setCullFace:We,setLineWidth:Le,setPolygonOffset:ht,setScissorTest:Pe,activeTexture:k,bindTexture:U,unbindTexture:Y,compressedTexImage2D:ge,compressedTexImage3D:pe,texImage2D:se,texImage3D:fe,updateUBOMapping:be,uniformBlockBinding:he,texStorage2D:ye,texStorage3D:J,texSubImage2D:D,texSubImage3D:O,compressedTexSubImage2D:H,compressedTexSubImage3D:K,scissor:ue,viewport:ce,reset:Ee}}function EY(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new ct,h=new WeakMap;let u;const d=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function f(k,U){return g?new OffscreenCanvas(k,U):Ru("canvas")}function m(k,U,Y){let ge=1;const pe=Pe(k);if((pe.width>Y||pe.height>Y)&&(ge=Y/Math.max(pe.width,pe.height)),ge<1)if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap||typeof VideoFrame<"u"&&k instanceof VideoFrame){const D=Math.floor(ge*pe.width),O=Math.floor(ge*pe.height);u===void 0&&(u=f(D,O));const H=U?f(D,O):u;return H.width=D,H.height=O,H.getContext("2d").drawImage(k,0,0,D,O),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+D+"x"+O+")."),H}else return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),k;return k}function p(k){return k.generateMipmaps}function A(k){n.generateMipmap(k)}function C(k){return k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:k.isWebGL3DRenderTarget?n.TEXTURE_3D:k.isWebGLArrayRenderTarget||k.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function v(k,U,Y,ge,pe=!1){if(k!==null){if(n[k]!==void 0)return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let D=U;if(U===n.RED&&(Y===n.FLOAT&&(D=n.R32F),Y===n.HALF_FLOAT&&(D=n.R16F),Y===n.UNSIGNED_BYTE&&(D=n.R8)),U===n.RED_INTEGER&&(Y===n.UNSIGNED_BYTE&&(D=n.R8UI),Y===n.UNSIGNED_SHORT&&(D=n.R16UI),Y===n.UNSIGNED_INT&&(D=n.R32UI),Y===n.BYTE&&(D=n.R8I),Y===n.SHORT&&(D=n.R16I),Y===n.INT&&(D=n.R32I)),U===n.RG&&(Y===n.FLOAT&&(D=n.RG32F),Y===n.HALF_FLOAT&&(D=n.RG16F),Y===n.UNSIGNED_BYTE&&(D=n.RG8)),U===n.RG_INTEGER&&(Y===n.UNSIGNED_BYTE&&(D=n.RG8UI),Y===n.UNSIGNED_SHORT&&(D=n.RG16UI),Y===n.UNSIGNED_INT&&(D=n.RG32UI),Y===n.BYTE&&(D=n.RG8I),Y===n.SHORT&&(D=n.RG16I),Y===n.INT&&(D=n.RG32I)),U===n.RGB_INTEGER&&(Y===n.UNSIGNED_BYTE&&(D=n.RGB8UI),Y===n.UNSIGNED_SHORT&&(D=n.RGB16UI),Y===n.UNSIGNED_INT&&(D=n.RGB32UI),Y===n.BYTE&&(D=n.RGB8I),Y===n.SHORT&&(D=n.RGB16I),Y===n.INT&&(D=n.RGB32I)),U===n.RGBA_INTEGER&&(Y===n.UNSIGNED_BYTE&&(D=n.RGBA8UI),Y===n.UNSIGNED_SHORT&&(D=n.RGBA16UI),Y===n.UNSIGNED_INT&&(D=n.RGBA32UI),Y===n.BYTE&&(D=n.RGBA8I),Y===n.SHORT&&(D=n.RGBA16I),Y===n.INT&&(D=n.RGBA32I)),U===n.RGB&&Y===n.UNSIGNED_INT_5_9_9_9_REV&&(D=n.RGB9_E5),U===n.RGBA){const O=pe?Cf:Rt.getTransfer(ge);Y===n.FLOAT&&(D=n.RGBA32F),Y===n.HALF_FLOAT&&(D=n.RGBA16F),Y===n.UNSIGNED_BYTE&&(D=O===Jt?n.SRGB8_ALPHA8:n.RGBA8),Y===n.UNSIGNED_SHORT_4_4_4_4&&(D=n.RGBA4),Y===n.UNSIGNED_SHORT_5_5_5_1&&(D=n.RGB5_A1)}return(D===n.R16F||D===n.R32F||D===n.RG16F||D===n.RG32F||D===n.RGBA16F||D===n.RGBA32F)&&e.get("EXT_color_buffer_float"),D}function I(k,U){let Y;return k?U===null||U===zo||U===Bc?Y=n.DEPTH24_STENCIL8:U===bs?Y=n.DEPTH32F_STENCIL8:U===Mu&&(Y=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):U===null||U===zo||U===Bc?Y=n.DEPTH_COMPONENT24:U===bs?Y=n.DEPTH_COMPONENT32F:U===Mu&&(Y=n.DEPTH_COMPONENT16),Y}function w(k,U){return p(k)===!0||k.isFramebufferTexture&&k.minFilter!==kr&&k.minFilter!==qr?Math.log2(Math.max(U.width,U.height))+1:k.mipmaps!==void 0&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?U.mipmaps.length:1}function b(k){const U=k.target;U.removeEventListener("dispose",b),x(U),U.isVideoTexture&&h.delete(U)}function _(k){const U=k.target;U.removeEventListener("dispose",_),E(U)}function x(k){const U=i.get(k);if(U.__webglInit===void 0)return;const Y=k.source,ge=d.get(Y);if(ge){const pe=ge[U.__cacheKey];pe.usedTimes--,pe.usedTimes===0&&y(k),Object.keys(ge).length===0&&d.delete(Y)}i.remove(k)}function y(k){const U=i.get(k);n.deleteTexture(U.__webglTexture);const Y=k.source,ge=d.get(Y);delete ge[U.__cacheKey],a.memory.textures--}function E(k){const U=i.get(k);if(k.depthTexture&&(k.depthTexture.dispose(),i.remove(k.depthTexture)),k.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++){if(Array.isArray(U.__webglFramebuffer[ge]))for(let pe=0;pe<U.__webglFramebuffer[ge].length;pe++)n.deleteFramebuffer(U.__webglFramebuffer[ge][pe]);else n.deleteFramebuffer(U.__webglFramebuffer[ge]);U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer[ge])}else{if(Array.isArray(U.__webglFramebuffer))for(let ge=0;ge<U.__webglFramebuffer.length;ge++)n.deleteFramebuffer(U.__webglFramebuffer[ge]);else n.deleteFramebuffer(U.__webglFramebuffer);if(U.__webglDepthbuffer&&n.deleteRenderbuffer(U.__webglDepthbuffer),U.__webglMultisampledFramebuffer&&n.deleteFramebuffer(U.__webglMultisampledFramebuffer),U.__webglColorRenderbuffer)for(let ge=0;ge<U.__webglColorRenderbuffer.length;ge++)U.__webglColorRenderbuffer[ge]&&n.deleteRenderbuffer(U.__webglColorRenderbuffer[ge]);U.__webglDepthRenderbuffer&&n.deleteRenderbuffer(U.__webglDepthRenderbuffer)}const Y=k.textures;for(let ge=0,pe=Y.length;ge<pe;ge++){const D=i.get(Y[ge]);D.__webglTexture&&(n.deleteTexture(D.__webglTexture),a.memory.textures--),i.remove(Y[ge])}i.remove(k)}let S=0;function R(){S=0}function M(){const k=S;return k>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+r.maxTextures),S+=1,k}function T(k){const U=[];return U.push(k.wrapS),U.push(k.wrapT),U.push(k.wrapR||0),U.push(k.magFilter),U.push(k.minFilter),U.push(k.anisotropy),U.push(k.internalFormat),U.push(k.format),U.push(k.type),U.push(k.generateMipmaps),U.push(k.premultiplyAlpha),U.push(k.flipY),U.push(k.unpackAlignment),U.push(k.colorSpace),U.join()}function P(k,U){const Y=i.get(k);if(k.isVideoTexture&&Le(k),k.isRenderTargetTexture===!1&&k.version>0&&Y.__version!==k.version){const ge=k.image;if(ge===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{G(Y,k,U);return}}t.bindTexture(n.TEXTURE_2D,Y.__webglTexture,n.TEXTURE0+U)}function F(k,U){const Y=i.get(k);if(k.version>0&&Y.__version!==k.version){G(Y,k,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Y.__webglTexture,n.TEXTURE0+U)}function N(k,U){const Y=i.get(k);if(k.version>0&&Y.__version!==k.version){G(Y,k,U);return}t.bindTexture(n.TEXTURE_3D,Y.__webglTexture,n.TEXTURE0+U)}function L(k,U){const Y=i.get(k);if(k.version>0&&Y.__version!==k.version){te(Y,k,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture,n.TEXTURE0+U)}const W={[mf]:n.REPEAT,[Io]:n.CLAMP_TO_EDGE,[eI]:n.MIRRORED_REPEAT},ne={[kr]:n.NEAREST,[j5]:n.NEAREST_MIPMAP_NEAREST,[Gd]:n.NEAREST_MIPMAP_LINEAR,[qr]:n.LINEAR,[$A]:n.LINEAR_MIPMAP_NEAREST,[vo]:n.LINEAR_MIPMAP_LINEAR},de={[$5]:n.NEVER,[sZ]:n.ALWAYS,[eZ]:n.LESS,[yT]:n.LEQUAL,[tZ]:n.EQUAL,[rZ]:n.GEQUAL,[iZ]:n.GREATER,[nZ]:n.NOTEQUAL};function ee(k,U){if(U.type===bs&&e.has("OES_texture_float_linear")===!1&&(U.magFilter===qr||U.magFilter===$A||U.magFilter===Gd||U.magFilter===vo||U.minFilter===qr||U.minFilter===$A||U.minFilter===Gd||U.minFilter===vo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(k,n.TEXTURE_WRAP_S,W[U.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,W[U.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,W[U.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,ne[U.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,ne[U.minFilter]),U.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,de[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(U.magFilter===kr||U.minFilter!==Gd&&U.minFilter!==vo||U.type===bs&&e.has("OES_texture_float_linear")===!1)return;if(U.anisotropy>1||i.get(U).__currentAnisotropy){const Y=e.get("EXT_texture_filter_anisotropic");n.texParameterf(k,Y.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,r.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy}}}function Me(k,U){let Y=!1;k.__webglInit===void 0&&(k.__webglInit=!0,U.addEventListener("dispose",b));const ge=U.source;let pe=d.get(ge);pe===void 0&&(pe={},d.set(ge,pe));const D=T(U);if(D!==k.__cacheKey){pe[D]===void 0&&(pe[D]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Y=!0),pe[D].usedTimes++;const O=pe[k.__cacheKey];O!==void 0&&(pe[k.__cacheKey].usedTimes--,O.usedTimes===0&&y(U)),k.__cacheKey=D,k.__webglTexture=pe[D].texture}return Y}function G(k,U,Y){let ge=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(ge=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(ge=n.TEXTURE_3D);const pe=Me(k,U),D=U.source;t.bindTexture(ge,k.__webglTexture,n.TEXTURE0+Y);const O=i.get(D);if(D.version!==O.__version||pe===!0){t.activeTexture(n.TEXTURE0+Y);const H=Rt.getPrimaries(Rt.workingColorSpace),K=U.colorSpace===ba?null:Rt.getPrimaries(U.colorSpace),ye=U.colorSpace===ba||H===K?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);let J=m(U.image,!1,r.maxTextureSize);J=ht(U,J);const se=s.convert(U.format,U.colorSpace),fe=s.convert(U.type);let ue=v(U.internalFormat,se,fe,U.colorSpace,U.isVideoTexture);ee(ge,U);let ce;const be=U.mipmaps,he=U.isVideoTexture!==!0,Ee=O.__version===void 0||pe===!0,Q=D.dataReady,ve=w(U,J);if(U.isDepthTexture)ue=I(U.format===Dc,U.type),Ee&&(he?t.texStorage2D(n.TEXTURE_2D,1,ue,J.width,J.height):t.texImage2D(n.TEXTURE_2D,0,ue,J.width,J.height,0,se,fe,null));else if(U.isDataTexture)if(be.length>0){he&&Ee&&t.texStorage2D(n.TEXTURE_2D,ve,ue,be[0].width,be[0].height);for(let V=0,X=be.length;V<X;V++)ce=be[V],he?Q&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,ce.width,ce.height,se,fe,ce.data):t.texImage2D(n.TEXTURE_2D,V,ue,ce.width,ce.height,0,se,fe,ce.data);U.generateMipmaps=!1}else he?(Ee&&t.texStorage2D(n.TEXTURE_2D,ve,ue,J.width,J.height),Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,J.width,J.height,se,fe,J.data)):t.texImage2D(n.TEXTURE_2D,0,ue,J.width,J.height,0,se,fe,J.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){he&&Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,ue,be[0].width,be[0].height,J.depth);for(let V=0,X=be.length;V<X;V++)if(ce=be[V],U.format!==Pr)if(se!==null)if(he){if(Q)if(U.layerUpdates.size>0){const $=L_(ce.width,ce.height,U.format,U.type);for(const Ae of U.layerUpdates){const Te=ce.data.subarray(Ae*$/ce.data.BYTES_PER_ELEMENT,(Ae+1)*$/ce.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,V,0,0,Ae,ce.width,ce.height,1,se,Te)}U.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,V,0,0,0,ce.width,ce.height,J.depth,se,ce.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,V,ue,ce.width,ce.height,J.depth,0,ce.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?Q&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,V,0,0,0,ce.width,ce.height,J.depth,se,fe,ce.data):t.texImage3D(n.TEXTURE_2D_ARRAY,V,ue,ce.width,ce.height,J.depth,0,se,fe,ce.data)}else{he&&Ee&&t.texStorage2D(n.TEXTURE_2D,ve,ue,be[0].width,be[0].height);for(let V=0,X=be.length;V<X;V++)ce=be[V],U.format!==Pr?se!==null?he?Q&&t.compressedTexSubImage2D(n.TEXTURE_2D,V,0,0,ce.width,ce.height,se,ce.data):t.compressedTexImage2D(n.TEXTURE_2D,V,ue,ce.width,ce.height,0,ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?Q&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,ce.width,ce.height,se,fe,ce.data):t.texImage2D(n.TEXTURE_2D,V,ue,ce.width,ce.height,0,se,fe,ce.data)}else if(U.isDataArrayTexture)if(he){if(Ee&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ve,ue,J.width,J.height,J.depth),Q)if(U.layerUpdates.size>0){const V=L_(J.width,J.height,U.format,U.type);for(const X of U.layerUpdates){const $=J.data.subarray(X*V/J.data.BYTES_PER_ELEMENT,(X+1)*V/J.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,X,J.width,J.height,1,se,fe,$)}U.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,J.width,J.height,J.depth,se,fe,J.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ue,J.width,J.height,J.depth,0,se,fe,J.data);else if(U.isData3DTexture)he?(Ee&&t.texStorage3D(n.TEXTURE_3D,ve,ue,J.width,J.height,J.depth),Q&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,J.width,J.height,J.depth,se,fe,J.data)):t.texImage3D(n.TEXTURE_3D,0,ue,J.width,J.height,J.depth,0,se,fe,J.data);else if(U.isFramebufferTexture){if(Ee)if(he)t.texStorage2D(n.TEXTURE_2D,ve,ue,J.width,J.height);else{let V=J.width,X=J.height;for(let $=0;$<ve;$++)t.texImage2D(n.TEXTURE_2D,$,ue,V,X,0,se,fe,null),V>>=1,X>>=1}}else if(be.length>0){if(he&&Ee){const V=Pe(be[0]);t.texStorage2D(n.TEXTURE_2D,ve,ue,V.width,V.height)}for(let V=0,X=be.length;V<X;V++)ce=be[V],he?Q&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,se,fe,ce):t.texImage2D(n.TEXTURE_2D,V,ue,se,fe,ce);U.generateMipmaps=!1}else if(he){if(Ee){const V=Pe(J);t.texStorage2D(n.TEXTURE_2D,ve,ue,V.width,V.height)}Q&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,se,fe,J)}else t.texImage2D(n.TEXTURE_2D,0,ue,se,fe,J);p(U)&&A(ge),O.__version=D.version,U.onUpdate&&U.onUpdate(U)}k.__version=U.version}function te(k,U,Y){if(U.image.length!==6)return;const ge=Me(k,U),pe=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+Y);const D=i.get(pe);if(pe.version!==D.__version||ge===!0){t.activeTexture(n.TEXTURE0+Y);const O=Rt.getPrimaries(Rt.workingColorSpace),H=U.colorSpace===ba?null:Rt.getPrimaries(U.colorSpace),K=U.colorSpace===ba||O===H?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,K);const ye=U.isCompressedTexture||U.image[0].isCompressedTexture,J=U.image[0]&&U.image[0].isDataTexture,se=[];for(let X=0;X<6;X++)!ye&&!J?se[X]=m(U.image[X],!0,r.maxCubemapSize):se[X]=J?U.image[X].image:U.image[X],se[X]=ht(U,se[X]);const fe=se[0],ue=s.convert(U.format,U.colorSpace),ce=s.convert(U.type),be=v(U.internalFormat,ue,ce,U.colorSpace),he=U.isVideoTexture!==!0,Ee=D.__version===void 0||ge===!0,Q=pe.dataReady;let ve=w(U,fe);ee(n.TEXTURE_CUBE_MAP,U);let V;if(ye){he&&Ee&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ve,be,fe.width,fe.height);for(let X=0;X<6;X++){V=se[X].mipmaps;for(let $=0;$<V.length;$++){const Ae=V[$];U.format!==Pr?ue!==null?he?Q&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$,0,0,Ae.width,Ae.height,ue,Ae.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$,be,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$,0,0,Ae.width,Ae.height,ue,ce,Ae.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$,be,Ae.width,Ae.height,0,ue,ce,Ae.data)}}}else{if(V=U.mipmaps,he&&Ee){V.length>0&&ve++;const X=Pe(se[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ve,be,X.width,X.height)}for(let X=0;X<6;X++)if(J){he?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,se[X].width,se[X].height,ue,ce,se[X].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,be,se[X].width,se[X].height,0,ue,ce,se[X].data);for(let $=0;$<V.length;$++){const Ae=V[$].image[X].image;he?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$+1,0,0,Ae.width,Ae.height,ue,ce,Ae.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$+1,be,Ae.width,Ae.height,0,ue,ce,Ae.data)}}else{he?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,0,0,ue,ce,se[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,0,be,ue,ce,se[X]);for(let $=0;$<V.length;$++){const Ae=V[$];he?Q&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$+1,0,0,ue,ce,Ae.image[X]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+X,$+1,be,ue,ce,Ae.image[X])}}}p(U)&&A(n.TEXTURE_CUBE_MAP),D.__version=pe.version,U.onUpdate&&U.onUpdate(U)}k.__version=U.version}function we(k,U,Y,ge,pe,D){const O=s.convert(Y.format,Y.colorSpace),H=s.convert(Y.type),K=v(Y.internalFormat,O,H,Y.colorSpace),ye=i.get(U),J=i.get(Y);if(J.__renderTarget=U,!ye.__hasExternalTextures){const se=Math.max(1,U.width>>D),fe=Math.max(1,U.height>>D);pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY?t.texImage3D(pe,D,K,se,fe,U.depth,0,O,H,null):t.texImage2D(pe,D,K,se,fe,0,O,H,null)}t.bindFramebuffer(n.FRAMEBUFFER,k),We(U)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ge,pe,J.__webglTexture,0,Ze(U)):(pe===n.TEXTURE_2D||pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ge,pe,J.__webglTexture,D),t.bindFramebuffer(n.FRAMEBUFFER,null)}function le(k,U,Y){if(n.bindRenderbuffer(n.RENDERBUFFER,k),U.depthBuffer){const ge=U.depthTexture,pe=ge&&ge.isDepthTexture?ge.type:null,D=I(U.stencilBuffer,pe),O=U.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,H=Ze(U);We(U)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,H,D,U.width,U.height):Y?n.renderbufferStorageMultisample(n.RENDERBUFFER,H,D,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,D,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,O,n.RENDERBUFFER,k)}else{const ge=U.textures;for(let pe=0;pe<ge.length;pe++){const D=ge[pe],O=s.convert(D.format,D.colorSpace),H=s.convert(D.type),K=v(D.internalFormat,O,H,D.colorSpace),ye=Ze(U);Y&&We(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ye,K,U.width,U.height):We(U)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ye,K,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,K,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(k,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Y=i.get(U.depthTexture);Y.__renderTarget=U,(!Y.__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),P(U.depthTexture,0);const ge=Y.__webglTexture,pe=Ze(U);if(U.depthTexture.format===fc)We(U)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ge,0);else if(U.depthTexture.format===Dc)We(U)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0,pe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ge,0);else throw new Error("Unknown depthTexture format")}function Re(k){const U=i.get(k),Y=k.isWebGLCubeRenderTarget===!0;if(U.__boundDepthTexture!==k.depthTexture){const ge=k.depthTexture;if(U.__depthDisposeCallback&&U.__depthDisposeCallback(),ge){const pe=()=>{delete U.__boundDepthTexture,delete U.__depthDisposeCallback,ge.removeEventListener("dispose",pe)};ge.addEventListener("dispose",pe),U.__depthDisposeCallback=pe}U.__boundDepthTexture=ge}if(k.depthTexture&&!U.__autoAllocateDepthBuffer){if(Y)throw new Error("target.depthTexture not supported in Cube render targets");xe(U.__webglFramebuffer,k)}else if(Y){U.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)if(t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[ge]),U.__webglDepthbuffer[ge]===void 0)U.__webglDepthbuffer[ge]=n.createRenderbuffer(),le(U.__webglDepthbuffer[ge],k,!1);else{const pe=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,D=U.__webglDepthbuffer[ge];n.bindRenderbuffer(n.RENDERBUFFER,D),n.framebufferRenderbuffer(n.FRAMEBUFFER,pe,n.RENDERBUFFER,D)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer===void 0)U.__webglDepthbuffer=n.createRenderbuffer(),le(U.__webglDepthbuffer,k,!1);else{const ge=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=U.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ge,n.RENDERBUFFER,pe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Fe(k,U,Y){const ge=i.get(k);U!==void 0&&we(ge.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Y!==void 0&&Re(k)}function Ve(k){const U=k.texture,Y=i.get(k),ge=i.get(U);k.addEventListener("dispose",_);const pe=k.textures,D=k.isWebGLCubeRenderTarget===!0,O=pe.length>1;if(O||(ge.__webglTexture===void 0&&(ge.__webglTexture=n.createTexture()),ge.__version=U.version,a.memory.textures++),D){Y.__webglFramebuffer=[];for(let H=0;H<6;H++)if(U.mipmaps&&U.mipmaps.length>0){Y.__webglFramebuffer[H]=[];for(let K=0;K<U.mipmaps.length;K++)Y.__webglFramebuffer[H][K]=n.createFramebuffer()}else Y.__webglFramebuffer[H]=n.createFramebuffer()}else{if(U.mipmaps&&U.mipmaps.length>0){Y.__webglFramebuffer=[];for(let H=0;H<U.mipmaps.length;H++)Y.__webglFramebuffer[H]=n.createFramebuffer()}else Y.__webglFramebuffer=n.createFramebuffer();if(O)for(let H=0,K=pe.length;H<K;H++){const ye=i.get(pe[H]);ye.__webglTexture===void 0&&(ye.__webglTexture=n.createTexture(),a.memory.textures++)}if(k.samples>0&&We(k)===!1){Y.__webglMultisampledFramebuffer=n.createFramebuffer(),Y.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglMultisampledFramebuffer);for(let H=0;H<pe.length;H++){const K=pe[H];Y.__webglColorRenderbuffer[H]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Y.__webglColorRenderbuffer[H]);const ye=s.convert(K.format,K.colorSpace),J=s.convert(K.type),se=v(K.internalFormat,ye,J,K.colorSpace,k.isXRRenderTarget===!0),fe=Ze(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,fe,se,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+H,n.RENDERBUFFER,Y.__webglColorRenderbuffer[H])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(Y.__webglDepthRenderbuffer=n.createRenderbuffer(),le(Y.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(D){t.bindTexture(n.TEXTURE_CUBE_MAP,ge.__webglTexture),ee(n.TEXTURE_CUBE_MAP,U);for(let H=0;H<6;H++)if(U.mipmaps&&U.mipmaps.length>0)for(let K=0;K<U.mipmaps.length;K++)we(Y.__webglFramebuffer[H][K],k,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,K);else we(Y.__webglFramebuffer[H],k,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+H,0);p(U)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(O){for(let H=0,K=pe.length;H<K;H++){const ye=pe[H],J=i.get(ye);t.bindTexture(n.TEXTURE_2D,J.__webglTexture),ee(n.TEXTURE_2D,ye),we(Y.__webglFramebuffer,k,ye,n.COLOR_ATTACHMENT0+H,n.TEXTURE_2D,0),p(ye)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let H=n.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(H=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(H,ge.__webglTexture),ee(H,U),U.mipmaps&&U.mipmaps.length>0)for(let K=0;K<U.mipmaps.length;K++)we(Y.__webglFramebuffer[K],k,U,n.COLOR_ATTACHMENT0,H,K);else we(Y.__webglFramebuffer,k,U,n.COLOR_ATTACHMENT0,H,0);p(U)&&A(H),t.unbindTexture()}k.depthBuffer&&Re(k)}function $e(k){const U=k.textures;for(let Y=0,ge=U.length;Y<ge;Y++){const pe=U[Y];if(p(pe)){const D=C(k),O=i.get(pe).__webglTexture;t.bindTexture(D,O),A(D),t.unbindTexture()}}}const xt=[],z=[];function St(k){if(k.samples>0){if(We(k)===!1){const U=k.textures,Y=k.width,ge=k.height;let pe=n.COLOR_BUFFER_BIT;const D=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,O=i.get(k),H=U.length>1;if(H)for(let K=0;K<U.length;K++)t.bindFramebuffer(n.FRAMEBUFFER,O.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+K,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+K,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,O.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,O.__webglFramebuffer);for(let K=0;K<U.length;K++){if(k.resolveDepthBuffer&&(k.depthBuffer&&(pe|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&k.resolveStencilBuffer&&(pe|=n.STENCIL_BUFFER_BIT)),H){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,O.__webglColorRenderbuffer[K]);const ye=i.get(U[K]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ye,0)}n.blitFramebuffer(0,0,Y,ge,0,0,Y,ge,pe,n.NEAREST),l===!0&&(xt.length=0,z.length=0,xt.push(n.COLOR_ATTACHMENT0+K),k.depthBuffer&&k.resolveDepthBuffer===!1&&(xt.push(D),z.push(D),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,z)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,xt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),H)for(let K=0;K<U.length;K++){t.bindFramebuffer(n.FRAMEBUFFER,O.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+K,n.RENDERBUFFER,O.__webglColorRenderbuffer[K]);const ye=i.get(U[K]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,O.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+K,n.TEXTURE_2D,ye,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,O.__webglMultisampledFramebuffer)}else if(k.depthBuffer&&k.resolveDepthBuffer===!1&&l){const U=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[U])}}}function Ze(k){return Math.min(r.maxSamples,k.samples)}function We(k){const U=i.get(k);return k.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function Le(k){const U=a.render.frame;h.get(k)!==U&&(h.set(k,U),k.update())}function ht(k,U){const Y=k.colorSpace,ge=k.format,pe=k.type;return k.isCompressedTexture===!0||k.isVideoTexture===!0||Y!==Lc&&Y!==ba&&(Rt.getTransfer(Y)===Jt?(ge!==Pr||pe!==Os)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Y)),U}function Pe(k){return typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement?(c.width=k.naturalWidth||k.width,c.height=k.naturalHeight||k.height):typeof VideoFrame<"u"&&k instanceof VideoFrame?(c.width=k.displayWidth,c.height=k.displayHeight):(c.width=k.width,c.height=k.height),c}this.allocateTextureUnit=M,this.resetTextureUnits=R,this.setTexture2D=P,this.setTexture2DArray=F,this.setTexture3D=N,this.setTextureCube=L,this.rebindTextures=Fe,this.setupRenderTarget=Ve,this.updateRenderTargetMipmap=$e,this.updateMultisampleRenderTarget=St,this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=we,this.useMultisampledRTT=We}function bY(n,e){function t(i,r=ba){let s;const a=Rt.getTransfer(r);if(i===Os)return n.UNSIGNED_BYTE;if(i===pv)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Av)return n.UNSIGNED_SHORT_5_5_5_1;if(i===dT)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===hT)return n.BYTE;if(i===uT)return n.SHORT;if(i===Mu)return n.UNSIGNED_SHORT;if(i===fv)return n.INT;if(i===zo)return n.UNSIGNED_INT;if(i===bs)return n.FLOAT;if(i===nd)return n.HALF_FLOAT;if(i===gT)return n.ALPHA;if(i===fT)return n.RGB;if(i===Pr)return n.RGBA;if(i===pT)return n.LUMINANCE;if(i===AT)return n.LUMINANCE_ALPHA;if(i===fc)return n.DEPTH_COMPONENT;if(i===Dc)return n.DEPTH_STENCIL;if(i===mT)return n.RED;if(i===mv)return n.RED_INTEGER;if(i===CT)return n.RG;if(i===Cv)return n.RG_INTEGER;if(i===Iv)return n.RGBA_INTEGER;if(i===Pg||i===Ng||i===kg||i===Qg)if(a===Jt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Pg)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Ng)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===kg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Qg)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Pg)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Ng)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===kg)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Qg)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===tI||i===iI||i===nI||i===rI)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===tI)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===iI)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===nI)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===rI)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===sI||i===aI||i===oI)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===sI||i===aI)return a===Jt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===oI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===lI||i===cI||i===hI||i===uI||i===dI||i===gI||i===fI||i===pI||i===AI||i===mI||i===CI||i===II||i===vI||i===yI)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===lI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===cI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===hI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===uI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===dI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===gI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===fI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===pI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===AI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===mI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===CI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===II)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===vI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===yI)return a===Jt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Og||i===wI||i===EI)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Og)return a===Jt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===wI)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===EI)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===IT||i===bI||i===_I||i===xI)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Og)return s.COMPRESSED_RED_RGTC1_EXT;if(i===bI)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===_I)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===xI)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Bc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const _Y={type:"move"};class Tm{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Lh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Lh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ie,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ie),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Lh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ie,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ie),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const p=t.getJointPose(m,i),A=this._getHandJoint(c,m);p!==null&&(A.matrix.fromArray(p.transform.matrix),A.matrix.decompose(A.position,A.rotation,A.scale),A.matrixWorldNeedsUpdate=!0,A.jointRadius=p.radius),A.visible=p!==null}const h=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],d=h.position.distanceTo(u.position),g=.02,f=.005;c.inputState.pinching&&d>g+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=g-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(_Y)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Lh;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const xY=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,SY=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MY{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new En,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Qa({vertexShader:xY,fragmentShader:SY,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new kn(new gp(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class RY extends el{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,h=null,u=null,d=null,g=null,f=null;const m=new MY,p=t.getContextAttributes();let A=null,C=null;const v=[],I=[],w=new ct;let b=null;const _=new ar;_.viewport=new hi;const x=new ar;x.viewport=new hi;const y=[_,x],E=new jZ;let S=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(G){let te=v[G];return te===void 0&&(te=new Tm,v[G]=te),te.getTargetRaySpace()},this.getControllerGrip=function(G){let te=v[G];return te===void 0&&(te=new Tm,v[G]=te),te.getGripSpace()},this.getHand=function(G){let te=v[G];return te===void 0&&(te=new Tm,v[G]=te),te.getHandSpace()};function M(G){const te=I.indexOf(G.inputSource);if(te===-1)return;const we=v[te];we!==void 0&&(we.update(G.inputSource,G.frame,c||a),we.dispatchEvent({type:G.type,data:G.inputSource}))}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",P);for(let G=0;G<v.length;G++){const te=I[G];te!==null&&(I[G]=null,v[G].disconnect(te))}S=null,R=null,m.reset(),e.setRenderTarget(A),g=null,d=null,u=null,r=null,C=null,Me.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(G){s=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(G){o=G,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(G){c=G},this.getBaseLayer=function(){return d!==null?d:g},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(G){if(r=G,r!==null){if(A=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",P),p.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(w),r.renderState.layers===void 0){const te={antialias:p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,te),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),C=new Go(g.framebufferWidth,g.framebufferHeight,{format:Pr,type:Os,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let te=null,we=null,le=null;p.depth&&(le=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,te=p.stencil?Dc:fc,we=p.stencil?Bc:zo);const xe={colorFormat:t.RGBA8,depthFormat:le,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(xe),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),C=new Go(d.textureWidth,d.textureHeight,{format:Pr,type:Os,depthTexture:new BT(d.textureWidth,d.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,te),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),Me.setContext(r),Me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function P(G){for(let te=0;te<G.removed.length;te++){const we=G.removed[te],le=I.indexOf(we);le>=0&&(I[le]=null,v[le].disconnect(we))}for(let te=0;te<G.added.length;te++){const we=G.added[te];let le=I.indexOf(we);if(le===-1){for(let Re=0;Re<v.length;Re++)if(Re>=I.length){I.push(we),le=Re;break}else if(I[Re]===null){I[Re]=we,le=Re;break}if(le===-1)break}const xe=v[le];xe&&xe.connect(we)}}const F=new ie,N=new ie;function L(G,te,we){F.setFromMatrixPosition(te.matrixWorld),N.setFromMatrixPosition(we.matrixWorld);const le=F.distanceTo(N),xe=te.projectionMatrix.elements,Re=we.projectionMatrix.elements,Fe=xe[14]/(xe[10]-1),Ve=xe[14]/(xe[10]+1),$e=(xe[9]+1)/xe[5],xt=(xe[9]-1)/xe[5],z=(xe[8]-1)/xe[0],St=(Re[8]+1)/Re[0],Ze=Fe*z,We=Fe*St,Le=le/(-z+St),ht=Le*-z;if(te.matrixWorld.decompose(G.position,G.quaternion,G.scale),G.translateX(ht),G.translateZ(Le),G.matrixWorld.compose(G.position,G.quaternion,G.scale),G.matrixWorldInverse.copy(G.matrixWorld).invert(),xe[10]===-1)G.projectionMatrix.copy(te.projectionMatrix),G.projectionMatrixInverse.copy(te.projectionMatrixInverse);else{const Pe=Fe+Le,k=Ve+Le,U=Ze-ht,Y=We+(le-ht),ge=$e*Ve/k*Pe,pe=xt*Ve/k*Pe;G.projectionMatrix.makePerspective(U,Y,ge,pe,Pe,k),G.projectionMatrixInverse.copy(G.projectionMatrix).invert()}}function W(G,te){te===null?G.matrixWorld.copy(G.matrix):G.matrixWorld.multiplyMatrices(te.matrixWorld,G.matrix),G.matrixWorldInverse.copy(G.matrixWorld).invert()}this.updateCamera=function(G){if(r===null)return;let te=G.near,we=G.far;m.texture!==null&&(m.depthNear>0&&(te=m.depthNear),m.depthFar>0&&(we=m.depthFar)),E.near=x.near=_.near=te,E.far=x.far=_.far=we,(S!==E.near||R!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),S=E.near,R=E.far),_.layers.mask=G.layers.mask|2,x.layers.mask=G.layers.mask|4,E.layers.mask=_.layers.mask|x.layers.mask;const le=G.parent,xe=E.cameras;W(E,le);for(let Re=0;Re<xe.length;Re++)W(xe[Re],le);xe.length===2?L(E,_,x):E.projectionMatrix.copy(_.projectionMatrix),ne(G,E,le)};function ne(G,te,we){we===null?G.matrix.copy(te.matrixWorld):(G.matrix.copy(we.matrixWorld),G.matrix.invert(),G.matrix.multiply(te.matrixWorld)),G.matrix.decompose(G.position,G.quaternion,G.scale),G.updateMatrixWorld(!0),G.projectionMatrix.copy(te.projectionMatrix),G.projectionMatrixInverse.copy(te.projectionMatrixInverse),G.isPerspectiveCamera&&(G.fov=SI*2*Math.atan(1/G.projectionMatrix.elements[5]),G.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(d===null&&g===null))return l},this.setFoveation=function(G){l=G,d!==null&&(d.fixedFoveation=G),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=G)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(E)};let de=null;function ee(G,te){if(h=te.getViewerPose(c||a),f=te,h!==null){const we=h.views;g!==null&&(e.setRenderTargetFramebuffer(C,g.framebuffer),e.setRenderTarget(C));let le=!1;we.length!==E.cameras.length&&(E.cameras.length=0,le=!0);for(let Re=0;Re<we.length;Re++){const Fe=we[Re];let Ve=null;if(g!==null)Ve=g.getViewport(Fe);else{const xt=u.getViewSubImage(d,Fe);Ve=xt.viewport,Re===0&&(e.setRenderTargetTextures(C,xt.colorTexture,d.ignoreDepthValues?void 0:xt.depthStencilTexture),e.setRenderTarget(C))}let $e=y[Re];$e===void 0&&($e=new ar,$e.layers.enable(Re),$e.viewport=new hi,y[Re]=$e),$e.matrix.fromArray(Fe.transform.matrix),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.projectionMatrix.fromArray(Fe.projectionMatrix),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert(),$e.viewport.set(Ve.x,Ve.y,Ve.width,Ve.height),Re===0&&(E.matrix.copy($e.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),le===!0&&E.cameras.push($e)}const xe=r.enabledFeatures;if(xe&&xe.includes("depth-sensing")){const Re=u.getDepthInformation(we[0]);Re&&Re.isValid&&Re.texture&&m.init(e,Re,r.renderState)}}for(let we=0;we<v.length;we++){const le=I[we],xe=v[we];le!==null&&xe!==void 0&&xe.update(le,te,c||a)}de&&de(G,te),te.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:te}),f=null}const Me=new kT;Me.setAnimationLoop(ee),this.setAnimationLoop=function(G){de=G},this.dispose=function(){}}}const eo=new ss,TY=new ni;function UY(n,e){function t(p,A){p.matrixAutoUpdate===!0&&p.updateMatrix(),A.value.copy(p.matrix)}function i(p,A){A.color.getRGB(p.fogColor.value,TT(n)),A.isFog?(p.fogNear.value=A.near,p.fogFar.value=A.far):A.isFogExp2&&(p.fogDensity.value=A.density)}function r(p,A,C,v,I){A.isMeshBasicMaterial||A.isMeshLambertMaterial?s(p,A):A.isMeshToonMaterial?(s(p,A),u(p,A)):A.isMeshPhongMaterial?(s(p,A),h(p,A)):A.isMeshStandardMaterial?(s(p,A),d(p,A),A.isMeshPhysicalMaterial&&g(p,A,I)):A.isMeshMatcapMaterial?(s(p,A),f(p,A)):A.isMeshDepthMaterial?s(p,A):A.isMeshDistanceMaterial?(s(p,A),m(p,A)):A.isMeshNormalMaterial?s(p,A):A.isLineBasicMaterial?(a(p,A),A.isLineDashedMaterial&&o(p,A)):A.isPointsMaterial?l(p,A,C,v):A.isSpriteMaterial?c(p,A):A.isShadowMaterial?(p.color.value.copy(A.color),p.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function s(p,A){p.opacity.value=A.opacity,A.color&&p.diffuse.value.copy(A.color),A.emissive&&p.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(p.map.value=A.map,t(A.map,p.mapTransform)),A.alphaMap&&(p.alphaMap.value=A.alphaMap,t(A.alphaMap,p.alphaMapTransform)),A.bumpMap&&(p.bumpMap.value=A.bumpMap,t(A.bumpMap,p.bumpMapTransform),p.bumpScale.value=A.bumpScale,A.side===Vn&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,t(A.normalMap,p.normalMapTransform),p.normalScale.value.copy(A.normalScale),A.side===Vn&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,t(A.displacementMap,p.displacementMapTransform),p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias),A.emissiveMap&&(p.emissiveMap.value=A.emissiveMap,t(A.emissiveMap,p.emissiveMapTransform)),A.specularMap&&(p.specularMap.value=A.specularMap,t(A.specularMap,p.specularMapTransform)),A.alphaTest>0&&(p.alphaTest.value=A.alphaTest);const C=e.get(A),v=C.envMap,I=C.envMapRotation;v&&(p.envMap.value=v,eo.copy(I),eo.x*=-1,eo.y*=-1,eo.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(eo.y*=-1,eo.z*=-1),p.envMapRotation.value.setFromMatrix4(TY.makeRotationFromEuler(eo)),p.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=A.reflectivity,p.ior.value=A.ior,p.refractionRatio.value=A.refractionRatio),A.lightMap&&(p.lightMap.value=A.lightMap,p.lightMapIntensity.value=A.lightMapIntensity,t(A.lightMap,p.lightMapTransform)),A.aoMap&&(p.aoMap.value=A.aoMap,p.aoMapIntensity.value=A.aoMapIntensity,t(A.aoMap,p.aoMapTransform))}function a(p,A){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity,A.map&&(p.map.value=A.map,t(A.map,p.mapTransform))}function o(p,A){p.dashSize.value=A.dashSize,p.totalSize.value=A.dashSize+A.gapSize,p.scale.value=A.scale}function l(p,A,C,v){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity,p.size.value=A.size*C,p.scale.value=v*.5,A.map&&(p.map.value=A.map,t(A.map,p.uvTransform)),A.alphaMap&&(p.alphaMap.value=A.alphaMap,t(A.alphaMap,p.alphaMapTransform)),A.alphaTest>0&&(p.alphaTest.value=A.alphaTest)}function c(p,A){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity,p.rotation.value=A.rotation,A.map&&(p.map.value=A.map,t(A.map,p.mapTransform)),A.alphaMap&&(p.alphaMap.value=A.alphaMap,t(A.alphaMap,p.alphaMapTransform)),A.alphaTest>0&&(p.alphaTest.value=A.alphaTest)}function h(p,A){p.specular.value.copy(A.specular),p.shininess.value=Math.max(A.shininess,1e-4)}function u(p,A){A.gradientMap&&(p.gradientMap.value=A.gradientMap)}function d(p,A){p.metalness.value=A.metalness,A.metalnessMap&&(p.metalnessMap.value=A.metalnessMap,t(A.metalnessMap,p.metalnessMapTransform)),p.roughness.value=A.roughness,A.roughnessMap&&(p.roughnessMap.value=A.roughnessMap,t(A.roughnessMap,p.roughnessMapTransform)),A.envMap&&(p.envMapIntensity.value=A.envMapIntensity)}function g(p,A,C){p.ior.value=A.ior,A.sheen>0&&(p.sheenColor.value.copy(A.sheenColor).multiplyScalar(A.sheen),p.sheenRoughness.value=A.sheenRoughness,A.sheenColorMap&&(p.sheenColorMap.value=A.sheenColorMap,t(A.sheenColorMap,p.sheenColorMapTransform)),A.sheenRoughnessMap&&(p.sheenRoughnessMap.value=A.sheenRoughnessMap,t(A.sheenRoughnessMap,p.sheenRoughnessMapTransform))),A.clearcoat>0&&(p.clearcoat.value=A.clearcoat,p.clearcoatRoughness.value=A.clearcoatRoughness,A.clearcoatMap&&(p.clearcoatMap.value=A.clearcoatMap,t(A.clearcoatMap,p.clearcoatMapTransform)),A.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap,t(A.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),A.clearcoatNormalMap&&(p.clearcoatNormalMap.value=A.clearcoatNormalMap,t(A.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),A.side===Vn&&p.clearcoatNormalScale.value.negate())),A.dispersion>0&&(p.dispersion.value=A.dispersion),A.iridescence>0&&(p.iridescence.value=A.iridescence,p.iridescenceIOR.value=A.iridescenceIOR,p.iridescenceThicknessMinimum.value=A.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=A.iridescenceThicknessRange[1],A.iridescenceMap&&(p.iridescenceMap.value=A.iridescenceMap,t(A.iridescenceMap,p.iridescenceMapTransform)),A.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=A.iridescenceThicknessMap,t(A.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),A.transmission>0&&(p.transmission.value=A.transmission,p.transmissionSamplerMap.value=C.texture,p.transmissionSamplerSize.value.set(C.width,C.height),A.transmissionMap&&(p.transmissionMap.value=A.transmissionMap,t(A.transmissionMap,p.transmissionMapTransform)),p.thickness.value=A.thickness,A.thicknessMap&&(p.thicknessMap.value=A.thicknessMap,t(A.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=A.attenuationDistance,p.attenuationColor.value.copy(A.attenuationColor)),A.anisotropy>0&&(p.anisotropyVector.value.set(A.anisotropy*Math.cos(A.anisotropyRotation),A.anisotropy*Math.sin(A.anisotropyRotation)),A.anisotropyMap&&(p.anisotropyMap.value=A.anisotropyMap,t(A.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=A.specularIntensity,p.specularColor.value.copy(A.specularColor),A.specularColorMap&&(p.specularColorMap.value=A.specularColorMap,t(A.specularColorMap,p.specularColorMapTransform)),A.specularIntensityMap&&(p.specularIntensityMap.value=A.specularIntensityMap,t(A.specularIntensityMap,p.specularIntensityMapTransform))}function f(p,A){A.matcap&&(p.matcap.value=A.matcap)}function m(p,A){const C=e.get(A).light;p.referencePosition.value.setFromMatrixPosition(C.matrixWorld),p.nearDistance.value=C.shadow.camera.near,p.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function FY(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(C,v){const I=v.program;i.uniformBlockBinding(C,I)}function c(C,v){let I=r[C.id];I===void 0&&(f(C),I=h(C),r[C.id]=I,C.addEventListener("dispose",p));const w=v.program;i.updateUBOMapping(C,w);const b=e.render.frame;s[C.id]!==b&&(d(C),s[C.id]=b)}function h(C){const v=u();C.__bindingPointIndex=v;const I=n.createBuffer(),w=C.__size,b=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,w,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,I),I}function u(){for(let C=0;C<o;C++)if(a.indexOf(C)===-1)return a.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(C){const v=r[C.id],I=C.uniforms,w=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let b=0,_=I.length;b<_;b++){const x=Array.isArray(I[b])?I[b]:[I[b]];for(let y=0,E=x.length;y<E;y++){const S=x[y];if(g(S,b,y,w)===!0){const R=S.__offset,M=Array.isArray(S.value)?S.value:[S.value];let T=0;for(let P=0;P<M.length;P++){const F=M[P],N=m(F);typeof F=="number"||typeof F=="boolean"?(S.__data[0]=F,n.bufferSubData(n.UNIFORM_BUFFER,R+T,S.__data)):F.isMatrix3?(S.__data[0]=F.elements[0],S.__data[1]=F.elements[1],S.__data[2]=F.elements[2],S.__data[3]=0,S.__data[4]=F.elements[3],S.__data[5]=F.elements[4],S.__data[6]=F.elements[5],S.__data[7]=0,S.__data[8]=F.elements[6],S.__data[9]=F.elements[7],S.__data[10]=F.elements[8],S.__data[11]=0):(F.toArray(S.__data,T),T+=N.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,S.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(C,v,I,w){const b=C.value,_=v+"_"+I;if(w[_]===void 0)return typeof b=="number"||typeof b=="boolean"?w[_]=b:w[_]=b.clone(),!0;{const x=w[_];if(typeof b=="number"||typeof b=="boolean"){if(x!==b)return w[_]=b,!0}else if(x.equals(b)===!1)return x.copy(b),!0}return!1}function f(C){const v=C.uniforms;let I=0;const w=16;for(let _=0,x=v.length;_<x;_++){const y=Array.isArray(v[_])?v[_]:[v[_]];for(let E=0,S=y.length;E<S;E++){const R=y[E],M=Array.isArray(R.value)?R.value:[R.value];for(let T=0,P=M.length;T<P;T++){const F=M[T],N=m(F),L=I%w,W=L%N.boundary,ne=L+W;I+=W,ne!==0&&w-ne<N.storage&&(I+=w-ne),R.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=I,I+=N.storage}}}const b=I%w;return b>0&&(I+=w-b),C.__size=I,C.__cache={},this}function m(C){const v={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(v.boundary=4,v.storage=4):C.isVector2?(v.boundary=8,v.storage=8):C.isVector3||C.isColor?(v.boundary=16,v.storage=12):C.isVector4?(v.boundary=16,v.storage=16):C.isMatrix3?(v.boundary=48,v.storage=48):C.isMatrix4?(v.boundary=64,v.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),v}function p(C){const v=C.target;v.removeEventListener("dispose",p);const I=a.indexOf(v.__bindingPointIndex);a.splice(I,1),n.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}function A(){for(const C in r)n.deleteBuffer(r[C]);a=[],r={},s={}}return{bind:l,update:c,dispose:A}}class BY{constructor(e={}){const{canvas:t=lZ(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:d=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=a;const f=new Uint32Array(4),m=new Int32Array(4);let p=null,A=null;const C=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Zi,this.toneMapping=La,this.toneMappingExposure=1;const I=this;let w=!1,b=0,_=0,x=null,y=-1,E=null;const S=new hi,R=new hi;let M=null;const T=new mt(0);let P=0,F=t.width,N=t.height,L=1,W=null,ne=null;const de=new hi(0,0,F,N),ee=new hi(0,0,F,N);let Me=!1;const G=new vv;let te=!1,we=!1;const le=new ni,xe=new ni,Re=new ie,Fe=new hi,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let $e=!1;function xt(){return x===null?L:1}let z=i;function St(B,q){return t.getContext(B,q)}try{const B={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${dv}`),t.addEventListener("webglcontextlost",X,!1),t.addEventListener("webglcontextrestored",$,!1),t.addEventListener("webglcontextcreationerror",Ae,!1),z===null){const q="webgl2";if(z=St(q,B),z===null)throw St(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Ze,We,Le,ht,Pe,k,U,Y,ge,pe,D,O,H,K,ye,J,se,fe,ue,ce,be,he,Ee,Q;function ve(){Ze=new zJ(z),Ze.init(),he=new bY(z,Ze),We=new PJ(z,Ze,e,he),Le=new wY(z,Ze),We.reverseDepthBuffer&&d&&Le.buffers.depth.setReversed(!0),ht=new ZJ(z),Pe=new cY,k=new EY(z,Ze,Le,Pe,We,he,ht),U=new kJ(I),Y=new VJ(I),ge=new qZ(z),Ee=new DJ(z,ge),pe=new GJ(z,ge,ht,Ee),D=new XJ(z,pe,ge,ht),ue=new HJ(z,We,k),J=new NJ(Pe),O=new lY(I,U,Y,Ze,We,Ee,J),H=new UY(I,Pe),K=new uY,ye=new mY(Ze),fe=new BJ(I,U,Y,Le,D,g,l),se=new vY(I,D,We),Q=new FY(z,ht,We,Le),ce=new LJ(z,Ze,ht),be=new WJ(z,Ze,ht),ht.programs=O.programs,I.capabilities=We,I.extensions=Ze,I.properties=Pe,I.renderLists=K,I.shadowMap=se,I.state=Le,I.info=ht}ve();const V=new RY(I,z);this.xr=V,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const B=Ze.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=Ze.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(B){B!==void 0&&(L=B,this.setSize(F,N,!1))},this.getSize=function(B){return B.set(F,N)},this.setSize=function(B,q,ae=!0){if(V.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=B,N=q,t.width=Math.floor(B*L),t.height=Math.floor(q*L),ae===!0&&(t.style.width=B+"px",t.style.height=q+"px"),this.setViewport(0,0,B,q)},this.getDrawingBufferSize=function(B){return B.set(F*L,N*L).floor()},this.setDrawingBufferSize=function(B,q,ae){F=B,N=q,L=ae,t.width=Math.floor(B*ae),t.height=Math.floor(q*ae),this.setViewport(0,0,B,q)},this.getCurrentViewport=function(B){return B.copy(S)},this.getViewport=function(B){return B.copy(de)},this.setViewport=function(B,q,ae,oe){B.isVector4?de.set(B.x,B.y,B.z,B.w):de.set(B,q,ae,oe),Le.viewport(S.copy(de).multiplyScalar(L).round())},this.getScissor=function(B){return B.copy(ee)},this.setScissor=function(B,q,ae,oe){B.isVector4?ee.set(B.x,B.y,B.z,B.w):ee.set(B,q,ae,oe),Le.scissor(R.copy(ee).multiplyScalar(L).round())},this.getScissorTest=function(){return Me},this.setScissorTest=function(B){Le.setScissorTest(Me=B)},this.setOpaqueSort=function(B){W=B},this.setTransparentSort=function(B){ne=B},this.getClearColor=function(B){return B.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(B=!0,q=!0,ae=!0){let oe=0;if(B){let j=!1;if(x!==null){const _e=x.texture.format;j=_e===Iv||_e===Cv||_e===mv}if(j){const _e=x.texture.type,De=_e===Os||_e===zo||_e===Mu||_e===Bc||_e===pv||_e===Av,Ne=fe.getClearColor(),Oe=fe.getClearAlpha(),nt=Ne.r,tt=Ne.g,et=Ne.b;De?(f[0]=nt,f[1]=tt,f[2]=et,f[3]=Oe,z.clearBufferuiv(z.COLOR,0,f)):(m[0]=nt,m[1]=tt,m[2]=et,m[3]=Oe,z.clearBufferiv(z.COLOR,0,m))}else oe|=z.COLOR_BUFFER_BIT}q&&(oe|=z.DEPTH_BUFFER_BIT),ae&&(oe|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",X,!1),t.removeEventListener("webglcontextrestored",$,!1),t.removeEventListener("webglcontextcreationerror",Ae,!1),fe.dispose(),K.dispose(),ye.dispose(),Pe.dispose(),U.dispose(),Y.dispose(),D.dispose(),Ee.dispose(),Q.dispose(),O.dispose(),V.dispose(),V.removeEventListener("sessionstart",Yt),V.removeEventListener("sessionend",It),wt.stop()};function X(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function $(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const B=ht.autoReset,q=se.enabled,ae=se.autoUpdate,oe=se.needsUpdate,j=se.type;ve(),ht.autoReset=B,se.enabled=q,se.autoUpdate=ae,se.needsUpdate=oe,se.type=j}function Ae(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Te(B){const q=B.target;q.removeEventListener("dispose",Te),Qe(q)}function Qe(B){Ge(B),Pe.remove(B)}function Ge(B){const q=Pe.get(B).programs;q!==void 0&&(q.forEach(function(ae){O.releaseProgram(ae)}),B.isShaderMaterial&&O.releaseShaderCache(B))}this.renderBufferDirect=function(B,q,ae,oe,j,_e){q===null&&(q=Ve);const De=j.isMesh&&j.matrixWorld.determinant()<0,Ne=cd(B,q,ae,oe,j);Le.setMaterial(oe,De);let Oe=ae.index,nt=1;if(oe.wireframe===!0){if(Oe=pe.getWireframeAttribute(ae),Oe===void 0)return;nt=2}const tt=ae.drawRange,et=ae.attributes.position;let Ut=tt.start*nt,Nt=(tt.start+tt.count)*nt;_e!==null&&(Ut=Math.max(Ut,_e.start*nt),Nt=Math.min(Nt,(_e.start+_e.count)*nt)),Oe!==null?(Ut=Math.max(Ut,0),Nt=Math.min(Nt,Oe.count)):et!=null&&(Ut=Math.max(Ut,0),Nt=Math.min(Nt,et.count));const ri=Nt-Ut;if(ri<0||ri===1/0)return;Ee.setup(j,oe,Ne,ae,Oe);let Vt,Gt=ce;if(Oe!==null&&(Vt=ge.get(Oe),Gt=be,Gt.setIndex(Vt)),j.isMesh)oe.wireframe===!0?(Le.setLineWidth(oe.wireframeLinewidth*xt()),Gt.setMode(z.LINES)):Gt.setMode(z.TRIANGLES);else if(j.isLine){let He=oe.linewidth;He===void 0&&(He=1),Le.setLineWidth(He*xt()),j.isLineSegments?Gt.setMode(z.LINES):j.isLineLoop?Gt.setMode(z.LINE_LOOP):Gt.setMode(z.LINE_STRIP)}else j.isPoints?Gt.setMode(z.POINTS):j.isSprite&&Gt.setMode(z.TRIANGLES);if(j.isBatchedMesh)if(j._multiDrawInstances!==null)Gt.renderMultiDrawInstances(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount,j._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))Gt.renderMultiDraw(j._multiDrawStarts,j._multiDrawCounts,j._multiDrawCount);else{const He=j._multiDrawStarts,Fi=j._multiDrawCounts,qn=j._multiDrawCount,Bi=Oe?ge.get(Oe).bytesPerElement:1,Ys=Pe.get(oe).currentProgram.getUniforms();for(let ln=0;ln<qn;ln++)Ys.setValue(z,"_gl_DrawID",ln),Gt.render(He[ln]/Bi,Fi[ln])}else if(j.isInstancedMesh)Gt.renderInstances(Ut,ri,j.count);else if(ae.isInstancedBufferGeometry){const He=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,Fi=Math.min(ae.instanceCount,He);Gt.renderInstances(Ut,ri,Fi)}else Gt.render(Ut,ri)};function Ue(B,q,ae){B.transparent===!0&&B.side===Es&&B.forceSinglePass===!1?(B.side=Vn,B.needsUpdate=!0,js(B,q,ae),B.side=Qs,B.needsUpdate=!0,js(B,q,ae),B.side=Es):js(B,q,ae)}this.compile=function(B,q,ae=null){ae===null&&(ae=B),A=ye.get(ae),A.init(q),v.push(A),ae.traverseVisible(function(j){j.isLight&&j.layers.test(q.layers)&&(A.pushLight(j),j.castShadow&&A.pushShadow(j))}),B!==ae&&B.traverseVisible(function(j){j.isLight&&j.layers.test(q.layers)&&(A.pushLight(j),j.castShadow&&A.pushShadow(j))}),A.setupLights();const oe=new Set;return B.traverse(function(j){if(!(j.isMesh||j.isPoints||j.isLine||j.isSprite))return;const _e=j.material;if(_e)if(Array.isArray(_e))for(let De=0;De<_e.length;De++){const Ne=_e[De];Ue(Ne,ae,j),oe.add(Ne)}else Ue(_e,ae,j),oe.add(_e)}),v.pop(),A=null,oe},this.compileAsync=function(B,q,ae=null){const oe=this.compile(B,q,ae);return new Promise(j=>{function _e(){if(oe.forEach(function(De){Pe.get(De).currentProgram.isReady()&&oe.delete(De)}),oe.size===0){j(B);return}setTimeout(_e,10)}Ze.get("KHR_parallel_shader_compile")!==null?_e():setTimeout(_e,10)})};let Ye=null;function Ct(B){Ye&&Ye(B)}function Yt(){wt.stop()}function It(){wt.start()}const wt=new kT;wt.setAnimationLoop(Ct),typeof self<"u"&&wt.setContext(self),this.setAnimationLoop=function(B){Ye=B,V.setAnimationLoop(B),B===null?wt.stop():wt.start()},V.addEventListener("sessionstart",Yt),V.addEventListener("sessionend",It),this.render=function(B,q){if(q!==void 0&&q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),V.enabled===!0&&V.isPresenting===!0&&(V.cameraAutoUpdate===!0&&V.updateCamera(q),q=V.getCamera()),B.isScene===!0&&B.onBeforeRender(I,B,q,x),A=ye.get(B,v.length),A.init(q),v.push(A),xe.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),G.setFromProjectionMatrix(xe),we=this.localClippingEnabled,te=J.init(this.clippingPlanes,we),p=K.get(B,C.length),p.init(),C.push(p),V.enabled===!0&&V.isPresenting===!0){const _e=I.xr.getDepthSensingMesh();_e!==null&&Bt(_e,q,-1/0,I.sortObjects)}Bt(B,q,0,I.sortObjects),p.finish(),I.sortObjects===!0&&p.sort(W,ne),$e=V.enabled===!1||V.isPresenting===!1||V.hasDepthSensing()===!1,$e&&fe.addToRenderList(p,B),this.info.render.frame++,te===!0&&J.beginShadows();const ae=A.state.shadowsArray;se.render(ae,B,q),te===!0&&J.endShadows(),this.info.autoReset===!0&&this.info.reset();const oe=p.opaque,j=p.transmissive;if(A.setupLights(),q.isArrayCamera){const _e=q.cameras;if(j.length>0)for(let De=0,Ne=_e.length;De<Ne;De++){const Oe=_e[De];Gr(oe,j,B,Oe)}$e&&fe.render(B);for(let De=0,Ne=_e.length;De<Ne;De++){const Oe=_e[De];on(p,B,Oe,Oe.viewport)}}else j.length>0&&Gr(oe,j,B,q),$e&&fe.render(B),on(p,B,q);x!==null&&(k.updateMultisampleRenderTarget(x),k.updateRenderTargetMipmap(x)),B.isScene===!0&&B.onAfterRender(I,B,q),Ee.resetDefaultState(),y=-1,E=null,v.pop(),v.length>0?(A=v[v.length-1],te===!0&&J.setGlobalState(I.clippingPlanes,A.state.camera)):A=null,C.pop(),C.length>0?p=C[C.length-1]:p=null};function Bt(B,q,ae,oe){if(B.visible===!1)return;if(B.layers.test(q.layers)){if(B.isGroup)ae=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(q);else if(B.isLight)A.pushLight(B),B.castShadow&&A.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||G.intersectsSprite(B)){oe&&Fe.setFromMatrixPosition(B.matrixWorld).applyMatrix4(xe);const _e=D.update(B),De=B.material;De.visible&&p.push(B,_e,De,ae,Fe.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||G.intersectsObject(B))){const _e=D.update(B),De=B.material;if(oe&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Fe.copy(B.boundingSphere.center)):(_e.boundingSphere===null&&_e.computeBoundingSphere(),Fe.copy(_e.boundingSphere.center)),Fe.applyMatrix4(B.matrixWorld).applyMatrix4(xe)),Array.isArray(De)){const Ne=_e.groups;for(let Oe=0,nt=Ne.length;Oe<nt;Oe++){const tt=Ne[Oe],et=De[tt.materialIndex];et&&et.visible&&p.push(B,_e,et,ae,Fe.z,tt)}}else De.visible&&p.push(B,_e,De,ae,Fe.z,null)}}const j=B.children;for(let _e=0,De=j.length;_e<De;_e++)Bt(j[_e],q,ae,oe)}function on(B,q,ae,oe){const j=B.opaque,_e=B.transmissive,De=B.transparent;A.setupLightsView(ae),te===!0&&J.setGlobalState(I.clippingPlanes,ae),oe&&Le.viewport(S.copy(oe)),j.length>0&&Js(j,q,ae),_e.length>0&&Js(_e,q,ae),De.length>0&&Js(De,q,ae),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function Gr(B,q,ae,oe){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[oe.id]===void 0&&(A.state.transmissionRenderTarget[oe.id]=new Go(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float")?nd:Os,minFilter:vo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Rt.workingColorSpace}));const j=A.state.transmissionRenderTarget[oe.id],_e=oe.viewport||S;j.setSize(_e.z,_e.w);const De=I.getRenderTarget();I.setRenderTarget(j),I.getClearColor(T),P=I.getClearAlpha(),P<1&&I.setClearColor(16777215,.5),I.clear(),$e&&fe.render(ae);const Ne=I.toneMapping;I.toneMapping=La;const Oe=oe.viewport;if(oe.viewport!==void 0&&(oe.viewport=void 0),A.setupLightsView(oe),te===!0&&J.setGlobalState(I.clippingPlanes,oe),Js(B,ae,oe),k.updateMultisampleRenderTarget(j),k.updateRenderTargetMipmap(j),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let nt=!1;for(let tt=0,et=q.length;tt<et;tt++){const Ut=q[tt],Nt=Ut.object,ri=Ut.geometry,Vt=Ut.material,Gt=Ut.group;if(Vt.side===Es&&Nt.layers.test(oe.layers)){const He=Vt.side;Vt.side=Vn,Vt.needsUpdate=!0,tl(Nt,ae,oe,ri,Vt,Gt),Vt.side=He,Vt.needsUpdate=!0,nt=!0}}nt===!0&&(k.updateMultisampleRenderTarget(j),k.updateRenderTargetMipmap(j))}I.setRenderTarget(De),I.setClearColor(T,P),Oe!==void 0&&(oe.viewport=Oe),I.toneMapping=Ne}function Js(B,q,ae){const oe=q.isScene===!0?q.overrideMaterial:null;for(let j=0,_e=B.length;j<_e;j++){const De=B[j],Ne=De.object,Oe=De.geometry,nt=oe===null?De.material:oe,tt=De.group;Ne.layers.test(ae.layers)&&tl(Ne,q,ae,Oe,nt,tt)}}function tl(B,q,ae,oe,j,_e){B.onBeforeRender(I,q,ae,oe,j,_e),B.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),j.onBeforeRender(I,q,ae,oe,B,_e),j.transparent===!0&&j.side===Es&&j.forceSinglePass===!1?(j.side=Vn,j.needsUpdate=!0,I.renderBufferDirect(ae,q,oe,j,B,_e),j.side=Qs,j.needsUpdate=!0,I.renderBufferDirect(ae,q,oe,j,B,_e),j.side=Es):I.renderBufferDirect(ae,q,oe,j,B,_e),B.onAfterRender(I,q,ae,oe,j,_e)}function js(B,q,ae){q.isScene!==!0&&(q=Ve);const oe=Pe.get(B),j=A.state.lights,_e=A.state.shadowsArray,De=j.state.version,Ne=O.getParameters(B,j.state,_e,q,ae),Oe=O.getProgramCacheKey(Ne);let nt=oe.programs;oe.environment=B.isMeshStandardMaterial?q.environment:null,oe.fog=q.fog,oe.envMap=(B.isMeshStandardMaterial?Y:U).get(B.envMap||oe.environment),oe.envMapRotation=oe.environment!==null&&B.envMap===null?q.environmentRotation:B.envMapRotation,nt===void 0&&(B.addEventListener("dispose",Te),nt=new Map,oe.programs=nt);let tt=nt.get(Oe);if(tt!==void 0){if(oe.currentProgram===tt&&oe.lightsStateVersion===De)return ld(B,Ne),tt}else Ne.uniforms=O.getUniforms(B),B.onBeforeCompile(Ne,I),tt=O.acquireProgram(Ne,Oe),nt.set(Oe,tt),oe.uniforms=Ne.uniforms;const et=oe.uniforms;return(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(et.clippingPlanes=J.uniform),ld(B,Ne),oe.needsLights=Cp(B),oe.lightsStateVersion=De,oe.needsLights&&(et.ambientLightColor.value=j.state.ambient,et.lightProbe.value=j.state.probe,et.directionalLights.value=j.state.directional,et.directionalLightShadows.value=j.state.directionalShadow,et.spotLights.value=j.state.spot,et.spotLightShadows.value=j.state.spotShadow,et.rectAreaLights.value=j.state.rectArea,et.ltc_1.value=j.state.rectAreaLTC1,et.ltc_2.value=j.state.rectAreaLTC2,et.pointLights.value=j.state.point,et.pointLightShadows.value=j.state.pointShadow,et.hemisphereLights.value=j.state.hemi,et.directionalShadowMap.value=j.state.directionalShadowMap,et.directionalShadowMatrix.value=j.state.directionalShadowMatrix,et.spotShadowMap.value=j.state.spotShadowMap,et.spotLightMatrix.value=j.state.spotLightMatrix,et.spotLightMap.value=j.state.spotLightMap,et.pointShadowMap.value=j.state.pointShadowMap,et.pointShadowMatrix.value=j.state.pointShadowMatrix),oe.currentProgram=tt,oe.uniformsList=null,tt}function Hc(B){if(B.uniformsList===null){const q=B.currentProgram.getUniforms();B.uniformsList=Gg.seqWithValue(q.seq,B.uniforms)}return B.uniformsList}function ld(B,q){const ae=Pe.get(B);ae.outputColorSpace=q.outputColorSpace,ae.batching=q.batching,ae.batchingColor=q.batchingColor,ae.instancing=q.instancing,ae.instancingColor=q.instancingColor,ae.instancingMorph=q.instancingMorph,ae.skinning=q.skinning,ae.morphTargets=q.morphTargets,ae.morphNormals=q.morphNormals,ae.morphColors=q.morphColors,ae.morphTargetsCount=q.morphTargetsCount,ae.numClippingPlanes=q.numClippingPlanes,ae.numIntersection=q.numClipIntersection,ae.vertexAlphas=q.vertexAlphas,ae.vertexTangents=q.vertexTangents,ae.toneMapping=q.toneMapping}function cd(B,q,ae,oe,j){q.isScene!==!0&&(q=Ve),k.resetTextureUnits();const _e=q.fog,De=oe.isMeshStandardMaterial?q.environment:null,Ne=x===null?I.outputColorSpace:x.isXRRenderTarget===!0?x.texture.colorSpace:Lc,Oe=(oe.isMeshStandardMaterial?Y:U).get(oe.envMap||De),nt=oe.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,tt=!!ae.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),et=!!ae.morphAttributes.position,Ut=!!ae.morphAttributes.normal,Nt=!!ae.morphAttributes.color;let ri=La;oe.toneMapped&&(x===null||x.isXRRenderTarget===!0)&&(ri=I.toneMapping);const Vt=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,Gt=Vt!==void 0?Vt.length:0,He=Pe.get(oe),Fi=A.state.lights;if(te===!0&&(we===!0||B!==E)){const wi=B===E&&oe.id===y;J.setState(oe,B,wi)}let qn=!1;oe.version===He.__version?(He.needsLights&&He.lightsStateVersion!==Fi.state.version||He.outputColorSpace!==Ne||j.isBatchedMesh&&He.batching===!1||!j.isBatchedMesh&&He.batching===!0||j.isBatchedMesh&&He.batchingColor===!0&&j.colorTexture===null||j.isBatchedMesh&&He.batchingColor===!1&&j.colorTexture!==null||j.isInstancedMesh&&He.instancing===!1||!j.isInstancedMesh&&He.instancing===!0||j.isSkinnedMesh&&He.skinning===!1||!j.isSkinnedMesh&&He.skinning===!0||j.isInstancedMesh&&He.instancingColor===!0&&j.instanceColor===null||j.isInstancedMesh&&He.instancingColor===!1&&j.instanceColor!==null||j.isInstancedMesh&&He.instancingMorph===!0&&j.morphTexture===null||j.isInstancedMesh&&He.instancingMorph===!1&&j.morphTexture!==null||He.envMap!==Oe||oe.fog===!0&&He.fog!==_e||He.numClippingPlanes!==void 0&&(He.numClippingPlanes!==J.numPlanes||He.numIntersection!==J.numIntersection)||He.vertexAlphas!==nt||He.vertexTangents!==tt||He.morphTargets!==et||He.morphNormals!==Ut||He.morphColors!==Nt||He.toneMapping!==ri||He.morphTargetsCount!==Gt)&&(qn=!0):(qn=!0,He.__version=oe.version);let Bi=He.currentProgram;qn===!0&&(Bi=js(oe,q,j));let Ys=!1,ln=!1,Ga=!1;const $t=Bi.getUniforms(),cn=He.uniforms;if(Le.useProgram(Bi.program)&&(Ys=!0,ln=!0,Ga=!0),oe.id!==y&&(y=oe.id,ln=!0),Ys||E!==B){Le.buffers.depth.getReversed()?(le.copy(B.projectionMatrix),hZ(le),uZ(le),$t.setValue(z,"projectionMatrix",le)):$t.setValue(z,"projectionMatrix",B.projectionMatrix),$t.setValue(z,"viewMatrix",B.matrixWorldInverse);const wi=$t.map.cameraPosition;wi!==void 0&&wi.setValue(z,Re.setFromMatrixPosition(B.matrixWorld)),We.logarithmicDepthBuffer&&$t.setValue(z,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&$t.setValue(z,"isOrthographic",B.isOrthographicCamera===!0),E!==B&&(E=B,ln=!0,Ga=!0)}if(j.isSkinnedMesh){$t.setOptional(z,j,"bindMatrix"),$t.setOptional(z,j,"bindMatrixInverse");const wi=j.skeleton;wi&&(wi.boneTexture===null&&wi.computeBoneTexture(),$t.setValue(z,"boneTexture",wi.boneTexture,k))}j.isBatchedMesh&&($t.setOptional(z,j,"batchingTexture"),$t.setValue(z,"batchingTexture",j._matricesTexture,k),$t.setOptional(z,j,"batchingIdTexture"),$t.setValue(z,"batchingIdTexture",j._indirectTexture,k),$t.setOptional(z,j,"batchingColorTexture"),j._colorsTexture!==null&&$t.setValue(z,"batchingColorTexture",j._colorsTexture,k));const _n=ae.morphAttributes;if((_n.position!==void 0||_n.normal!==void 0||_n.color!==void 0)&&ue.update(j,ae,Bi),(ln||He.receiveShadow!==j.receiveShadow)&&(He.receiveShadow=j.receiveShadow,$t.setValue(z,"receiveShadow",j.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(cn.envMap.value=Oe,cn.flipEnvMap.value=Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1?-1:1),oe.isMeshStandardMaterial&&oe.envMap===null&&q.environment!==null&&(cn.envMapIntensity.value=q.environmentIntensity),ln&&($t.setValue(z,"toneMappingExposure",I.toneMappingExposure),He.needsLights&&mp(cn,Ga),_e&&oe.fog===!0&&H.refreshFogUniforms(cn,_e),H.refreshMaterialUniforms(cn,oe,L,N,A.state.transmissionRenderTarget[B.id]),Gg.upload(z,Hc(He),cn,k)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(Gg.upload(z,Hc(He),cn,k),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&$t.setValue(z,"center",j.center),$t.setValue(z,"modelViewMatrix",j.modelViewMatrix),$t.setValue(z,"normalMatrix",j.normalMatrix),$t.setValue(z,"modelMatrix",j.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const wi=oe.uniformsGroups;for(let Wn=0,Xc=wi.length;Wn<Xc;Wn++){const cs=wi[Wn];Q.update(cs,Bi),Q.bind(cs,Bi)}}return Bi}function mp(B,q){B.ambientLightColor.needsUpdate=q,B.lightProbe.needsUpdate=q,B.directionalLights.needsUpdate=q,B.directionalLightShadows.needsUpdate=q,B.pointLights.needsUpdate=q,B.pointLightShadows.needsUpdate=q,B.spotLights.needsUpdate=q,B.spotLightShadows.needsUpdate=q,B.rectAreaLights.needsUpdate=q,B.hemisphereLights.needsUpdate=q}function Cp(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(B,q,ae){Pe.get(B.texture).__webglTexture=q,Pe.get(B.depthTexture).__webglTexture=ae;const oe=Pe.get(B);oe.__hasExternalTextures=!0,oe.__autoAllocateDepthBuffer=ae===void 0,oe.__autoAllocateDepthBuffer||Ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(B,q){const ae=Pe.get(B);ae.__webglFramebuffer=q,ae.__useDefaultFramebuffer=q===void 0},this.setRenderTarget=function(B,q=0,ae=0){x=B,b=q,_=ae;let oe=!0,j=null,_e=!1,De=!1;if(B){const Ne=Pe.get(B);if(Ne.__useDefaultFramebuffer!==void 0)Le.bindFramebuffer(z.FRAMEBUFFER,null),oe=!1;else if(Ne.__webglFramebuffer===void 0)k.setupRenderTarget(B);else if(Ne.__hasExternalTextures)k.rebindTextures(B,Pe.get(B.texture).__webglTexture,Pe.get(B.depthTexture).__webglTexture);else if(B.depthBuffer){const tt=B.depthTexture;if(Ne.__boundDepthTexture!==tt){if(tt!==null&&Pe.has(tt)&&(B.width!==tt.image.width||B.height!==tt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");k.setupDepthRenderbuffer(B)}}const Oe=B.texture;(Oe.isData3DTexture||Oe.isDataArrayTexture||Oe.isCompressedArrayTexture)&&(De=!0);const nt=Pe.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(nt[q])?j=nt[q][ae]:j=nt[q],_e=!0):B.samples>0&&k.useMultisampledRTT(B)===!1?j=Pe.get(B).__webglMultisampledFramebuffer:Array.isArray(nt)?j=nt[ae]:j=nt,S.copy(B.viewport),R.copy(B.scissor),M=B.scissorTest}else S.copy(de).multiplyScalar(L).floor(),R.copy(ee).multiplyScalar(L).floor(),M=Me;if(Le.bindFramebuffer(z.FRAMEBUFFER,j)&&oe&&Le.drawBuffers(B,j),Le.viewport(S),Le.scissor(R),Le.setScissorTest(M),_e){const Ne=Pe.get(B.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+q,Ne.__webglTexture,ae)}else if(De){const Ne=Pe.get(B.texture),Oe=q||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,Ne.__webglTexture,ae||0,Oe)}y=-1},this.readRenderTargetPixels=function(B,q,ae,oe,j,_e,De){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ne=Pe.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&De!==void 0&&(Ne=Ne[De]),Ne){Le.bindFramebuffer(z.FRAMEBUFFER,Ne);try{const Oe=B.texture,nt=Oe.format,tt=Oe.type;if(!We.textureFormatReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!We.textureTypeReadable(tt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=B.width-oe&&ae>=0&&ae<=B.height-j&&z.readPixels(q,ae,oe,j,he.convert(nt),he.convert(tt),_e)}finally{const Oe=x!==null?Pe.get(x).__webglFramebuffer:null;Le.bindFramebuffer(z.FRAMEBUFFER,Oe)}}},this.readRenderTargetPixelsAsync=async function(B,q,ae,oe,j,_e,De){if(!(B&&B.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ne=Pe.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&De!==void 0&&(Ne=Ne[De]),Ne){const Oe=B.texture,nt=Oe.format,tt=Oe.type;if(!We.textureFormatReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!We.textureTypeReadable(tt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(q>=0&&q<=B.width-oe&&ae>=0&&ae<=B.height-j){Le.bindFramebuffer(z.FRAMEBUFFER,Ne);const et=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,et),z.bufferData(z.PIXEL_PACK_BUFFER,_e.byteLength,z.STREAM_READ),z.readPixels(q,ae,oe,j,he.convert(nt),he.convert(tt),0);const Ut=x!==null?Pe.get(x).__webglFramebuffer:null;Le.bindFramebuffer(z.FRAMEBUFFER,Ut);const Nt=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);return z.flush(),await cZ(z,Nt,4),z.bindBuffer(z.PIXEL_PACK_BUFFER,et),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,_e),z.deleteBuffer(et),z.deleteSync(Nt),_e}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(B,q=null,ae=0){B.isTexture!==!0&&(Gl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),q=arguments[0]||null,B=arguments[1]);const oe=Math.pow(2,-ae),j=Math.floor(B.image.width*oe),_e=Math.floor(B.image.height*oe),De=q!==null?q.x:0,Ne=q!==null?q.y:0;k.setTexture2D(B,0),z.copyTexSubImage2D(z.TEXTURE_2D,ae,0,0,De,Ne,j,_e),Le.unbindTexture()};const hd=z.createFramebuffer(),Ip=z.createFramebuffer();this.copyTextureToTexture=function(B,q,ae=null,oe=null,j=0,_e=null){B.isTexture!==!0&&(Gl("WebGLRenderer: copyTextureToTexture function signature has changed."),oe=arguments[0]||null,B=arguments[1],q=arguments[2],_e=arguments[3]||0,ae=null),_e===null&&(j!==0?(Gl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_e=j,j=0):_e=0);let De,Ne,Oe,nt,tt,et,Ut,Nt,ri;const Vt=B.isCompressedTexture?B.mipmaps[_e]:B.image;if(ae!==null)De=ae.max.x-ae.min.x,Ne=ae.max.y-ae.min.y,Oe=ae.isBox3?ae.max.z-ae.min.z:1,nt=ae.min.x,tt=ae.min.y,et=ae.isBox3?ae.min.z:0;else{const _n=Math.pow(2,-j);De=Math.floor(Vt.width*_n),Ne=Math.floor(Vt.height*_n),B.isDataArrayTexture?Oe=Vt.depth:B.isData3DTexture?Oe=Math.floor(Vt.depth*_n):Oe=1,nt=0,tt=0,et=0}oe!==null?(Ut=oe.x,Nt=oe.y,ri=oe.z):(Ut=0,Nt=0,ri=0);const Gt=he.convert(q.format),He=he.convert(q.type);let Fi;q.isData3DTexture?(k.setTexture3D(q,0),Fi=z.TEXTURE_3D):q.isDataArrayTexture||q.isCompressedArrayTexture?(k.setTexture2DArray(q,0),Fi=z.TEXTURE_2D_ARRAY):(k.setTexture2D(q,0),Fi=z.TEXTURE_2D),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,q.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,q.unpackAlignment);const qn=z.getParameter(z.UNPACK_ROW_LENGTH),Bi=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Ys=z.getParameter(z.UNPACK_SKIP_PIXELS),ln=z.getParameter(z.UNPACK_SKIP_ROWS),Ga=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,Vt.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Vt.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,nt),z.pixelStorei(z.UNPACK_SKIP_ROWS,tt),z.pixelStorei(z.UNPACK_SKIP_IMAGES,et);const $t=B.isDataArrayTexture||B.isData3DTexture,cn=q.isDataArrayTexture||q.isData3DTexture;if(B.isDepthTexture){const _n=Pe.get(B),wi=Pe.get(q),Wn=Pe.get(_n.__renderTarget),Xc=Pe.get(wi.__renderTarget);Le.bindFramebuffer(z.READ_FRAMEBUFFER,Wn.__webglFramebuffer),Le.bindFramebuffer(z.DRAW_FRAMEBUFFER,Xc.__webglFramebuffer);for(let cs=0;cs<Oe;cs++)$t&&(z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Pe.get(B).__webglTexture,j,et+cs),z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,Pe.get(q).__webglTexture,_e,ri+cs)),z.blitFramebuffer(nt,tt,De,Ne,Ut,Nt,De,Ne,z.DEPTH_BUFFER_BIT,z.NEAREST);Le.bindFramebuffer(z.READ_FRAMEBUFFER,null),Le.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else if(j!==0||B.isRenderTargetTexture||Pe.has(B)){const _n=Pe.get(B),wi=Pe.get(q);Le.bindFramebuffer(z.READ_FRAMEBUFFER,hd),Le.bindFramebuffer(z.DRAW_FRAMEBUFFER,Ip);for(let Wn=0;Wn<Oe;Wn++)$t?z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,_n.__webglTexture,j,et+Wn):z.framebufferTexture2D(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,_n.__webglTexture,j),cn?z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,wi.__webglTexture,_e,ri+Wn):z.framebufferTexture2D(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,wi.__webglTexture,_e),j!==0?z.blitFramebuffer(nt,tt,De,Ne,Ut,Nt,De,Ne,z.COLOR_BUFFER_BIT,z.NEAREST):cn?z.copyTexSubImage3D(Fi,_e,Ut,Nt,ri+Wn,nt,tt,De,Ne):z.copyTexSubImage2D(Fi,_e,Ut,Nt,nt,tt,De,Ne);Le.bindFramebuffer(z.READ_FRAMEBUFFER,null),Le.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else cn?B.isDataTexture||B.isData3DTexture?z.texSubImage3D(Fi,_e,Ut,Nt,ri,De,Ne,Oe,Gt,He,Vt.data):q.isCompressedArrayTexture?z.compressedTexSubImage3D(Fi,_e,Ut,Nt,ri,De,Ne,Oe,Gt,Vt.data):z.texSubImage3D(Fi,_e,Ut,Nt,ri,De,Ne,Oe,Gt,He,Vt):B.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,_e,Ut,Nt,De,Ne,Gt,He,Vt.data):B.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,_e,Ut,Nt,Vt.width,Vt.height,Gt,Vt.data):z.texSubImage2D(z.TEXTURE_2D,_e,Ut,Nt,De,Ne,Gt,He,Vt);z.pixelStorei(z.UNPACK_ROW_LENGTH,qn),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Bi),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Ys),z.pixelStorei(z.UNPACK_SKIP_ROWS,ln),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Ga),_e===0&&q.generateMipmaps&&z.generateMipmap(Fi),Le.unbindTexture()},this.copyTextureToTexture3D=function(B,q,ae=null,oe=null,j=0){return B.isTexture!==!0&&(Gl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ae=arguments[0]||null,oe=arguments[1]||null,B=arguments[2],q=arguments[3],j=arguments[4]||0),Gl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(B,q,ae,oe,j)},this.initRenderTarget=function(B){Pe.get(B).__webglFramebuffer===void 0&&k.setupRenderTarget(B)},this.initTexture=function(B){B.isCubeTexture?k.setTextureCube(B,0):B.isData3DTexture?k.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?k.setTexture2DArray(B,0):k.setTexture2D(B,0),Le.unbindTexture()},this.resetState=function(){b=0,_=0,x=null,Le.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return _s}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Rt._getDrawingBufferColorSpace(e),t.unpackColorSpace=Rt._getUnpackColorSpace()}}const DY=/^[og]\s*(.+)?/,LY=/^mtllib /,PY=/^usemtl /,NY=/^usemap /,ax=/\s+/,ox=new ie,Um=new ie,lx=new ie,cx=new ie,rr=new ie,fg=new mt;function kY(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;ox.fromArray(r,e),Um.fromArray(r,t),lx.fromArray(r,i),rr.subVectors(lx,Um),cx.subVectors(ox,Um),rr.cross(cx),rr.normalize(),s.push(rr.x,rr.y,rr.z),s.push(rr.x,rr.y,rr.z),s.push(rr.x,rr.y,rr.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,l,c){const h=this.vertices.length;let u=this.parseVertexIndex(e,h),d=this.parseVertexIndex(t,h),g=this.parseVertexIndex(i,h);if(this.addVertex(u,d,g),this.addColor(u,d,g),o!==void 0&&o!==""){const f=this.normals.length;u=this.parseNormalIndex(o,f),d=this.parseNormalIndex(l,f),g=this.parseNormalIndex(c,f),this.addNormal(u,d,g)}else this.addFaceNormal(u,d,g);if(r!==void 0&&r!==""){const f=this.uvs.length;u=this.parseUVIndex(r,f),d=this.parseUVIndex(s,f),g=this.parseUVIndex(a,f),this.addUV(u,d,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class QY extends Wc{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new LT(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new kY;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let a=0,o=i.length;a<o;a++){const l=i[a].trimStart();if(l.length===0)continue;const c=l.charAt(0);if(c!=="#")if(c==="v"){const h=l.split(ax);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(fg.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6]),Zi),t.colors.push(fg.r,fg.g,fg.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]));break}}else if(c==="f"){const h=l.slice(1).trim().split(ax),u=[];for(let g=0,f=h.length;g<f;g++){const m=h[g];if(m.length>0){const p=m.split("/");u.push(p)}}const d=u[0];for(let g=1,f=u.length-1;g<f;g++){const m=u[g],p=u[g+1];t.addFace(d[0],m[0],p[0],d[1],m[1],p[1],d[2],m[2],p[2])}}else if(c==="l"){const h=l.substring(1).trim().split(" ");let u=[];const d=[];if(l.indexOf("/")===-1)u=h;else for(let g=0,f=h.length;g<f;g++){const m=h[g].split("/");m[0]!==""&&u.push(m[0]),m[1]!==""&&d.push(m[1])}t.addLineGeometry(u,d)}else if(c==="p"){const h=l.slice(1).trim().split(" ");t.addPointGeometry(h)}else if((r=DY.exec(l))!==null){const h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(PY.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(LY.test(l))t.materialLibraries.push(l.substring(7).trim());else if(NY.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(r=l.split(" "),r.length>1){const u=r[1].trim().toLowerCase();t.object.smooth=u!=="0"&&u!=="off"}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if(l==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}}t.finalize();const s=new Lh;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0))for(let a=0,o=t.objects.length;a<o;a++){const l=t.objects[a],c=l.geometry,h=l.materials,u=c.type==="Line",d=c.type==="Points";let g=!1;if(c.vertices.length===0)continue;const f=new Vr;f.setAttribute("position",new mn(c.vertices,3)),c.normals.length>0&&f.setAttribute("normal",new mn(c.normals,3)),c.colors.length>0&&(g=!0,f.setAttribute("color",new mn(c.colors,3))),c.hasUVIndices===!0&&f.setAttribute("uv",new mn(c.uvs,2));const m=[];for(let A=0,C=h.length;A<C;A++){const v=h[A],I=v.name+"_"+v.smooth+"_"+g;let w=t.materials[I];if(this.materials!==null){if(w=this.materials.create(v.name),u&&w&&!(w instanceof zg)){const b=new zg;Vs.prototype.copy.call(b,w),b.color.copy(w.color),w=b}else if(d&&w&&!(w instanceof Dh)){const b=new Dh({size:10,sizeAttenuation:!1});Vs.prototype.copy.call(b,w),b.color.copy(w.color),b.map=w.map,w=b}}w===void 0&&(u?w=new zg:d?w=new Dh({size:1,sizeAttenuation:!1}):w=new yv,w.name=v.name,w.flatShading=!v.smooth,w.vertexColors=g,t.materials[I]=w),m.push(w)}let p;if(m.length>1){for(let A=0,C=h.length;A<C;A++){const v=h[A];f.addGroup(v.groupStart,v.groupCount,A)}u?p=new R_(f,m):d?p=new wm(f,m):p=new kn(f,m)}else u?p=new R_(f,m[0]):d?p=new wm(f,m[0]):p=new kn(f,m[0]);p.name=l.name,s.add(p)}else if(t.vertices.length>0){const a=new Dh({size:1,sizeAttenuation:!1}),o=new Vr;o.setAttribute("position",new mn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(o.setAttribute("color",new mn(t.colors,3)),a.vertexColors=!0);const l=new wm(o,a);s.add(l)}return s}}class OY extends Wc{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?JZ.extractUrlBase(e):this.path,o=new LT(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const h=c.indexOf(" ");let u=h>=0?c.substring(0,h):c;u=u.toLowerCase();let d=h>=0?c.substring(h+1):"";if(d=d.trim(),u==="newmtl")r={name:d},a[d]=r;else if(u==="ka"||u==="kd"||u==="ks"||u==="ke"){const g=d.split(s,3);r[u]=[parseFloat(g[0]),parseFloat(g[1]),parseFloat(g[2])]}else r[u]=d}const o=new VY(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class VY{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Qs,this.wrap=this.options.wrap!==void 0?this.options.wrap:mf}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,l=r[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(r[o])return;const c=t.getTextureParams(l,r),h=t.loadTexture(s(t.baseUrl,c.url));h.repeat.copy(c.scale),h.offset.copy(c.offset),h.wrapS=t.wrap,h.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(h.colorSpace=Zi),r[o]=h}for(const o in i){const l=i[o];let c;if(l!=="")switch(o.toLowerCase()){case"kd":r.color=Rt.toWorkingColorSpace(new mt().fromArray(l),Zi);break;case"ks":r.specular=Rt.toWorkingColorSpace(new mt().fromArray(l),Zi);break;case"ke":r.emissive=Rt.toWorkingColorSpace(new mt().fromArray(l),Zi);break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"map_d":a("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new yv(r),this.materials[e]}getTextureParams(e,t){const i={scale:new ct(1,1),offset:new ct(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:DT;let o=a.getHandler(e);o===null&&(o=new GZ(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}const hx={type:"change"},Ev={type:"start"},GT={type:"end"},pg=new dp,ux=new va,zY=Math.cos(70*oZ.DEG2RAD),Ei=new ie,Mn=2*Math.PI,jt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Fm=1e-6;class GY extends YZ{constructor(e,t=null){super(e,t),this.state=jt.NONE,this.enabled=!0,this.target=new ie,this.cursor=new ie,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:dc.ROTATE,MIDDLE:dc.DOLLY,RIGHT:dc.PAN},this.touches={ONE:Yl.ROTATE,TWO:Yl.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ie,this._lastQuaternion=new Wo,this._lastTargetPosition=new ie,this._quat=new Wo().setFromUnitVectors(e.up,new ie(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new D_,this._sphericalDelta=new D_,this._scale=1,this._panOffset=new ie,this._rotateStart=new ct,this._rotateEnd=new ct,this._rotateDelta=new ct,this._panStart=new ct,this._panEnd=new ct,this._panDelta=new ct,this._dollyStart=new ct,this._dollyEnd=new ct,this._dollyDelta=new ct,this._dollyDirection=new ie,this._mouse=new ct,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=ZY.bind(this),this._onPointerDown=WY.bind(this),this._onPointerUp=HY.bind(this),this._onContextMenu=$Y.bind(this),this._onMouseWheel=jY.bind(this),this._onKeyDown=YY.bind(this),this._onTouchStart=KY.bind(this),this._onTouchMove=qY.bind(this),this._onMouseDown=XY.bind(this),this._onMouseMove=JY.bind(this),this._interceptControlDown=e8.bind(this),this._interceptControlUp=t8.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(hx),this.update(),this.state=jt.NONE}update(e=null){const t=this.object.position;Ei.copy(t).sub(this.target),Ei.applyQuaternion(this._quat),this._spherical.setFromVector3(Ei),this.autoRotate&&this.state===jt.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Mn:i>Math.PI&&(i-=Mn),r<-Math.PI?r+=Mn:r>Math.PI&&(r-=Mn),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Ei.setFromSpherical(this._spherical),Ei.applyQuaternion(this._quatInverse),t.copy(this.target).add(Ei),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Ei.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new ie(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new ie(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(o),this.object.updateMatrixWorld(),a=Ei.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(pg.origin.copy(this.object.position),pg.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(pg.direction))<zY?this.object.lookAt(this.target):(ux.setFromNormalAndCoplanarPoint(this.object.up,this.target),pg.intersectPlane(ux,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>Fm||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Fm||this._lastTargetPosition.distanceToSquared(this.target)>Fm?(this.dispatchEvent(hx),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Mn/60*this.autoRotateSpeed*e:Mn/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Ei.setFromMatrixColumn(t,0),Ei.multiplyScalar(-e),this._panOffset.add(Ei)}_panUp(e,t){this.screenSpacePanning===!0?Ei.setFromMatrixColumn(t,1):(Ei.setFromMatrixColumn(t,0),Ei.crossVectors(this.object.up,Ei)),Ei.multiplyScalar(e),this._panOffset.add(Ei)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const r=this.object.position;Ei.copy(r).sub(this.target);let s=Ei.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/i.clientHeight,this.object.matrix),this._panUp(2*t*s/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),r=e-i.left,s=t-i.top,a=i.width,o=i.height;this._mouse.x=r/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Mn*this._rotateDelta.x/t.clientHeight),this._rotateUp(Mn*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Mn*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Mn*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Mn*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Mn*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),s=.5*(e.pageY+i.y);this._rotateEnd.set(r,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Mn*this._rotateDelta.x/t.clientHeight),this._rotateUp(Mn*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,s=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new ct,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function WY(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function ZY(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function HY(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(GT),this.state=jt.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function XY(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case dc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=jt.DOLLY;break;case dc.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=jt.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=jt.ROTATE}break;case dc.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=jt.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=jt.PAN}break;default:this.state=jt.NONE}this.state!==jt.NONE&&this.dispatchEvent(Ev)}function JY(n){switch(this.state){case jt.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case jt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case jt.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function jY(n){this.enabled===!1||this.enableZoom===!1||this.state!==jt.NONE||(n.preventDefault(),this.dispatchEvent(Ev),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(GT))}function YY(n){this.enabled!==!1&&this._handleKeyDown(n)}function KY(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Yl.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=jt.TOUCH_ROTATE;break;case Yl.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=jt.TOUCH_PAN;break;default:this.state=jt.NONE}break;case 2:switch(this.touches.TWO){case Yl.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=jt.TOUCH_DOLLY_PAN;break;case Yl.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=jt.TOUCH_DOLLY_ROTATE;break;default:this.state=jt.NONE}break;default:this.state=jt.NONE}this.state!==jt.NONE&&this.dispatchEvent(Ev)}function qY(n){switch(this._trackPointer(n),this.state){case jt.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case jt.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case jt.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case jt.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=jt.NONE}}function $Y(n){this.enabled!==!1&&n.preventDefault()}function e8(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function t8(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class i8 extends zc{constructor(){super(...arguments),Xe(this,"modelUrl",""),Xe(this,"materialUrl",""),Xe(this,"debugMode",!1),Xe(this,"cameraPosition","3,3,3"),Xe(this,"cameraTarget","0,0,0"),Xe(this,"showTexture",!0),Xe(this,"scene"),Xe(this,"camera"),Xe(this,"renderer"),Xe(this,"controls"),Xe(this,"animationId"),Xe(this,"container"),Xe(this,"currentModel"),Xe(this,"originalMaterials",new Map),Xe(this,"resizeObserver"),Xe(this,"externalCanvas"),Xe(this,"animateLoop",()=>{!this.renderer||!this.scene||!this.camera||(this.animationId=requestAnimationFrame(this.animateLoop),this.controls&&this.controls.update(),this.renderer.render(this.scene,this.camera),this.updateDebugInfo())})}static get observedAttributes(){return["show","debug-mode","camera-position","camera-target","show-texture","material-url"]}attributeChangedCallback(e,t,i){e==="show"?this.isShow=i==="true":e==="debug-mode"?this.debugMode=i==="true"||i==="":e==="camera-position"?this.cameraPosition=i||"3,3,3":e==="camera-target"?this.cameraTarget=i||"0,0,0":e==="show-texture"?this.showTexture=i!=="false":e==="material-url"&&(this.materialUrl=i||""),e==="debug-mode"&&this.isShow&&this.render(),super.attributeChangedCallback(e,t,i)}async doOpen(e){this.modelUrl=e,this.showTexture=!0,await this.initializeViewer()}doClose(){this.cleanup(),this.modelUrl="",this.materialUrl=""}getViewerContent(){return`
      <div class="model-container">
        ${this.modelUrl?`
        ${this.isLoading?'<div class="loading">Loading...</div>':""}
        ${!this.isLoading&&this.debugMode?`
          <div class="debug-info" style="z-index: calc(var(--cc-viewer-z-index-each, 1000) + 5);">
            Camera Position: ${this.getCameraDebugInfo()}<br>
            Camera Target: ${this.getTargetDebugInfo()}<br>
            Controls: Rotate (drag), Zoom (scroll), Pan (right-drag)
          </div>
        `:""}
        ${this.isLoading?"":`
          <button class="texture-toggle">
            Texture: ${this.showTexture?"ON":"OFF"}
          </button>
        `}
      `:'<div class="error">No model URL provided</div>'}
      </div>
    `}getCustomStyles(){return`
      .model-container {
        width: 100%;
        height: 100%;
        position: relative;
        background: transparent;
        z-index: 1;
      }
      
      .model-container canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
      }
      
      .loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #666;
        font-size: 1.2rem;
      }
      
      .error {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #e74c3c;
        text-align: center;
        padding: 20px;
      }
      
      canvas {
        display: block;
        width: 100%;
        height: 100%;
      }
      
      .debug-info {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 10px;
        font-family: monospace;
        font-size: 12px;
        border-radius: 4px;
        pointer-events: none;
        z-index: calc(var(--cc-viewer-z-index-each, 1000) + 10);
      }
      
      .texture-toggle {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        border: 1px solid #666;
        padding: 8px 16px;
        cursor: pointer;
        border-radius: 4px;
        transition: background 0.3s;
        z-index: calc(var(--cc-viewer-z-index-each, 1000) + 10);
        pointer-events: auto;
      }
      
      .texture-toggle:hover {
        background: rgba(0, 0, 0, 0.9);
      }
    `}onAfterRender(){const e=this.query(".texture-toggle");e&&e.addEventListener("click",()=>this.toggleTexture())}cleanup(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=void 0),this.renderer&&(this.renderer.dispose(),this.renderer.domElement.parentNode===document.body&&document.body.removeChild(this.renderer.domElement),this.renderer=void 0),this.controls&&(this.controls.dispose(),this.controls=void 0),this.scene&&(this.scene.traverse(e=>{var t,i;e instanceof kn&&((t=e.geometry)==null||t.dispose(),Array.isArray(e.material)?e.material.forEach(r=>r.dispose()):(i=e.material)==null||i.dispose())}),this.scene.clear()),this.scene=void 0,this.camera=void 0,this.currentModel=void 0,this.originalMaterials.clear(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),this.container=void 0}storeOriginalMaterials(e){e.traverse(t=>{t instanceof kn&&this.originalMaterials.set(t,t.material)})}toggleTexture(){this.showTexture=!this.showTexture,this.currentModel&&(this.currentModel.traverse(e=>{if(e instanceof kn)if(this.showTexture){const t=this.originalMaterials.get(e);t&&(e.material=t)}else{const t=new mt(13421772);e.material=new yv({color:t})}}),this.render())}getCameraDebugInfo(){if(!this.camera)return"N/A";const e=this.camera.position;return`${e.x.toFixed(2)}, ${e.y.toFixed(2)}, ${e.z.toFixed(2)}`}getTargetDebugInfo(){if(!this.controls)return"N/A";const e=this.controls.target;return`${e.x.toFixed(2)}, ${e.y.toFixed(2)}, ${e.z.toFixed(2)}`}updateDebugInfo(){const e=this.query(".debug-info");e&&this.debugMode&&(e.innerHTML=`
        Camera Position: ${this.getCameraDebugInfo()}<br>
        Camera Target: ${this.getTargetDebugInfo()}<br>
        Controls: Rotate (drag), Zoom (scroll), Pan (right-drag)
      `)}async initializeViewer(){if(await new Promise(t=>setTimeout(t,50)),this.container=this.query(".model-container"),!this.container)return;const e=this.container.getBoundingClientRect();try{this.scene=new DZ,this.scene.background=new mt(3158064);const t=this.container.clientWidth||this.container.offsetWidth,i=this.container.clientHeight||this.container.offsetHeight;this.camera=new ar(75,t/i,.1,1e3),this.renderer=new BY({antialias:!0,alpha:!0}),this.renderer.setSize(t,i),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0;const r=this.renderer.domElement;r.style.position="fixed",r.style.left=`${e.left}px`,r.style.top=`${e.top}px`,r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.pointerEvents="auto";const s=window.getComputedStyle(this).getPropertyValue("--cc-viewer-z-index-each").trim(),a=s?parseInt(s,10):1e3;r.style.zIndex=`${a+1}`,document.body.appendChild(r),this.externalCanvas=r,this.controls=new GY(this.camera,r),this.controls.enableDamping=!0,this.controls.dampingFactor=.05;const o=new XZ(4210752,2),l=new HZ(16777215,1);l.position.set(1,1,1),this.scene.add(o,l),await this.loadModel(),this.resizeObserver=new ResizeObserver(c=>{for(const h of c){const{width:u,height:d}=h.contentRect;u>0&&d>0&&this.handleResize()}}),this.resizeObserver.observe(this.container),this.animateLoop()}catch(t){throw t}}async loadModel(){const e=new QY;try{if(this.materialUrl){const h=new OY,u=this.materialUrl.substring(0,this.materialUrl.lastIndexOf("/")+1);h.setPath(u);const d=await new Promise((g,f)=>{const m=this.materialUrl.substring(this.materialUrl.lastIndexOf("/")+1);h.load(m,g,void 0,f)});d.preload(),e.setMaterials(d)}const t=this.modelUrl.substring(0,this.modelUrl.lastIndexOf("/")+1);e.setPath(t);const i=await new Promise((h,u)=>{const d=this.modelUrl.substring(this.modelUrl.lastIndexOf("/")+1);e.load(d,h,void 0,u)}),r=new Gc().setFromObject(i),s=new ie;r.getSize(s);const a=Math.max(s.x,s.y,s.z);i.scale.multiplyScalar(3/a);const o=new ie;if(r.getCenter(o),i.position.sub(o.multiplyScalar(i.scale.x)),!this.scene)return;this.scene.add(i),this.currentModel=i,this.storeOriginalMaterials(i);const l=this.cameraPosition.split(",").map(h=>parseFloat(h.trim())),c=this.cameraTarget.split(",").map(h=>parseFloat(h.trim()));l.length===3&&this.camera.position.set(l[0],l[1],l[2]),c.length===3&&(this.camera.lookAt(c[0],c[1],c[2]),this.controls.target.set(c[0],c[1],c[2])),this.controls.update(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}catch(t){throw t}}handleResize(){if(!this.container||!this.camera||!this.renderer)return;const e=this.container.getBoundingClientRect(),t=e.width,i=e.height;if(t>0&&i>0){this.camera.aspect=t/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,i);const r=this.renderer.domElement;r.style.left=`${e.left}px`,r.style.top=`${e.top}px`,r.style.width=`${e.width}px`,r.style.height=`${e.height}px`}}}customElements.get("cc-viewer-3dmodel")||customElements.define("cc-viewer-3dmodel",i8);class n8 extends zc{constructor(){super(...arguments),Xe(this,"splatUrl",""),Xe(this,"debugMode",!1),Xe(this,"cameraPosition","3,3,3"),Xe(this,"_cameraTarget","0,0,0"),Xe(this,"scene"),Xe(this,"camera"),Xe(this,"renderer"),Xe(this,"controls"),Xe(this,"animationId"),Xe(this,"canvas"),Xe(this,"swiper")}static get observedAttributes(){return["show","debug-mode","camera-position","camera-target"]}attributeChangedCallback(e,t,i){e==="show"?this.isShow=i==="true":e==="debug-mode"?this.debugMode=i==="true":e==="camera-position"?this.cameraPosition=i||"3,3,3":e==="camera-target"&&(this._cameraTarget=i||"0,0,0"),super.attributeChangedCallback(e,t,i)}async doOpen(e){this.splatUrl=e,await this.initializeViewer()}doClose(){this.cleanup()}getViewerContent(){return""}shouldUseCustomRender(){return!0}customRender(){const e=this.css`
      :host {
        --cc-viewer-z-index-each: 1000;
      }
      
      .backdrop {
        justify-content: center;
        align-items: center;
        position: fixed;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        z-index: var(--cc-viewer-z-index-each, 1000);
      }
      
      .viewer {
        position: absolute;
        width: 90%;
        height: 85%;
        inset: 0px;
        margin: auto;
        align-self: center;
        background-color: #000;
      }
      
      .gaussian-container {
        width: 100%;
        height: 100%;
        position: relative;
        background: #000;
      }
      
      .gaussian-container canvas {
        width: 100% !important;
        height: 100% !important;
        display: block;
      }
      
      .loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-size: 1.2rem;
      }
      
      .error {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #e74c3c;
        text-align: center;
        padding: 20px;
      }
      
      canvas {
        display: block;
        width: 100%;
        height: 100%;
        touch-action: none;
      }
      
      .debug-info {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.85);
        color: #00ff00;
        padding: 12px;
        font-family: 'Courier New', monospace;
        font-size: 11px;
        line-height: 1.4;
        border-radius: 6px;
        border: 1px solid rgba(0, 255, 0, 0.3);
        pointer-events: none;
        white-space: pre-line;
        min-width: 200px;
        z-index: calc(var(--cc-viewer-z-index-each, 1000) + 3);
      }
      
      ${this.getNavigationStyles()}
    `,t=`
        <canvas style="display: none;"></canvas>
        ${this.isLoading?'<div class="loading">Loading...</div>':""}
        ${!this.isLoading&&this.debugMode?`
          <div class="debug-info">
 Camera Position:
${this.getCameraDebugInfo()}

 Camera Target:
${this.getTargetDebugInfo()}

 Controls:
 Rotate: Left-drag
 Zoom: Scroll wheel
 Pan: Right-drag or Shift+Left-drag

 Status: ${this.scene?"Splat loaded":"Loading..."}
          </div>
        `:""}
      `,i=`
      ${e}
      <div class="backdrop" style="${this.isShow?"visibility: visible":"visibility: hidden"}">
        <div class="viewer">
          <div class="gaussian-container">
            ${t}
          </div>
        </div>
        ${this.getNavigationButtons()}
      </div>
    `;this.updateShadowRoot(i),setTimeout(()=>{this.addNavigationListeners()},0)}cleanup(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=void 0),this.renderer&&typeof this.renderer.dispose=="function"&&this.renderer.dispose(),document.querySelectorAll('canvas[id^="gaussian-canvas-"]').forEach(e=>{e.parentNode===document.body&&document.body.removeChild(e)}),this.scene=void 0,this.camera=void 0,this.renderer=void 0,this.controls=void 0,this.canvas=void 0}getCameraDebugInfo(){if(!this.camera||!this.camera.position)return"Position: unavailable";const e=this.camera.position;try{return`X: ${e.x.toFixed(3)}, Y: ${e.y.toFixed(3)}, Z: ${e.z.toFixed(3)}`}catch{return`Position: ${JSON.stringify(e)}`}}getTargetDebugInfo(){if(!this.controls)return"Target: controls unavailable";try{return"Controls active (no target property in gsplat.js)"}catch{return`Target: ${JSON.stringify(this.controls)}`}}updateDebugInfo(){const e=this.query(".debug-info");e&&(e.innerHTML=`
 Camera Position:
${this.getCameraDebugInfo()}

 Camera Target:
${this.getTargetDebugInfo()}

 Controls:
 Rotate: Left-drag
 Zoom: Scroll wheel
 Pan: Right-drag or Shift+Left-drag

 Status: ${this.scene?"Splat loaded":"Loading..."}
      `)}async initializeViewer(){const e=`gaussian-canvas-${Date.now()}`,t=this.query(".viewer");if(!t)return;const i=t.getBoundingClientRect();let r=document.getElementById(e);if(!r){r=document.createElement("canvas"),r.id=e,r.style.position="fixed",r.style.top=`${i.top}px`,r.style.left=`${i.left}px`,r.style.width=`${i.width}px`,r.style.height=`${i.height}px`;const s=window.getComputedStyle(this).getPropertyValue("--cc-viewer-z-index-each").trim(),a=s?parseInt(s,10):1e3;r.style.zIndex=`${a+1}`,r.style.pointerEvents="auto",r.style.display="block",r.style.background="transparent",document.body.appendChild(r)}r.style.top=`${i.top}px`,r.style.left=`${i.left}px`,r.style.width=`${i.width}px`,r.style.height=`${i.height}px`,this.canvas=r;try{const s=this.query(".gaussian-container");if(!s)return;const a=await Promise.resolve().then(()=>F8);this.scene=new a.Scene,this.camera=new a.Camera,this.renderer=new a.WebGLRenderer(this.canvas),this.controls=new a.OrbitControls(this.camera,this.canvas),await a.Loader.LoadAsync(this.splatUrl,this.scene);let o=0;const l=()=>{if(!(!this.renderer||!this.scene||!this.camera)){this.animationId=requestAnimationFrame(l),this.controls&&this.controls.update();try{this.renderer.render(this.scene,this.camera)}catch{}o===0&&this.canvas&&o++,this.debugMode&&this.updateDebugInfo()}};l(),new ResizeObserver(()=>{this.handleResize()}).observe(s)}catch(s){throw s}}handleResize(){const e=this.query(".gaussian-container");if(!e||!this.renderer||!this.camera)return;const t=e.clientWidth,i=e.clientHeight;typeof this.renderer.setSize=="function"&&this.renderer.setSize(t,i),typeof this.camera.aspect<"u"&&(this.camera.aspect=t/i,typeof this.camera.updateProjectionMatrix=="function"&&this.camera.updateProjectionMatrix())}}customElements.get("cc-viewer-gaussian")||customElements.define("cc-viewer-gaussian",n8);const Ag={image:"cc-viewer-image",panorama:"cc-viewer-panorama",youtube:"cc-viewer-youtube",video:"cc-viewer-video","3dmodel":"cc-viewer-3dmodel",gaussian:"cc-viewer-gaussian"};class r8 extends cp{constructor(){super(...arguments),Xe(this,"swiper"),Xe(this,"currentSlideIndex",0),Xe(this,"currentType",""),Xe(this,"boundHandleNavigatePrev"),Xe(this,"boundHandleNavigateNext")}open(e,t,i){const r=this.currentType;if(this.currentType=t,r&&r!==t){const s=Ag[r],a=this.query(s);a&&a.close&&a.close()}r!==t&&this.render(),setTimeout(()=>{const s=Ag[t],a=this.query(s);a&&i&&Object.entries(i).forEach(([o,l])=>{const c=o.replace(/([A-Z])/g,"-$1").toLowerCase();typeof l=="boolean"?l?a.setAttribute(c,""):a.removeAttribute(c):a.setAttribute(c,String(l))}),this.updateNavigationButtons(),a&&a.open(e)},0)}firstUpdated(){this.dispatch("load"),this.boundHandleNavigatePrev&&this.removeEventListener("navigate-prev",this.boundHandleNavigatePrev),this.boundHandleNavigateNext&&this.removeEventListener("navigate-next",this.boundHandleNavigateNext),this.boundHandleNavigatePrev=this.handleNavigatePrev.bind(this),this.boundHandleNavigateNext=this.handleNavigateNext.bind(this),this.addEventListener("navigate-prev",this.boundHandleNavigatePrev),this.addEventListener("navigate-next",this.boundHandleNavigateNext)}handleNavigatePrev(e){var t,i;if(!this.swiper)return;const r=this.swiper.slides.length;if(r<=1)return;const s=((i=(t=this.swiper.slider)==null?void 0:t.params)==null?void 0:i.loop)===!0;if(this.currentSlideIndex<=0)if(s)this.currentSlideIndex=r-1;else return;else this.currentSlideIndex--;this.navigateToSlide(this.currentSlideIndex)}handleNavigateNext(e){var t,i;if(!this.swiper)return;const r=this.swiper.slides.length;if(r<=1)return;const s=((i=(t=this.swiper.slider)==null?void 0:t.params)==null?void 0:i.loop)===!0;if(this.currentSlideIndex>=r-1)if(s)this.currentSlideIndex=0;else return;else this.currentSlideIndex++;this.navigateToSlide(this.currentSlideIndex)}navigateToSlide(e){if(!this.swiper||!this.swiper.slides[e])return;const t=this.swiper.slides[e],i=t.getAttribute("image-url")||"",r=t.getAttribute("image-type")||"image",s=Ag[this.currentType],a=this.query(s);a&&a.close();const o={};t.hasAttribute("fit-to-container")&&(o.fitToContainer=!0),t.hasAttribute("debug-mode")&&(o.debugMode=!0),t.hasAttribute("camera-position")&&(o.cameraPosition=t.getAttribute("camera-position")),t.hasAttribute("camera-target")&&(o.cameraTarget=t.getAttribute("camera-target")),t.hasAttribute("show-texture")&&(o.showTexture=t.getAttribute("show-texture")==="true"),t.hasAttribute("material-url")&&(o.materialUrl=t.getAttribute("material-url")),this.currentSlideIndex=e,this.open(i,r,o),this.swiper.slider&&this.swiper.slider.slideTo(e)}updateNavigationButtons(){var e,t;if(!this.swiper)return;const i=this.swiper.slides.length,r=((t=(e=this.swiper.slider)==null?void 0:e.params)==null?void 0:t.loop)===!0;if(i<=1){this.setNavigationVisibility(!1,!1);return}if(r){this.setNavigationVisibility(!0,!0);return}const s=this.currentSlideIndex>0,a=this.currentSlideIndex<i-1;this.setNavigationVisibility(s,a)}setNavigationVisibility(e,t){[this.query("cc-viewer-image"),this.query("cc-viewer-youtube"),this.query("cc-viewer-panorama"),this.query("cc-viewer-video"),this.query("cc-viewer-3dmodel"),this.query("cc-viewer-gaussian")].forEach(i=>{if(i){const r=i;r.showPrevButton=e,r.showNextButton=t}})}setSwiper(e){this.swiper=e}setCurrentSlideIndex(e){this.currentSlideIndex=e}render(){const e=this.css`
      :host {
        --cc-viewer-z-index: 1000;
      }
      
      cc-viewer-panorama, cc-viewer-image, cc-viewer-youtube, cc-viewer-video,
      cc-viewer-3dmodel, cc-viewer-gaussian {
        --cc-viewer-z-index-each: var(--cc-viewer-z-index);
      }
    `;let t="";if(this.currentType){const r=Ag[this.currentType];r&&(t=`<${r}></${r}>`)}const i=`
      ${e}
      ${t}
    `;this.updateShadowRoot(i)}}customElements.get("cc-viewer")||customElements.define("cc-viewer",r8);class ze{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}equals(e){return!(this.x!==e.x||this.y!==e.y||this.z!==e.z)}add(e){return typeof e=="number"?new ze(this.x+e,this.y+e,this.z+e):new ze(this.x+e.x,this.y+e.y,this.z+e.z)}subtract(e){return typeof e=="number"?new ze(this.x-e,this.y-e,this.z-e):new ze(this.x-e.x,this.y-e.y,this.z-e.z)}multiply(e){return typeof e=="number"?new ze(this.x*e,this.y*e,this.z*e):e instanceof ze?new ze(this.x*e.x,this.y*e.y,this.z*e.z):new ze(this.x*e.buffer[0]+this.y*e.buffer[4]+this.z*e.buffer[8]+e.buffer[12],this.x*e.buffer[1]+this.y*e.buffer[5]+this.z*e.buffer[9]+e.buffer[13],this.x*e.buffer[2]+this.y*e.buffer[6]+this.z*e.buffer[10]+e.buffer[14])}divide(e){return typeof e=="number"?new ze(this.x/e,this.y/e,this.z/e):new ze(this.x/e.x,this.y/e.y,this.z/e.z)}cross(e){const t=this.y*e.z-this.z*e.y,i=this.z*e.x-this.x*e.z,r=this.x*e.y-this.y*e.x;return new ze(t,i,r)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lerp(e,t){return new ze(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t,this.z+(e.z-this.z)*t)}min(e){return new ze(Math.min(this.x,e.x),Math.min(this.y,e.y),Math.min(this.z,e.z))}max(e){return new ze(Math.max(this.x,e.x),Math.max(this.y,e.y),Math.max(this.z,e.z))}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(`Invalid component index: ${e}`)}}minComponent(){return this.x<this.y&&this.x<this.z?0:this.y<this.z?1:2}maxComponent(){return this.x>this.y&&this.x>this.z?0:this.y>this.z?1:2}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distanceTo(e){return Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2+(this.z-e.z)**2)}normalize(){const e=this.magnitude();return new ze(this.x/e,this.y/e,this.z/e)}flat(){return[this.x,this.y,this.z]}clone(){return new ze(this.x,this.y,this.z)}toString(){return`[${this.flat().join(", ")}]`}static One(e=1){return new ze(e,e,e)}}class ti{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}equals(e){return!(this.x!==e.x||this.y!==e.y||this.z!==e.z||this.w!==e.w)}normalize(){const e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return new ti(this.x/e,this.y/e,this.z/e,this.w/e)}multiply(e){const t=this.w,i=this.x,r=this.y,s=this.z,a=e.w,o=e.x,l=e.y,c=e.z;return new ti(t*o+i*a+r*c-s*l,t*l-i*c+r*a+s*o,t*c+i*l-r*o+s*a,t*a-i*o-r*l-s*c)}inverse(){const e=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w;return new ti(-this.x/e,-this.y/e,-this.z/e,this.w/e)}apply(e){const t=new ti(e.x,e.y,e.z,0),i=new ti(-this.x,-this.y,-this.z,this.w),r=this.multiply(t).multiply(i);return new ze(r.x,r.y,r.z)}flat(){return[this.x,this.y,this.z,this.w]}clone(){return new ti(this.x,this.y,this.z,this.w)}static FromEuler(e){const t=e.x/2,i=e.y/2,r=e.z/2,s=Math.cos(i),a=Math.sin(i),o=Math.cos(t),l=Math.sin(t),c=Math.cos(r),h=Math.sin(r);return new ti(s*l*c+a*o*h,a*o*c-s*l*h,s*o*h-a*l*c,s*o*c+a*l*h)}toEuler(){const e=2*(this.w*this.x+this.y*this.z),t=1-2*(this.x*this.x+this.y*this.y),i=Math.atan2(e,t);let r;const s=2*(this.w*this.y-this.z*this.x);Math.abs(s)>=1?r=Math.sign(s)*Math.PI/2:r=Math.asin(s);const a=2*(this.w*this.z+this.x*this.y),o=1-2*(this.y*this.y+this.z*this.z),l=Math.atan2(a,o);return new ze(i,r,l)}static FromMatrix3(e){const t=e.buffer,i=t[0]+t[4]+t[8];let r,s,a,o;if(i>0){const l=.5/Math.sqrt(i+1);o=.25/l,r=(t[7]-t[5])*l,s=(t[2]-t[6])*l,a=(t[3]-t[1])*l}else if(t[0]>t[4]&&t[0]>t[8]){const l=2*Math.sqrt(1+t[0]-t[4]-t[8]);o=(t[7]-t[5])/l,r=.25*l,s=(t[1]+t[3])/l,a=(t[2]+t[6])/l}else if(t[4]>t[8]){const l=2*Math.sqrt(1+t[4]-t[0]-t[8]);o=(t[2]-t[6])/l,r=(t[1]+t[3])/l,s=.25*l,a=(t[5]+t[7])/l}else{const l=2*Math.sqrt(1+t[8]-t[0]-t[4]);o=(t[3]-t[1])/l,r=(t[2]+t[6])/l,s=(t[5]+t[7])/l,a=.25*l}return new ti(r,s,a,o)}static FromAxisAngle(e,t){const i=t/2,r=Math.sin(i),s=Math.cos(i);return new ti(e.x*r,e.y*r,e.z*r,s)}static LookRotation(e){const t=new ze(0,0,1),i=t.dot(e);if(Math.abs(i- -1)<1e-6)return new ti(0,1,0,Math.PI);if(Math.abs(i-1)<1e-6)return new ti;const r=Math.acos(i),s=t.cross(e).normalize();return ti.FromAxisAngle(s,r)}toString(){return`[${this.flat().join(", ")}]`}}class WT{constructor(){const e=new Map;this.addEventListener=(t,i)=>{e.has(t)||e.set(t,new Set),e.get(t).add(i)},this.removeEventListener=(t,i)=>{e.has(t)&&e.get(t).delete(i)},this.hasEventListener=(t,i)=>e.has(t)?e.get(t).has(i):!1,this.dispatchEvent=t=>{if(e.has(t.type))for(const i of e.get(t.type))i(t)}}}class In{constructor(e=1,t=0,i=0,r=0,s=0,a=1,o=0,l=0,c=0,h=0,u=1,d=0,g=0,f=0,m=0,p=1){this.buffer=[e,t,i,r,s,a,o,l,c,h,u,d,g,f,m,p]}equals(e){if(this.buffer.length!==e.buffer.length)return!1;if(this.buffer===e.buffer)return!0;for(let t=0;t<this.buffer.length;t++)if(this.buffer[t]!==e.buffer[t])return!1;return!0}multiply(e){const t=this.buffer,i=e.buffer;return new In(i[0]*t[0]+i[1]*t[4]+i[2]*t[8]+i[3]*t[12],i[0]*t[1]+i[1]*t[5]+i[2]*t[9]+i[3]*t[13],i[0]*t[2]+i[1]*t[6]+i[2]*t[10]+i[3]*t[14],i[0]*t[3]+i[1]*t[7]+i[2]*t[11]+i[3]*t[15],i[4]*t[0]+i[5]*t[4]+i[6]*t[8]+i[7]*t[12],i[4]*t[1]+i[5]*t[5]+i[6]*t[9]+i[7]*t[13],i[4]*t[2]+i[5]*t[6]+i[6]*t[10]+i[7]*t[14],i[4]*t[3]+i[5]*t[7]+i[6]*t[11]+i[7]*t[15],i[8]*t[0]+i[9]*t[4]+i[10]*t[8]+i[11]*t[12],i[8]*t[1]+i[9]*t[5]+i[10]*t[9]+i[11]*t[13],i[8]*t[2]+i[9]*t[6]+i[10]*t[10]+i[11]*t[14],i[8]*t[3]+i[9]*t[7]+i[10]*t[11]+i[11]*t[15],i[12]*t[0]+i[13]*t[4]+i[14]*t[8]+i[15]*t[12],i[12]*t[1]+i[13]*t[5]+i[14]*t[9]+i[15]*t[13],i[12]*t[2]+i[13]*t[6]+i[14]*t[10]+i[15]*t[14],i[12]*t[3]+i[13]*t[7]+i[14]*t[11]+i[15]*t[15])}clone(){const e=this.buffer;return new In(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}determinant(){const e=this.buffer;return e[12]*e[9]*e[6]*e[3]-e[8]*e[13]*e[6]*e[3]-e[12]*e[5]*e[10]*e[3]+e[4]*e[13]*e[10]*e[3]+e[8]*e[5]*e[14]*e[3]-e[4]*e[9]*e[14]*e[3]-e[12]*e[9]*e[2]*e[7]+e[8]*e[13]*e[2]*e[7]+e[12]*e[1]*e[10]*e[7]-e[0]*e[13]*e[10]*e[7]-e[8]*e[1]*e[14]*e[7]+e[0]*e[9]*e[14]*e[7]+e[12]*e[5]*e[2]*e[11]-e[4]*e[13]*e[2]*e[11]-e[12]*e[1]*e[6]*e[11]+e[0]*e[13]*e[6]*e[11]+e[4]*e[1]*e[14]*e[11]-e[0]*e[5]*e[14]*e[11]-e[8]*e[5]*e[2]*e[15]+e[4]*e[9]*e[2]*e[15]+e[8]*e[1]*e[6]*e[15]-e[0]*e[9]*e[6]*e[15]-e[4]*e[1]*e[10]*e[15]+e[0]*e[5]*e[10]*e[15]}invert(){const e=this.buffer,t=this.determinant();if(t===0)throw new Error("Matrix is not invertible.");const i=1/t;return new In(i*(e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10]),i*(-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10]),i*(e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6]),i*(-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6]),i*(-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10]),i*(e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10]),i*(-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6]),i*(e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6]),i*(e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9]),i*(-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9]),i*(e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5]),i*(-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5]),i*(-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9]),i*(e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9]),i*(-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5]),i*(e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5]))}static Compose(e,t,i){const r=t.x,s=t.y,a=t.z,o=t.w,l=r+r,c=s+s,h=a+a,u=r*l,d=r*c,g=r*h,f=s*c,m=s*h,p=a*h,A=o*l,C=o*c,v=o*h,I=i.x,w=i.y,b=i.z;return new In((1-(f+p))*I,(d+v)*I,(g-C)*I,0,(d-v)*w,(1-(u+p))*w,(m+A)*w,0,(g+C)*b,(m-A)*b,(1-(u+f))*b,0,e.x,e.y,e.z,1)}toString(){return`[${this.buffer.join(", ")}]`}}class s8 extends Event{constructor(e){super("objectAdded"),this.object=e}}class a8 extends Event{constructor(e){super("objectRemoved"),this.object=e}}class o8 extends Event{constructor(e){super("objectChanged"),this.object=e}}class pp extends WT{constructor(){super(),this.positionChanged=!1,this.rotationChanged=!1,this.scaleChanged=!1,this._position=new ze,this._rotation=new ti,this._scale=new ze(1,1,1),this._transform=new In,this._changeEvent=new o8(this),this.update=()=>{},this.applyPosition=()=>{this.position=new ze},this.applyRotation=()=>{this.rotation=new ti},this.applyScale=()=>{this.scale=new ze(1,1,1)},this.raiseChangeEvent=()=>{this.dispatchEvent(this._changeEvent)}}_updateMatrix(){this._transform=In.Compose(this._position,this._rotation,this._scale)}get position(){return this._position}set position(e){this._position.equals(e)||(this._position=e,this.positionChanged=!0,this._updateMatrix(),this.dispatchEvent(this._changeEvent))}get rotation(){return this._rotation}set rotation(e){this._rotation.equals(e)||(this._rotation=e,this.rotationChanged=!0,this._updateMatrix(),this.dispatchEvent(this._changeEvent))}get scale(){return this._scale}set scale(e){this._scale.equals(e)||(this._scale=e,this.scaleChanged=!0,this._updateMatrix(),this.dispatchEvent(this._changeEvent))}get forward(){let e=new ze(0,0,1);return e=this.rotation.apply(e),e}get transform(){return this._transform}}class Cn{constructor(e=1,t=0,i=0,r=0,s=1,a=0,o=0,l=0,c=1){this.buffer=[e,t,i,r,s,a,o,l,c]}equals(e){if(this.buffer.length!==e.buffer.length)return!1;if(this.buffer===e.buffer)return!0;for(let t=0;t<this.buffer.length;t++)if(this.buffer[t]!==e.buffer[t])return!1;return!0}multiply(e){const t=this.buffer,i=e.buffer;return new Cn(i[0]*t[0]+i[3]*t[1]+i[6]*t[2],i[1]*t[0]+i[4]*t[1]+i[7]*t[2],i[2]*t[0]+i[5]*t[1]+i[8]*t[2],i[0]*t[3]+i[3]*t[4]+i[6]*t[5],i[1]*t[3]+i[4]*t[4]+i[7]*t[5],i[2]*t[3]+i[5]*t[4]+i[8]*t[5],i[0]*t[6]+i[3]*t[7]+i[6]*t[8],i[1]*t[6]+i[4]*t[7]+i[7]*t[8],i[2]*t[6]+i[5]*t[7]+i[8]*t[8])}clone(){const e=this.buffer;return new Cn(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}static Eye(e=1){return new Cn(e,0,0,0,e,0,0,0,e)}static Diagonal(e){return new Cn(e.x,0,0,0,e.y,0,0,0,e.z)}static RotationFromQuaternion(e){return new Cn(1-2*e.y*e.y-2*e.z*e.z,2*e.x*e.y-2*e.z*e.w,2*e.x*e.z+2*e.y*e.w,2*e.x*e.y+2*e.z*e.w,1-2*e.x*e.x-2*e.z*e.z,2*e.y*e.z-2*e.x*e.w,2*e.x*e.z-2*e.y*e.w,2*e.y*e.z+2*e.x*e.w,1-2*e.x*e.x-2*e.y*e.y)}static RotationFromEuler(e){const t=Math.cos(e.x),i=Math.sin(e.x),r=Math.cos(e.y),s=Math.sin(e.y),a=Math.cos(e.z),o=Math.sin(e.z),l=[r*a+s*i*o,-r*o+s*i*a,s*t,t*o,t*a,-i,-s*a+r*i*o,s*o+r*i*a,r*t];return new Cn(...l)}toString(){return`[${this.buffer.join(", ")}]`}}const ZT=class Nh{constructor(e=0,t=null,i=null,r=null,s=null){this.changed=!1,this.detached=!1,this._vertexCount=e,this._positions=t||new Float32Array(0),this._rotations=i||new Float32Array(0),this._scales=r||new Float32Array(0),this._colors=s||new Uint8Array(0),this._selection=new Uint8Array(this.vertexCount),this.translate=a=>{for(let o=0;o<this.vertexCount;o++)this.positions[3*o+0]+=a.x,this.positions[3*o+1]+=a.y,this.positions[3*o+2]+=a.z;this.changed=!0},this.rotate=a=>{const o=Cn.RotationFromQuaternion(a).buffer;for(let l=0;l<this.vertexCount;l++){const c=this.positions[3*l+0],h=this.positions[3*l+1],u=this.positions[3*l+2];this.positions[3*l+0]=o[0]*c+o[1]*h+o[2]*u,this.positions[3*l+1]=o[3]*c+o[4]*h+o[5]*u,this.positions[3*l+2]=o[6]*c+o[7]*h+o[8]*u;const d=new ti(this.rotations[4*l+1],this.rotations[4*l+2],this.rotations[4*l+3],this.rotations[4*l+0]),g=a.multiply(d);this.rotations[4*l+1]=g.x,this.rotations[4*l+2]=g.y,this.rotations[4*l+3]=g.z,this.rotations[4*l+0]=g.w}this.changed=!0},this.scale=a=>{for(let o=0;o<this.vertexCount;o++)this.positions[3*o+0]*=a.x,this.positions[3*o+1]*=a.y,this.positions[3*o+2]*=a.z,this.scales[3*o+0]*=a.x,this.scales[3*o+1]*=a.y,this.scales[3*o+2]*=a.z;this.changed=!0},this.serialize=()=>{const a=new Uint8Array(this.vertexCount*Nh.RowLength),o=new Float32Array(a.buffer),l=new Uint8Array(a.buffer);for(let c=0;c<this.vertexCount;c++)o[8*c+0]=this.positions[3*c+0],o[8*c+1]=this.positions[3*c+1],o[8*c+2]=this.positions[3*c+2],l[32*c+24+0]=this.colors[4*c+0],l[32*c+24+1]=this.colors[4*c+1],l[32*c+24+2]=this.colors[4*c+2],l[32*c+24+3]=this.colors[4*c+3],o[8*c+3+0]=this.scales[3*c+0],o[8*c+3+1]=this.scales[3*c+1],o[8*c+3+2]=this.scales[3*c+2],l[32*c+28+0]=this.rotations[4*c+0]*128+128&255,l[32*c+28+1]=this.rotations[4*c+1]*128+128&255,l[32*c+28+2]=this.rotations[4*c+2]*128+128&255,l[32*c+28+3]=this.rotations[4*c+3]*128+128&255;return a},this.reattach=(a,o,l,c,h)=>{console.assert(a.byteLength===this.vertexCount*3*4,`Expected ${this.vertexCount*3*4} bytes, got ${a.byteLength} bytes`),this._positions=new Float32Array(a),this._rotations=new Float32Array(o),this._scales=new Float32Array(l),this._colors=new Uint8Array(c),this._selection=new Uint8Array(h),this.detached=!1}}static Deserialize(e){const t=e.length/Nh.RowLength,i=new Float32Array(3*t),r=new Float32Array(4*t),s=new Float32Array(3*t),a=new Uint8Array(4*t),o=new Float32Array(e.buffer),l=new Uint8Array(e.buffer);for(let c=0;c<t;c++)i[3*c+0]=o[8*c+0],i[3*c+1]=o[8*c+1],i[3*c+2]=o[8*c+2],r[4*c+0]=(l[32*c+28+0]-128)/128,r[4*c+1]=(l[32*c+28+1]-128)/128,r[4*c+2]=(l[32*c+28+2]-128)/128,r[4*c+3]=(l[32*c+28+3]-128)/128,s[3*c+0]=o[8*c+3+0],s[3*c+1]=o[8*c+3+1],s[3*c+2]=o[8*c+3+2],a[4*c+0]=l[32*c+24+0],a[4*c+1]=l[32*c+24+1],a[4*c+2]=l[32*c+24+2],a[4*c+3]=l[32*c+24+3];return new Nh(t,i,r,s,a)}get vertexCount(){return this._vertexCount}get positions(){return this._positions}get rotations(){return this._rotations}get scales(){return this._scales}get colors(){return this._colors}get selection(){return this._selection}clone(){return new Nh(this.vertexCount,new Float32Array(this.positions),new Float32Array(this.rotations),new Float32Array(this.scales),new Uint8Array(this.colors))}};ZT.RowLength=32;let jr=ZT;const HT=class XT{constructor(e,t,i,r,s){this._vertexCount=e,this._positions=t,this._data=i,this._width=r,this._height=s,this.serialize=()=>new Uint8Array(this._data.buffer)}static Deserialize(e,t,i){const r=new Uint32Array(e.buffer),s=new Float32Array(e.buffer),a=Math.floor(s.byteLength/this.RowLength),o=new Float32Array(a*3);for(let l=0;l<a;l++)o[3*l+0]=s[16*l+0],o[3*l+1]=s[16*l+1],o[3*l+2]=s[16*l+2],o[3*l+0]=s[16*l+3];return new XT(a,o,r,t,i)}get vertexCount(){return this._vertexCount}get positions(){return this._positions}get data(){return this._data}get width(){return this._width}get height(){return this._height}};HT.RowLength=64;let JT=HT;const jT=class{static SplatToPLY(e,t){let i=`ply
format binary_little_endian 1.0
`;i+=`element vertex ${t}
`;const r=["x","y","z","nx","ny","nz","f_dc_0","f_dc_1","f_dc_2"];for(let p=0;p<45;p++)r.push(`f_rest_${p}`);r.push("opacity"),r.push("scale_0"),r.push("scale_1"),r.push("scale_2"),r.push("rot_0"),r.push("rot_1"),r.push("rot_2"),r.push("rot_3");for(const p of r)i+=`property float ${p}
`;i+=`end_header
`;const s=new TextEncoder().encode(i),a=248,o=t*a,l=new DataView(new ArrayBuffer(s.length+o));new Uint8Array(l.buffer).set(s,0);const c=new Float32Array(e),h=new Uint8Array(e),u=s.length,d=24,g=d+12+180,f=g+4,m=f+12;for(let p=0;p<t;p++){const A=c[8*p+0],C=c[8*p+1],v=c[8*p+2],I=(h[32*p+24+0]/255-.5)/this.SH_C0,w=(h[32*p+24+1]/255-.5)/this.SH_C0,b=(h[32*p+24+2]/255-.5)/this.SH_C0,_=h[32*p+24+3]/255,x=Math.log(_/(1-_)),y=Math.log(c[8*p+3+0]),E=Math.log(c[8*p+3+1]),S=Math.log(c[8*p+3+2]);let R=new ti((h[32*p+28+1]-128)/128,(h[32*p+28+2]-128)/128,(h[32*p+28+3]-128)/128,(h[32*p+28+0]-128)/128);R=R.normalize();const M=R.w,T=R.x,P=R.y,F=R.z;l.setFloat32(u+a*p+0,A,!0),l.setFloat32(u+a*p+4,C,!0),l.setFloat32(u+a*p+8,v,!0),l.setFloat32(u+a*p+d+0,I,!0),l.setFloat32(u+a*p+d+4,w,!0),l.setFloat32(u+a*p+d+8,b,!0),l.setFloat32(u+a*p+g,x,!0),l.setFloat32(u+a*p+f+0,y,!0),l.setFloat32(u+a*p+f+4,E,!0),l.setFloat32(u+a*p+f+8,S,!0),l.setFloat32(u+a*p+m+0,M,!0),l.setFloat32(u+a*p+m+4,T,!0),l.setFloat32(u+a*p+m+8,P,!0),l.setFloat32(u+a*p+m+12,F,!0)}return l.buffer}};jT.SH_C0=.28209479177387814;let ql=jT;class Gh{constructor(e,t){this.min=e,this.max=t}contains(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}intersects(e){return this.max.x>=e.min.x&&this.min.x<=e.max.x&&this.max.y>=e.min.y&&this.min.y<=e.max.y&&this.max.z>=e.min.z&&this.min.z<=e.max.z}size(){return this.max.subtract(this.min)}center(){return this.min.add(this.max).divide(2)}expand(e){this.min=this.min.min(e),this.max=this.max.max(e)}permute(){const e=this.min,t=this.max;this.min=new ze(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.min(e.z,t.z)),this.max=new ze(Math.max(e.x,t.x),Math.max(e.y,t.y),Math.max(e.z,t.z))}}class Ln extends pp{constructor(e=void 0){super(),this.selectedChanged=!1,this.colorTransformChanged=!1,this._selected=!1,this._colorTransforms=[],this._colorTransformsMap=new Map,this._data=e||new jr,this._bounds=new Gh(new ze(1/0,1/0,1/0),new ze(-1/0,-1/0,-1/0)),this.recalculateBounds=()=>{this._bounds=new Gh(new ze(1/0,1/0,1/0),new ze(-1/0,-1/0,-1/0));for(let t=0;t<this._data.vertexCount;t++)this._bounds.expand(new ze(this._data.positions[3*t],this._data.positions[3*t+1],this._data.positions[3*t+2]))},this.applyPosition=()=>{this.data.translate(this.position),this.position=new ze},this.applyRotation=()=>{this.data.rotate(this.rotation),this.rotation=new ti},this.applyScale=()=>{this.data.scale(this.scale),this.scale=new ze(1,1,1)},this.recalculateBounds()}saveToFile(e=null,t="splat"){if(!document)return;if(!e){const o=new Date;e=`splat-${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()}.${t}`}const i=this.clone();i.applyRotation(),i.applyScale(),i.applyPosition();const r=i.data.serialize();let s;if(t==="ply"){const o=ql.SplatToPLY(r.buffer,i.data.vertexCount);s=new Blob([o],{type:"application/octet-stream"})}else s=new Blob([r.buffer],{type:"application/octet-stream"});const a=document.createElement("a");a.download=e,a.href=URL.createObjectURL(s),a.click()}get data(){return this._data}get selected(){return this._selected}set selected(e){this._selected!==e&&(this._selected=e,this.selectedChanged=!0,this.dispatchEvent(this._changeEvent))}get colorTransforms(){return this._colorTransforms}get colorTransformsMap(){return this._colorTransformsMap}get bounds(){let e=this._bounds.center();e=e.add(this.position);let t=this._bounds.size();return t=t.multiply(this.scale),new Gh(e.subtract(t.divide(2)),e.add(t.divide(2)))}clone(){const e=new Ln(this.data.clone());return e.position=this.position.clone(),e.rotation=this.rotation.clone(),e.scale=this.scale.clone(),e}}class ho extends pp{constructor(e){super(),this._data=e}get data(){return this._data}}class YT{constructor(){this._fx=1132,this._fy=1132,this._near=.1,this._far=100,this._width=512,this._height=512,this._projectionMatrix=new In,this._viewMatrix=new In,this._viewProj=new In,this._updateProjectionMatrix=()=>{this._projectionMatrix=new In(2*this.fx/this.width,0,0,0,0,-2*this.fy/this.height,0,0,0,0,this.far/(this.far-this.near),1,0,0,-(this.far*this.near)/(this.far-this.near),0),this._viewProj=this.projectionMatrix.multiply(this.viewMatrix)},this.update=(e,t)=>{const i=Cn.RotationFromQuaternion(t).buffer,r=e.flat();this._viewMatrix=new In(i[0],i[1],i[2],0,i[3],i[4],i[5],0,i[6],i[7],i[8],0,-r[0]*i[0]-r[1]*i[3]-r[2]*i[6],-r[0]*i[1]-r[1]*i[4]-r[2]*i[7],-r[0]*i[2]-r[1]*i[5]-r[2]*i[8],1),this._viewProj=this.projectionMatrix.multiply(this.viewMatrix)},this.setSize=(e,t)=>{this._width=e,this._height=t,this._updateProjectionMatrix()}}get fx(){return this._fx}set fx(e){this._fx!==e&&(this._fx=e,this._updateProjectionMatrix())}get fy(){return this._fy}set fy(e){this._fy!==e&&(this._fy=e,this._updateProjectionMatrix())}get near(){return this._near}set near(e){this._near!==e&&(this._near=e,this._updateProjectionMatrix())}get far(){return this._far}set far(e){this._far!==e&&(this._far=e,this._updateProjectionMatrix())}get width(){return this._width}get height(){return this._height}get projectionMatrix(){return this._projectionMatrix}get viewMatrix(){return this._viewMatrix}get viewProj(){return this._viewProj}}class Rn{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.z=i,this.w=r}equals(e){return!(this.x!==e.x||this.y!==e.y||this.z!==e.z||this.w!==e.w)}add(e){return typeof e=="number"?new Rn(this.x+e,this.y+e,this.z+e,this.w+e):new Rn(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}subtract(e){return typeof e=="number"?new Rn(this.x-e,this.y-e,this.z-e,this.w-e):new Rn(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}multiply(e){return typeof e=="number"?new Rn(this.x*e,this.y*e,this.z*e,this.w*e):e instanceof Rn?new Rn(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w):new Rn(this.x*e.buffer[0]+this.y*e.buffer[4]+this.z*e.buffer[8]+this.w*e.buffer[12],this.x*e.buffer[1]+this.y*e.buffer[5]+this.z*e.buffer[9]+this.w*e.buffer[13],this.x*e.buffer[2]+this.y*e.buffer[6]+this.z*e.buffer[10]+this.w*e.buffer[14],this.x*e.buffer[3]+this.y*e.buffer[7]+this.z*e.buffer[11]+this.w*e.buffer[15])}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lerp(e,t){return new Rn(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t,this.z+(e.z-this.z)*t,this.w+(e.w-this.w)*t)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}distanceTo(e){return Math.sqrt((this.x-e.x)**2+(this.y-e.y)**2+(this.z-e.z)**2+(this.w-e.w)**2)}normalize(){const e=this.magnitude();return new Rn(this.x/e,this.y/e,this.z/e,this.w/e)}flat(){return[this.x,this.y,this.z,this.w]}clone(){return new Rn(this.x,this.y,this.z,this.w)}toString(){return`[${this.flat().join(", ")}]`}}class l8 extends pp{constructor(e=void 0){super(),this._data=e||new YT,this._position=new ze(0,0,-5),this.update=()=>{this.data.update(this.position,this.rotation)},this.screenPointToRay=(t,i)=>{const r=new Rn(t,i,-1,1),s=this._data.projectionMatrix.invert(),a=r.multiply(s),o=this._data.viewMatrix.invert(),l=a.multiply(o);return new ze(l.x/l.w,l.y/l.w,l.z/l.w).subtract(this.position).normalize()}}get data(){return this._data}}class c8 extends WT{constructor(){super(),this._objects=[],this.addObject=e=>{this.objects.push(e),this.dispatchEvent(new s8(e))},this.removeObject=e=>{const t=this.objects.indexOf(e);if(t<0)throw new Error("Object not found in scene");this.objects.splice(t,1),this.dispatchEvent(new a8(e))},this.findObject=e=>{for(const t of this.objects)if(e(t))return t},this.findObjectOfType=e=>{for(const t of this.objects)if(t instanceof e)return t},this.reset=()=>{const e=this.objects.slice();for(const t of e)this.removeObject(t)},this.reset()}getMergedSceneDataBuffer(e="splat"){const t=[];let i=0;for(const a of this.objects)if(a instanceof Ln){const o=a.clone();o.applyRotation(),o.applyScale(),o.applyPosition();const l=o.data.serialize();t.push(l),i+=o.data.vertexCount}const r=new Uint8Array(i*jr.RowLength);let s=0;for(const a of t)r.set(a,s),s+=a.length;return e==="ply"?ql.SplatToPLY(r.buffer,i):r.buffer}saveToFile(e=null,t="splat"){if(!document)return;if(!e){const a=new Date;e=`scene-${a.getFullYear()}-${a.getMonth()+1}-${a.getDate()}.${t}`}const i=this.getMergedSceneDataBuffer(t),r=new Blob([i],{type:"application/octet-stream"}),s=document.createElement("a");s.download=e,s.href=URL.createObjectURL(r),s.click()}get objects(){return this._objects}}async function bv(n,e){const t=await fetch(n,{mode:"cors",credentials:"omit",cache:e?"force-cache":"default"});if(t.status!=200)throw new Error(t.status+" Unable to load "+t.url);return t}async function _v(n,e){const t=n.body.getReader(),i=n.headers.get("content-length"),r=i&&!isNaN(parseInt(i))?parseInt(i):void 0,s=[];let a=0;for(;;){const{done:c,value:h}=await t.read();if(c)break;if(s.push(h),a+=h.length,e&&r){const u=a/r,d=Math.min(u*.95,.95);e(d)}}const o=new Uint8Array(a);let l=0;for(const c of s)o.set(c,l),l+=c.length;return e&&e(1),o}class h8{static async LoadAsync(e,t,i,r=!1){const s=await bv(e,r),a=await _v(s,i);return this.LoadFromArrayBuffer(a.buffer,t)}static async LoadFromFileAsync(e,t,i){const r=new FileReader;let s=new Ln;return r.onload=a=>{s=this.LoadFromArrayBuffer(a.target.result,t)},r.onprogress=a=>{i==null||i(a.loaded/a.total)},r.readAsArrayBuffer(e),await new Promise(a=>{r.onloadend=()=>{a()}}),s}static LoadFromArrayBuffer(e,t){const i=new Uint8Array(e),r=jr.Deserialize(i),s=new Ln(r);return t.addObject(s),s}}class u8{static async LoadAsync(e,t,i,r="",s=!1){const a=await bv(e,s),o=await _v(a,i);if(o[0]!==112||o[1]!==108||o[2]!==121||o[3]!==10)throw new Error("Invalid PLY file");return this.LoadFromArrayBuffer(o.buffer,t,r)}static async LoadFromFileAsync(e,t,i,r=""){const s=new FileReader;let a=new Ln;return s.onload=o=>{a=this.LoadFromArrayBuffer(o.target.result,t,r)},s.onprogress=o=>{i==null||i(o.loaded/o.total)},s.readAsArrayBuffer(e),await new Promise(o=>{s.onloadend=()=>{o()}}),a}static LoadFromArrayBuffer(e,t,i=""){const r=new Uint8Array(this._ParsePLYBuffer(e,i)),s=jr.Deserialize(r),a=new Ln(s);return t.addObject(a),a}static _ParsePLYBuffer(e,t){const i=new Uint8Array(e),r=new TextDecoder().decode(i.slice(0,1024*10)),s=`end_header
`,a=r.indexOf(s);if(a<0)throw new Error("Unable to read .ply file header");const o=parseInt(/element vertex (\d+)\n/.exec(r)[1]);let l=0;const c={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1},h=[];for(const f of r.slice(0,a).split(`
`).filter(m=>m.startsWith("property "))){const[m,p,A]=f.split(" ");if(h.push({name:A,type:p,offset:l}),!c[p])throw new Error(`Unsupported property type: ${p}`);l+=c[p]}const u=new DataView(e,a+s.length),d=new ArrayBuffer(jr.RowLength*o),g=ti.FromEuler(new ze(Math.PI/2,0,0));for(let f=0;f<o;f++){const m=new Float32Array(d,f*jr.RowLength,3),p=new Float32Array(d,f*jr.RowLength+12,3),A=new Uint8ClampedArray(d,f*jr.RowLength+24,4),C=new Uint8ClampedArray(d,f*jr.RowLength+28,4);let v=255,I=0,w=0,b=0;h.forEach(x=>{let y;switch(x.type){case"float":y=u.getFloat32(x.offset+f*l,!0);break;case"int":y=u.getInt32(x.offset+f*l,!0);break;default:throw new Error(`Unsupported property type: ${x.type}`)}switch(x.name){case"x":m[0]=y;break;case"y":m[1]=y;break;case"z":m[2]=y;break;case"scale_0":case"scaling_0":p[0]=Math.exp(y);break;case"scale_1":case"scaling_1":p[1]=Math.exp(y);break;case"scale_2":case"scaling_2":p[2]=Math.exp(y);break;case"red":A[0]=y;break;case"green":A[1]=y;break;case"blue":A[2]=y;break;case"f_dc_0":case"features_0":A[0]=(.5+ql.SH_C0*y)*255;break;case"f_dc_1":case"features_1":A[1]=(.5+ql.SH_C0*y)*255;break;case"f_dc_2":case"features_2":A[2]=(.5+ql.SH_C0*y)*255;break;case"f_dc_3":A[3]=(.5+ql.SH_C0*y)*255;break;case"opacity":case"opacity_0":A[3]=1/(1+Math.exp(-y))*255;break;case"rot_0":case"rotation_0":v=y;break;case"rot_1":case"rotation_1":I=y;break;case"rot_2":case"rotation_2":w=y;break;case"rot_3":case"rotation_3":b=y;break}});let _=new ti(I,w,b,v);switch(t){case"polycam":{const x=m[1];m[1]=-m[2],m[2]=x,_=g.multiply(_);break}case"":break;default:throw new Error(`Unsupported format: ${t}`)}_=_.normalize(),C[0]=_.w*128+128,C[1]=_.x*128+128,C[2]=_.y*128+128,C[3]=_.z*128+128}return d}}class d8{static async LoadAsync(e,t,i,r,s=!1){const a=await bv(e,s),o=await _v(a,r);return this._ParseSplatvBuffer(o.buffer,t,i)}static async LoadFromFileAsync(e,t,i,r){const s=new FileReader;let a=null;if(s.onload=o=>{a=this._ParseSplatvBuffer(o.target.result,t,i)},s.onprogress=o=>{r==null||r(o.loaded/o.total)},s.readAsArrayBuffer(e),await new Promise(o=>{s.onloadend=()=>{o()}}),!a)throw new Error("Failed to load splatv file");return a}static _ParseSplatvBuffer(e,t,i){let r=null;const s=(d,g,f)=>{if(d.type==="magic"){const m=new Int32Array(g.buffer);if(m[0]!==26443)throw new Error("Invalid splatv file");f.push({size:m[1],type:"chunks"})}else if(d.type==="chunks"){const m=JSON.parse(new TextDecoder("utf-8").decode(g));if(m.length==0)throw new Error("Invalid splatv file");m.length>1&&console.warn("Splatv file contains more than one chunk, only the first one will be loaded");const p=m[0],A=p.cameras;if(i&&A&&A.length){const C=A[0],v=new ze(C.position[0],C.position[1],C.position[2]),I=ti.FromMatrix3(new Cn(C.rotation[0][0],C.rotation[0][1],C.rotation[0][2],C.rotation[1][0],C.rotation[1][1],C.rotation[1][2],C.rotation[2][0],C.rotation[2][1],C.rotation[2][2]));i.position=v,i.rotation=I}f.push(p)}else if(d.type==="splat"){const m=JT.Deserialize(g,d.texwidth,d.texheight),p=new ho(m);t.addObject(p),r=p}},a=new Uint8Array(e),o=[{size:8,type:"magic",texwidth:0,texheight:0}];let l=o.shift(),c=new Uint8Array(l.size),h=0,u=0;for(;l;){for(;h<l.size;){const d=Math.min(l.size-h,a.length-u);c.set(a.subarray(u,u+d),h),h+=d,u+=d}if(s(l,c,o),r)return r;l=o.shift(),l&&(c=new Uint8Array(l.size),h=0)}throw new Error("Invalid splatv file")}}const KT="dmFyIGVBID0gZnVuY3Rpb24oQyA9IHt9KSB7CiAgdmFyIHIsIEkgPSBDLCBsID0gaW1wb3J0Lm1ldGEudXJsLCBqID0gIiIsIFU7CiAgewogICAgdHJ5IHsKICAgICAgaiA9IG5ldyBVUkwoIi4iLCBsKS5ocmVmOwogICAgfSBjYXRjaCB7CiAgICB9CiAgICBVID0gKEEpID0+IHsKICAgICAgdmFyIEIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgcmV0dXJuIEIub3BlbigiR0VUIiwgQSwgITEpLCBCLnJlc3BvbnNlVHlwZSA9ICJhcnJheWJ1ZmZlciIsIEIuc2VuZChudWxsKSwgbmV3IFVpbnQ4QXJyYXkoQi5yZXNwb25zZSk7CiAgICB9OwogIH0KICBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLCBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7CiAgdmFyIE0sIHUsIEw7CiAgZnVuY3Rpb24gcSgpIHsKICAgIHZhciBBID0gdS5idWZmZXI7CiAgICBJLkhFQVBVOCA9IEwgPSBuZXcgVWludDhBcnJheShBKSwgSS5IRUFQVTMyID0gbmV3IFVpbnQzMkFycmF5KEEpLCBJLkhFQVBGMzIgPSBuZXcgRmxvYXQzMkFycmF5KEEpLCBuZXcgQmlnSW50NjRBcnJheShBKSwgbmV3IEJpZ1VpbnQ2NEFycmF5KEEpOwogIH0KICBmdW5jdGlvbiBQKCkgewogICAgaWYgKEkucHJlUnVuKQogICAgICBmb3IgKHR5cGVvZiBJLnByZVJ1biA9PSAiZnVuY3Rpb24iICYmIChJLnByZVJ1biA9IFtJLnByZVJ1bl0pOyBJLnByZVJ1bi5sZW5ndGg7ICkKICAgICAgICBDQShJLnByZVJ1bi5zaGlmdCgpKTsKICAgIHgoVCk7CiAgfQogIGZ1bmN0aW9uIGIoKSB7CiAgICB5LmMoKTsKICB9CiAgZnVuY3Rpb24gVygpIHsKICAgIGlmIChJLnBvc3RSdW4pCiAgICAgIGZvciAodHlwZW9mIEkucG9zdFJ1biA9PSAiZnVuY3Rpb24iICYmIChJLnBvc3RSdW4gPSBbSS5wb3N0UnVuXSk7IEkucG9zdFJ1bi5sZW5ndGg7ICkKICAgICAgICBnQShJLnBvc3RSdW4uc2hpZnQoKSk7CiAgICB4KHYpOwogIH0KICB2YXIgcyA9IDAsIGYgPSBudWxsOwogIGZ1bmN0aW9uIF8oQSkgewogICAgcysrLCBJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXM/LihzKTsKICB9CiAgZnVuY3Rpb24geihBKSB7CiAgICBpZiAocy0tLCBJLm1vbml0b3JSdW5EZXBlbmRlbmNpZXM/LihzKSwgcyA9PSAwICYmIGYpIHsKICAgICAgdmFyIEIgPSBmOwogICAgICBmID0gbnVsbCwgQigpOwogICAgfQogIH0KICB2YXIgUzsKICBmdW5jdGlvbiBWKCkgewogICAgcmV0dXJuIEJBKCJBR0Z6YlFFQUFBQUJHUVJnQVg4QmYyQUJmd0JnQ1g5L2YzOS9mMzkvZndCZ0FBQUNCd0VCWVFGaEFBQURCZ1VBQVFBQ0F3VUhBUUdDQW9DQUFnWUlBWDhCUVlDTUJBc0hGUVVCWWdJQUFXTUFCUUZrQUFRQlpRQURBV1lBQWd3QkFRck5PQVZQQVFKL1FZQUlLQUlBSWdFZ0FFRUhha0Y0Y1NJQ2FpRUFBa0FnQWtFQUlBQWdBVTBiUlFSQUlBQS9BRUVRZEUwTkFTQUFFQUFOQVF0QmhBaEJNRFlDQUVGL0R3dEJnQWdnQURZQ0FDQUJDOXdMQVFoL0FrQWdBRVVOQUNBQVFRaHJJZ01nQUVFRWF5Z0NBQ0lDUVhoeElnQnFJUVVDUUNBQ1FRRnhEUUFnQWtFQ2NVVU5BU0FESUFNb0FnQWlCR3NpQTBHWUNDZ0NBRWtOQVNBQUlBUnFJUUFDUUFKQUFrQkJuQWdvQWdBZ0EwY0VRQ0FES0FJTUlRRWdCRUgvQVUwRVFDQUJJQU1vQWdnaUFrY05Ba0dJQ0VHSUNDZ0NBRUYrSUFSQkEzWjNjVFlDQUF3RkN5QURLQUlZSVFjZ0FTQURSd1JBSUFNb0FnZ2lBaUFCTmdJTUlBRWdBallDQ0F3RUN5QURLQUlVSWdJRWZ5QURRUlJxQlNBREtBSVFJZ0pGRFFNZ0EwRVFhZ3NoQkFOQUlBUWhCaUFDSWdGQkZHb2hCQ0FCS0FJVUlnSU5BQ0FCUVJCcUlRUWdBU2dDRUNJQ0RRQUxJQVpCQURZQ0FBd0RDeUFGS0FJRUlnSkJBM0ZCQTBjTkEwR1FDQ0FBTmdJQUlBVWdBa0YrY1RZQ0JDQURJQUJCQVhJMkFnUWdCU0FBTmdJQUR3c2dBaUFCTmdJTUlBRWdBallDQ0F3Q0MwRUFJUUVMSUFkRkRRQUNRQ0FES0FJY0lnUkJBblJCdUFwcUlnSW9BZ0FnQTBZRVFDQUNJQUUyQWdBZ0FRMEJRWXdJUVl3SUtBSUFRWDRnQkhkeE5nSUFEQUlMQWtBZ0F5QUhLQUlRUmdSQUlBY2dBVFlDRUF3QkN5QUhJQUUyQWhRTElBRkZEUUVMSUFFZ0J6WUNHQ0FES0FJUUlnSUVRQ0FCSUFJMkFoQWdBaUFCTmdJWUN5QURLQUlVSWdKRkRRQWdBU0FDTmdJVUlBSWdBVFlDR0FzZ0F5QUZUdzBBSUFVb0FnUWlCRUVCY1VVTkFBSkFBa0FDUUFKQUlBUkJBbkZGQkVCQm9BZ29BZ0FnQlVZRVFFR2dDQ0FETmdJQVFaUUlRWlFJS0FJQUlBQnFJZ0EyQWdBZ0F5QUFRUUZ5TmdJRUlBTkJuQWdvQWdCSERRWkJrQWhCQURZQ0FFR2NDRUVBTmdJQUR3dEJuQWdvQWdBaUJ5QUZSZ1JBUVp3SUlBTTJBZ0JCa0FoQmtBZ29BZ0FnQUdvaUFEWUNBQ0FESUFCQkFYSTJBZ1FnQUNBRGFpQUFOZ0lBRHdzZ0JFRjRjU0FBYWlFQUlBVW9BZ3doQVNBRVFmOEJUUVJBSUFVb0FnZ2lBaUFCUmdSQVFZZ0lRWWdJS0FJQVFYNGdCRUVEZG5keE5nSUFEQVVMSUFJZ0FUWUNEQ0FCSUFJMkFnZ01CQXNnQlNnQ0dDRUlJQUVnQlVjRVFDQUZLQUlJSWdJZ0FUWUNEQ0FCSUFJMkFnZ01Bd3NnQlNnQ0ZDSUNCSDhnQlVFVWFnVWdCU2dDRUNJQ1JRMENJQVZCRUdvTElRUURRQ0FFSVFZZ0FpSUJRUlJxSVFRZ0FTZ0NGQ0lDRFFBZ0FVRVFhaUVFSUFFb0FoQWlBZzBBQ3lBR1FRQTJBZ0FNQWdzZ0JTQUVRWDV4TmdJRUlBTWdBRUVCY2pZQ0JDQUFJQU5xSUFBMkFnQU1Bd3RCQUNFQkN5QUlSUTBBQWtBZ0JTZ0NIQ0lFUVFKMFFiZ0thaUlDS0FJQUlBVkdCRUFnQWlBQk5nSUFJQUVOQVVHTUNFR01DQ2dDQUVGK0lBUjNjVFlDQUF3Q0N3SkFJQVVnQ0NnQ0VFWUVRQ0FJSUFFMkFoQU1BUXNnQ0NBQk5nSVVDeUFCUlEwQkN5QUJJQWcyQWhnZ0JTZ0NFQ0lDQkVBZ0FTQUNOZ0lRSUFJZ0FUWUNHQXNnQlNnQ0ZDSUNSUTBBSUFFZ0FqWUNGQ0FDSUFFMkFoZ0xJQU1nQUVFQmNqWUNCQ0FBSUFOcUlBQTJBZ0FnQXlBSFJ3MEFRWkFJSUFBMkFnQVBDeUFBUWY4QlRRUkFJQUJCZUhGQnNBaHFJUUlDZjBHSUNDZ0NBQ0lFUVFFZ0FFRURkblFpQUhGRkJFQkJpQWdnQUNBRWNqWUNBQ0FDREFFTElBSW9BZ2dMSVFBZ0FpQUROZ0lJSUFBZ0F6WUNEQ0FESUFJMkFnd2dBeUFBTmdJSUR3dEJIeUVCSUFCQi8vLy9CMDBFUUNBQVFTWWdBRUVJZG1jaUFtdDJRUUZ4SUFKQkFYUnJRVDVxSVFFTElBTWdBVFlDSENBRFFnQTNBaEFnQVVFQ2RFRzRDbW9oQkFKL0FrQUNmMEdNQ0NnQ0FDSUdRUUVnQVhRaUFuRkZCRUJCakFnZ0FpQUdjallDQUNBRUlBTTJBZ0JCR0NFQlFRZ01BUXNnQUVFWklBRkJBWFpyUVFBZ0FVRWZSeHQwSVFFZ0JDZ0NBQ0VFQTBBZ0JDSUNLQUlFUVhoeElBQkdEUUlnQVVFZGRpRUVJQUZCQVhRaEFTQUNJQVJCQkhGcUlnWW9BaEFpQkEwQUN5QUdJQU0yQWhCQkdDRUJJQUloQkVFSUN5RUFJQU1pQWd3QkN5QUNLQUlJSWdRZ0F6WUNEQ0FDSUFNMkFnaEJHQ0VBUVFnaEFVRUFDeUVHSUFFZ0Eyb2dCRFlDQUNBRElBSTJBZ3dnQUNBRGFpQUdOZ0lBUWFnSVFhZ0lLQUlBUVFGcklnQkJmeUFBR3pZQ0FBc0wwU2NCQzM4akFFRVFheUlLSkFBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FDQUFRZlFCVFFSQVFZZ0lLQUlBSWdSQkVDQUFRUXRxUWZnRGNTQUFRUXRKR3lJR1FRTjJJZ0IySWdGQkEzRUVRQUpBSUFGQmYzTkJBWEVnQUdvaUFrRURkQ0lCUWJBSWFpSUFJQUZCdUFocUtBSUFJZ0VvQWdnaUJVWUVRRUdJQ0NBRVFYNGdBbmR4TmdJQURBRUxJQVVnQURZQ0RDQUFJQVUyQWdnTElBRkJDR29oQUNBQklBSkJBM1FpQWtFRGNqWUNCQ0FCSUFKcUlnRWdBU2dDQkVFQmNqWUNCQXdMQ3lBR1FaQUlLQUlBSWdoTkRRRWdBUVJBQWtCQkFpQUFkQ0lDUVFBZ0FtdHlJQUVnQUhSeGFDSUJRUU4wSWdCQnNBaHFJZ0lnQUVHNENHb29BZ0FpQUNnQ0NDSUZSZ1JBUVlnSUlBUkJmaUFCZDNFaUJEWUNBQXdCQ3lBRklBSTJBZ3dnQWlBRk5nSUlDeUFBSUFaQkEzSTJBZ1FnQUNBR2FpSUhJQUZCQTNRaUFTQUdheUlGUVFGeU5nSUVJQUFnQVdvZ0JUWUNBQ0FJQkVBZ0NFRjRjVUd3Q0dvaEFVR2NDQ2dDQUNFQ0FuOGdCRUVCSUFoQkEzWjBJZ054UlFSQVFZZ0lJQU1nQkhJMkFnQWdBUXdCQ3lBQktBSUlDeUVESUFFZ0FqWUNDQ0FESUFJMkFnd2dBaUFCTmdJTUlBSWdBellDQ0FzZ0FFRUlhaUVBUVp3SUlBYzJBZ0JCa0FnZ0JUWUNBQXdMQzBHTUNDZ0NBQ0lMUlEwQklBdG9RUUowUWJnS2FpZ0NBQ0lDS0FJRVFYaHhJQVpySVFNZ0FpRUJBMEFDUUNBQktBSVFJZ0JGQkVBZ0FTZ0NGQ0lBUlEwQkN5QUFLQUlFUVhoeElBWnJJZ0VnQXlBQklBTkpJZ0ViSVFNZ0FDQUNJQUViSVFJZ0FDRUJEQUVMQ3lBQ0tBSVlJUWtnQWlBQ0tBSU1JZ0JIQkVBZ0FpZ0NDQ0lCSUFBMkFnd2dBQ0FCTmdJSURBb0xJQUlvQWhRaUFRUi9JQUpCRkdvRklBSW9BaEFpQVVVTkF5QUNRUkJxQ3lFRkEwQWdCU0VISUFFaUFFRVVhaUVGSUFBb0FoUWlBUTBBSUFCQkVHb2hCU0FBS0FJUUlnRU5BQXNnQjBFQU5nSUFEQWtMUVg4aEJpQUFRYjkvU3cwQUlBQkJDMm9pQVVGNGNTRUdRWXdJS0FJQUlnZEZEUUJCSHlFSVFRQWdCbXNoQXlBQVFmVC8vd2ROQkVBZ0JrRW1JQUZCQ0habklnQnJka0VCY1NBQVFRRjBhMEUrYWlFSUN3SkFBa0FDUUNBSVFRSjBRYmdLYWlnQ0FDSUJSUVJBUVFBaEFBd0JDMEVBSVFBZ0JrRVpJQWhCQVhaclFRQWdDRUVmUnh0MElRSURRQUpBSUFFb0FnUkJlSEVnQm1zaUJDQURUdzBBSUFFaEJTQUVJZ01OQUVFQUlRTWdBU0VBREFNTElBQWdBU2dDRkNJRUlBUWdBU0FDUVIxMlFRUnhhaWdDRUNJQlJoc2dBQ0FFR3lFQUlBSkJBWFFoQWlBQkRRQUxDeUFBSUFWeVJRUkFRUUFoQlVFQ0lBaDBJZ0JCQUNBQWEzSWdCM0VpQUVVTkF5QUFhRUVDZEVHNENtb29BZ0FoQUFzZ0FFVU5BUXNEUUNBQUtBSUVRWGh4SUFacklnSWdBMGtoQVNBQ0lBTWdBUnNoQXlBQUlBVWdBUnNoQlNBQUtBSVFJZ0VFZnlBQkJTQUFLQUlVQ3lJQURRQUxDeUFGUlEwQUlBTkJrQWdvQWdBZ0JtdFBEUUFnQlNnQ0dDRUlJQVVnQlNnQ0RDSUFSd1JBSUFVb0FnZ2lBU0FBTmdJTUlBQWdBVFlDQ0F3SUN5QUZLQUlVSWdFRWZ5QUZRUlJxQlNBRktBSVFJZ0ZGRFFNZ0JVRVFhZ3NoQWdOQUlBSWhCQ0FCSWdCQkZHb2hBaUFBS0FJVUlnRU5BQ0FBUVJCcUlRSWdBQ2dDRUNJQkRRQUxJQVJCQURZQ0FBd0hDeUFHUVpBSUtBSUFJZ1ZOQkVCQm5BZ29BZ0FoQUFKQUlBVWdCbXNpQVVFUVR3UkFJQUFnQm1vaUFpQUJRUUZ5TmdJRUlBQWdCV29nQVRZQ0FDQUFJQVpCQTNJMkFnUU1BUXNnQUNBRlFRTnlOZ0lFSUFBZ0JXb2lBU0FCS0FJRVFRRnlOZ0lFUVFBaEFrRUFJUUVMUVpBSUlBRTJBZ0JCbkFnZ0FqWUNBQ0FBUVFocUlRQU1DUXNnQmtHVUNDZ0NBQ0lDU1FSQVFaUUlJQUlnQm1zaUFUWUNBRUdnQ0VHZ0NDZ0NBQ0lBSUFacUlnSTJBZ0FnQWlBQlFRRnlOZ0lFSUFBZ0JrRURjallDQkNBQVFRaHFJUUFNQ1F0QkFDRUFJQVpCTDJvaUF3Si9RZUFMS0FJQUJFQkI2QXNvQWdBTUFRdEI3QXRDZnpjQ0FFSGtDMEtBb0lDQWdJQUVOd0lBUWVBTElBcEJER3BCY0hGQjJLclZxZ1Z6TmdJQVFmUUxRUUEyQWdCQnhBdEJBRFlDQUVHQUlBc2lBV29pQkVFQUlBRnJJZ2R4SWdFZ0JrME5DRUhBQ3lnQ0FDSUZCRUJCdUFzb0FnQWlDQ0FCYWlJSklBaE5JQVVnQ1VseURRa0xBa0JCeEFzdEFBQkJCSEZGQkVBQ1FBSkFBa0FDUUVHZ0NDZ0NBQ0lGQkVCQnlBc2hBQU5BSUFBb0FnQWlDQ0FGVFFSQUlBVWdDQ0FBS0FJRWFra05Bd3NnQUNnQ0NDSUFEUUFMQzBFQUVBRWlBa0YvUmcwRElBRWhCRUhrQ3lnQ0FDSUFRUUZySWdVZ0FuRUVRQ0FCSUFKcklBSWdCV3BCQUNBQWEzRnFJUVFMSUFRZ0JrME5BMEhBQ3lnQ0FDSUFCRUJCdUFzb0FnQWlCU0FFYWlJSElBVk5JQUFnQjBseURRUUxJQVFRQVNJQUlBSkhEUUVNQlFzZ0JDQUNheUFIY1NJRUVBRWlBaUFBS0FJQUlBQW9BZ1JxUmcwQklBSWhBQXNnQUVGL1JnMEJJQVpCTUdvZ0JFMEVRQ0FBSVFJTUJBdEI2QXNvQWdBaUFpQURJQVJyYWtFQUlBSnJjU0lDRUFGQmYwWU5BU0FDSUFScUlRUWdBQ0VDREFNTElBSkJmMGNOQWd0QnhBdEJ4QXNvQWdCQkJISTJBZ0FMSUFFUUFTSUNRWDlHUVFBUUFTSUFRWDlHY2lBQUlBSk5jZzBGSUFBZ0Ftc2lCQ0FHUVNocVRRMEZDMEc0QzBHNEN5Z0NBQ0FFYWlJQU5nSUFRYndMS0FJQUlBQkpCRUJCdkFzZ0FEWUNBQXNDUUVHZ0NDZ0NBQ0lEQkVCQnlBc2hBQU5BSUFJZ0FDZ0NBQ0lCSUFBb0FnUWlCV3BHRFFJZ0FDZ0NDQ0lBRFFBTERBUUxRWmdJS0FJQUlnQkJBQ0FBSUFKTkcwVUVRRUdZQ0NBQ05nSUFDMEVBSVFCQnpBc2dCRFlDQUVISUN5QUNOZ0lBUWFnSVFYODJBZ0JCckFoQjRBc29BZ0EyQWdCQjFBdEJBRFlDQUFOQUlBQkJBM1FpQVVHNENHb2dBVUd3Q0dvaUJUWUNBQ0FCUWJ3SWFpQUZOZ0lBSUFCQkFXb2lBRUVnUncwQUMwR1VDQ0FFUVNocklnQkJlQ0FDYTBFSGNTSUJheUlGTmdJQVFhQUlJQUVnQW1vaUFUWUNBQ0FCSUFWQkFYSTJBZ1FnQUNBQ2FrRW9OZ0lFUWFRSVFmQUxLQUlBTmdJQURBUUxJQUlnQTAwZ0FTQURTM0lOQWlBQUtBSU1RUWh4RFFJZ0FDQUVJQVZxTmdJRVFhQUlJQU5CZUNBRGEwRUhjU0lBYWlJQk5nSUFRWlFJUVpRSUtBSUFJQVJxSWdJZ0FHc2lBRFlDQUNBQklBQkJBWEkyQWdRZ0FpQURha0VvTmdJRVFhUUlRZkFMS0FJQU5nSUFEQU1MUVFBaEFBd0dDMEVBSVFBTUJBdEJtQWdvQWdBZ0Frc0VRRUdZQ0NBQ05nSUFDeUFDSUFScUlRVkJ5QXNoQUFKQUEwQWdCU0FBS0FJQUlnRkhCRUFnQUNnQ0NDSUFEUUVNQWdzTElBQXRBQXhCQ0hGRkRRTUxRY2dMSVFBRFFBSkFJQUFvQWdBaUFTQURUUVJBSUFNZ0FTQUFLQUlFYWlJRlNRMEJDeUFBS0FJSUlRQU1BUXNMUVpRSUlBUkJLR3NpQUVGNElBSnJRUWR4SWdGcklnYzJBZ0JCb0FnZ0FTQUNhaUlCTmdJQUlBRWdCMEVCY2pZQ0JDQUFJQUpxUVNnMkFnUkJwQWhCOEFzb0FnQTJBZ0FnQXlBRlFTY2dCV3RCQjNGcVFTOXJJZ0FnQUNBRFFSQnFTUnNpQVVFYk5nSUVJQUZCMEFzcEFnQTNBaEFnQVVISUN5a0NBRGNDQ0VIUUN5QUJRUWhxTmdJQVFjd0xJQVEyQWdCQnlBc2dBallDQUVIVUMwRUFOZ0lBSUFGQkdHb2hBQU5BSUFCQkJ6WUNCQ0FBUVFocUlBQkJCR29oQUNBRlNRMEFDeUFCSUFOR0RRQWdBU0FCS0FJRVFYNXhOZ0lFSUFNZ0FTQURheUlDUVFGeU5nSUVJQUVnQWpZQ0FBSi9JQUpCL3dGTkJFQWdBa0Y0Y1VHd0NHb2hBQUovUVlnSUtBSUFJZ0ZCQVNBQ1FRTjJkQ0lDY1VVRVFFR0lDQ0FCSUFKeU5nSUFJQUFNQVFzZ0FDZ0NDQXNoQVNBQUlBTTJBZ2dnQVNBRE5nSU1RUXdoQWtFSURBRUxRUjhoQUNBQ1FmLy8vd2ROQkVBZ0FrRW1JQUpCQ0habklnQnJka0VCY1NBQVFRRjBhMEUrYWlFQUN5QURJQUEyQWh3Z0EwSUFOd0lRSUFCQkFuUkJ1QXBxSVFFQ1FBSkFRWXdJS0FJQUlnVkJBU0FBZENJRWNVVUVRRUdNQ0NBRUlBVnlOZ0lBSUFFZ0F6WUNBQXdCQ3lBQ1FSa2dBRUVCZG10QkFDQUFRUjlIRzNRaEFDQUJLQUlBSVFVRFFDQUZJZ0VvQWdSQmVIRWdBa1lOQWlBQVFSMTJJUVVnQUVFQmRDRUFJQUVnQlVFRWNXb2lCQ2dDRUNJRkRRQUxJQVFnQXpZQ0VBc2dBeUFCTmdJWVFRZ2hBaUFESWdFaEFFRU1EQUVMSUFFb0FnZ2lBQ0FETmdJTUlBRWdBellDQ0NBRElBQTJBZ2hCQUNFQVFSZ2hBa0VNQ3lBRGFpQUJOZ0lBSUFJZ0Eyb2dBRFlDQUF0QmxBZ29BZ0FpQUNBR1RRMEFRWlFJSUFBZ0Jtc2lBVFlDQUVHZ0NFR2dDQ2dDQUNJQUlBWnFJZ0kyQWdBZ0FpQUJRUUZ5TmdJRUlBQWdCa0VEY2pZQ0JDQUFRUWhxSVFBTUJBdEJoQWhCTURZQ0FFRUFJUUFNQXdzZ0FDQUNOZ0lBSUFBZ0FDZ0NCQ0FFYWpZQ0JDQUNRWGdnQW10QkIzRnFJZ2dnQmtFRGNqWUNCQ0FCUVhnZ0FXdEJCM0ZxSWdRZ0JpQUlhaUlEYXlFSEFrQkJvQWdvQWdBZ0JFWUVRRUdnQ0NBRE5nSUFRWlFJUVpRSUtBSUFJQWRxSWdBMkFnQWdBeUFBUVFGeU5nSUVEQUVMUVp3SUtBSUFJQVJHQkVCQm5BZ2dBellDQUVHUUNFR1FDQ2dDQUNBSGFpSUFOZ0lBSUFNZ0FFRUJjallDQkNBQUlBTnFJQUEyQWdBTUFRc2dCQ2dDQkNJQVFRTnhRUUZHQkVBZ0FFRjRjU0VKSUFRb0Fnd2hBZ0pBSUFCQi93Rk5CRUFnQkNnQ0NDSUJJQUpHQkVCQmlBaEJpQWdvQWdCQmZpQUFRUU4yZDNFMkFnQU1BZ3NnQVNBQ05nSU1JQUlnQVRZQ0NBd0JDeUFFS0FJWUlRWUNRQ0FDSUFSSEJFQWdCQ2dDQ0NJQUlBSTJBZ3dnQWlBQU5nSUlEQUVMQWtBZ0JDZ0NGQ0lBQkg4Z0JFRVVhZ1VnQkNnQ0VDSUFSUTBCSUFSQkVHb0xJUUVEUUNBQklRVWdBQ0lDUVJScUlRRWdBQ2dDRkNJQURRQWdBa0VRYWlFQklBSW9BaEFpQUEwQUN5QUZRUUEyQWdBTUFRdEJBQ0VDQ3lBR1JRMEFBa0FnQkNnQ0hDSUFRUUowUWJnS2FpSUJLQUlBSUFSR0JFQWdBU0FDTmdJQUlBSU5BVUdNQ0VHTUNDZ0NBRUYrSUFCM2NUWUNBQXdDQ3dKQUlBUWdCaWdDRUVZRVFDQUdJQUkyQWhBTUFRc2dCaUFDTmdJVUN5QUNSUTBCQ3lBQ0lBWTJBaGdnQkNnQ0VDSUFCRUFnQWlBQU5nSVFJQUFnQWpZQ0dBc2dCQ2dDRkNJQVJRMEFJQUlnQURZQ0ZDQUFJQUkyQWhnTElBY2dDV29oQnlBRUlBbHFJZ1FvQWdRaEFBc2dCQ0FBUVg1eE5nSUVJQU1nQjBFQmNqWUNCQ0FESUFkcUlBYzJBZ0FnQjBIL0FVMEVRQ0FIUVhoeFFiQUlhaUVBQW45QmlBZ29BZ0FpQVVFQklBZEJBM1owSWdKeFJRUkFRWWdJSUFFZ0FuSTJBZ0FnQUF3QkN5QUFLQUlJQ3lFQklBQWdBellDQ0NBQklBTTJBZ3dnQXlBQU5nSU1JQU1nQVRZQ0NBd0JDMEVmSVFJZ0IwSC8vLzhIVFFSQUlBZEJKaUFIUVFoMlp5SUFhM1pCQVhFZ0FFRUJkR3RCUG1vaEFnc2dBeUFDTmdJY0lBTkNBRGNDRUNBQ1FRSjBRYmdLYWlFQUFrQUNRRUdNQ0NnQ0FDSUJRUUVnQW5RaUJYRkZCRUJCakFnZ0FTQUZjallDQUNBQUlBTTJBZ0FNQVFzZ0IwRVpJQUpCQVhaclFRQWdBa0VmUnh0MElRSWdBQ2dDQUNFQkEwQWdBU0lBS0FJRVFYaHhJQWRHRFFJZ0FrRWRkaUVCSUFKQkFYUWhBaUFBSUFGQkJIRnFJZ1VvQWhBaUFRMEFDeUFGSUFNMkFoQUxJQU1nQURZQ0dDQURJQU0yQWd3Z0F5QUROZ0lJREFFTElBQW9BZ2dpQVNBRE5nSU1JQUFnQXpZQ0NDQURRUUEyQWhnZ0F5QUFOZ0lNSUFNZ0FUWUNDQXNnQ0VFSWFpRUFEQUlMQWtBZ0NFVU5BQUpBSUFVb0Fod2lBVUVDZEVHNENtb2lBaWdDQUNBRlJnUkFJQUlnQURZQ0FDQUFEUUZCakFnZ0IwRitJQUYzY1NJSE5nSUFEQUlMQWtBZ0JTQUlLQUlRUmdSQUlBZ2dBRFlDRUF3QkN5QUlJQUEyQWhRTElBQkZEUUVMSUFBZ0NEWUNHQ0FGS0FJUUlnRUVRQ0FBSUFFMkFoQWdBU0FBTmdJWUN5QUZLQUlVSWdGRkRRQWdBQ0FCTmdJVUlBRWdBRFlDR0FzQ1FDQURRUTlOQkVBZ0JTQURJQVpxSWdCQkEzSTJBZ1FnQUNBRmFpSUFJQUFvQWdSQkFYSTJBZ1FNQVFzZ0JTQUdRUU55TmdJRUlBVWdCbW9pQkNBRFFRRnlOZ0lFSUFNZ0JHb2dBellDQUNBRFFmOEJUUVJBSUFOQmVIRkJzQWhxSVFBQ2YwR0lDQ2dDQUNJQlFRRWdBMEVEZG5RaUFuRkZCRUJCaUFnZ0FTQUNjallDQUNBQURBRUxJQUFvQWdnTElRRWdBQ0FFTmdJSUlBRWdCRFlDRENBRUlBQTJBZ3dnQkNBQk5nSUlEQUVMUVI4aEFDQURRZi8vL3dkTkJFQWdBMEVtSUFOQkNIWm5JZ0JyZGtFQmNTQUFRUUYwYTBFK2FpRUFDeUFFSUFBMkFod2dCRUlBTndJUUlBQkJBblJCdUFwcUlRRUNRQUpBSUFkQkFTQUFkQ0lDY1VVRVFFR01DQ0FDSUFkeU5nSUFJQUVnQkRZQ0FDQUVJQUUyQWhnTUFRc2dBMEVaSUFCQkFYWnJRUUFnQUVFZlJ4dDBJUUFnQVNnQ0FDRUJBMEFnQVNJQ0tBSUVRWGh4SUFOR0RRSWdBRUVkZGlFQklBQkJBWFFoQUNBQ0lBRkJCSEZxSWdjb0FoQWlBUTBBQ3lBSElBUTJBaEFnQkNBQ05nSVlDeUFFSUFRMkFnd2dCQ0FFTmdJSURBRUxJQUlvQWdnaUFDQUVOZ0lNSUFJZ0JEWUNDQ0FFUVFBMkFoZ2dCQ0FDTmdJTUlBUWdBRFlDQ0FzZ0JVRUlhaUVBREFFTEFrQWdDVVVOQUFKQUlBSW9BaHdpQVVFQ2RFRzRDbW9pQlNnQ0FDQUNSZ1JBSUFVZ0FEWUNBQ0FBRFFGQmpBZ2dDMEYrSUFGM2NUWUNBQXdDQ3dKQUlBSWdDU2dDRUVZRVFDQUpJQUEyQWhBTUFRc2dDU0FBTmdJVUN5QUFSUTBCQ3lBQUlBazJBaGdnQWlnQ0VDSUJCRUFnQUNBQk5nSVFJQUVnQURZQ0dBc2dBaWdDRkNJQlJRMEFJQUFnQVRZQ0ZDQUJJQUEyQWhnTEFrQWdBMEVQVFFSQUlBSWdBeUFHYWlJQVFRTnlOZ0lFSUFBZ0Ftb2lBQ0FBS0FJRVFRRnlOZ0lFREFFTElBSWdCa0VEY2pZQ0JDQUNJQVpxSWdVZ0EwRUJjallDQkNBRElBVnFJQU0yQWdBZ0NBUkFJQWhCZUhGQnNBaHFJUUJCbkFnb0FnQWhBUUovUVFFZ0NFRURkblFpQnlBRWNVVUVRRUdJQ0NBRUlBZHlOZ0lBSUFBTUFRc2dBQ2dDQ0FzaEJDQUFJQUUyQWdnZ0JDQUJOZ0lNSUFFZ0FEWUNEQ0FCSUFRMkFnZ0xRWndJSUFVMkFnQkJrQWdnQXpZQ0FBc2dBa0VJYWlFQUN5QUtRUkJxSkFBZ0FBdkdCQUlHZndwOVFmLy8vLzhISVF4QmdJQ0FnSGdoRFVGL0lRa0RRQ0FESUFwR0JFQkJBQ0VBSUFoQkFFR0FnQkQ4Q3dCREFQOS9SeUFOSUF4cnNwVWhEd1VnQkNBS1FReHNhaUlMS2dJQUlSTWdDeW9DQ0NFVUlBc3FBZ1FoRlNBSklBSWdDa0VDZENJT2FpZ0NBQ0lMUndSQUlBRWdDMEhRQUd4cUlna3FBandnQUNvQ09DSVBsQ0FKS2dJNElBQXFBaWdpRUpRZ0NTb0NNQ0FBS2dJSUloR1VJQUFxQWhnaUVpQUpLZ0kwbEpLU2tpRVdJQWtxQWl3Z0Q1UWdDU29DS0NBUWxDQUpLZ0lnSUJHVUlCSWdDU29DSkpTU2twSWhGeUFKS2dJY0lBK1VJQWtxQWhnZ0VKUWdDU29DRUNBUmxDQVNJQWtxQWhTVWtwS1NJUmdnQ1NvQ0RDQVBsQ0FKS2dJSUlCQ1VJQWtxQWdBZ0VaUWdDU29DQkNBU2xKS1NraUVQSUFzaENRc2dCU0FPYWlBV0lCY2dGSlFnRHlBVGxDQVZJQmlVa3BLU1F3QUFnRVdVL0FBaUN6WUNBQ0FNSUFzZ0N5QU1TaHNoRENBTklBc2dDeUFOU0JzaERTQUtRUUZxSVFvTUFRc0xBMEFnQUNBRFJrVUVRQ0FGSUFCQkFuUnFJZ0VnRHlBQktBSUFJQXhyczVUOEFTSUJOZ0lBSUFnZ0FVRUNkR29pQVNBQktBSUFRUUZxTmdJQUlBQkJBV29oQUF3QkN3dEJBQ0VBSUFkQkFEWUNBQ0FJUVFScklRRkJBQ0VNUVFFaENnTkFJQXBCZ0lBRVJnUkFBMEFDUUNBQUlBTkdEUUFnQnlBRklBQkJBblJxS0FJQVFRSjBhaUlCSUFFb0FnQWlBVUVCYWpZQ0FDQUdJQUZCQW5ScUlBQTJBZ0FnQUVFQmFpRUFEQUVMQ3dVZ0J5QUtRUUowSWdKcUlBRWdBbW9vQWdBZ0RHb2lERFlDQUNBS1FRRnFJUW9NQVFzTEN3SUFDd3NKQVFCQmdRZ0xBZ1lCIik7CiAgfQogIGZ1bmN0aW9uIE8oQSkgewogICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhBKSkKICAgICAgcmV0dXJuIEE7CiAgICBpZiAoQSA9PSBTICYmIE0pCiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShNKTsKICAgIGlmIChVKQogICAgICByZXR1cm4gVShBKTsKICAgIHRocm93ICdzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZDogeW91IGNhbiBwcmVsb2FkIGl0IHRvIE1vZHVsZVsid2FzbUJpbmFyeSJdIG1hbnVhbGx5LCBvciBlbWNjLnB5IHdpbGwgZG8gdGhhdCBmb3IgeW91IHdoZW4gZ2VuZXJhdGluZyBIVE1MIChidXQgbm90IEpTKSc7CiAgfQogIGZ1bmN0aW9uICQoQSwgQikgewogICAgdmFyIHQsIEUgPSBPKEEpOwogICAgdCA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoRSk7CiAgICB2YXIgaSA9IG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZSh0LCBCKTsKICAgIHJldHVybiBbaSwgdF07CiAgfQogIGZ1bmN0aW9uIEFBKCkgewogICAgcmV0dXJuIHsgYTogbkEgfTsKICB9CiAgZnVuY3Rpb24gSUEoKSB7CiAgICBmdW5jdGlvbiBBKEUsIGkpIHsKICAgICAgcmV0dXJuIHkgPSBFLmV4cG9ydHMsIHUgPSB5LmIsIHEoKSwgckEoeSksIHooKSwgeTsKICAgIH0KICAgIF8oKTsKICAgIHZhciBCID0gQUEoKTsKICAgIGlmIChJLmluc3RhbnRpYXRlV2FzbSkKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChFLCBpKSA9PiB7CiAgICAgICAgSS5pbnN0YW50aWF0ZVdhc20oQiwgKG8sIGgpID0+IHsKICAgICAgICAgIEUoQShvKSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgUyA/Pz0gVigpOwogICAgdmFyIHQgPSAkKFMsIEIpOwogICAgcmV0dXJuIEEodFswXSk7CiAgfQogIGZvciAodmFyIHggPSAoQSkgPT4gewogICAgZm9yICg7IEEubGVuZ3RoID4gMDsgKQogICAgICBBLnNoaWZ0KCkoSSk7CiAgfSwgdiA9IFtdLCBnQSA9IChBKSA9PiB2LnB1c2goQSksIFQgPSBbXSwgQ0EgPSAoQSkgPT4gVC5wdXNoKEEpLCBCQSA9IChBKSA9PiB7CiAgICBmb3IgKHZhciBCLCB0LCBFID0gMCwgaSA9IDAsIG8gPSBBLmxlbmd0aCwgaCA9IG5ldyBVaW50OEFycmF5KChvICogMyA+PiAyKSAtIChBW28gLSAyXSA9PSAiPSIpIC0gKEFbbyAtIDFdID09ICI9IikpOyBFIDwgbzsgRSArPSA0LCBpICs9IDMpCiAgICAgIEIgPSBuW0EuY2hhckNvZGVBdChFICsgMSldLCB0ID0gbltBLmNoYXJDb2RlQXQoRSArIDIpXSwgaFtpXSA9IG5bQS5jaGFyQ29kZUF0KEUpXSA8PCAyIHwgQiA+PiA0LCBoW2kgKyAxXSA9IEIgPDwgNCB8IHQgPj4gMiwgaFtpICsgMl0gPSB0IDw8IDYgfCBuW0EuY2hhckNvZGVBdChFICsgMyldOwogICAgcmV0dXJuIGg7CiAgfSwgUUEgPSAoKSA9PiAyMTQ3NDgzNjQ4LCBFQSA9IChBLCBCKSA9PiBNYXRoLmNlaWwoQSAvIEIpICogQiwgdEEgPSAoQSkgPT4gewogICAgdmFyIEIgPSB1LmJ1ZmZlciwgdCA9IChBIC0gQi5ieXRlTGVuZ3RoICsgNjU1MzUpIC8gNjU1MzYgfCAwOwogICAgdHJ5IHsKICAgICAgcmV0dXJuIHUuZ3Jvdyh0KSwgcSgpLCAxOwogICAgfSBjYXRjaCB7CiAgICB9CiAgfSwgaUEgPSAoQSkgPT4gewogICAgdmFyIEIgPSBMLmxlbmd0aDsKICAgIEEgPj4+PSAwOwogICAgdmFyIHQgPSBRQSgpOwogICAgaWYgKEEgPiB0KQogICAgICByZXR1cm4gITE7CiAgICBmb3IgKHZhciBFID0gMTsgRSA8PSA0OyBFICo9IDIpIHsKICAgICAgdmFyIGkgPSBCICogKDEgKyAwLjIgLyBFKTsKICAgICAgaSA9IE1hdGgubWluKGksIEEgKyAxMDA2NjMyOTYpOwogICAgICB2YXIgbyA9IE1hdGgubWluKHQsIEVBKE1hdGgubWF4KEEsIGkpLCA2NTUzNikpLCBoID0gdEEobyk7CiAgICAgIGlmIChoKQogICAgICAgIHJldHVybiAhMDsKICAgIH0KICAgIHJldHVybiAhMTsKICB9LCBuID0gbmV3IFVpbnQ4QXJyYXkoMTIzKSwgZSA9IDI1OyBlID49IDA7IC0tZSkKICAgIG5bNDggKyBlXSA9IDUyICsgZSwgbls2NSArIGVdID0gZSwgbls5NyArIGVdID0gMjYgKyBlOwogIG5bNDNdID0gNjIsIG5bNDddID0gNjMsIEkubm9FeGl0UnVudGltZSAmJiBJLm5vRXhpdFJ1bnRpbWUsIEkucHJpbnQgJiYgSS5wcmludCwgSS5wcmludEVyciAmJiBJLnByaW50RXJyLCBJLndhc21CaW5hcnkgJiYgKE0gPSBJLndhc21CaW5hcnkpLCBJLmFyZ3VtZW50cyAmJiBJLmFyZ3VtZW50cywgSS50aGlzUHJvZ3JhbSAmJiBJLnRoaXNQcm9ncmFtOwogIGZ1bmN0aW9uIHJBKEEpIHsKICAgIEkuX3NvcnQgPSBBLmQsIEkuX21hbGxvYyA9IEEuZSwgSS5fZnJlZSA9IEEuZjsKICB9CiAgdmFyIG5BID0geyBhOiBpQSB9LCB5ID0gSUEoKTsKICBmdW5jdGlvbiBtKCkgewogICAgaWYgKHMgPiAwKSB7CiAgICAgIGYgPSBtOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoUCgpLCBzID4gMCkgewogICAgICBmID0gbTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZnVuY3Rpb24gQSgpIHsKICAgICAgSS5jYWxsZWRSdW4gPSAhMCwgYigpLCBJLm9uUnVudGltZUluaXRpYWxpemVkPy4oKSwgVygpOwogICAgfQogICAgSS5zZXRTdGF0dXMgPyAoSS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSwgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gSS5zZXRTdGF0dXMoIiIpLCAxKSwgQSgpOwogICAgfSwgMSkpIDogQSgpOwogIH0KICBmdW5jdGlvbiBhQSgpIHsKICAgIGlmIChJLnByZUluaXQpCiAgICAgIGZvciAodHlwZW9mIEkucHJlSW5pdCA9PSAiZnVuY3Rpb24iICYmIChJLnByZUluaXQgPSBbSS5wcmVJbml0XSk7IEkucHJlSW5pdC5sZW5ndGggPiAwOyApCiAgICAgICAgSS5wcmVJbml0LnNoaWZ0KCkoKTsKICB9CiAgcmV0dXJuIGFBKCksIG0oKSwgciA9IEksIHI7Cn07CmxldCBnLCBRLCBkLCBjLCBOLCB3LCBwLCBSLCBrLCBKLCBhID0gMCwgWSA9IDAsIEggPSBbXSwgRyA9ICEwLCBEID0gITEsIEYgPSAhMSwgSyA9ICExOwphc3luYyBmdW5jdGlvbiBvQSgpIHsKICBpZiAoIWcgJiYgKGcgPSBhd2FpdCBlQSgpLCAhZyB8fCAhZy5IRUFQRjMyIHx8ICFnLl9zb3J0KSkKICAgIHRocm93IG5ldyBFcnJvcigiV0FTTSBtb2R1bGUgZmFpbGVkIHRvIGluaXRpYWxpemUgcHJvcGVybHkiKTsKfQpjb25zdCBaID0gYXN5bmMgKCkgPT4gewogIGlmIChEKSB7CiAgICBGID0gITA7CiAgICByZXR1cm47CiAgfQogIEQgPSAhMCwgRiA9ICExLCBnIHx8IGF3YWl0IG9BKCk7CiAgY29uc3QgQyA9IE1hdGgucG93KDIsIE1hdGguY2VpbChNYXRoLmxvZzIoUS52ZXJ0ZXhDb3VudCkpKTsKICBhIDwgQyAmJiAoYSA+IDAgJiYgKGcuX2ZyZWUoZCksIGcuX2ZyZWUoTiksIGcuX2ZyZWUodyksIGcuX2ZyZWUocCksIGcuX2ZyZWUoUiksIGcuX2ZyZWUoayksIGcuX2ZyZWUoSikpLCBhID0gQywgZCA9IGcuX21hbGxvYygxNiAqIDQpLCBOID0gZy5fbWFsbG9jKGEgKiA0KSwgdyA9IGcuX21hbGxvYygzICogYSAqIDQpLCBwID0gZy5fbWFsbG9jKGEgKiA0KSwgUiA9IGcuX21hbGxvYyhhICogNCksIGsgPSBnLl9tYWxsb2MoYSAqIDQpLCBKID0gZy5fbWFsbG9jKGEgKiA0KSksIFkgPCBRLnRyYW5zZm9ybXMubGVuZ3RoICYmIChZID4gMCAmJiBnLl9mcmVlKGMpLCBZID0gUS50cmFuc2Zvcm1zLmxlbmd0aCwgYyA9IGcuX21hbGxvYyhZICogNCkpLCBEID0gITEsIEYgJiYgKEYgPSAhMSwgYXdhaXQgWigpKTsKfSwgc0EgPSAoKSA9PiB7CiAgaWYgKCEoRCB8fCBGIHx8ICFnIHx8ICFRKSkgewogICAgRCA9ICEwOwogICAgdHJ5IHsKICAgICAgY29uc3QgQyA9IGcuSEVBUEYzMiwgciA9IGcuSEVBUFUzMjsKICAgICAgaWYgKHcgLyA0ICsgUS5wb3NpdGlvbnMubGVuZ3RoID4gQy5sZW5ndGgpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJQb3NpdGlvbnMgYnVmZmVyIG92ZXJmbG93Iik7CiAgICAgIGlmIChjIC8gNCArIFEudHJhbnNmb3Jtcy5sZW5ndGggPiBDLmxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRyYW5zZm9ybXMgYnVmZmVyIG92ZXJmbG93Iik7CiAgICAgIGlmIChOIC8gNCArIFEudHJhbnNmb3JtSW5kaWNlcy5sZW5ndGggPiByLmxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRyYW5zZm9ybSBpbmRpY2VzIGJ1ZmZlciBvdmVyZmxvdyIpOwogICAgICBpZiAoQy5zZXQoUS5wb3NpdGlvbnMsIHcgLyA0KSwgQy5zZXQoUS50cmFuc2Zvcm1zLCBjIC8gNCksIHIuc2V0KFEudHJhbnNmb3JtSW5kaWNlcywgTiAvIDQpLCBDLnNldChuZXcgRmxvYXQzMkFycmF5KEgpLCBkIC8gNCksIGcuX3NvcnQoCiAgICAgICAgZCwKICAgICAgICBjLAogICAgICAgIE4sCiAgICAgICAgUS52ZXJ0ZXhDb3VudCwKICAgICAgICB3LAogICAgICAgIHAsCiAgICAgICAgUiwKICAgICAgICBrLAogICAgICAgIEoKICAgICAgKSwgUiArIFEudmVydGV4Q291bnQgKiA0ID4gci5idWZmZXIuYnl0ZUxlbmd0aCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkRlcHRoIGluZGV4IGJ1ZmZlciBvdmVyZmxvdyIpOwogICAgICBjb25zdCBJID0gbmV3IFVpbnQzMkFycmF5KHIuYnVmZmVyLCBSLCBRLnZlcnRleENvdW50KSwgbCA9IG5ldyBVaW50MzJBcnJheShJLnNsaWNlKCkuYnVmZmVyKTsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IGRlcHRoSW5kZXg6IGwgfSwgW2wuYnVmZmVyXSk7CiAgICB9IGNhdGNoIHsKICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7IGRlcHRoSW5kZXg6IG5ldyBVaW50MzJBcnJheSgwKSB9LCBbXSk7CiAgICB9CiAgICBEID0gITEsIEcgPSAhMTsKICB9Cn0sIFggPSAoKSA9PiB7CiAgSyB8fCAoSyA9ICEwLCBHICYmIHNBKCksIHNldFRpbWVvdXQoKCkgPT4gewogICAgSyA9ICExLCBYKCk7CiAgfSkpOwp9OwpzZWxmLm9ubWVzc2FnZSA9IChDKSA9PiB7CiAgQy5kYXRhLnNvcnREYXRhICYmIChRID8gKFEucG9zaXRpb25zLnNldChDLmRhdGEuc29ydERhdGEucG9zaXRpb25zKSwgUS50cmFuc2Zvcm1zLnNldChDLmRhdGEuc29ydERhdGEudHJhbnNmb3JtcyksIFEudHJhbnNmb3JtSW5kaWNlcy5zZXQoQy5kYXRhLnNvcnREYXRhLnRyYW5zZm9ybUluZGljZXMpLCBRLnZlcnRleENvdW50ID0gQy5kYXRhLnNvcnREYXRhLnZlcnRleENvdW50KSA6IFEgPSB7CiAgICBwb3NpdGlvbnM6IG5ldyBGbG9hdDMyQXJyYXkoQy5kYXRhLnNvcnREYXRhLnBvc2l0aW9ucyksCiAgICB0cmFuc2Zvcm1zOiBuZXcgRmxvYXQzMkFycmF5KEMuZGF0YS5zb3J0RGF0YS50cmFuc2Zvcm1zKSwKICAgIHRyYW5zZm9ybUluZGljZXM6IG5ldyBVaW50MzJBcnJheShDLmRhdGEuc29ydERhdGEudHJhbnNmb3JtSW5kaWNlcyksCiAgICB2ZXJ0ZXhDb3VudDogQy5kYXRhLnNvcnREYXRhLnZlcnRleENvdW50CiAgfSwgRyA9ICEwLCBaKCkpLCBDLmRhdGEudmlld1Byb2ogJiYgKEMuZGF0YS52aWV3UHJvai5ldmVyeSgocikgPT4gSC5pbmNsdWRlcyhyKSkgPT09ICExICYmIChIID0gQy5kYXRhLnZpZXdQcm9qLCBHID0gITApLCBYKCkpOwp9OwovLyMgc291cmNlTWFwcGluZ1VSTD1Tb3J0V29ya2VyLURRTDdVVEVoLmpzLm1hcAo=",g8=n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),dx=typeof self<"u"&&self.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",g8(KT)],{type:"text/javascript;charset=utf-8"});function f8(n){let e;try{if(e=dx&&(self.URL||self.webkitURL).createObjectURL(dx),!e)throw"";const t=new Worker(e,{type:"module",name:n==null?void 0:n.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+KT,{type:"module",name:n==null?void 0:n.name})}}class xv{constructor(e,t){this._scene=null,this._camera=null,this._started=!1,this._initialized=!1,this._renderer=e;const i=e.gl;this._program=i.createProgram(),this._passes=t||[];const r=i.createShader(i.VERTEX_SHADER);i.shaderSource(r,this._getVertexSource()),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)||console.error(i.getShaderInfoLog(r));const s=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(s,this._getFragmentSource()),i.compileShader(s),i.getShaderParameter(s,i.COMPILE_STATUS)||console.error(i.getShaderInfoLog(s)),i.attachShader(this.program,r),i.attachShader(this.program,s),i.linkProgram(this.program),i.getProgramParameter(this.program,i.LINK_STATUS)||console.error(i.getProgramInfoLog(this.program)),this.resize=()=>{i.useProgram(this._program),this._resize()},this.initialize=()=>{console.assert(!this._initialized,"ShaderProgram already initialized"),i.useProgram(this._program),this._initialize();for(const a of this.passes)a.initialize(this);this._initialized=!0,this._started=!0},this.render=(a,o)=>{i.useProgram(this._program),(this._scene!==a||this._camera!==o)&&(this.dispose(),this._scene=a,this._camera=o,this.initialize());for(const l of this.passes)l.render();this._render()},this.dispose=()=>{if(this._initialized){i.useProgram(this._program);for(const a of this.passes)a.dispose();this._dispose(),this._scene=null,this._camera=null,this._initialized=!1}}}get renderer(){return this._renderer}get scene(){return this._scene}get camera(){return this._camera}get program(){return this._program}get passes(){return this._passes}get started(){return this._started}}const qT="dmFyIG9BID0gZnVuY3Rpb24oQyA9IHt9KSB7CiAgdmFyIGUsIEEgPSBDLCBoID0gaW1wb3J0Lm1ldGEudXJsLCBrID0gIiIsIHk7CiAgewogICAgdHJ5IHsKICAgICAgayA9IG5ldyBVUkwoIi4iLCBoKS5ocmVmOwogICAgfSBjYXRjaCB7CiAgICB9CiAgICB5ID0gKGcpID0+IHsKICAgICAgdmFyIEIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgcmV0dXJuIEIub3BlbigiR0VUIiwgZywgITEpLCBCLnJlc3BvbnNlVHlwZSA9ICJhcnJheWJ1ZmZlciIsIEIuc2VuZChudWxsKSwgbmV3IFVpbnQ4QXJyYXkoQi5yZXNwb25zZSk7CiAgICB9OwogIH0KICBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLCBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7CiAgdmFyIEYsIEQsIE47CiAgZnVuY3Rpb24gVSgpIHsKICAgIHZhciBnID0gRC5idWZmZXI7CiAgICBBLkhFQVBVOCA9IE4gPSBuZXcgVWludDhBcnJheShnKSwgQS5IRUFQVTMyID0gbmV3IFVpbnQzMkFycmF5KGcpLCBBLkhFQVBGMzIgPSBuZXcgRmxvYXQzMkFycmF5KGcpLCBuZXcgQmlnSW50NjRBcnJheShnKSwgbmV3IEJpZ1VpbnQ2NEFycmF5KGcpOwogIH0KICBmdW5jdGlvbiBpKCkgewogICAgaWYgKEEucHJlUnVuKQogICAgICBmb3IgKHR5cGVvZiBBLnByZVJ1biA9PSAiZnVuY3Rpb24iICYmIChBLnByZVJ1biA9IFtBLnByZVJ1bl0pOyBBLnByZVJ1bi5sZW5ndGg7ICkKICAgICAgICAkKEEucHJlUnVuLnNoaWZ0KCkpOwogICAgeChUKTsKICB9CiAgZnVuY3Rpb24gSCgpIHsKICAgIGYuYygpOwogIH0KICBmdW5jdGlvbiBiKCkgewogICAgaWYgKEEucG9zdFJ1bikKICAgICAgZm9yICh0eXBlb2YgQS5wb3N0UnVuID09ICJmdW5jdGlvbiIgJiYgKEEucG9zdFJ1biA9IFtBLnBvc3RSdW5dKTsgQS5wb3N0UnVuLmxlbmd0aDsgKQogICAgICAgIE8oQS5wb3N0UnVuLnNoaWZ0KCkpOwogICAgeChqKTsKICB9CiAgdmFyIHMgPSAwLCB3ID0gbnVsbDsKICBmdW5jdGlvbiB2KGcpIHsKICAgIHMrKywgQS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzPy4ocyk7CiAgfQogIGZ1bmN0aW9uIFAoZykgewogICAgaWYgKHMtLSwgQS5tb25pdG9yUnVuRGVwZW5kZW5jaWVzPy4ocyksIHMgPT0gMCAmJiB3KSB7CiAgICAgIHZhciBCID0gdzsKICAgICAgdyA9IG51bGwsIEIoKTsKICAgIH0KICB9CiAgdmFyIG07CiAgZnVuY3Rpb24gWCgpIHsKICAgIHJldHVybiBBQSgiQUdGemJRRUFBQUFCSmdaZ0FYOEJmMkFDZlgwQmYyQUJmUUYvWUFGL0FHQUxmMzkvZjM5L2YzOS9mMzhBWUFBQUFnY0JBV0VCWVFBQUF3Z0hBQUVDQXdBRUJRVUhBUUdDQW9DQUFnWUlBWDhCUVlDTUJBc0hGUVVCWWdJQUFXTUFCd0ZrQUFZQlpRQUZBV1lBQkF3QkFRcXFRQWRQQVFKL1FZQUlLQUlBSWdFZ0FFRUhha0Y0Y1NJQ2FpRUFBa0FnQWtFQUlBQWdBVTBiUlFSQUlBQS9BRUVRZEUwTkFTQUFFQUFOQVF0QmhBaEJNRFlDQUVGL0R3dEJnQWdnQURZQ0FDQUJDdzRBSUFBUUF5QUJFQU5CRUhSeUMzSUJCSDhnQUx3aUJFSC8vLzhEY1NFQkFrQWdCRUVYZGtIL0FYRWlBa1VOQUNBQ1FmQUFUUVJBSUFGQmdJQ0FCSEpCOFFBZ0FtdDJJUUVNQVFzZ0FrR05BVXNFUUVHQStBRWhBMEVBSVFFTUFRc2dBa0VLZEVHQWdBZHJJUU1MSUFNZ0JFRVFka0dBZ0FKeGNpQUJRUTEyY2d2Y0N3RUlmd0pBSUFCRkRRQWdBRUVJYXlJRElBQkJCR3NvQWdBaUFrRjRjU0lBYWlFRkFrQWdBa0VCY1EwQUlBSkJBbkZGRFFFZ0F5QURLQUlBSWdScklnTkJtQWdvQWdCSkRRRWdBQ0FFYWlFQUFrQUNRQUpBUVp3SUtBSUFJQU5IQkVBZ0F5Z0NEQ0VCSUFSQi93Rk5CRUFnQVNBREtBSUlJZ0pIRFFKQmlBaEJpQWdvQWdCQmZpQUVRUU4yZDNFMkFnQU1CUXNnQXlnQ0dDRUhJQUVnQTBjRVFDQURLQUlJSWdJZ0FUWUNEQ0FCSUFJMkFnZ01CQXNnQXlnQ0ZDSUNCSDhnQTBFVWFnVWdBeWdDRUNJQ1JRMERJQU5CRUdvTElRUURRQ0FFSVFZZ0FpSUJRUlJxSVFRZ0FTZ0NGQ0lDRFFBZ0FVRVFhaUVFSUFFb0FoQWlBZzBBQ3lBR1FRQTJBZ0FNQXdzZ0JTZ0NCQ0lDUVFOeFFRTkhEUU5Ca0FnZ0FEWUNBQ0FGSUFKQmZuRTJBZ1FnQXlBQVFRRnlOZ0lFSUFVZ0FEWUNBQThMSUFJZ0FUWUNEQ0FCSUFJMkFnZ01BZ3RCQUNFQkN5QUhSUTBBQWtBZ0F5Z0NIQ0lFUVFKMFFiZ0thaUlDS0FJQUlBTkdCRUFnQWlBQk5nSUFJQUVOQVVHTUNFR01DQ2dDQUVGK0lBUjNjVFlDQUF3Q0N3SkFJQU1nQnlnQ0VFWUVRQ0FISUFFMkFoQU1BUXNnQnlBQk5nSVVDeUFCUlEwQkN5QUJJQWMyQWhnZ0F5Z0NFQ0lDQkVBZ0FTQUNOZ0lRSUFJZ0FUWUNHQXNnQXlnQ0ZDSUNSUTBBSUFFZ0FqWUNGQ0FDSUFFMkFoZ0xJQU1nQlU4TkFDQUZLQUlFSWdSQkFYRkZEUUFDUUFKQUFrQUNRQ0FFUVFKeFJRUkFRYUFJS0FJQUlBVkdCRUJCb0FnZ0F6WUNBRUdVQ0VHVUNDZ0NBQ0FBYWlJQU5nSUFJQU1nQUVFQmNqWUNCQ0FEUVp3SUtBSUFSdzBHUVpBSVFRQTJBZ0JCbkFoQkFEWUNBQThMUVp3SUtBSUFJZ2NnQlVZRVFFR2NDQ0FETmdJQVFaQUlRWkFJS0FJQUlBQnFJZ0EyQWdBZ0F5QUFRUUZ5TmdJRUlBQWdBMm9nQURZQ0FBOExJQVJCZUhFZ0FHb2hBQ0FGS0FJTUlRRWdCRUgvQVUwRVFDQUZLQUlJSWdJZ0FVWUVRRUdJQ0VHSUNDZ0NBRUYrSUFSQkEzWjNjVFlDQUF3RkN5QUNJQUUyQWd3Z0FTQUNOZ0lJREFRTElBVW9BaGdoQ0NBQklBVkhCRUFnQlNnQ0NDSUNJQUUyQWd3Z0FTQUNOZ0lJREFNTElBVW9BaFFpQWdSL0lBVkJGR29GSUFVb0FoQWlBa1VOQWlBRlFSQnFDeUVFQTBBZ0JDRUdJQUlpQVVFVWFpRUVJQUVvQWhRaUFnMEFJQUZCRUdvaEJDQUJLQUlRSWdJTkFBc2dCa0VBTmdJQURBSUxJQVVnQkVGK2NUWUNCQ0FESUFCQkFYSTJBZ1FnQUNBRGFpQUFOZ0lBREFNTFFRQWhBUXNnQ0VVTkFBSkFJQVVvQWh3aUJFRUNkRUc0Q21vaUFpZ0NBQ0FGUmdSQUlBSWdBVFlDQUNBQkRRRkJqQWhCakFnb0FnQkJmaUFFZDNFMkFnQU1BZ3NDUUNBRklBZ29BaEJHQkVBZ0NDQUJOZ0lRREFFTElBZ2dBVFlDRkFzZ0FVVU5BUXNnQVNBSU5nSVlJQVVvQWhBaUFnUkFJQUVnQWpZQ0VDQUNJQUUyQWhnTElBVW9BaFFpQWtVTkFDQUJJQUkyQWhRZ0FpQUJOZ0lZQ3lBRElBQkJBWEkyQWdRZ0FDQURhaUFBTmdJQUlBTWdCMGNOQUVHUUNDQUFOZ0lBRHdzZ0FFSC9BVTBFUUNBQVFYaHhRYkFJYWlFQ0FuOUJpQWdvQWdBaUJFRUJJQUJCQTNaMElnQnhSUVJBUVlnSUlBQWdCSEkyQWdBZ0Fnd0JDeUFDS0FJSUN5RUFJQUlnQXpZQ0NDQUFJQU0yQWd3Z0F5QUNOZ0lNSUFNZ0FEWUNDQThMUVI4aEFTQUFRZi8vL3dkTkJFQWdBRUVtSUFCQkNIWm5JZ0pyZGtFQmNTQUNRUUYwYTBFK2FpRUJDeUFESUFFMkFod2dBMElBTndJUUlBRkJBblJCdUFwcUlRUUNmd0pBQW45QmpBZ29BZ0FpQmtFQklBRjBJZ0p4UlFSQVFZd0lJQUlnQm5JMkFnQWdCQ0FETmdJQVFSZ2hBVUVJREFFTElBQkJHU0FCUVFGMmEwRUFJQUZCSDBjYmRDRUJJQVFvQWdBaEJBTkFJQVFpQWlnQ0JFRjRjU0FBUmcwQ0lBRkJIWFloQkNBQlFRRjBJUUVnQWlBRVFRUnhhaUlHS0FJUUlnUU5BQXNnQmlBRE5nSVFRUmdoQVNBQ0lRUkJDQXNoQUNBRElnSU1BUXNnQWlnQ0NDSUVJQU0yQWd3Z0FpQUROZ0lJUVJnaEFFRUlJUUZCQUFzaEJpQUJJQU5xSUFRMkFnQWdBeUFDTmdJTUlBQWdBMm9nQmpZQ0FFR29DRUdvQ0NnQ0FFRUJheUlBUVg4Z0FCczJBZ0FMQzlFbkFRdC9Jd0JCRUdzaUNpUUFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FnQUVIMEFVMEVRRUdJQ0NnQ0FDSUVRUkFnQUVFTGFrSDRBM0VnQUVFTFNSc2lCa0VEZGlJQWRpSUJRUU54QkVBQ1FDQUJRWDl6UVFGeElBQnFJZ0pCQTNRaUFVR3dDR29pQUNBQlFiZ0lhaWdDQUNJQktBSUlJZ1ZHQkVCQmlBZ2dCRUYrSUFKM2NUWUNBQXdCQ3lBRklBQTJBZ3dnQUNBRk5nSUlDeUFCUVFocUlRQWdBU0FDUVFOMElnSkJBM0kyQWdRZ0FTQUNhaUlCSUFFb0FnUkJBWEkyQWdRTUN3c2dCa0dRQ0NnQ0FDSUlUUTBCSUFFRVFBSkFRUUlnQUhRaUFrRUFJQUpyY2lBQklBQjBjV2dpQVVFRGRDSUFRYkFJYWlJQ0lBQkJ1QWhxS0FJQUlnQW9BZ2dpQlVZRVFFR0lDQ0FFUVg0Z0FYZHhJZ1EyQWdBTUFRc2dCU0FDTmdJTUlBSWdCVFlDQ0FzZ0FDQUdRUU55TmdJRUlBQWdCbW9pQnlBQlFRTjBJZ0VnQm1zaUJVRUJjallDQkNBQUlBRnFJQVUyQWdBZ0NBUkFJQWhCZUhGQnNBaHFJUUZCbkFnb0FnQWhBZ0ovSUFSQkFTQUlRUU4yZENJRGNVVUVRRUdJQ0NBRElBUnlOZ0lBSUFFTUFRc2dBU2dDQ0FzaEF5QUJJQUkyQWdnZ0F5QUNOZ0lNSUFJZ0FUWUNEQ0FDSUFNMkFnZ0xJQUJCQ0dvaEFFR2NDQ0FITmdJQVFaQUlJQVUyQWdBTUN3dEJqQWdvQWdBaUMwVU5BU0FMYUVFQ2RFRzRDbW9vQWdBaUFpZ0NCRUY0Y1NBR2F5RURJQUloQVFOQUFrQWdBU2dDRUNJQVJRUkFJQUVvQWhRaUFFVU5BUXNnQUNnQ0JFRjRjU0FHYXlJQklBTWdBU0FEU1NJQkd5RURJQUFnQWlBQkd5RUNJQUFoQVF3QkN3c2dBaWdDR0NFSklBSWdBaWdDRENJQVJ3UkFJQUlvQWdnaUFTQUFOZ0lNSUFBZ0FUWUNDQXdLQ3lBQ0tBSVVJZ0VFZnlBQ1FSUnFCU0FDS0FJUUlnRkZEUU1nQWtFUWFnc2hCUU5BSUFVaEJ5QUJJZ0JCRkdvaEJTQUFLQUlVSWdFTkFDQUFRUkJxSVFVZ0FDZ0NFQ0lCRFFBTElBZEJBRFlDQUF3SkMwRi9JUVlnQUVHL2Ywc05BQ0FBUVF0cUlnRkJlSEVoQmtHTUNDZ0NBQ0lIUlEwQVFSOGhDRUVBSUFacklRTWdBRUgwLy84SFRRUkFJQVpCSmlBQlFRaDJaeUlBYTNaQkFYRWdBRUVCZEd0QlBtb2hDQXNDUUFKQUFrQWdDRUVDZEVHNENtb29BZ0FpQVVVRVFFRUFJUUFNQVF0QkFDRUFJQVpCR1NBSVFRRjJhMEVBSUFoQkgwY2JkQ0VDQTBBQ1FDQUJLQUlFUVhoeElBWnJJZ1FnQTA4TkFDQUJJUVVnQkNJRERRQkJBQ0VESUFFaEFBd0RDeUFBSUFFb0FoUWlCQ0FFSUFFZ0FrRWRka0VFY1dvb0FoQWlBVVliSUFBZ0JCc2hBQ0FDUVFGMElRSWdBUTBBQ3dzZ0FDQUZja1VFUUVFQUlRVkJBaUFJZENJQVFRQWdBR3R5SUFkeElnQkZEUU1nQUdoQkFuUkJ1QXBxS0FJQUlRQUxJQUJGRFFFTEEwQWdBQ2dDQkVGNGNTQUdheUlDSUFOSklRRWdBaUFESUFFYklRTWdBQ0FGSUFFYklRVWdBQ2dDRUNJQkJIOGdBUVVnQUNnQ0ZBc2lBQTBBQ3dzZ0JVVU5BQ0FEUVpBSUtBSUFJQVpyVHcwQUlBVW9BaGdoQ0NBRklBVW9BZ3dpQUVjRVFDQUZLQUlJSWdFZ0FEWUNEQ0FBSUFFMkFnZ01DQXNnQlNnQ0ZDSUJCSDhnQlVFVWFnVWdCU2dDRUNJQlJRMERJQVZCRUdvTElRSURRQ0FDSVFRZ0FTSUFRUlJxSVFJZ0FDZ0NGQ0lCRFFBZ0FFRVFhaUVDSUFBb0FoQWlBUTBBQ3lBRVFRQTJBZ0FNQndzZ0JrR1FDQ2dDQUNJRlRRUkFRWndJS0FJQUlRQUNRQ0FGSUFacklnRkJFRThFUUNBQUlBWnFJZ0lnQVVFQmNqWUNCQ0FBSUFWcUlBRTJBZ0FnQUNBR1FRTnlOZ0lFREFFTElBQWdCVUVEY2pZQ0JDQUFJQVZxSWdFZ0FTZ0NCRUVCY2pZQ0JFRUFJUUpCQUNFQkMwR1FDQ0FCTmdJQVFad0lJQUkyQWdBZ0FFRUlhaUVBREFrTElBWkJsQWdvQWdBaUFra0VRRUdVQ0NBQ0lBWnJJZ0UyQWdCQm9BaEJvQWdvQWdBaUFDQUdhaUlDTmdJQUlBSWdBVUVCY2pZQ0JDQUFJQVpCQTNJMkFnUWdBRUVJYWlFQURBa0xRUUFoQUNBR1FTOXFJZ01DZjBIZ0N5Z0NBQVJBUWVnTEtBSUFEQUVMUWV3TFFuODNBZ0JCNUF0Q2dLQ0FnSUNBQkRjQ0FFSGdDeUFLUVF4cVFYQnhRZGlxMWFvRmN6WUNBRUgwQzBFQU5nSUFRY1FMUVFBMkFnQkJnQ0FMSWdGcUlnUkJBQ0FCYXlJSGNTSUJJQVpORFFoQndBc29BZ0FpQlFSQVFiZ0xLQUlBSWdnZ0FXb2lDU0FJVFNBRklBbEpjZzBKQ3dKQVFjUUxMUUFBUVFSeFJRUkFBa0FDUUFKQUFrQkJvQWdvQWdBaUJRUkFRY2dMSVFBRFFDQUFLQUlBSWdnZ0JVMEVRQ0FGSUFnZ0FDZ0NCR3BKRFFNTElBQW9BZ2dpQUEwQUN3dEJBQkFCSWdKQmYwWU5BeUFCSVFSQjVBc29BZ0FpQUVFQmF5SUZJQUp4QkVBZ0FTQUNheUFDSUFWcVFRQWdBR3R4YWlFRUN5QUVJQVpORFFOQndBc29BZ0FpQUFSQVFiZ0xLQUlBSWdVZ0JHb2lCeUFGVFNBQUlBZEpjZzBFQ3lBRUVBRWlBQ0FDUncwQkRBVUxJQVFnQW1zZ0IzRWlCQkFCSWdJZ0FDZ0NBQ0FBS0FJRWFrWU5BU0FDSVFBTElBQkJmMFlOQVNBR1FUQnFJQVJOQkVBZ0FDRUNEQVFMUWVnTEtBSUFJZ0lnQXlBRWEycEJBQ0FDYTNFaUFoQUJRWDlHRFFFZ0FpQUVhaUVFSUFBaEFnd0RDeUFDUVg5SERRSUxRY1FMUWNRTEtBSUFRUVJ5TmdJQUN5QUJFQUVpQWtGL1JrRUFFQUVpQUVGL1JuSWdBQ0FDVFhJTkJTQUFJQUpySWdRZ0JrRW9hazBOQlF0QnVBdEJ1QXNvQWdBZ0JHb2lBRFlDQUVHOEN5Z0NBQ0FBU1FSQVFid0xJQUEyQWdBTEFrQkJvQWdvQWdBaUF3UkFRY2dMSVFBRFFDQUNJQUFvQWdBaUFTQUFLQUlFSWdWcVJnMENJQUFvQWdnaUFBMEFDd3dFQzBHWUNDZ0NBQ0lBUVFBZ0FDQUNUUnRGQkVCQm1BZ2dBallDQUF0QkFDRUFRY3dMSUFRMkFnQkJ5QXNnQWpZQ0FFR29DRUYvTmdJQVFhd0lRZUFMS0FJQU5nSUFRZFFMUVFBMkFnQURRQ0FBUVFOMElnRkJ1QWhxSUFGQnNBaHFJZ1UyQWdBZ0FVRzhDR29nQlRZQ0FDQUFRUUZxSWdCQklFY05BQXRCbEFnZ0JFRW9heUlBUVhnZ0FtdEJCM0VpQVdzaUJUWUNBRUdnQ0NBQklBSnFJZ0UyQWdBZ0FTQUZRUUZ5TmdJRUlBQWdBbXBCS0RZQ0JFR2tDRUh3Q3lnQ0FEWUNBQXdFQ3lBQ0lBTk5JQUVnQTB0eURRSWdBQ2dDREVFSWNRMENJQUFnQkNBRmFqWUNCRUdnQ0NBRFFYZ2dBMnRCQjNFaUFHb2lBVFlDQUVHVUNFR1VDQ2dDQUNBRWFpSUNJQUJySWdBMkFnQWdBU0FBUVFGeU5nSUVJQUlnQTJwQktEWUNCRUdrQ0VId0N5Z0NBRFlDQUF3REMwRUFJUUFNQmd0QkFDRUFEQVFMUVpnSUtBSUFJQUpMQkVCQm1BZ2dBallDQUFzZ0FpQUVhaUVGUWNnTElRQUNRQU5BSUFVZ0FDZ0NBQ0lCUndSQUlBQW9BZ2dpQUEwQkRBSUxDeUFBTFFBTVFRaHhSUTBEQzBISUN5RUFBMEFDUUNBQUtBSUFJZ0VnQTAwRVFDQURJQUVnQUNnQ0JHb2lCVWtOQVFzZ0FDZ0NDQ0VBREFFTEMwR1VDQ0FFUVNocklnQkJlQ0FDYTBFSGNTSUJheUlITmdJQVFhQUlJQUVnQW1vaUFUWUNBQ0FCSUFkQkFYSTJBZ1FnQUNBQ2FrRW9OZ0lFUWFRSVFmQUxLQUlBTmdJQUlBTWdCVUVuSUFWclFRZHhha0V2YXlJQUlBQWdBMEVRYWtrYklnRkJHellDQkNBQlFkQUxLUUlBTndJUUlBRkJ5QXNwQWdBM0FnaEIwQXNnQVVFSWFqWUNBRUhNQ3lBRU5nSUFRY2dMSUFJMkFnQkIxQXRCQURZQ0FDQUJRUmhxSVFBRFFDQUFRUWMyQWdRZ0FFRUlhaUFBUVFScUlRQWdCVWtOQUFzZ0FTQURSZzBBSUFFZ0FTZ0NCRUYrY1RZQ0JDQURJQUVnQTJzaUFrRUJjallDQkNBQklBSTJBZ0FDZnlBQ1FmOEJUUVJBSUFKQmVIRkJzQWhxSVFBQ2YwR0lDQ2dDQUNJQlFRRWdBa0VEZG5RaUFuRkZCRUJCaUFnZ0FTQUNjallDQUNBQURBRUxJQUFvQWdnTElRRWdBQ0FETmdJSUlBRWdBellDREVFTUlRSkJDQXdCQzBFZklRQWdBa0gvLy84SFRRUkFJQUpCSmlBQ1FRaDJaeUlBYTNaQkFYRWdBRUVCZEd0QlBtb2hBQXNnQXlBQU5nSWNJQU5DQURjQ0VDQUFRUUowUWJnS2FpRUJBa0FDUUVHTUNDZ0NBQ0lGUVFFZ0FIUWlCSEZGQkVCQmpBZ2dCQ0FGY2pZQ0FDQUJJQU0yQWdBTUFRc2dBa0VaSUFCQkFYWnJRUUFnQUVFZlJ4dDBJUUFnQVNnQ0FDRUZBMEFnQlNJQktBSUVRWGh4SUFKR0RRSWdBRUVkZGlFRklBQkJBWFFoQUNBQklBVkJCSEZxSWdRb0FoQWlCUTBBQ3lBRUlBTTJBaEFMSUFNZ0FUWUNHRUVJSVFJZ0F5SUJJUUJCREF3QkN5QUJLQUlJSWdBZ0F6WUNEQ0FCSUFNMkFnZ2dBeUFBTmdJSVFRQWhBRUVZSVFKQkRBc2dBMm9nQVRZQ0FDQUNJQU5xSUFBMkFnQUxRWlFJS0FJQUlnQWdCazBOQUVHVUNDQUFJQVpySWdFMkFnQkJvQWhCb0Fnb0FnQWlBQ0FHYWlJQ05nSUFJQUlnQVVFQmNqWUNCQ0FBSUFaQkEzSTJBZ1FnQUVFSWFpRUFEQVFMUVlRSVFUQTJBZ0JCQUNFQURBTUxJQUFnQWpZQ0FDQUFJQUFvQWdRZ0JHbzJBZ1FnQWtGNElBSnJRUWR4YWlJSUlBWkJBM0kyQWdRZ0FVRjRJQUZyUVFkeGFpSUVJQVlnQ0dvaUEyc2hCd0pBUWFBSUtBSUFJQVJHQkVCQm9BZ2dBellDQUVHVUNFR1VDQ2dDQUNBSGFpSUFOZ0lBSUFNZ0FFRUJjallDQkF3QkMwR2NDQ2dDQUNBRVJnUkFRWndJSUFNMkFnQkJrQWhCa0Fnb0FnQWdCMm9pQURZQ0FDQURJQUJCQVhJMkFnUWdBQ0FEYWlBQU5nSUFEQUVMSUFRb0FnUWlBRUVEY1VFQlJnUkFJQUJCZUhFaENTQUVLQUlNSVFJQ1FDQUFRZjhCVFFSQUlBUW9BZ2dpQVNBQ1JnUkFRWWdJUVlnSUtBSUFRWDRnQUVFRGRuZHhOZ0lBREFJTElBRWdBallDRENBQ0lBRTJBZ2dNQVFzZ0JDZ0NHQ0VHQWtBZ0FpQUVSd1JBSUFRb0FnZ2lBQ0FDTmdJTUlBSWdBRFlDQ0F3QkN3SkFJQVFvQWhRaUFBUi9JQVJCRkdvRklBUW9BaEFpQUVVTkFTQUVRUkJxQ3lFQkEwQWdBU0VGSUFBaUFrRVVhaUVCSUFBb0FoUWlBQTBBSUFKQkVHb2hBU0FDS0FJUUlnQU5BQXNnQlVFQU5nSUFEQUVMUVFBaEFnc2dCa1VOQUFKQUlBUW9BaHdpQUVFQ2RFRzRDbW9pQVNnQ0FDQUVSZ1JBSUFFZ0FqWUNBQ0FDRFFGQmpBaEJqQWdvQWdCQmZpQUFkM0UyQWdBTUFnc0NRQ0FFSUFZb0FoQkdCRUFnQmlBQ05nSVFEQUVMSUFZZ0FqWUNGQXNnQWtVTkFRc2dBaUFHTmdJWUlBUW9BaEFpQUFSQUlBSWdBRFlDRUNBQUlBSTJBaGdMSUFRb0FoUWlBRVVOQUNBQ0lBQTJBaFFnQUNBQ05nSVlDeUFISUFscUlRY2dCQ0FKYWlJRUtBSUVJUUFMSUFRZ0FFRitjVFlDQkNBRElBZEJBWEkyQWdRZ0F5QUhhaUFITmdJQUlBZEIvd0ZOQkVBZ0IwRjRjVUd3Q0dvaEFBSi9RWWdJS0FJQUlnRkJBU0FIUVFOMmRDSUNjVVVFUUVHSUNDQUJJQUp5TmdJQUlBQU1BUXNnQUNnQ0NBc2hBU0FBSUFNMkFnZ2dBU0FETmdJTUlBTWdBRFlDRENBRElBRTJBZ2dNQVF0Qkh5RUNJQWRCLy8vL0IwMEVRQ0FIUVNZZ0IwRUlkbWNpQUd0MlFRRnhJQUJCQVhSclFUNXFJUUlMSUFNZ0FqWUNIQ0FEUWdBM0FoQWdBa0VDZEVHNENtb2hBQUpBQWtCQmpBZ29BZ0FpQVVFQklBSjBJZ1Z4UlFSQVFZd0lJQUVnQlhJMkFnQWdBQ0FETmdJQURBRUxJQWRCR1NBQ1FRRjJhMEVBSUFKQkgwY2JkQ0VDSUFBb0FnQWhBUU5BSUFFaUFDZ0NCRUY0Y1NBSFJnMENJQUpCSFhZaEFTQUNRUUYwSVFJZ0FDQUJRUVJ4YWlJRktBSVFJZ0VOQUFzZ0JTQUROZ0lRQ3lBRElBQTJBaGdnQXlBRE5nSU1JQU1nQXpZQ0NBd0JDeUFBS0FJSUlnRWdBellDRENBQUlBTTJBZ2dnQTBFQU5nSVlJQU1nQURZQ0RDQURJQUUyQWdnTElBaEJDR29oQUF3Q0N3SkFJQWhGRFFBQ1FDQUZLQUljSWdGQkFuUkJ1QXBxSWdJb0FnQWdCVVlFUUNBQ0lBQTJBZ0FnQUEwQlFZd0lJQWRCZmlBQmQzRWlCellDQUF3Q0N3SkFJQVVnQ0NnQ0VFWUVRQ0FJSUFBMkFoQU1BUXNnQ0NBQU5nSVVDeUFBUlEwQkN5QUFJQWcyQWhnZ0JTZ0NFQ0lCQkVBZ0FDQUJOZ0lRSUFFZ0FEWUNHQXNnQlNnQ0ZDSUJSUTBBSUFBZ0FUWUNGQ0FCSUFBMkFoZ0xBa0FnQTBFUFRRUkFJQVVnQXlBR2FpSUFRUU55TmdJRUlBQWdCV29pQUNBQUtBSUVRUUZ5TmdJRURBRUxJQVVnQmtFRGNqWUNCQ0FGSUFacUlnUWdBMEVCY2pZQ0JDQURJQVJxSUFNMkFnQWdBMEgvQVUwRVFDQURRWGh4UWJBSWFpRUFBbjlCaUFnb0FnQWlBVUVCSUFOQkEzWjBJZ0p4UlFSQVFZZ0lJQUVnQW5JMkFnQWdBQXdCQ3lBQUtBSUlDeUVCSUFBZ0JEWUNDQ0FCSUFRMkFnd2dCQ0FBTmdJTUlBUWdBVFlDQ0F3QkMwRWZJUUFnQTBILy8vOEhUUVJBSUFOQkppQURRUWgyWnlJQWEzWkJBWEVnQUVFQmRHdEJQbW9oQUFzZ0JDQUFOZ0ljSUFSQ0FEY0NFQ0FBUVFKMFFiZ0thaUVCQWtBQ1FDQUhRUUVnQUhRaUFuRkZCRUJCakFnZ0FpQUhjallDQUNBQklBUTJBZ0FnQkNBQk5nSVlEQUVMSUFOQkdTQUFRUUYyYTBFQUlBQkJIMGNiZENFQUlBRW9BZ0FoQVFOQUlBRWlBaWdDQkVGNGNTQURSZzBDSUFCQkhYWWhBU0FBUVFGMElRQWdBaUFCUVFSeGFpSUhLQUlRSWdFTkFBc2dCeUFFTmdJUUlBUWdBallDR0FzZ0JDQUVOZ0lNSUFRZ0JEWUNDQXdCQ3lBQ0tBSUlJZ0FnQkRZQ0RDQUNJQVEyQWdnZ0JFRUFOZ0lZSUFRZ0FqWUNEQ0FFSUFBMkFnZ0xJQVZCQ0dvaEFBd0JDd0pBSUFsRkRRQUNRQ0FDS0FJY0lnRkJBblJCdUFwcUlnVW9BZ0FnQWtZRVFDQUZJQUEyQWdBZ0FBMEJRWXdJSUF0QmZpQUJkM0UyQWdBTUFnc0NRQ0FDSUFrb0FoQkdCRUFnQ1NBQU5nSVFEQUVMSUFrZ0FEWUNGQXNnQUVVTkFRc2dBQ0FKTmdJWUlBSW9BaEFpQVFSQUlBQWdBVFlDRUNBQklBQTJBaGdMSUFJb0FoUWlBVVVOQUNBQUlBRTJBaFFnQVNBQU5nSVlDd0pBSUFOQkQwMEVRQ0FDSUFNZ0Jtb2lBRUVEY2pZQ0JDQUFJQUpxSWdBZ0FDZ0NCRUVCY2pZQ0JBd0JDeUFDSUFaQkEzSTJBZ1FnQWlBR2FpSUZJQU5CQVhJMkFnUWdBeUFGYWlBRE5nSUFJQWdFUUNBSVFYaHhRYkFJYWlFQVFad0lLQUlBSVFFQ2YwRUJJQWhCQTNaMElnY2dCSEZGQkVCQmlBZ2dCQ0FIY2pZQ0FDQUFEQUVMSUFBb0FnZ0xJUVFnQUNBQk5nSUlJQVFnQVRZQ0RDQUJJQUEyQWd3Z0FTQUVOZ0lJQzBHY0NDQUZOZ0lBUVpBSUlBTTJBZ0FMSUFKQkNHb2hBQXNnQ2tFUWFpUUFJQUFMb1FzQ0MzOEpmU01BUWFBQmF5SUxKQUFnQzBFd2FrRUFRU1Q4Q3dBRFFDQUJJQTVIQkVBZ0FpQU9RUU5zSWd4QkFtcEJBblFpRDJvcUFnQWhGeUFDSUF4QkFXcEJBblFpRUdvcUFnQWhHQ0FJSUF4QkFuUWlFV29nQWlBUmFpb0NBQ0laT0FJQUlBZ2dFR29nR0RnQ0FDQUlJQTlxSUJjNEFnQWdCeUFPUVFWMGFpSU5RUUEyQWd3Z0RTQVhPQUlJSUEwZ0dEZ0NCQ0FOSUJrNEFnQUNRQ0FBUlFSQUlBWWdEbW90QUFCRkRRRUxJQTFCZ0lDQUNEWUNEQXNnRFNBRklBNUJBblFpREVFQmNpSVNhaTBBQUVFSWRDQUZJQXhxTFFBQWNpQUZJQXhCQW5JaUUyb3RBQUJCRUhSeUlBVWdERUVEY2lJTWFpMEFBRUVZZEhJMkFod2dDeUFESUJKQkFuUWlFbW9xQWdBaUZ6Z0NrQUVnQ3lBRElCTkJBblFpRTJvcUFnQWlHRGdDbEFFZ0N5QURJQXhCQW5RaUZHb3FBZ0FpR1RnQ21BRWdDeUFESUE1QkJIUWlGV29xQWdDTUlobzRBcHdCSUF0QjRBQnFJZ3dnQ3lvQ21BRWlGa01BQUFEQWxDQVdsQ0FMS2dLVUFTSVdRd0FBQU1DVUlCYVVRd0FBZ0QrU2tqZ0NBQ0FNSUFzcUFwQUJJaFlnRnBJZ0N5b0NsQUdVSUFzcUFwZ0JJaFlnRnBJZ0N5b0NuQUdVa3pnQ0JDQU1JQXNxQXBBQkloWWdGcElnQ3lvQ21BR1VJQXNxQXBRQkloWWdGcElnQ3lvQ25BR1VramdDQ0NBTUlBc3FBcEFCSWhZZ0ZwSWdDeW9DbEFHVUlBc3FBcGdCSWhZZ0ZwSWdDeW9DbkFHVWtqZ0NEQ0FNSUFzcUFwZ0JJaFpEQUFBQXdKUWdGcFFnQ3lvQ2tBRWlGa01BQUFEQWxDQVdsRU1BQUlBL2twSTRBaEFnRENBTEtnS1VBU0lXSUJhU0lBc3FBcGdCbENBTEtnS1FBU0lXSUJhU0lBc3FBcHdCbEpNNEFoUWdEQ0FMS2dLUUFTSVdJQmFTSUFzcUFwZ0JsQ0FMS2dLVUFTSVdJQmFTSUFzcUFwd0JsSk00QWhnZ0RDQUxLZ0tVQVNJV0lCYVNJQXNxQXBnQmxDQUxLZ0tRQVNJV0lCYVNJQXNxQXB3QmxKSTRBaHdnRENBTEtnS1VBU0lXUXdBQUFNQ1VJQmFVSUFzcUFwQUJJaFpEQUFBQXdKUWdGcFJEQUFDQVA1S1NPQUlnSUFrZ0ZXb2dGemdDQUNBSklCSnFJQmc0QWdBZ0NTQVRhaUFaT0FJQUlBa2dGR29nR2pnQ0FDQUxJQVFnRVdvcUFnQWlGemdDTUNBTElBUWdFR29xQWdBaUdEZ0NRQ0FMSUFRZ0Qyb3FBZ0FpR1RnQ1VDQUtJQkZxSUJjNEFnQWdDaUFRYWlBWU9BSUFJQW9nRDJvZ0dUZ0NBQ0FMSUF3cUFoZ2dDeW9DT0pRZ0RDb0NBQ0FMS2dJd2xDQU1LZ0lNSUFzcUFqU1VrcEk0QWdBZ0N5QU1LZ0ljSUFzcUFqaVVJQXdxQWdRZ0N5b0NNSlFnRENvQ0VDQUxLZ0kwbEpLU09BSUVJQXNnRENvQ0lDQUxLZ0k0bENBTUtnSUlJQXNxQWpDVUlBd3FBaFFnQ3lvQ05KU1NramdDQ0NBTElBd3FBaGdnQ3lvQ1JKUWdEQ29DQUNBTEtnSThsQ0FNS2dJTUlBc3FBa0NVa3BJNEFnd2dDeUFNS2dJY0lBc3FBa1NVSUF3cUFnUWdDeW9DUEpRZ0RDb0NFQ0FMS2dKQWxKS1NPQUlRSUFzZ0RDb0NJQ0FMS2dKRWxDQU1LZ0lJSUFzcUFqeVVJQXdxQWhRZ0N5b0NRSlNTa2pnQ0ZDQUxJQXdxQWhnZ0N5b0NVSlFnRENvQ0FDQUxLZ0pJbENBTUtnSU1JQXNxQWt5VWtwSTRBaGdnQ3lBTUtnSWNJQXNxQWxDVUlBd3FBZ1FnQ3lvQ1NKUWdEQ29DRUNBTEtnSk1sSktTT0FJY0lBc2dEQ29DSUNBTEtnSlFsQ0FNS2dJSUlBc3FBa2lVSUF3cUFoUWdDeW9DVEpTU2tqZ0NJQ0FMS2dJZ0lSY2dDeW9DQ0NFWUlBc3FBaFFoR1NBTklBc3FBaGdpR2lBYWxDQUxLZ0lBSWhZZ0ZwUWdDeW9DRENJYklCdVVrcEpEQUFDQVFKUWdHaUFMS2dJY0loeVVJQllnQ3lvQ0JDSWRsQ0FiSUFzcUFoQWlIcFNTa2tNQUFJQkFsQkFDTmdJUUlBMGdHaUFYbENBV0lCaVVJQnNnR1pTU2trTUFBSUJBbENBY0lCeVVJQjBnSFpRZ0hpQWVsSktTUXdBQWdFQ1VFQUkyQWhRZ0RTQWNJQmVVSUIwZ0dKUWdIaUFabEpLU1F3QUFnRUNVSUJjZ0Y1UWdHQ0FZbENBWklCbVVrcEpEQUFDQVFKUVFBallDR0NBT1FRRnFJUTRNQVFzTElBdEJvQUZxSkFBTEFnQUxDd2tCQUVHQkNBc0NCZ0U9Iik7CiAgfQogIGZ1bmN0aW9uIFcoZykgewogICAgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhnKSkKICAgICAgcmV0dXJuIGc7CiAgICBpZiAoZyA9PSBtICYmIEYpCiAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShGKTsKICAgIGlmICh5KQogICAgICByZXR1cm4geShnKTsKICAgIHRocm93ICdzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZDogeW91IGNhbiBwcmVsb2FkIGl0IHRvIE1vZHVsZVsid2FzbUJpbmFyeSJdIG1hbnVhbGx5LCBvciBlbWNjLnB5IHdpbGwgZG8gdGhhdCBmb3IgeW91IHdoZW4gZ2VuZXJhdGluZyBIVE1MIChidXQgbm90IEpTKSc7CiAgfQogIGZ1bmN0aW9uIF8oZywgQikgewogICAgdmFyIEUsIFEgPSBXKGcpOwogICAgRSA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoUSk7CiAgICB2YXIgbyA9IG5ldyBXZWJBc3NlbWJseS5JbnN0YW5jZShFLCBCKTsKICAgIHJldHVybiBbbywgRV07CiAgfQogIGZ1bmN0aW9uIFYoKSB7CiAgICByZXR1cm4geyBhOiBFQSB9OwogIH0KICBmdW5jdGlvbiB6KCkgewogICAgZnVuY3Rpb24gZyhRLCBvKSB7CiAgICAgIHJldHVybiBmID0gUS5leHBvcnRzLCBEID0gZi5iLCBVKCksIFFBKGYpLCBQKCksIGY7CiAgICB9CiAgICB2KCk7CiAgICB2YXIgQiA9IFYoKTsKICAgIGlmIChBLmluc3RhbnRpYXRlV2FzbSkKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChRLCBvKSA9PiB7CiAgICAgICAgQS5pbnN0YW50aWF0ZVdhc20oQiwgKHIsIGMpID0+IHsKICAgICAgICAgIFEoZyhyKSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgbSA/Pz0gWCgpOwogICAgdmFyIEUgPSBfKG0sIEIpOwogICAgcmV0dXJuIGcoRVswXSk7CiAgfQogIGZvciAodmFyIHggPSAoZykgPT4gewogICAgZm9yICg7IGcubGVuZ3RoID4gMDsgKQogICAgICBnLnNoaWZ0KCkoQSk7CiAgfSwgaiA9IFtdLCBPID0gKGcpID0+IGoucHVzaChnKSwgVCA9IFtdLCAkID0gKGcpID0+IFQucHVzaChnKSwgQUEgPSAoZykgPT4gewogICAgZm9yICh2YXIgQiwgRSwgUSA9IDAsIG8gPSAwLCByID0gZy5sZW5ndGgsIGMgPSBuZXcgVWludDhBcnJheSgociAqIDMgPj4gMikgLSAoZ1tyIC0gMl0gPT0gIj0iKSAtIChnW3IgLSAxXSA9PSAiPSIpKTsgUSA8IHI7IFEgKz0gNCwgbyArPSAzKQogICAgICBCID0gbltnLmNoYXJDb2RlQXQoUSArIDEpXSwgRSA9IG5bZy5jaGFyQ29kZUF0KFEgKyAyKV0sIGNbb10gPSBuW2cuY2hhckNvZGVBdChRKV0gPDwgMiB8IEIgPj4gNCwgY1tvICsgMV0gPSBCIDw8IDQgfCBFID4+IDIsIGNbbyArIDJdID0gRSA8PCA2IHwgbltnLmNoYXJDb2RlQXQoUSArIDMpXTsKICAgIHJldHVybiBjOwogIH0sIGdBID0gKCkgPT4gMjE0NzQ4MzY0OCwgSUEgPSAoZywgQikgPT4gTWF0aC5jZWlsKGcgLyBCKSAqIEIsIENBID0gKGcpID0+IHsKICAgIHZhciBCID0gRC5idWZmZXIsIEUgPSAoZyAtIEIuYnl0ZUxlbmd0aCArIDY1NTM1KSAvIDY1NTM2IHwgMDsKICAgIHRyeSB7CiAgICAgIHJldHVybiBELmdyb3coRSksIFUoKSwgMTsKICAgIH0gY2F0Y2ggewogICAgfQogIH0sIEJBID0gKGcpID0+IHsKICAgIHZhciBCID0gTi5sZW5ndGg7CiAgICBnID4+Pj0gMDsKICAgIHZhciBFID0gZ0EoKTsKICAgIGlmIChnID4gRSkKICAgICAgcmV0dXJuICExOwogICAgZm9yICh2YXIgUSA9IDE7IFEgPD0gNDsgUSAqPSAyKSB7CiAgICAgIHZhciBvID0gQiAqICgxICsgMC4yIC8gUSk7CiAgICAgIG8gPSBNYXRoLm1pbihvLCBnICsgMTAwNjYzMjk2KTsKICAgICAgdmFyIHIgPSBNYXRoLm1pbihFLCBJQShNYXRoLm1heChnLCBvKSwgNjU1MzYpKSwgYyA9IENBKHIpOwogICAgICBpZiAoYykKICAgICAgICByZXR1cm4gITA7CiAgICB9CiAgICByZXR1cm4gITE7CiAgfSwgbiA9IG5ldyBVaW50OEFycmF5KDEyMyksIGEgPSAyNTsgYSA+PSAwOyAtLWEpCiAgICBuWzQ4ICsgYV0gPSA1MiArIGEsIG5bNjUgKyBhXSA9IGEsIG5bOTcgKyBhXSA9IDI2ICsgYTsKICBuWzQzXSA9IDYyLCBuWzQ3XSA9IDYzLCBBLm5vRXhpdFJ1bnRpbWUgJiYgQS5ub0V4aXRSdW50aW1lLCBBLnByaW50ICYmIEEucHJpbnQsIEEucHJpbnRFcnIgJiYgQS5wcmludEVyciwgQS53YXNtQmluYXJ5ICYmIChGID0gQS53YXNtQmluYXJ5KSwgQS5hcmd1bWVudHMgJiYgQS5hcmd1bWVudHMsIEEudGhpc1Byb2dyYW0gJiYgQS50aGlzUHJvZ3JhbTsKICBmdW5jdGlvbiBRQShnKSB7CiAgICBBLl9wYWNrID0gZy5kLCBBLl9tYWxsb2MgPSBnLmUsIEEuX2ZyZWUgPSBnLmY7CiAgfQogIHZhciBFQSA9IHsgYTogQkEgfSwgZiA9IHooKTsKICBmdW5jdGlvbiBxKCkgewogICAgaWYgKHMgPiAwKSB7CiAgICAgIHcgPSBxOwogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoaSgpLCBzID4gMCkgewogICAgICB3ID0gcTsKICAgICAgcmV0dXJuOwogICAgfQogICAgZnVuY3Rpb24gZygpIHsKICAgICAgQS5jYWxsZWRSdW4gPSAhMCwgSCgpLCBBLm9uUnVudGltZUluaXRpYWxpemVkPy4oKSwgYigpOwogICAgfQogICAgQS5zZXRTdGF0dXMgPyAoQS5zZXRTdGF0dXMoIlJ1bm5pbmcuLi4iKSwgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gQS5zZXRTdGF0dXMoIiIpLCAxKSwgZygpOwogICAgfSwgMSkpIDogZygpOwogIH0KICBmdW5jdGlvbiBpQSgpIHsKICAgIGlmIChBLnByZUluaXQpCiAgICAgIGZvciAodHlwZW9mIEEucHJlSW5pdCA9PSAiZnVuY3Rpb24iICYmIChBLnByZUluaXQgPSBbQS5wcmVJbml0XSk7IEEucHJlSW5pdC5sZW5ndGggPiAwOyApCiAgICAgICAgQS5wcmVJbml0LnNoaWZ0KCkoKTsKICB9CiAgcmV0dXJuIGlBKCksIHEoKSwgZSA9IEEsIGU7Cn07CmxldCBJOwphc3luYyBmdW5jdGlvbiB0QSgpIHsKICBpZiAoSSA9IGF3YWl0IG9BKCksICFJIHx8ICFJLkhFQVBGMzIgfHwgIUkuX3BhY2spCiAgICB0aHJvdyBuZXcgRXJyb3IoIldBU00gbW9kdWxlIGZhaWxlZCB0byBpbml0aWFsaXplIHByb3Blcmx5Iik7Cn0KbGV0IHQgPSAwOwpjb25zdCBsID0gbmV3IEFycmF5KCk7CmxldCBLID0gITEsIHAgPSAhMSwgWSwgUiwgRywgdSwgZCwgTSwgUywgTCwgSjsKY29uc3QgZUEgPSBhc3luYyAoQykgPT4gewogIGZvciAoOyBwOyApCiAgICBhd2FpdCBuZXcgUHJvbWlzZSgoSCkgPT4gc2V0VGltZW91dChILCAwKSk7CiAgSSB8fCAocCA9ICEwLCBhd2FpdCB0QSgpLCBwID0gITEpOwogIGNvbnN0IGUgPSBNYXRoLnBvdygyLCBNYXRoLmNlaWwoTWF0aC5sb2cyKEMudmVydGV4Q291bnQpKSk7CiAgZSA+IHQgJiYgKHQgPiAwICYmIChJLl9mcmVlKFkpLCBJLl9mcmVlKFIpLCBJLl9mcmVlKEcpLCBJLl9mcmVlKHUpLCBJLl9mcmVlKGQpLCBJLl9mcmVlKE0pLCBJLl9mcmVlKFMpLCBJLl9mcmVlKEwpLCBJLl9mcmVlKEopKSwgdCA9IGUsIFkgPSBJLl9tYWxsb2MoMyAqIHQgKiA0KSwgUiA9IEkuX21hbGxvYyg0ICogdCAqIDQpLCBHID0gSS5fbWFsbG9jKDMgKiB0ICogNCksIHUgPSBJLl9tYWxsb2MoNCAqIHQpLCBkID0gSS5fbWFsbG9jKHQpLCBNID0gSS5fbWFsbG9jKDggKiB0ICogNCksIFMgPSBJLl9tYWxsb2MoMyAqIHQgKiA0KSwgTCA9IEkuX21hbGxvYyg0ICogdCAqIDQpLCBKID0gSS5fbWFsbG9jKDMgKiB0ICogNCkpLCBJLkhFQVBGMzIuc2V0KEMucG9zaXRpb25zLCBZIC8gNCksIEkuSEVBUEYzMi5zZXQoQy5yb3RhdGlvbnMsIFIgLyA0KSwgSS5IRUFQRjMyLnNldChDLnNjYWxlcywgRyAvIDQpLCBJLkhFQVBVOC5zZXQoQy5jb2xvcnMsIHUpLCBJLkhFQVBVOC5zZXQoQy5zZWxlY3Rpb24sIGQpLCBJLl9wYWNrKAogICAgQy5zZWxlY3RlZCwKICAgIEMudmVydGV4Q291bnQsCiAgICBZLAogICAgUiwKICAgIEcsCiAgICB1LAogICAgZCwKICAgIE0sCiAgICBTLAogICAgTCwKICAgIEoKICApOwogIGNvbnN0IEEgPSBuZXcgVWludDMyQXJyYXkoSS5IRUFQVTMyLmJ1ZmZlciwgTSwgQy52ZXJ0ZXhDb3VudCAqIDgpLCBoID0gbmV3IFVpbnQzMkFycmF5KEEuc2xpY2UoKS5idWZmZXIpLCBrID0gbmV3IEZsb2F0MzJBcnJheShJLkhFQVBGMzIuYnVmZmVyLCBTLCBDLnZlcnRleENvdW50ICogMyksIHkgPSBuZXcgRmxvYXQzMkFycmF5KGsuc2xpY2UoKS5idWZmZXIpLCBGID0gbmV3IEZsb2F0MzJBcnJheShJLkhFQVBGMzIuYnVmZmVyLCBMLCBDLnZlcnRleENvdW50ICogNCksIEQgPSBuZXcgRmxvYXQzMkFycmF5KEYuc2xpY2UoKS5idWZmZXIpLCBOID0gbmV3IEZsb2F0MzJBcnJheShJLkhFQVBGMzIuYnVmZmVyLCBKLCBDLnZlcnRleENvdW50ICogMyksIFUgPSBuZXcgRmxvYXQzMkFycmF5KE4uc2xpY2UoKS5idWZmZXIpLCBpID0gewogICAgZGF0YTogaCwKICAgIHdvcmxkUG9zaXRpb25zOiB5LAogICAgd29ybGRSb3RhdGlvbnM6IEQsCiAgICB3b3JsZFNjYWxlczogVSwKICAgIG9mZnNldDogQy5vZmZzZXQsCiAgICB2ZXJ0ZXhDb3VudDogQy52ZXJ0ZXhDb3VudCwKICAgIHBvc2l0aW9uczogQy5wb3NpdGlvbnMuYnVmZmVyLAogICAgcm90YXRpb25zOiBDLnJvdGF0aW9ucy5idWZmZXIsCiAgICBzY2FsZXM6IEMuc2NhbGVzLmJ1ZmZlciwKICAgIGNvbG9yczogQy5jb2xvcnMuYnVmZmVyLAogICAgc2VsZWN0aW9uOiBDLnNlbGVjdGlvbi5idWZmZXIKICB9OwogIHNlbGYucG9zdE1lc3NhZ2UoeyByZXNwb25zZTogaSB9LCBbCiAgICBpLmRhdGEuYnVmZmVyLAogICAgaS53b3JsZFBvc2l0aW9ucy5idWZmZXIsCiAgICBpLndvcmxkUm90YXRpb25zLmJ1ZmZlciwKICAgIGkud29ybGRTY2FsZXMuYnVmZmVyLAogICAgaS5wb3NpdGlvbnMsCiAgICBpLnJvdGF0aW9ucywKICAgIGkuc2NhbGVzLAogICAgaS5jb2xvcnMsCiAgICBpLnNlbGVjdGlvbgogIF0pLCBLID0gITE7Cn0sIFogPSAoKSA9PiB7CiAgaWYgKGwubGVuZ3RoICE9PSAwICYmICFLKSB7CiAgICBLID0gITA7CiAgICBjb25zdCBDID0gbC5zaGlmdCgpOwogICAgZUEoQyksIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBLID0gITEsIFooKTsKICAgIH0sIDApOwogIH0KfTsKc2VsZi5vbm1lc3NhZ2UgPSAoQykgPT4gewogIGlmIChDLmRhdGEuc3BsYXQpIHsKICAgIGNvbnN0IGUgPSBDLmRhdGEuc3BsYXQ7CiAgICBmb3IgKGNvbnN0IFtBLCBoXSBvZiBsLmVudHJpZXMoKSkKICAgICAgaWYgKGgub2Zmc2V0ID09PSBlLm9mZnNldCkgewogICAgICAgIGxbQV0gPSBlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgbC5wdXNoKGUpLCBaKCk7CiAgfQp9OwovLyMgc291cmNlTWFwcGluZ1VSTD1EYXRhV29ya2VyLUJ6RWRfWmo2LmpzLm1hcAo=",p8=n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),gx=typeof self<"u"&&self.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",p8(qT)],{type:"text/javascript;charset=utf-8"});function A8(n){let e;try{if(e=gx&&(self.URL||self.webkitURL).createObjectURL(gx),!e)throw"";const t=new Worker(e,{type:"module",name:n==null?void 0:n.name});return t.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+qT,{type:"module",name:n==null?void 0:n.name})}}var m8=function(n={}){var e,t=n,i=import.meta.url,r="",s;{try{r=new URL(".",i).href}catch{}s=G=>{var te=new XMLHttpRequest;return te.open("GET",G,!1),te.responseType="arraybuffer",te.send(null),new Uint8Array(te.response)}}console.log.bind(console),console.error.bind(console);var a,o,l;function c(){var G=o.buffer;t.HEAPU8=l=new Uint8Array(G),t.HEAPU32=new Uint32Array(G),t.HEAPF32=new Float32Array(G),new BigInt64Array(G),new BigUint64Array(G)}function h(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)S(t.preRun.shift());_(E)}function u(){de.c()}function d(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)y(t.postRun.shift());_(x)}var g=0,f=null;function m(G){var te;g++,(te=t.monitorRunDependencies)==null||te.call(t,g)}function p(G){var te;if(g--,(te=t.monitorRunDependencies)==null||te.call(t,g),g==0&&f){var we=f;f=null,we()}}var A;function C(){return R("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")}function v(G){if(ArrayBuffer.isView(G))return G;if(G==A&&a)return new Uint8Array(a);if(s)return s(G);throw'sync fetching of the wasm failed: you can preload it to Module["wasmBinary"] manually, or emcc.py will do that for you when generating HTML (but not JS)'}function I(G,te){var we,le=v(G);we=new WebAssembly.Module(le);var xe=new WebAssembly.Instance(we,te);return[xe,we]}function w(){return{a:ne}}function b(){function G(le,xe){return de=le.exports,o=de.b,c(),W(de),p(),de}m();var te=w();if(t.instantiateWasm)return new Promise((le,xe)=>{t.instantiateWasm(te,(Re,Fe)=>{le(G(Re))})});A??(A=C());var we=I(A,te);return G(we[0])}for(var _=G=>{for(;G.length>0;)G.shift()(t)},x=[],y=G=>x.push(G),E=[],S=G=>E.push(G),R=G=>{for(var te,we,le=0,xe=0,Re=G.length,Fe=new Uint8Array((Re*3>>2)-(G[Re-2]=="=")-(G[Re-1]=="="));le<Re;le+=4,xe+=3)te=N[G.charCodeAt(le+1)],we=N[G.charCodeAt(le+2)],Fe[xe]=N[G.charCodeAt(le)]<<2|te>>4,Fe[xe+1]=te<<4|we>>2,Fe[xe+2]=we<<6|N[G.charCodeAt(le+3)];return Fe},M=()=>2147483648,T=(G,te)=>Math.ceil(G/te)*te,P=G=>{var te=o.buffer,we=(G-te.byteLength+65535)/65536|0;try{return o.grow(we),c(),1}catch{}},F=G=>{var te=l.length;G>>>=0;var we=M();if(G>we)return!1;for(var le=1;le<=4;le*=2){var xe=te*(1+.2/le);xe=Math.min(xe,G+100663296);var Re=Math.min(we,T(Math.max(G,xe),65536)),Fe=P(Re);if(Fe)return!0}return!1},N=new Uint8Array(123),L=25;L>=0;--L)N[48+L]=52+L,N[65+L]=L,N[97+L]=26+L;N[43]=62,N[47]=63,t.noExitRuntime&&t.noExitRuntime,t.print&&t.print,t.printErr&&t.printErr,t.wasmBinary&&(a=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&t.thisProgram;function W(G){t._pack=G.d,t._malloc=G.e,t._free=G.f}var ne={a:F},de=b();function ee(){if(g>0){f=ee;return}if(h(),g>0){f=ee;return}function G(){var te;t.calledRun=!0,u(),(te=t.onRuntimeInitialized)==null||te.call(t),d()}t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),G()},1)):G()}function Me(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}return Me(),ee(),e=t,e};const C8=()=>new A8;class TI{constructor(e){this.dataChanged=!1,this.transformsChanged=!1,this.colorTransformsChanged=!1,this._updating=new Set,this._dirty=new Set;let t=0,i=0;this._splatIndices=new Map,this._offsets=new Map;const r=new Map;for(const d of e.objects)d instanceof Ln&&(this._splatIndices.set(d,i),this._offsets.set(d,t),r.set(t,d),t+=d.data.vertexCount,i++);this._vertexCount=t,this._width=2048,this._height=Math.ceil(2*this.vertexCount/this.width),this._data=new Uint32Array(this.width*this.height*4),this._transformsWidth=5,this._transformsHeight=r.size,this._transforms=new Float32Array(this._transformsWidth*this._transformsHeight*4),this._transformIndicesWidth=1024,this._transformIndicesHeight=Math.ceil(this.vertexCount/this._transformIndicesWidth),this._transformIndices=new Uint32Array(this._transformIndicesWidth*this._transformIndicesHeight),this._colorTransformsWidth=4,this._colorTransformsHeight=64,this._colorTransforms=new Float32Array(this._colorTransformsWidth*this._colorTransformsHeight*4),this._colorTransforms.fill(0),this._colorTransforms[0]=1,this._colorTransforms[5]=1,this._colorTransforms[10]=1,this._colorTransforms[15]=1,this._colorTransformIndicesWidth=1024,this._colorTransformIndicesHeight=Math.ceil(this.vertexCount/this._colorTransformIndicesWidth),this._colorTransformIndices=new Uint32Array(this._colorTransformIndicesWidth*this._colorTransformIndicesHeight),this.colorTransformIndices.fill(0),this._positions=new Float32Array(this.vertexCount*3),this._rotations=new Float32Array(this.vertexCount*4),this._scales=new Float32Array(this.vertexCount*3),this._worker=C8();const s=d=>{const g=this._splatIndices.get(d);this._transforms.set(d.transform.buffer,g*20),this._transforms[g*20+16]=d.selected?1:0,d.positionChanged=!1,d.rotationChanged=!1,d.scaleChanged=!1,d.selectedChanged=!1,this.transformsChanged=!0},a=()=>{let d=!1;for(const m of this._splatIndices.keys())if(m.colorTransformChanged){d=!0;break}if(!d)return;const g=[new In];this._colorTransformIndices.fill(0);let f=1;for(const m of this._splatIndices.keys()){const p=this._offsets.get(m);for(const A of m.colorTransforms)g.includes(A)||(g.push(A),f++);for(const A of m.colorTransformsMap.keys()){const C=m.colorTransformsMap.get(A);this._colorTransformIndices[A+p]=C+f-1}m.colorTransformChanged=!1}for(let m=0;m<g.length;m++){const p=g[m];this._colorTransforms.set(p.buffer,m*16)}this.colorTransformsChanged=!0};this._worker.onmessage=d=>{if(d.data.response){const g=d.data.response,f=r.get(g.offset);s(f),a();const m=this._splatIndices.get(f);for(let p=0;p<f.data.vertexCount;p++)this._transformIndices[g.offset+p]=m;this._data.set(g.data,g.offset*8),f.data.reattach(g.positions,g.rotations,g.scales,g.colors,g.selection),this._positions.set(g.worldPositions,g.offset*3),this._rotations.set(g.worldRotations,g.offset*4),this._scales.set(g.worldScales,g.offset*3),this._updating.delete(f),f.selectedChanged=!1,this.dataChanged=!0}};let o;async function l(){o=await m8()}l();async function c(){for(;!o;)await new Promise(d=>setTimeout(d,0))}const h=d=>{if(!o){c().then(()=>{h(d)});return}s(d);const g=o._malloc(3*d.data.vertexCount*4),f=o._malloc(4*d.data.vertexCount*4),m=o._malloc(3*d.data.vertexCount*4),p=o._malloc(4*d.data.vertexCount),A=o._malloc(d.data.vertexCount),C=o._malloc(8*d.data.vertexCount*4),v=o._malloc(3*d.data.vertexCount*4),I=o._malloc(4*d.data.vertexCount*4),w=o._malloc(3*d.data.vertexCount*4);o.HEAPF32.set(d.data.positions,g/4),o.HEAPF32.set(d.data.rotations,f/4),o.HEAPF32.set(d.data.scales,m/4),o.HEAPU8.set(d.data.colors,p),o.HEAPU8.set(d.data.selection,A),o._pack(d.selected,d.data.vertexCount,g,f,m,p,A,C,v,I,w);const b=new Uint32Array(o.HEAPU32.buffer,C,d.data.vertexCount*8),_=new Float32Array(o.HEAPF32.buffer,v,d.data.vertexCount*3),x=new Float32Array(o.HEAPF32.buffer,I,d.data.vertexCount*4),y=new Float32Array(o.HEAPF32.buffer,w,d.data.vertexCount*3),E=this._splatIndices.get(d),S=this._offsets.get(d);for(let R=0;R<d.data.vertexCount;R++)this._transformIndices[S+R]=E;this._data.set(b,S*8),this._positions.set(_,S*3),this._rotations.set(x,S*4),this._scales.set(y,S*3),o._free(g),o._free(f),o._free(m),o._free(p),o._free(A),o._free(C),o._free(v),o._free(I),o._free(w),this.dataChanged=!0,this.colorTransformsChanged=!0},u=d=>{if((d.positionChanged||d.rotationChanged||d.scaleChanged||d.selectedChanged)&&s(d),d.colorTransformChanged&&a(),!d.data.changed||d.data.detached)return;const g={position:new Float32Array(d.position.flat()),rotation:new Float32Array(d.rotation.flat()),scale:new Float32Array(d.scale.flat()),selected:d.selected,vertexCount:d.data.vertexCount,positions:d.data.positions,rotations:d.data.rotations,scales:d.data.scales,colors:d.data.colors,selection:d.data.selection,offset:this._offsets.get(d)};this._worker.postMessage({splat:g},[g.position.buffer,g.rotation.buffer,g.scale.buffer,g.positions.buffer,g.rotations.buffer,g.scales.buffer,g.colors.buffer,g.selection.buffer]),this._updating.add(d),d.data.detached=!0};this.getSplat=d=>{let g=null;for(const[f,m]of this._offsets)if(d>=m)g=f;else break;return g},this.getLocalIndex=(d,g)=>{const f=this._offsets.get(d);return g-f},this.markDirty=d=>{this._dirty.add(d)},this.rebuild=()=>{for(const d of this._dirty)u(d);this._dirty.clear()},this.dispose=()=>{this._worker.terminate()};for(const d of this._splatIndices.keys())h(d);a()}get offsets(){return this._offsets}get data(){return this._data}get width(){return this._width}get height(){return this._height}get transforms(){return this._transforms}get transformsWidth(){return this._transformsWidth}get transformsHeight(){return this._transformsHeight}get transformIndices(){return this._transformIndices}get transformIndicesWidth(){return this._transformIndicesWidth}get transformIndicesHeight(){return this._transformIndicesHeight}get colorTransforms(){return this._colorTransforms}get colorTransformsWidth(){return this._colorTransformsWidth}get colorTransformsHeight(){return this._colorTransformsHeight}get colorTransformIndices(){return this._colorTransformIndices}get colorTransformIndicesWidth(){return this._colorTransformIndicesWidth}get colorTransformIndicesHeight(){return this._colorTransformIndicesHeight}get positions(){return this._positions}get rotations(){return this._rotations}get scales(){return this._scales}get vertexCount(){return this._vertexCount}get needsRebuild(){return this._dirty.size>0}get updating(){return this._updating.size>0}}class Sv{constructor(e=0,t=0,i=0,r=255){this.r=e,this.g=t,this.b=i,this.a=r}flat(){return[this.r,this.g,this.b,this.a]}flatNorm(){return[this.r/255,this.g/255,this.b/255,this.a/255]}toHexString(){return"#"+this.flat().map(e=>e.toString(16).padStart(2,"0")).join("")}toString(){return`[${this.flat().join(", ")}]`}}const I8=()=>new f8,v8=`#version 300 es
precision highp float;
precision highp int;

uniform highp usampler2D u_texture;
uniform highp sampler2D u_transforms;
uniform highp usampler2D u_transformIndices;
uniform highp sampler2D u_colorTransforms;
uniform highp usampler2D u_colorTransformIndices;
uniform mat4 projection, view;
uniform vec2 focal;
uniform vec2 viewport;

uniform bool useDepthFade;
uniform float depthFade;

in vec2 position;
in int index;

out vec4 vColor;
out vec2 vPosition;
out float vSize;
out float vSelected;

void main () {
    uvec4 cen = texelFetch(u_texture, ivec2((uint(index) & 0x3ffu) << 1, uint(index) >> 10), 0);
    float selected = float((cen.w >> 24) & 0xffu);

    uint transformIndex = texelFetch(u_transformIndices, ivec2(uint(index) & 0x3ffu, uint(index) >> 10), 0).x;
    mat4 transform = mat4(
        texelFetch(u_transforms, ivec2(0, transformIndex), 0),
        texelFetch(u_transforms, ivec2(1, transformIndex), 0),
        texelFetch(u_transforms, ivec2(2, transformIndex), 0),
        texelFetch(u_transforms, ivec2(3, transformIndex), 0)
    );

    if (selected < 0.5) {
        selected = texelFetch(u_transforms, ivec2(4, transformIndex), 0).x;
    }

    mat4 viewTransform = view * transform;

    vec4 cam = viewTransform * vec4(uintBitsToFloat(cen.xyz), 1);
    vec4 pos2d = projection * cam;

    float clip = 1.2 * pos2d.w;
    if (pos2d.z < -pos2d.w || pos2d.z > pos2d.w || pos2d.x < -clip || pos2d.x > clip || pos2d.y < -clip || pos2d.y > clip) {
        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
        return;
    }

    uvec4 cov = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 1) | 1u, uint(index) >> 10), 0);
    vec2 u1 = unpackHalf2x16(cov.x), u2 = unpackHalf2x16(cov.y), u3 = unpackHalf2x16(cov.z);
    mat3 Vrk = mat3(u1.x, u1.y, u2.x, u1.y, u2.y, u3.x, u2.x, u3.x, u3.y);

    mat3 J = mat3(
        focal.x / cam.z, 0., -(focal.x * cam.x) / (cam.z * cam.z), 
        0., -focal.y / cam.z, (focal.y * cam.y) / (cam.z * cam.z), 
        0., 0., 0.
    );

    mat3 T = transpose(mat3(viewTransform)) * J;
    mat3 cov2d = transpose(T) * Vrk * T;

    //ref: https://github.com/graphdeco-inria/diff-gaussian-rasterization/blob/main/cuda_rasterizer/forward.cu#L110-L111
    cov2d[0][0] += 0.3;
    cov2d[1][1] += 0.3;

    float mid = (cov2d[0][0] + cov2d[1][1]) / 2.0;
    float radius = length(vec2((cov2d[0][0] - cov2d[1][1]) / 2.0, cov2d[0][1]));
    float lambda1 = mid + radius, lambda2 = mid - radius;

    if (lambda2 < 0.0) return;
    vec2 diagonalVector = normalize(vec2(cov2d[0][1], lambda1 - cov2d[0][0]));
    vec2 majorAxis = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
    vec2 minorAxis = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);

    uint colorTransformIndex = texelFetch(u_colorTransformIndices, ivec2(uint(index) & 0x3ffu, uint(index) >> 10), 0).x;
    mat4 colorTransform = mat4(
        texelFetch(u_colorTransforms, ivec2(0, colorTransformIndex), 0),
        texelFetch(u_colorTransforms, ivec2(1, colorTransformIndex), 0),
        texelFetch(u_colorTransforms, ivec2(2, colorTransformIndex), 0),
        texelFetch(u_colorTransforms, ivec2(3, colorTransformIndex), 0)
    );

    vec4 color = vec4((cov.w) & 0xffu, (cov.w >> 8) & 0xffu, (cov.w >> 16) & 0xffu, (cov.w >> 24) & 0xffu) / 255.0;
    vColor = colorTransform * color;

    vPosition = position;
    vSize = length(majorAxis);
    vSelected = selected;

    float scalingFactor = 1.0;

    if (useDepthFade) {
        float depthNorm = (pos2d.z / pos2d.w + 1.0) / 2.0;
        float near = 0.1; float far = 100.0;
        float normalizedDepth = (2.0 * near) / (far + near - depthNorm * (far - near));
        float start = max(normalizedDepth - 0.1, 0.0);
        float end = min(normalizedDepth + 0.1, 1.0);
        scalingFactor = clamp((depthFade - start) / (end - start), 0.0, 1.0);
    }

    vec2 vCenter = vec2(pos2d) / pos2d.w;
    gl_Position = vec4(
        vCenter 
        + position.x * majorAxis * scalingFactor / viewport
        + position.y * minorAxis * scalingFactor / viewport, 0.0, 1.0);
}
`,y8=`#version 300 es
precision highp float;

uniform float outlineThickness;
uniform vec4 outlineColor;

in vec4 vColor;
in vec2 vPosition;
in float vSize;
in float vSelected;

out vec4 fragColor;

void main () {
    float A = -dot(vPosition, vPosition);

    if (A < -4.0) discard;

    if (vSelected < 0.5) {
        float B = exp(A) * vColor.a;
        fragColor = vec4(B * vColor.rgb, B);
        return;
    }

    float outlineThreshold = -4.0 + (outlineThickness / vSize);

    if (A < outlineThreshold) {
        fragColor = outlineColor;
    } 
    else {
        float B = exp(A) * vColor.a;
        fragColor = vec4(B * vColor.rgb, B);
    }
}
`;class Mv extends xv{constructor(e,t){super(e,t),this._outlineThickness=10,this._outlineColor=new Sv(255,165,0,255),this._renderData=null,this._depthIndex=new Uint32Array,this._splatTexture=null,this._worker=null;const i=e.canvas,r=e.gl;let s,a,o,l,c,h,u,d,g,f,m,p,A,C,v,I,w,b,_;this._resize=()=>{this._camera&&(this._camera.data.setSize(i.width,i.height),this._camera.update(),s=r.getUniformLocation(this.program,"projection"),r.uniformMatrix4fv(s,!1,this._camera.data.projectionMatrix.buffer),a=r.getUniformLocation(this.program,"viewport"),r.uniform2fv(a,new Float32Array([i.width,i.height])))};const x=()=>{this._worker=I8(),this._worker.onmessage=M=>{if(M.data.depthIndex){const{depthIndex:T}=M.data;this._depthIndex=T,r.bindBuffer(r.ARRAY_BUFFER,_),r.bufferData(r.ARRAY_BUFFER,T,r.STATIC_DRAW)}}};this._initialize=()=>{if(!this._scene||!this._camera){console.error("Cannot render without scene and camera");return}this._resize(),this._scene.addEventListener("objectAdded",y),this._scene.addEventListener("objectRemoved",E);for(const M of this._scene.objects)M instanceof Ln&&M.addEventListener("objectChanged",S);this._renderData=new TI(this._scene),o=r.getUniformLocation(this.program,"focal"),r.uniform2fv(o,new Float32Array([this._camera.data.fx,this._camera.data.fy])),l=r.getUniformLocation(this.program,"view"),r.uniformMatrix4fv(l,!1,this._camera.data.viewMatrix.buffer),f=r.getUniformLocation(this.program,"outlineThickness"),r.uniform1f(f,this.outlineThickness),m=r.getUniformLocation(this.program,"outlineColor"),r.uniform4fv(m,new Float32Array(this.outlineColor.flatNorm())),this._splatTexture=r.createTexture(),c=r.getUniformLocation(this.program,"u_texture"),r.uniform1i(c,0),C=r.createTexture(),h=r.getUniformLocation(this.program,"u_transforms"),r.uniform1i(h,1),v=r.createTexture(),u=r.getUniformLocation(this.program,"u_transformIndices"),r.uniform1i(u,2),I=r.createTexture(),d=r.getUniformLocation(this.program,"u_colorTransforms"),r.uniform1i(d,3),w=r.createTexture(),g=r.getUniformLocation(this.program,"u_colorTransformIndices"),r.uniform1i(g,4),b=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,b),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-2,-2,2,-2,2,2,-2,2]),r.STATIC_DRAW),p=r.getAttribLocation(this.program,"position"),r.enableVertexAttribArray(p),r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0),_=r.createBuffer(),A=r.getAttribLocation(this.program,"index"),r.enableVertexAttribArray(A),r.bindBuffer(r.ARRAY_BUFFER,_),x()};const y=M=>{const T=M;T.object instanceof Ln&&T.object.addEventListener("objectChanged",S),R()},E=M=>{const T=M;T.object instanceof Ln&&T.object.removeEventListener("objectChanged",S),R()},S=M=>{const T=M;T.object instanceof Ln&&this._renderData&&this._renderData.markDirty(T.object)},R=()=>{var M,T;(M=this._renderData)==null||M.dispose(),this._renderData=new TI(this._scene),(T=this._worker)==null||T.terminate(),x()};this._render=()=>{var M,T;if(!this._scene||!this._camera||!this.renderData){console.error("Cannot render without scene and camera");return}if(this.renderData.needsRebuild&&this.renderData.rebuild(),this.renderData.dataChanged||this.renderData.transformsChanged||this.renderData.colorTransformsChanged){this.renderData.dataChanged&&(r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.splatTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32UI,this.renderData.width,this.renderData.height,0,r.RGBA_INTEGER,r.UNSIGNED_INT,this.renderData.data)),this.renderData.transformsChanged&&(r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,C),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,this.renderData.transformsWidth,this.renderData.transformsHeight,0,r.RGBA,r.FLOAT,this.renderData.transforms),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,v),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.R32UI,this.renderData.transformIndicesWidth,this.renderData.transformIndicesHeight,0,r.RED_INTEGER,r.UNSIGNED_INT,this.renderData.transformIndices)),this.renderData.colorTransformsChanged&&(r.activeTexture(r.TEXTURE3),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,this.renderData.colorTransformsWidth,this.renderData.colorTransformsHeight,0,r.RGBA,r.FLOAT,this.renderData.colorTransforms),r.activeTexture(r.TEXTURE4),r.bindTexture(r.TEXTURE_2D,w),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.R32UI,this.renderData.colorTransformIndicesWidth,this.renderData.colorTransformIndicesHeight,0,r.RED_INTEGER,r.UNSIGNED_INT,this.renderData.colorTransformIndices));const P=new Float32Array(this.renderData.positions.slice().buffer),F=new Float32Array(this.renderData.transforms.slice().buffer),N=new Uint32Array(this.renderData.transformIndices.slice().buffer);(M=this._worker)==null||M.postMessage({sortData:{positions:P,transforms:F,transformIndices:N,vertexCount:this.renderData.vertexCount}},[P.buffer,F.buffer,N.buffer]),this.renderData.dataChanged=!1,this.renderData.transformsChanged=!1,this.renderData.colorTransformsChanged=!1}this._camera.update(),(T=this._worker)==null||T.postMessage({viewProj:this._camera.data.viewProj.buffer}),r.viewport(0,0,i.width,i.height),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFuncSeparate(r.ONE_MINUS_DST_ALPHA,r.ONE,r.ONE_MINUS_DST_ALPHA,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD),r.uniformMatrix4fv(s,!1,this._camera.data.projectionMatrix.buffer),r.uniformMatrix4fv(l,!1,this._camera.data.viewMatrix.buffer),r.bindBuffer(r.ARRAY_BUFFER,b),r.vertexAttribPointer(p,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,_),r.bufferData(r.ARRAY_BUFFER,this.depthIndex,r.STATIC_DRAW),r.vertexAttribIPointer(A,1,r.INT,0,0),r.vertexAttribDivisor(A,1),r.drawArraysInstanced(r.TRIANGLE_FAN,0,4,this.depthIndex.length)},this._dispose=()=>{var M;if(!this._scene||!this._camera||!this.renderData){console.error("Cannot dispose without scene and camera");return}this._scene.removeEventListener("objectAdded",y),this._scene.removeEventListener("objectRemoved",E);for(const T of this._scene.objects)T instanceof Ln&&T.removeEventListener("objectChanged",S);(M=this._worker)==null||M.terminate(),this.renderData.dispose(),r.deleteTexture(this.splatTexture),r.deleteTexture(C),r.deleteTexture(v),r.deleteBuffer(_),r.deleteBuffer(b)},this._setOutlineThickness=M=>{this._outlineThickness=M,this._initialized&&r.uniform1f(f,M)},this._setOutlineColor=M=>{this._outlineColor=M,this._initialized&&r.uniform4fv(m,new Float32Array(M.flatNorm()))}}get renderData(){return this._renderData}get depthIndex(){return this._depthIndex}get splatTexture(){return this._splatTexture}get outlineThickness(){return this._outlineThickness}set outlineThickness(e){this._setOutlineThickness(e)}get outlineColor(){return this._outlineColor}set outlineColor(e){this._setOutlineColor(e)}get worker(){return this._worker}_getVertexSource(){return v8}_getFragmentSource(){return y8}}class $T{constructor(e=1){let t=0,i=!1,r,s,a,o;this.initialize=l=>{if(!(l instanceof Mv))throw new Error("FadeInPass requires a RenderProgram");t=l.started?1:0,i=!0,r=l,s=l.renderer.gl,a=s.getUniformLocation(r.program,"useDepthFade"),s.uniform1i(a,1),o=s.getUniformLocation(r.program,"depthFade"),s.uniform1f(o,t)},this.render=()=>{var l;!i||(l=r.renderData)!=null&&l.updating||(s.useProgram(r.program),t=Math.min(t+e*.01,1),t>=1&&(i=!1,s.uniform1i(a,0)),s.uniform1f(o,t))}}dispose(){}}class w8{constructor(e=null,t=null){this._backgroundColor=new Sv;const i=e||document.createElement("canvas");e||(i.style.display="block",i.style.boxSizing="border-box",i.style.width="100%",i.style.height="100%",i.style.margin="0",i.style.padding="0",document.body.appendChild(i)),i.style.background=this._backgroundColor.toHexString(),this._canvas=i,this._gl=i.getContext("webgl2",{antialias:!1});const r=t||[];t||r.push(new $T),this._renderProgram=new Mv(this,r);const s=[this._renderProgram];this.resize=()=>{const a=i.clientWidth,o=i.clientHeight;(i.width!==a||i.height!==o)&&this.setSize(a,o)},this.setSize=(a,o)=>{i.width=a,i.height=o,this._gl.viewport(0,0,i.width,i.height);for(const l of s)l.resize()},this.render=(a,o)=>{for(const l of s)l.render(a,o)},this.dispose=()=>{for(const a of s)a.dispose()},this.addProgram=a=>{s.push(a)},this.removeProgram=a=>{const o=s.indexOf(a);if(o<0)throw new Error("Program not found");s.splice(o,1)},this.resize()}get canvas(){return this._canvas}get gl(){return this._gl}get renderProgram(){return this._renderProgram}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e,this._canvas.style.background=e.toHexString()}}class E8{constructor(e,t,i=.5,r=.5,s=5,a=!0,o=new ze){this.minAngle=-90,this.maxAngle=90,this.minZoom=.1,this.maxZoom=30,this.orbitSpeed=1,this.panSpeed=1,this.zoomSpeed=1,this.dampening=.12,this.setCameraTarget=()=>{};let l=o.clone(),c=l.clone(),h=i,u=r,d=s,g=!1,f=!1,m=0,p=0,A=0;const C={};let v=!1;const I=()=>{if(v)return;const N=e.rotation.toEuler();h=-N.y,u=-N.x;const L=e.position.x-d*Math.sin(h)*Math.cos(u),W=e.position.y+d*Math.sin(u),ne=e.position.z+d*Math.cos(h)*Math.cos(u);c=new ze(L,W,ne)};e.addEventListener("objectChanged",I),this.setCameraTarget=N=>{const L=N.x-e.position.x,W=N.y-e.position.y,ne=N.z-e.position.z;d=Math.sqrt(L*L+W*W+ne*ne),u=Math.atan2(W,Math.sqrt(L*L+ne*ne)),h=-Math.atan2(L,ne),c=new ze(N.x,N.y,N.z)};const w=()=>.1+.9*(d-this.minZoom)/(this.maxZoom-this.minZoom),b=N=>{C[N.code]=!0,N.code==="ArrowUp"&&(C.KeyW=!0),N.code==="ArrowDown"&&(C.KeyS=!0),N.code==="ArrowLeft"&&(C.KeyA=!0),N.code==="ArrowRight"&&(C.KeyD=!0)},_=N=>{C[N.code]=!1,N.code==="ArrowUp"&&(C.KeyW=!1),N.code==="ArrowDown"&&(C.KeyS=!1),N.code==="ArrowLeft"&&(C.KeyA=!1),N.code==="ArrowRight"&&(C.KeyD=!1)},x=N=>{F(N),g=!0,f=N.button===2,p=N.clientX,A=N.clientY,window.addEventListener("mouseup",y)},y=N=>{F(N),g=!1,f=!1,window.removeEventListener("mouseup",y)},E=N=>{if(F(N),!g||!e)return;const L=N.clientX-p,W=N.clientY-A;if(f){const ne=w(),de=-L*this.panSpeed*.01*ne,ee=-W*this.panSpeed*.01*ne,Me=Cn.RotationFromQuaternion(e.rotation).buffer,G=new ze(Me[0],Me[3],Me[6]),te=new ze(Me[1],Me[4],Me[7]);c=c.add(G.multiply(de)),c=c.add(te.multiply(ee))}else h-=L*this.orbitSpeed*.003,u+=W*this.orbitSpeed*.003,u=Math.min(Math.max(u,this.minAngle*Math.PI/180),this.maxAngle*Math.PI/180);p=N.clientX,A=N.clientY},S=N=>{F(N);const L=w();d+=N.deltaY*this.zoomSpeed*.025*L,d=Math.min(Math.max(d,this.minZoom),this.maxZoom)},R=N=>{if(F(N),N.touches.length===1)g=!0,f=!1,p=N.touches[0].clientX,A=N.touches[0].clientY,m=0;else if(N.touches.length===2){g=!0,f=!0,p=(N.touches[0].clientX+N.touches[1].clientX)/2,A=(N.touches[0].clientY+N.touches[1].clientY)/2;const L=N.touches[0].clientX-N.touches[1].clientX,W=N.touches[0].clientY-N.touches[1].clientY;m=Math.sqrt(L*L+W*W)}},M=N=>{F(N),g=!1,f=!1},T=N=>{if(F(N),!(!g||!e))if(f){const L=w(),W=N.touches[0].clientX-N.touches[1].clientX,ne=N.touches[0].clientY-N.touches[1].clientY,de=Math.sqrt(W*W+ne*ne),ee=m-de;d+=ee*this.zoomSpeed*.1*L,d=Math.min(Math.max(d,this.minZoom),this.maxZoom),m=de;const Me=(N.touches[0].clientX+N.touches[1].clientX)/2,G=(N.touches[0].clientY+N.touches[1].clientY)/2,te=Me-p,we=G-A,le=Cn.RotationFromQuaternion(e.rotation).buffer,xe=new ze(le[0],le[3],le[6]),Re=new ze(le[1],le[4],le[7]);c=c.add(xe.multiply(-te*this.panSpeed*.025*L)),c=c.add(Re.multiply(-we*this.panSpeed*.025*L)),p=Me,A=G}else{const L=N.touches[0].clientX-p,W=N.touches[0].clientY-A;h-=L*this.orbitSpeed*.003,u+=W*this.orbitSpeed*.003,u=Math.min(Math.max(u,this.minAngle*Math.PI/180),this.maxAngle*Math.PI/180),p=N.touches[0].clientX,A=N.touches[0].clientY}},P=(N,L,W)=>(1-W)*N+W*L;this.update=()=>{v=!0,i=P(i,h,this.dampening),r=P(r,u,this.dampening),s=P(s,d,this.dampening),l=l.lerp(c,this.dampening);const N=l.x+s*Math.sin(i)*Math.cos(r),L=l.y-s*Math.sin(r),W=l.z-s*Math.cos(i)*Math.cos(r);e.position=new ze(N,L,W);const ne=l.subtract(e.position).normalize(),de=Math.asin(-ne.y),ee=Math.atan2(ne.x,ne.z);e.rotation=ti.FromEuler(new ze(de,ee,0));const Me=.025,G=.01,te=Cn.RotationFromQuaternion(e.rotation).buffer,we=new ze(-te[2],-te[5],-te[8]),le=new ze(te[0],te[3],te[6]);C.KeyS&&(c=c.add(we.multiply(Me))),C.KeyW&&(c=c.subtract(we.multiply(Me))),C.KeyA&&(c=c.subtract(le.multiply(Me))),C.KeyD&&(c=c.add(le.multiply(Me))),C.KeyE&&(h+=G),C.KeyQ&&(h-=G),C.KeyR&&(u+=G),C.KeyF&&(u-=G),v=!1};const F=N=>{N.preventDefault(),N.stopPropagation()};this.dispose=()=>{t.removeEventListener("dragenter",F),t.removeEventListener("dragover",F),t.removeEventListener("dragleave",F),t.removeEventListener("contextmenu",F),t.removeEventListener("mousedown",x),t.removeEventListener("mousemove",E),t.removeEventListener("wheel",S),t.removeEventListener("touchstart",R),t.removeEventListener("touchend",M),t.removeEventListener("touchmove",T),a&&(window.removeEventListener("keydown",b),window.removeEventListener("keyup",_))},a&&(window.addEventListener("keydown",b),window.addEventListener("keyup",_)),t.addEventListener("dragenter",F),t.addEventListener("dragover",F),t.addEventListener("dragleave",F),t.addEventListener("contextmenu",F),t.addEventListener("mousedown",x),t.addEventListener("mousemove",E),t.addEventListener("wheel",S),t.addEventListener("touchstart",R),t.addEventListener("touchend",M),t.addEventListener("touchmove",T),this.update()}}class b8{constructor(e,t){this.moveSpeed=1.5,this.lookSpeed=.7,this.dampening=.5;const i={};let r=e.rotation.toEuler().x,s=e.rotation.toEuler().y,a=e.position,o=!1;const l=()=>{t.requestPointerLock()},c=()=>{o=document.pointerLockElement===t,o?t.addEventListener("mousemove",h):t.removeEventListener("mousemove",h)},h=f=>{const m=f.movementX,p=f.movementY;s+=m*this.lookSpeed*.001,r-=p*this.lookSpeed*.001,r=Math.max(-Math.PI/2,Math.min(Math.PI/2,r))},u=f=>{i[f.code]=!0,f.code==="ArrowUp"&&(i.KeyW=!0),f.code==="ArrowDown"&&(i.KeyS=!0),f.code==="ArrowLeft"&&(i.KeyA=!0),f.code==="ArrowRight"&&(i.KeyD=!0)},d=f=>{i[f.code]=!1,f.code==="ArrowUp"&&(i.KeyW=!1),f.code==="ArrowDown"&&(i.KeyS=!1),f.code==="ArrowLeft"&&(i.KeyA=!1),f.code==="ArrowRight"&&(i.KeyD=!1),f.code==="Escape"&&document.exitPointerLock()};this.update=()=>{const f=Cn.RotationFromQuaternion(e.rotation).buffer,m=new ze(-f[2],-f[5],-f[8]),p=new ze(f[0],f[3],f[6]);let A=new ze(0,0,0);i.KeyS&&(A=A.add(m)),i.KeyW&&(A=A.subtract(m)),i.KeyA&&(A=A.subtract(p)),i.KeyD&&(A=A.add(p)),A=new ze(A.x,0,A.z),A.magnitude()>0&&(A=A.normalize()),a=a.add(A.multiply(this.moveSpeed*.01)),e.position=e.position.add(a.subtract(e.position).multiply(this.dampening)),e.rotation=ti.FromEuler(new ze(r,s,0))};const g=f=>{f.preventDefault(),f.stopPropagation()};this.dispose=()=>{t.removeEventListener("dragenter",g),t.removeEventListener("dragover",g),t.removeEventListener("dragleave",g),t.removeEventListener("contextmenu",g),t.removeEventListener("mousedown",l),document.removeEventListener("pointerlockchange",c),window.removeEventListener("keydown",u),window.removeEventListener("keyup",d)},window.addEventListener("keydown",u),window.addEventListener("keyup",d),t.addEventListener("dragenter",g),t.addEventListener("dragover",g),t.addEventListener("dragleave",g),t.addEventListener("contextmenu",g),t.addEventListener("mousedown",l),document.addEventListener("pointerlockchange",c),this.update()}}class _8{constructor(e,t){this.normal=e,this.point=t}intersect(e,t){const i=this.normal.dot(t);if(Math.abs(i)<1e-4)return null;const r=this.normal.dot(this.point.subtract(e))/i;return r<0?null:e.add(t.multiply(r))}}class x8{initialize(e){}render(){}dispose(){}}const S8=`#version 300 es
precision highp float;
precision highp int;
  
uniform highp usampler2D u_texture;
uniform mat4 projection, view;
uniform vec2 focal;
uniform vec2 viewport;
uniform float time;
  
in vec2 position;
in int index;
  
out vec4 vColor;
out vec2 vPosition;
  
void main () {
    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);

    uvec4 motion1 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 3u, uint(index) >> 10), 0);
    vec2 trbf = unpackHalf2x16(motion1.w);
    float dt = time - trbf.x;

    float topacity = exp(-1.0 * pow(dt / trbf.y, 2.0));
    if(topacity < 0.02) return;

    uvec4 motion0 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 2u, uint(index) >> 10), 0);
    uvec4 static0 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2), uint(index) >> 10), 0);

    vec2 m0 = unpackHalf2x16(motion0.x), m1 = unpackHalf2x16(motion0.y), m2 = unpackHalf2x16(motion0.z), 
         m3 = unpackHalf2x16(motion0.w), m4 = unpackHalf2x16(motion1.x); 
      
    vec4 trot = vec4(unpackHalf2x16(motion1.y).xy, unpackHalf2x16(motion1.z).xy) * dt;
    vec3 tpos = (vec3(m0.xy, m1.x) * dt + vec3(m1.y, m2.xy) * dt*dt + vec3(m3.xy, m4.x) * dt*dt*dt);
      
    vec4 cam = view * vec4(uintBitsToFloat(static0.xyz) + tpos, 1);
    vec4 pos = projection * cam;
  
    float clip = 1.2 * pos.w;
    if (pos.z < -clip || pos.x < -clip || pos.x > clip || pos.y < -clip || pos.y > clip) return;
    uvec4 static1 = texelFetch(u_texture, ivec2(((uint(index) & 0x3ffu) << 2) | 1u, uint(index) >> 10), 0);

    vec4 rot = vec4(unpackHalf2x16(static0.w).xy, unpackHalf2x16(static1.x).xy) + trot;
    vec3 scale = vec3(unpackHalf2x16(static1.y).xy, unpackHalf2x16(static1.z).x);
    rot /= sqrt(dot(rot, rot));
  
    mat3 S = mat3(scale.x, 0.0, 0.0, 0.0, scale.y, 0.0, 0.0, 0.0, scale.z);
    mat3 R = mat3(
        1.0 - 2.0 * (rot.z * rot.z + rot.w * rot.w), 2.0 * (rot.y * rot.z - rot.x * rot.w), 2.0 * (rot.y * rot.w + rot.x * rot.z),
        2.0 * (rot.y * rot.z + rot.x * rot.w), 1.0 - 2.0 * (rot.y * rot.y + rot.w * rot.w), 2.0 * (rot.z * rot.w - rot.x * rot.y),
        2.0 * (rot.y * rot.w - rot.x * rot.z), 2.0 * (rot.z * rot.w + rot.x * rot.y), 1.0 - 2.0 * (rot.y * rot.y + rot.z * rot.z));
    mat3 M = S * R;
    mat3 Vrk = 4.0 * transpose(M) * M;
    mat3 J = mat3(
        focal.x / cam.z, 0., -(focal.x * cam.x) / (cam.z * cam.z), 
        0., -focal.y / cam.z, (focal.y * cam.y) / (cam.z * cam.z), 
        0., 0., 0.
    );
  
    mat3 T = transpose(mat3(view)) * J;
    mat3 cov2d = transpose(T) * Vrk * T;
  
    float mid = (cov2d[0][0] + cov2d[1][1]) / 2.0;
    float radius = length(vec2((cov2d[0][0] - cov2d[1][1]) / 2.0, cov2d[0][1]));
    float lambda1 = mid + radius, lambda2 = mid - radius;
  
    if(lambda2 < 0.0) return;
    vec2 diagonalVector = normalize(vec2(cov2d[0][1], lambda1 - cov2d[0][0]));
    vec2 majorAxis = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
    vec2 minorAxis = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);
      
    uint rgba = static1.w;
    vColor = 
        clamp(pos.z/pos.w+1.0, 0.0, 1.0) * 
        vec4(1.0, 1.0, 1.0, topacity) *
        vec4(
            (rgba) & 0xffu, 
            (rgba >> 8) & 0xffu, 
            (rgba >> 16) & 0xffu, 
            (rgba >> 24) & 0xffu) / 255.0;

    vec2 vCenter = vec2(pos) / pos.w;
    gl_Position = vec4(
        vCenter 
        + position.x * majorAxis / viewport 
        + position.y * minorAxis / viewport, 0.0, 1.0);

    vPosition = position;
}
`,M8=`#version 300 es
precision highp float;
  
in vec4 vColor;
in vec2 vPosition;

out vec4 fragColor;

void main () {
    float A = -dot(vPosition, vPosition);
    if (A < -4.0) discard;
    float B = exp(A) * vColor.a;
    fragColor = vec4(B * vColor.rgb, B);
}
`;class R8 extends xv{constructor(e,t=[]){super(e,t),this._renderData=null,this._depthIndex=new Uint32Array,this._splatTexture=null;const i=e.canvas,r=e.gl;let s,a,o,l,c,h,u,d,g,f,m;this._resize=()=>{this._camera&&(this._camera.data.setSize(i.width,i.height),this._camera.update(),a=r.getUniformLocation(this.program,"projection"),r.uniformMatrix4fv(a,!1,this._camera.data.projectionMatrix.buffer),o=r.getUniformLocation(this.program,"viewport"),r.uniform2fv(o,new Float32Array([i.width,i.height])))};const p=()=>{if(e.renderProgram.worker===null){console.error("Render program is not initialized. Cannot render without worker");return}s=e.renderProgram.worker,s.onmessage=I=>{if(I.data.depthIndex){const{depthIndex:w}=I.data;this._depthIndex=w,r.bindBuffer(r.ARRAY_BUFFER,m),r.bufferData(r.ARRAY_BUFFER,w,r.STATIC_DRAW)}}};this._initialize=()=>{if(!this._scene||!this._camera){console.error("Cannot render without scene and camera");return}this._resize(),this._scene.addEventListener("objectAdded",A),this._scene.addEventListener("objectRemoved",C);for(const _ of this._scene.objects)_ instanceof ho&&(this._renderData===null?(this._renderData=_.data,_.addEventListener("objectChanged",v)):console.warn("Multiple Splatv objects are not currently supported"));if(this._renderData===null){console.error("Cannot render without Splatv object");return}l=r.getUniformLocation(this.program,"focal"),r.uniform2fv(l,new Float32Array([this._camera.data.fx,this._camera.data.fy])),c=r.getUniformLocation(this.program,"view"),r.uniformMatrix4fv(c,!1,this._camera.data.viewMatrix.buffer),this._splatTexture=r.createTexture(),h=r.getUniformLocation(this.program,"u_texture"),r.uniform1i(h,0),u=r.getUniformLocation(this.program,"time"),r.uniform1f(u,Math.sin(Date.now()/1e3)/2+1/2),f=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-2,-2,2,-2,2,2,-2,2]),r.STATIC_DRAW),d=r.getAttribLocation(this.program,"position"),r.enableVertexAttribArray(d),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0),m=r.createBuffer(),g=r.getAttribLocation(this.program,"index"),r.enableVertexAttribArray(g),r.bindBuffer(r.ARRAY_BUFFER,m),p(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this._splatTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.RGBA32UI,this._renderData.width,this._renderData.height,0,r.RGBA_INTEGER,r.UNSIGNED_INT,this._renderData.data);const I=this._renderData.positions,w=new Float32Array(new In().buffer),b=new Uint32Array(this._renderData.vertexCount);b.fill(0),s.postMessage({sortData:{positions:I,transforms:w,transformIndices:b,vertexCount:this._renderData.vertexCount}},[I.buffer,w.buffer,b.buffer])};const A=I=>{const w=I;w.object instanceof ho&&(this._renderData===null?(this._renderData=w.object.data,w.object.addEventListener("objectChanged",v)):console.warn("Splatv not supported by default RenderProgram. Use VideoRenderProgram instead.")),this.dispose()},C=I=>{const w=I;w.object instanceof ho&&this._renderData===w.object.data&&(this._renderData=null,w.object.removeEventListener("objectChanged",v)),this.dispose()},v=I=>{const w=I;w.object instanceof ho&&this._renderData===w.object.data&&this.dispose()};this._render=()=>{if(!this._scene||!this._camera){console.error("Cannot render without scene and camera");return}if(!this._renderData){console.warn("Cannot render without Splatv object");return}this._camera.update(),s.postMessage({viewProj:this._camera.data.viewProj.buffer}),r.viewport(0,0,i.width,i.height),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFuncSeparate(r.ONE_MINUS_DST_ALPHA,r.ONE,r.ONE_MINUS_DST_ALPHA,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD),r.uniformMatrix4fv(a,!1,this._camera.data.projectionMatrix.buffer),r.uniformMatrix4fv(c,!1,this._camera.data.viewMatrix.buffer),r.uniform1f(u,Math.sin(Date.now()/1e3)/2+1/2),r.bindBuffer(r.ARRAY_BUFFER,f),r.vertexAttribPointer(d,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,m),r.bufferData(r.ARRAY_BUFFER,this._depthIndex,r.STATIC_DRAW),r.vertexAttribIPointer(g,1,r.INT,0,0),r.vertexAttribDivisor(g,1),r.drawArraysInstanced(r.TRIANGLE_FAN,0,4,this._renderData.vertexCount)},this._dispose=()=>{if(!this._scene||!this._camera){console.error("Cannot dispose without scene and camera");return}this._scene.removeEventListener("objectAdded",A),this._scene.removeEventListener("objectRemoved",C);for(const I of this._scene.objects)I instanceof ho&&this._renderData===I.data&&(this._renderData=null,I.removeEventListener("objectChanged",v));s==null||s.terminate(),r.deleteTexture(this._splatTexture),r.deleteBuffer(m),r.deleteBuffer(f)}}get renderData(){return this._renderData}_getVertexSource(){return S8}_getFragmentSource(){return M8}}class Ef{constructor(e,t,i){this.bounds=e,this.boxes=t,this.left=null,this.right=null,this.pointIndices=[],i.length>1?this.split(e,t,i):i.length>0&&(this.pointIndices=i)}split(e,t,i){const r=e.size().maxComponent();i.sort((l,c)=>t[l].center().getComponent(r)-t[c].center().getComponent(r));const s=Math.floor(i.length/2),a=i.slice(0,s),o=i.slice(s);this.left=new Ef(e,t,a),this.right=new Ef(e,t,o)}queryRange(e){return this.bounds.intersects(e)?this.left!==null&&this.right!==null?this.left.queryRange(e).concat(this.right.queryRange(e)):this.pointIndices.filter(t=>e.intersects(this.boxes[t])):[]}}class T8{constructor(e,t){const i=t.map((r,s)=>s);this.root=new Ef(e,t,i)}queryRange(e){return this.root.queryRange(e)}}class U8{constructor(e,t=100,i=1){let r=0,s=null,a=[];const o=()=>{if(e.renderData===null){console.error("IntersectionTester cannot be called before renderProgram has been initialized");return}a=[];const l=e.renderData,c=new Array(l.offsets.size);let h=0;const u=new Gh(new ze(1/0,1/0,1/0),new ze(-1/0,-1/0,-1/0));for(const d of l.offsets.keys()){const g=d.bounds;c[h++]=g,u.expand(g.min),u.expand(g.max),a.push(d)}u.permute(),s=new T8(u,c),r=l.vertexCount};this.testPoint=(l,c)=>{if(e.renderData===null||e.camera===null)return console.error("IntersectionTester cannot be called before renderProgram has been initialized"),null;if(o(),s===null)return console.error("Failed to build octree for IntersectionTester"),null;const h=e.renderData,u=e.camera;r!==h.vertexCount&&console.warn("IntersectionTester has not been rebuilt since the last render");const d=u.screenPointToRay(l,c);for(let g=0;g<t;g+=i){const f=u.position.add(d.multiply(g)),m=new ze(f.x-i/2,f.y-i/2,f.z-i/2),p=new ze(f.x+i/2,f.y+i/2,f.z+i/2),A=new Gh(m,p),C=s.queryRange(A);if(C.length>0)return a[C[0]]}return null}}}const F8=Object.freeze(Object.defineProperty({__proto__:null,Camera:l8,CameraData:YT,Color32:Sv,FPSControls:b8,FadeInPass:$T,IntersectionTester:U8,Loader:h8,Matrix3:Cn,Matrix4:In,Object3D:pp,OrbitControls:E8,PLYLoader:u8,Plane:_8,Quaternion:ti,RenderData:TI,RenderProgram:Mv,Scene:c8,ShaderPass:x8,ShaderProgram:xv,Splat:Ln,SplatData:jr,Splatv:ho,SplatvData:JT,SplatvLoader:d8,Vector3:ze,Vector4:Rn,VideoRenderProgram:R8,WebGLRenderer:w8},Symbol.toStringTag,{value:"Module"}));function eU(n,e,t={}){const i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties={},i.geometry=n,i}function B8(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!fx(n[0])||!fx(n[1]))throw new Error("coordinates must contain numbers");return eU({type:"Point",coordinates:n},e,t)}function D8(n,e,t={}){for(const r of n){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<r[r.length-1].length;s++)if(r[r.length-1][s]!==r[0][s])throw new Error("First and last Position are not equivalent.")}return eU({type:"Polygon",coordinates:n},e,t)}function fx(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function L8(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function P8(n){return n.type==="Feature"?n.geometry:n}const Bs=11102230246251565e-32,en=134217729,N8=(3+8*Bs)*Bs;function Bm(n,e,t,i,r){let s,a,o,l,c=e[0],h=i[0],u=0,d=0;h>c==h>-c?(s=c,c=e[++u]):(s=h,h=i[++d]);let g=0;if(u<n&&d<t)for(h>c==h>-c?(a=c+s,o=s-(a-c),c=e[++u]):(a=h+s,o=s-(a-h),h=i[++d]),s=a,o!==0&&(r[g++]=o);u<n&&d<t;)h>c==h>-c?(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++u]):(a=s+h,l=a-s,o=s-(a-l)+(h-l),h=i[++d]),s=a,o!==0&&(r[g++]=o);for(;u<n;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=e[++u],s=a,o!==0&&(r[g++]=o);for(;d<t;)a=s+h,l=a-s,o=s-(a-l)+(h-l),h=i[++d],s=a,o!==0&&(r[g++]=o);return(s!==0||g===0)&&(r[g++]=s),g}function k8(n,e){let t=e[0];for(let i=1;i<n;i++)t+=e[i];return t}function od(n){return new Float64Array(n)}const Q8=(3+16*Bs)*Bs,O8=(2+12*Bs)*Bs,V8=(9+64*Bs)*Bs*Bs,Bl=od(4),px=od(8),Ax=od(12),mx=od(16),dn=od(4);function z8(n,e,t,i,r,s,a){let o,l,c,h,u,d,g,f,m,p,A,C,v,I,w,b,_,x;const y=n-r,E=t-r,S=e-s,R=i-s;I=y*R,d=en*y,g=d-(d-y),f=y-g,d=en*R,m=d-(d-R),p=R-m,w=f*p-(I-g*m-f*m-g*p),b=S*E,d=en*S,g=d-(d-S),f=S-g,d=en*E,m=d-(d-E),p=E-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,Bl[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,Bl[1]=v-(A+u)+(u-b),x=C+A,u=x-C,Bl[2]=C-(x-u)+(A-u),Bl[3]=x;let M=k8(4,Bl),T=O8*a;if(M>=T||-M>=T||(u=n-y,o=n-(y+u)+(u-r),u=t-E,c=t-(E+u)+(u-r),u=e-S,l=e-(S+u)+(u-s),u=i-R,h=i-(R+u)+(u-s),o===0&&l===0&&c===0&&h===0)||(T=V8*a+N8*Math.abs(M),M+=y*h+R*o-(S*c+E*l),M>=T||-M>=T))return M;I=o*R,d=en*o,g=d-(d-o),f=o-g,d=en*R,m=d-(d-R),p=R-m,w=f*p-(I-g*m-f*m-g*p),b=l*E,d=en*l,g=d-(d-l),f=l-g,d=en*E,m=d-(d-E),p=E-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,dn[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,dn[1]=v-(A+u)+(u-b),x=C+A,u=x-C,dn[2]=C-(x-u)+(A-u),dn[3]=x;const P=Bm(4,Bl,4,dn,px);I=y*h,d=en*y,g=d-(d-y),f=y-g,d=en*h,m=d-(d-h),p=h-m,w=f*p-(I-g*m-f*m-g*p),b=S*c,d=en*S,g=d-(d-S),f=S-g,d=en*c,m=d-(d-c),p=c-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,dn[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,dn[1]=v-(A+u)+(u-b),x=C+A,u=x-C,dn[2]=C-(x-u)+(A-u),dn[3]=x;const F=Bm(P,px,4,dn,Ax);I=o*h,d=en*o,g=d-(d-o),f=o-g,d=en*h,m=d-(d-h),p=h-m,w=f*p-(I-g*m-f*m-g*p),b=l*c,d=en*l,g=d-(d-l),f=l-g,d=en*c,m=d-(d-c),p=c-m,_=f*p-(b-g*m-f*m-g*p),A=w-_,u=w-A,dn[0]=w-(A+u)+(u-_),C=I+A,u=C-I,v=I-(C-u)+(A-u),A=v-b,u=v-A,dn[1]=v-(A+u)+(u-b),x=C+A,u=x-C,dn[2]=C-(x-u)+(A-u),dn[3]=x;const N=Bm(F,Ax,4,dn,mx);return mx[N-1]}function G8(n,e,t,i,r,s){const a=(e-s)*(t-r),o=(n-r)*(i-s),l=a-o,c=Math.abs(a+o);return Math.abs(l)>=Q8*c?l:-z8(n,e,t,i,r,s,c)}function W8(n,e){var t,i,r=0,s,a,o,l,c,h,u,d=n[0],g=n[1],f=e.length;for(t=0;t<f;t++){i=0;var m=e[t],p=m.length-1;if(h=m[0],h[0]!==m[p][0]&&h[1]!==m[p][1])throw new Error("First and last coordinates in a ring must be the same");for(a=h[0]-d,o=h[1]-g,i;i<p;i++){if(u=m[i+1],l=u[0]-d,c=u[1]-g,o===0&&c===0){if(l<=0&&a>=0||a<=0&&l>=0)return 0}else if(c>=0&&o<=0||c<=0&&o>=0){if(s=G8(a,l,o,c,0,0),s===0)return 0;(s>0&&c>0&&o<=0||s<0&&c<=0&&o>0)&&r++}h=u,o=c,a=l}}return r%2!==0}function Z8(n,e,t={}){if(!n)throw new Error("point is required");if(!e)throw new Error("polygon is required");const i=L8(n),r=P8(e),s=r.type,a=e.bbox;let o=r.coordinates;if(a&&H8(i,a)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var c=0;c<o.length;++c){const h=W8(i,o[c]);if(h===0)return!t.ignoreBoundary;h&&(l=!0)}return l}function H8(n,e){return e[0]<=n[0]&&e[1]<=n[1]&&e[2]>=n[0]&&e[3]>=n[1]}function Cx(n){var t;if(n.includes("youtube.com")||n.includes("youtu.be"))return"youtube";switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"mp4":case"webm":return"video";case"obj":return"3dmodel";case"splat":case"ply":return"gaussian";default:return"image"}}function tU(n,e,t,i=!0){if(e.innerHTML="",t.url||t.html){const r=wn(`<div class="${n.enablePoiHtmlNoScroll?"":" embed-responsive embed-responsive-60vh"}">
    <iframe class="poi_iframe iframe_poi" frameborder="0" src=""${n.enablePoiHtmlNoScroll?` onload="window.addEventListener('message', (e) =>{if (e.data[0] == 'setHeight') {this.style.height = e.data[1];}});" scrolling="no"`:""}></iframe>
    </div>`)[0];e.appendChild(r);const s=r.querySelector(".poi_iframe");if(t.html){const a=o=>{if(!o.currentTarget)return;o.currentTarget.removeEventListener(o.type,a);const l=wn(`<style type="text/css">html, body { height: 100vh; margin: 0; padding: 0; }
 img { width: 100%; }</style>`),c=wn(`<script>
                const heightGetter = document.querySelector("#heightGetter");
                const resizeObserver = new ResizeObserver(entries => {
                  window.parent.postMessage(["setHeight", (entries[0].target.clientHeight + 16) + "px"], "*");
                });
                if(heightGetter) resizeObserver.observe(heightGetter);
              <\/script>`);s.contentDocument.head.appendChild(l[0]),s.contentDocument.head.appendChild(c[0])};s.addEventListener("load",a),s.removeAttribute("src"),s.setAttribute("srcdoc",`<div id="heightGetter">${n.translate(t.html)||""}</div>`)}else s.removeAttribute("srcdoc"),s.setAttribute("src",n.translate(t.url)||"")}else{const r=[],s=t.media||t.image,a=s?Array.isArray(s)?s:[s]:[];let o="";a.length>0&&(a.forEach(u=>{let d;typeof u=="string"?d={src:u,type:Cx(u)}:(d={...u},d.type||(d.type=Cx(d.src)),d.desc&&!d.caption&&(d.caption=d.desc));const g=DC(d.src,"img");let f=`image-url="${g}" image-type="${d.type}"`;d.thumbnail?f+=` thumbnail-url="${DC(d.thumbnail,"img")}"`:d.type==="image"&&(f+=` thumbnail-url="${g}"`);for(const m of Object.keys(d)){if(["src","type","thumbnail","desc"].includes(m))continue;const p=d[m];typeof p=="boolean"?p&&(f+=` ${m}`):p!=null&&(f+=` ${m}="${p}"`)}r.push(`<cc-swiper-slide ${f}></cc-swiper-slide>`)}),o=`    <div class="col-xs-12 poi_img_swiper">
      <cc-swiper>${r.join("")}</cc-swiper>
    </div>`);const l=wn(`<div class="poi_data">
      ${o}
    <p class="recipient poi_address"></p>
    <p class="recipient poi_desc"></p>
    </div>`)[0];if(e.appendChild(l),!document.getElementById("poi-swiper-style")){const u=document.createElement("style");u.id="poi-swiper-style",u.innerHTML=`
            cc-swiper { --cc-slider-theme-color: #007aff; --cc-slider-navigation-color: #007aff; height: 300px; }
            cc-viewer { --cc-viewer-z-index: 100000; }
          `,document.head.appendChild(u)}l.querySelector(".poi_address").innerText=n.translate(t.address)||"",l.querySelector(".poi_desc").innerHTML=(n.translate(t.desc)||"").replace(/\n/g,"<br>");const c=n.core.mapDivDocument.querySelector(".poi_share_buttons"),h=n.core.mapDivDocument.querySelector(".qr_view_poi");i?(c==null||c.classList.remove("hide"),h==null||h.classList.remove("hide"),h&&lW.toCanvas(window.location.href,{width:128,margin:1},(u,d)=>{u||(h.innerHTML="",h.appendChild(d))})):(c==null||c.classList.add("hide"),h==null||h.classList.add("hide"))}}function iU(n,e){var l,c;const t=n.core.mapDivDocument.querySelector(".modalBase"),i=xo(t);if(e.directgo){let h=!1,u="";typeof e.directgo=="string"?u=e.directgo:(u=e.directgo.href,h=e.directgo.blank||!1),h?window.open(u,"_blank"):window.location.href=u;return}const r=n.core.mapDivDocument.querySelector(".modal_poi_title")||n.core.mapDivDocument.querySelector(".modal_title");r&&(r.innerText=n.translate(e.name)||"");let s=n.core.mapDivDocument.querySelector(".poi_web_div");if(!s){const h=n.core.mapDivDocument.querySelector(".modal_poi_content");h&&(s=wn('<div class="poi_web_div"></div>')[0],h.insertBefore(s,h.firstChild))}const a=n.enableShare&&!!n.appOption.stateUrl;tU(n,s,e,a);const o=h=>{var u,d;t.removeEventListener("hidden.bs.modal",o,!1),(d=(u=n.core).unselectMarker)==null||d.call(u),n.selectedMarkerNamespaceID=void 0,n.updateUrl()};t.addEventListener("hidden.bs.modal",o,!1),(c=(l=n.core).selectMarker)==null||c.call(l,e.namespaceID),n.selectedMarkerNamespaceID=e.namespaceID,n.modalSetting("poi"),i.show(),n.updateUrl()}function X8(n,e){var o;if(!n.contextMenu)return;n.contextMenu.clear(),n.contextMenu.extend(e);const t=n.lastClickPixel,i=n.lastClickCoordinate;if(!t){console.warn("[Debug] No lastClickPixel for ContextMenu");return}const r=()=>{n.contextMenu.un("open",r);const l=()=>{n.contextMenu.un("close",l)};n.contextMenu.on("close",l)};n.contextMenu.on("open",r),(o=n.contextMenu.Internal)==null||o.openMenu(t,i);const s=n.core.mapObject.getViewport(),a=l=>{var c;n.contextMenu.Internal.opened&&((c=n.contextMenu.Internal)==null||c.closeMenu(),l.stopPropagation(),s.removeEventListener(l.type,a,!1))};s.addEventListener("pointerdown",a,!1)}async function J8(n,e,t=10){const i=B8(e),r=n.core.mapObject,s=r.getSize(),o=[[0,0],[s[0],0],s,[0,s[1]],[0,0]].map(h=>r.getCoordinateFromPixel(h)),l=await(typeof n.core.from.xy2SysCoord!="function"?Promise.resolve(o):Promise.all(o.map(h=>n.core.from.sysCoord2MercAsync(h)))),c=n.areaIndex(l);return Promise.all(Object.keys(n.core.cacheHash).filter(h=>n.core.cacheHash[h].envelope).map(h=>{const u=n.core.cacheHash[h];return Promise.all([Promise.resolve(u),Promise.all(u.envelope.geometry.coordinates[0].map(d=>n.core.from.merc2SysCoordAsync(d)))])})).then(h=>h.reduce((d,g)=>{const f=g[0],m=g[1];if(f.mapID!==n.core.from.mapID){const p=D8([m]);Z8(i,p)&&d.push(f)}return d},[]).filter(d=>d.envelopeAreaIndex/c<t).sort((d,g)=>d.envelopeAreaIndex-g.envelopeAreaIndex).map(d=>d.mapID))}function j8(n,e){n.core.requestUpdateState({hideMarker:e?1:0}),e?(n.core.hideAllMarkers&&n.core.hideAllMarkers(),n.core.mapDivDocument.classList.add("hide-marker")):(n.core.showAllMarkers&&n.core.showAllMarkers(),n.core.mapDivDocument.classList.remove("hide-marker")),n.core.restoreSession&&n.core.requestUpdateState({hideMarker:e?1:0})}function Y8(n,e){const t=n.overlaySwiper;return Array.from(t.$el[0].querySelectorAll(".swiper-slide")).some(r=>r.getAttribute("data")===e)}function K8(n,e){const t=n.core.getMarker(e);t&&iU(n,t)}const st=n=>typeof n=="string",ch=()=>{let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t},Ix=n=>n==null?"":""+n,q8=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},$8=/###/g,vx=n=>n&&n.indexOf("###")>-1?n.replace($8,"."):n,yx=n=>!n||st(n),Wh=(n,e,t)=>{const i=st(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(yx(n))return{};const s=vx(i[r]);!n[s]&&t&&(n[s]=new t),Object.prototype.hasOwnProperty.call(n,s)?n=n[s]:n={},++r}return yx(n)?{}:{obj:n,k:vx(i[r])}},wx=(n,e,t)=>{const{obj:i,k:r}=Wh(n,e,Object);if(i!==void 0||e.length===1){i[r]=t;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=Wh(n,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=Wh(n,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=t},e9=(n,e,t,i)=>{const{obj:r,k:s}=Wh(n,e,Object);r[s]=r[s]||[],r[s].push(t)},bf=(n,e)=>{const{obj:t,k:i}=Wh(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},t9=(n,e,t)=>{const i=bf(n,t);return i!==void 0?i:bf(e,t)},nU=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?st(n[i])||n[i]instanceof String||st(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):nU(n[i],e[i],t):n[i]=e[i]);return n},Dl=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var i9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const n9=n=>st(n)?n.replace(/[&<>"'\/]/g,e=>i9[e]):n;class r9{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const s9=[" ",",","?","!",";"],a9=new r9(20),o9=(n,e,t)=>{e=e||"",t=t||"";const i=s9.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(i.length===0)return!0;const r=a9.getRegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!r.test(n);if(!s){const a=n.indexOf(t);a>0&&!r.test(n.substring(0,a))&&(s=!0)}return s},UI=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const i=e.split(t);let r=n;for(let s=0;s<i.length;){if(!r||typeof r!="object")return;let a,o="";for(let l=s;l<i.length;++l)if(l!==s&&(o+=t),o+=i[l],a=r[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<i.length-1)continue;s+=l-s+1;break}r=a}return r},Tu=n=>n==null?void 0:n.replace("_","-"),l9={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){var t,i;(i=(t=console==null?void 0:console[n])==null?void 0:t.apply)==null||i.call(t,console,e)}};class _f{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||l9,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(st(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new _f(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _f(this.logger,e)}}var $r=new _f;class Ap{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(t)||0;this.observers[i].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r.apply(r,[e,...t])})}}class Ex extends Ap{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i,r={}){var c,h;const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],i&&(Array.isArray(i)?o.push(...i):st(i)&&s?o.push(...i.split(s)):o.push(i)));const l=bf(this.data,o);return!l&&!t&&!i&&e.indexOf(".")>-1&&(e=o[0],t=o[1],i=o.slice(2).join(".")),l||!a||!st(i)?l:UI((h=(c=this.data)==null?void 0:c[e])==null?void 0:h[t],i,s)}addResource(e,t,i,r,s={silent:!1}){const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),wx(this.data,o,r),s.silent||this.emit("added",e,t,i,r)}addResources(e,t,i,r={silent:!1}){for(const s in i)(st(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,s,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=i,i=t,t=o[1]),this.addNamespaces(t);let l=bf(this.data,o)||{};a.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?nU(l,i,s):l={...l,...i},wx(this.data,o,l),a.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var rU={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,t,i,r))??e}),e}};const sU=Symbol("i18next/PATH_KEY");function c9(){const n=[],e=Object.create(null);let t;return e.get=(i,r)=>{var s;return(s=t==null?void 0:t.revoke)==null||s.call(t),r===sU?n:(n.push(r),t=Proxy.revocable(i,e),t.proxy)},Proxy.revocable(Object.create(null),e).proxy}function FI(n,e){const{[sU]:t}=n(c9());return t.join((e==null?void 0:e.keySeparator)??".")}const bx={},Dm=n=>!st(n)&&typeof n!="boolean"&&typeof n!="number";class xf extends Ap{constructor(e,t={}){super(),q8(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$r.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const i={...t};if(e==null)return!1;const r=this.resolve(e,i);if((r==null?void 0:r.res)===void 0)return!1;const s=Dm(r.res);return!(i.returnObjects===!1&&s)}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!o9(e,i,r);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:st(s)?[s]:s};const c=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(c[0])>-1)&&(s=c.shift()),e=c.join(r)}return{key:e,namespaces:st(s)?[s]:s}}translate(e,t,i){let r=typeof t=="object"?{...t}:t;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=FI(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],r),c=l[l.length-1];let h=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode")return d?s?{res:`${c}${h}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:`${c}${h}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:o;const g=this.resolve(e,r);let f=g==null?void 0:g.res;const m=(g==null?void 0:g.usedKey)||o,p=(g==null?void 0:g.exactUsedKey)||o,A=["[object Number]","[object Function]","[object RegExp]"],C=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,I=r.count!==void 0&&!st(r.count),w=xf.hasDefaultValue(r),b=I?this.pluralResolver.getSuffix(u,r.count,r):"",_=r.ordinal&&I?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",x=I&&!r.ordinal&&r.count===0,y=x&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${b}`]||r[`defaultValue${_}`]||r.defaultValue;let E=f;v&&!f&&w&&(E=y);const S=Dm(E),R=Object.prototype.toString.apply(E);if(v&&E&&S&&A.indexOf(R)<0&&!(st(C)&&Array.isArray(E))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const M=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,E,{...r,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(g.res=M,g.usedParams=this.getUsedParamsDetails(r),g):M}if(a){const M=Array.isArray(E),T=M?[]:{},P=M?p:m;for(const F in E)if(Object.prototype.hasOwnProperty.call(E,F)){const N=`${P}${a}${F}`;w&&!f?T[F]=this.translate(N,{...r,defaultValue:Dm(y)?y[F]:void 0,joinArrays:!1,ns:l}):T[F]=this.translate(N,{...r,joinArrays:!1,ns:l}),T[F]===N&&(T[F]=E[F])}f=T}}else if(v&&st(C)&&Array.isArray(f))f=f.join(C),f&&(f=this.extendTranslation(f,e,r,i));else{let M=!1,T=!1;!this.isValidLookup(f)&&w&&(M=!0,f=y),this.isValidLookup(f)||(T=!0,f=o);const F=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&T?void 0:f,N=w&&y!==f&&this.options.updateMissing;if(T||M||N){if(this.logger.log(N?"updateKey":"missingKey",u,c,o,N?y:f),a){const de=this.resolve(o,{...r,keySeparator:!1});de&&de.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let L=[];const W=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&W&&W[0])for(let de=0;de<W.length;de++)L.push(W[de]);else this.options.saveMissingTo==="all"?L=this.languageUtils.toResolveHierarchy(r.lng||this.language):L.push(r.lng||this.language);const ne=(de,ee,Me)=>{var te;const G=w&&Me!==f?Me:F;this.options.missingKeyHandler?this.options.missingKeyHandler(de,c,ee,G,N,r):(te=this.backendConnector)!=null&&te.saveMissing&&this.backendConnector.saveMissing(de,c,ee,G,N,r),this.emit("missingKey",de,c,ee,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&I?L.forEach(de=>{const ee=this.pluralResolver.getSuffixes(de,r);x&&r[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(Me=>{ne([de],o+Me,r[`defaultValue${Me}`]||y)})}):ne(L,o,y))}f=this.extendTranslation(f,e,r,g,i),T&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${c}${h}${o}`),(T||M)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${h}${o}`:o,M?f:void 0,r))}return s?(g.res=f,g.usedParams=this.getUsedParamsDetails(r),g):f}extendTranslation(e,t,i,r,s){var l,c;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const h=st(e)&&(((c=i==null?void 0:i.interpolation)==null?void 0:c.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(h){const g=e.match(this.interpolator.nestingRegexp);u=g&&g.length}let d=i.replace&&!st(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language||r.usedLng,i),h){const g=e.match(this.interpolator.nestingRegexp),f=g&&g.length;u<f&&(i.nest=!1)}!i.lng&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,(...g)=>(s==null?void 0:s[0])===g[0]&&!i.context?(this.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):this.translate(...g,t),i)),i.interpolation&&this.interpolator.reset()}const a=i.postProcess||this.options.postProcess,o=st(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&i.applyPostProcessor!==!1&&(e=rU.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e,t={}){let i,r,s,a,o;return st(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const c=this.extractFromKey(l,t),h=c.key;r=h;let u=c.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=t.count!==void 0&&!st(t.count),g=d&&!t.ordinal&&t.count===0,f=t.context!==void 0&&(st(t.context)||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);u.forEach(p=>{var A,C;this.isValidLookup(i)||(o=p,!bx[`${m[0]}-${p}`]&&((A=this.utils)!=null&&A.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(o))&&(bx[`${m[0]}-${p}`]=!0,this.logger.warn(`key "${r}" for languages "${m.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(v=>{var b;if(this.isValidLookup(i))return;a=v;const I=[h];if((b=this.i18nFormat)!=null&&b.addLookupKeys)this.i18nFormat.addLookupKeys(I,h,v,p,t);else{let _;d&&(_=this.pluralResolver.getSuffix(v,t.count,t));const x=`${this.options.pluralSeparator}zero`,y=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(t.ordinal&&_.indexOf(y)===0&&I.push(h+_.replace(y,this.options.pluralSeparator)),I.push(h+_),g&&I.push(h+x)),f){const E=`${h}${this.options.contextSeparator||"_"}${t.context}`;I.push(E),d&&(t.ordinal&&_.indexOf(y)===0&&I.push(E+_.replace(y,this.options.pluralSeparator)),I.push(E+_),g&&I.push(E+x))}}let w;for(;w=I.pop();)this.isValidLookup(i)||(s=w,i=this.getResource(v,p,w,t))}))})}),{res:i,usedKey:r,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i,r={}){var s;return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!st(e.replace);let r=i?e.replace:e;if(i&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const s of t)delete r[s]}return r}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class _x{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$r.create("languageUtils")}getScriptPartFromCode(e){if(e=Tu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Tu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(st(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getScriptPartFromCode(i);if(this.isSupportedCode(r))return t=r;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),st(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),r=[],s=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return st(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):st(e)&&s(this.formatLanguageCode(e)),i.forEach(a=>{r.indexOf(a)<0&&s(this.formatLanguageCode(a))}),r}}const xx={zero:0,one:1,two:2,few:3,many:4,other:5},Sx={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class h9{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=$r.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const i=Tu(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(i,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Sx;if(!e.match(/-|_/))return Sx;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,i={}){return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e,t={}){let i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((r,s)=>xx[r]-xx[s]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,t,i={}){const r=this.getRule(e,i);return r?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const Mx=(n,e,t,i=".",r=!0)=>{let s=t9(n,e,t);return!s&&r&&st(t)&&(s=UI(n,t,i),s===void 0&&(s=UI(e,t,i))),s},Lm=n=>n.replace(/\$/g,"$$$$");class Rx{constructor(e={}){var t;this.logger=$r.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(i=>i),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:r,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:g,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:p,maxReplaces:A,alwaysFormat:C}=e.interpolation;this.escape=t!==void 0?t:n9,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?Dl(s):a||"{{",this.suffix=o?Dl(o):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=d?Dl(d):g||Dl("$t("),this.nestingSuffix=f?Dl(f):m||Dl(")"),this.nestingOptionsSeparator=p||",",this.maxReplaces=A||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>(t==null?void 0:t.source)===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,i,r){var g;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=f=>{if(f.indexOf(this.formatSeparator)<0){const C=Mx(t,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,i,{...r,...t,interpolationkey:f}):C}const m=f.split(this.formatSeparator),p=m.shift().trim(),A=m.join(this.formatSeparator).trim();return this.format(Mx(t,l,p,this.options.keySeparator,this.options.ignoreJSONStructure),A,i,{...r,...t,interpolationkey:p})};this.resetRegExp();const h=(r==null?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=((g=r==null?void 0:r.interpolation)==null?void 0:g.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>Lm(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?Lm(this.escape(f)):Lm(f)}].forEach(f=>{for(o=0;s=f.regex.exec(e);){const m=s[1].trim();if(a=c(m),a===void 0)if(typeof h=="function"){const A=h(e,s,r);a=st(A)?A:""}else if(r&&Object.prototype.hasOwnProperty.call(r,m))a="";else if(u){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${m} for interpolating ${e}`),a="";else!st(a)&&!this.useRawValueToEscape&&(a=Ix(a));const p=f.safeValue(a);if(e=e.replace(s[0],p),u?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=s[0].length):f.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,i={}){let r,s,a;const o=(l,c)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const u=l.split(new RegExp(`${h}[ ]*{`));let d=`{${u[1]}`;l=u[0],d=this.interpolate(d,a);const g=d.match(/'/g),f=d.match(/"/g);(((g==null?void 0:g.length)??0)%2===0&&!f||f.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),c&&(a={...c,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,m),`${l}${h}${d}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;r=this.nestingRegexp.exec(e);){let l=[];a={...i},a=a.replace&&!st(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const c=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(c!==-1&&(l=r[1].slice(c).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),r[1]=r[1].slice(0,c)),s=t(o.call(this,r[1].trim(),a),a),s&&r[0]===e&&!st(s))return s;st(s)||(s=Ix(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((h,u)=>this.format(h,u,i.lng,{...i,interpolationkey:r[1].trim()}),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const u9=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=o.trim();t[h]||(t[h]=c),c==="false"&&(t[h]=!1),c==="true"&&(t[h]=!0),isNaN(c)||(t[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},Tx=n=>{const e={};return(t,i,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const a=i+JSON.stringify(s);let o=e[a];return o||(o=n(Tu(i),r),e[a]=o),o(t)}},d9=n=>(e,t,i)=>n(Tu(t),i)(e);class g9{constructor(e={}){this.logger=$r.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const i=t.cacheInBuiltFormats?Tx:d9;this.formats={number:i((r,s)=>{const a=new Intl.NumberFormat(r,{...s});return o=>a.format(o)}),currency:i((r,s)=>{const a=new Intl.NumberFormat(r,{...s,style:"currency"});return o=>a.format(o)}),datetime:i((r,s)=>{const a=new Intl.DateTimeFormat(r,{...s});return o=>a.format(o)}),relativetime:i((r,s)=>{const a=new Intl.RelativeTimeFormat(r,{...s});return o=>a.format(o,s.range||"day")}),list:i((r,s)=>{const a=new Intl.ListFormat(r,{...s});return o=>a.format(o)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Tx(t)}format(e,t,i,r={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{var u;const{formatName:c,formatOptions:h}=u9(l);if(this.formats[c]){let d=o;try{const g=((u=r==null?void 0:r.formatParams)==null?void 0:u[r.interpolationkey])||{},f=g.locale||g.lng||r.locale||r.lng||i;d=this.formats[c](o,f,{...h,...r,...g})}catch(g){this.logger.warn(g)}return d}else this.logger.warn(`there was no format function for ${c}`);return o},e)}}const f9=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class p9 extends Ap{constructor(e,t,i,r={}){var s,a;super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=$r.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,i,r.backend,r)}queueLoad(e,t,i,r){const s={},a={},o={},l={};return e.forEach(c=>{let h=!0;t.forEach(u=>{const d=`${c}|${u}`;!i.reload&&this.store.hasResourceBundle(c,u)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,h=!1,a[d]===void 0&&(a[d]=!0),s[d]===void 0&&(s[d]=!0),l[u]===void 0&&(l[u]=!0)))}),h||(o[c]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,t,i){const r=e.split("|"),s=r[0],a=r[1];t&&this.emit("failedLoading",s,a,t),!t&&i&&this.store.addResourceBundle(s,a,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const o={};this.queue.forEach(l=>{e9(l.loaded,[s],a),f9(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{o[c]||(o[c]={});const h=l.loaded[c];h.length&&h.forEach(u=>{o[c][u]===void 0&&(o[c][u]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,t,i,r=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:s,callback:a});return}this.readingCalls++;const o=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(c&&h&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,s*2,a)},s);return}a(c,h)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(h=>o(null,h)).catch(o):o(null,c)}catch(c){o(c)}return}return l(e,t,o)}prepareLoading(e,t,i={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();st(e)&&(e=this.languageUtils.toResolveHierarchy(e)),st(t)&&(t=[t]);const s=this.queueLoad(e,t,i,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e,t=""){const i=e.split("|"),r=i[0],s=i[1];this.read(r,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${r} failed`,a),!a&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${r}`,o),this.loaded(e,a,o)})}saveMissing(e,t,i,r,s,a={},o=()=>{}){var l,c,h,u,d;if((c=(l=this.services)==null?void 0:l.utils)!=null&&c.hasLoadedNamespace&&!((u=(h=this.services)==null?void 0:h.utils)!=null&&u.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((d=this.backend)!=null&&d.create){const g={...a,isUpdate:s},f=this.backend.create.bind(this.backend);if(f.length<6)try{let m;f.length===5?m=f(e,t,i,r,g):m=f(e,t,i,r),m&&typeof m.then=="function"?m.then(p=>o(null,p)).catch(o):o(null,m)}catch(m){o(m)}else f(e,t,i,r,o,g)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}const Ux=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),st(n[1])&&(e.defaultValue=n[1]),st(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Fx=n=>{var e,t;return st(n.ns)&&(n.ns=[n.ns]),st(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),st(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),((t=(e=n.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n},mg=()=>{},A9=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Zh extends Ap{constructor(e={},t){if(super(),this.options=Fx(e),this.services={},this.logger=$r,this.modules={external:[]},A9(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(st(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const i=Ux();this.options={...i,...this.options,...Fx(e)},this.options.interpolation={...i.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=i.overloadTranslationOptionHandler);const r=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?$r.init(r(this.modules.logger),this.options):$r.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=g9;const h=new _x(this.options);this.store=new Ex(this.options.resources,this.options);const u=this.services;u.logger=$r,u.resourceStore=this.store,u.languageUtils=h,u.pluralResolver=new h9(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(u.formatter=r(c),u.formatter.init&&u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new Rx(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new p9(r(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(g,...f)=>{this.emit(g,...f)}),this.modules.languageDetector&&(u.languageDetector=r(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=r(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new xf(this.services,this.options),this.translator.on("*",(g,...f)=>{this.emit(g,...f)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,t||(t=mg),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...h)=>this.store[c](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...h)=>(this.store[c](...h),this)});const o=ch(),l=()=>{const c=(h,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(u),t(h,u)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,t=mg){var s,a;let i=t;const r=st(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((r==null?void 0:r.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(h=>l(h)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(c)})}else i(null)}reloadResources(e,t,i){const r=ch();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=mg),this.services.backendConnector.reload(e,t,s=>{r.resolve(),i(s)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&rU.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const i=ch();this.emit("languageChanging",e);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},s=(o,l)=>{l?this.isLanguageChangingTo===e&&(r(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,i.resolve((...c)=>this.t(...c)),t&&t(o,(...c)=>this.t(...c))},a=o=>{var h,u;!e&&!o&&this.services.languageDetector&&(o=[]);const l=st(o)?o:o&&o[0],c=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(st(o)?[o]:o);c&&(this.language||r(c),this.translator.language||this.translator.changeLanguage(c),(u=(h=this.services.languageDetector)==null?void 0:h.cacheUserLanguage)==null||u.call(h,c)),this.loadResources(c,d=>{s(d,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),i}getFixedT(e,t,i){const r=(s,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([s,a].concat(o)):l={...a},l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||r.keyPrefix);const c=this.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(s)?h=s.map(u=>(typeof u=="function"&&(u=FI(u,{...this.options,...a})),`${l.keyPrefix}${c}${u}`)):(typeof s=="function"&&(s=FI(s,{...this.options,...a})),h=l.keyPrefix?`${l.keyPrefix}${c}${s}`:s),this.t(h,l)};return st(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(...e){var t;return(t=this.translator)==null?void 0:t.translate(...e)}exists(...e){var t;return(t=this.translator)==null?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const c=this.services.backendConnector.state[`${o}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const o=t.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!r||a(s,e)))}loadNamespaces(e,t){const i=ch();return this.options.ns?(st(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=ch();st(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=r.concat(s),this.loadResources(a=>{i.resolve(),t&&t(a)}),i):(t&&t(),Promise.resolve())}dir(e){var r,s;if(e||(e=this.resolvedLanguage||(((r=this.languages)==null?void 0:r.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((s=this.services)==null?void 0:s.languageUtils)||new _x(Ux());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const i=new Zh(e,t);return i.createInstance=Zh.createInstance,i}cloneInstance(e={},t=mg){const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},s=new Zh(r);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const o=Object.keys(this.store.data).reduce((l,c)=>(l[c]={...this.store.data[c]},l[c]=Object.keys(l[c]).reduce((h,u)=>(h[u]={...l[c][u]},h),l[c]),l),{});s.store=new Ex(o,r),s.services.resourceStore=s.store}return e.interpolation&&(s.services.interpolator=new Rx(r)),s.translator=new xf(s.services,r),s.translator.on("*",(o,...l)=>{s.emit(o,...l)}),s.init(r,t),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const an=Zh.createInstance();an.createInstance;an.dir;an.init;an.loadResources;an.reloadResources;an.use;an.changeLanguage;an.getFixedT;an.t;an.exists;an.setDefaultNamespace;an.hasLoadedNamespace;an.loadNamespaces;an.loadLanguages;function BI(n){"@babel/helpers - typeof";return BI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BI(n)}function aU(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":BI(XMLHttpRequest))==="object"}function m9(n){return!!n&&typeof n.then=="function"}function C9(n){return m9(n)?n:Promise.resolve(n)}function Bx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Dx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Bx(Object(t),!0).forEach(function(i){I9(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Bx(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function I9(n,e,t){return(e=v9(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function v9(n){var e=y9(n,"string");return Zo(e)=="symbol"?e:e+""}function y9(n,e){if(Zo(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Zo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Zo(n){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zo(n)}var Oa=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Oa=global.fetch:typeof window<"u"&&window.fetch&&(Oa=window.fetch);var Uu;aU()&&(typeof global<"u"&&global.XMLHttpRequest?Uu=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Uu=window.XMLHttpRequest));var Sf;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?Sf=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(Sf=window.ActiveXObject));typeof Oa!="function"&&(Oa=void 0);if(!Oa&&!Uu&&!Sf)try{$3(()=>import("./browser-ponyfill-D8x3G19p.js").then(n=>n.b),[],import.meta.url).then(function(n){Oa=n.default}).catch(function(){})}catch{}var DI=function(e,t){if(t&&Zo(t)==="object"){var i="";for(var r in t)i+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},Lx=function(e,t,i,r){var s=function(l){if(!l.ok)return i(l.statusText||"Error",{status:l.status});l.text().then(function(c){i(null,{status:l.status,data:c})}).catch(i)};if(r){var a=r(e,t);if(a instanceof Promise){a.then(s).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(s).catch(i):Oa(e,t).then(s).catch(i)},Px=!1,w9=function(e,t,i,r){e.queryStringParams&&(t=DI(t,e.queryStringParams));var s=Dx({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(s["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,o=Dx({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:s},Px?{}:a),l=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Lx(t,o,r,l)}catch(c){if(!a||Object.keys(a).length===0||!c.message||c.message.indexOf("not implemented")<0)return r(c);try{Object.keys(a).forEach(function(h){delete o[h]}),Lx(t,o,r,l),Px=!0}catch(h){r(h)}}},E9=function(e,t,i,r){i&&Zo(i)==="object"&&(i=DI("",i).slice(1)),e.queryStringParams&&(t=DI(t,e.queryStringParams));try{var s=Uu?new Uu:new Sf("MSXML2.XMLHTTP.3.0");s.open(i?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var o in a)s.setRequestHeader(o,a[o]);s.onreadystatechange=function(){s.readyState>3&&r(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(i)}catch(l){console&&console.log(l)}},b9=function(e,t,i,r){if(typeof i=="function"&&(r=i,i=void 0),r=r||function(){},Oa&&t.indexOf("file:")!==0)return w9(e,t,i,r);if(aU()||typeof ActiveXObject=="function")return E9(e,t,i,r);r(new Error("No fetch and no xhr implementation found!"))};function Nc(n){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(n)}function Nx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Pm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nx(Object(t),!0).forEach(function(i){oU(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nx(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _9(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function x9(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,lU(i.key),i)}}function S9(n,e,t){return e&&x9(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function oU(n,e,t){return(e=lU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lU(n){var e=M9(n,"string");return Nc(e)=="symbol"?e:e+""}function M9(n,e){if(Nc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Nc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}var R9=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,r){return oU({},i,r||"")},parseLoadPayload:function(t,i){},request:b9,reloadInterval:typeof window<"u"?!1:3600*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},cU=(function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_9(this,n),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return S9(n,[{key:"init",value:function(t){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=Pm(Pm(Pm({},R9()),this.options||{}),r),this.allOptions=s,this.services&&this.options.reloadInterval){var a=setInterval(function(){return i.reload()},this.options.reloadInterval);Nc(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(t,i,r){this._readAny(t,t,i,i,r)}},{key:"read",value:function(t,i,r){this._readAny([t],t,[i],i,r)}},{key:"_readAny",value:function(t,i,r,s,a){var o=this,l=this.options.loadPath;typeof this.options.loadPath=="function"&&(l=this.options.loadPath(t,r)),l=C9(l),l.then(function(c){if(!c)return a(null,{});var h=o.services.interpolator.interpolate(c,{lng:t.join("+"),ns:r.join("+")});o.loadUrl(h,a,i,s)})}},{key:"loadUrl",value:function(t,i,r,s){var a=this,o=typeof r=="string"?[r]:r,l=typeof s=="string"?[s]:s,c=this.options.parseLoadPayload(o,l);this.options.request(this.options,t,c,function(h,u){if(u&&(u.status>=500&&u.status<600||!u.status))return i("failed loading "+t+"; status code: "+u.status,!0);if(u&&u.status>=400&&u.status<500)return i("failed loading "+t+"; status code: "+u.status,!1);if(!u&&h&&h.message){var d=h.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(p){return d.indexOf(p)>-1});if(g)return i("failed loading "+t+": "+h.message,!0)}if(h)return i(h,!1);var f,m;try{typeof u.data=="string"?f=a.options.parse(u.data,r,s):f=u.data}catch{m="failed parsing "+t+" to json"}if(m)return i(m,!1);i(null,f)})}},{key:"create",value:function(t,i,r,s,a){var o=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var l=this.options.parsePayload(i,r,s),c=0,h=[],u=[];t.forEach(function(d){var g=o.options.addPath;typeof o.options.addPath=="function"&&(g=o.options.addPath(d,i));var f=o.services.interpolator.interpolate(g,{lng:d,ns:i});o.options.request(o.options,f,l,function(m,p){c+=1,h.push(m),u.push(p),c===t.length&&typeof a=="function"&&a(h,u)})})}}},{key:"reload",value:function(){var t=this,i=this.services,r=i.backendConnector,s=i.languageUtils,a=i.logger,o=r.language;if(!(o&&o.toLowerCase()==="cimode")){var l=[],c=function(u){var d=s.toResolveHierarchy(u);d.forEach(function(g){l.indexOf(g)<0&&l.push(g)})};c(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(h){return c(h)}),l.forEach(function(h){t.allOptions.ns.forEach(function(u){r.read(h,u,"read",null,null,function(d,g){d&&a.warn("loading namespace ".concat(u," for language ").concat(h," failed"),d),!d&&g&&a.log("loaded namespace ".concat(u," for language ").concat(h),g),r.loaded("".concat(h,"|").concat(u),d,g)})})})}}}])})();cU.type="backend";const T9=()=>{const n=window.navigator,e=n.userAgent.toLowerCase();try{let t;return e.indexOf("chrome")!=-1?(t=(n.languages[0]||n.browserLanguage||n.language||n.userLanguage).split(";"),t[0]):(t=(n.browserLanguage||n.language||n.userLanguage).split(";"),t[0])}catch{return""}};mr.use([Yx,Kx]);const hU=["title","officialTitle","author","epoch","createdAt","era","contributor","mapper","license","dataLicense","attr","dataAttr","reference","description"];async function U9(n,e){const t=n.core.appData,i=e.lang||t.lang||T9();return i&&(n.lang=i),(n.lang.toLowerCase()=="zh-hk"||n.lang.toLowerCase()=="zh-hant")&&(n.lang="zh-TW"),new Promise((r,s)=>{an.use(cU).init({lng:n.lang,fallbackLng:["en"],backend:{loadPath:"assets/locales/{{lng}}/{{ns}}.json"}},(o,l)=>{n._t=l,n.i18n=an,r()})})}function Rv(n){const e="__uiReadyGate",t=n[e];if(t)return t;let i,r=!1,s=!1,a=!1;const o=new Promise(h=>{i=h}),l=()=>{a||!i||r&&s&&(a=!0,i())},c={promise:o,markControlsReady:()=>{r=!0,l()},markSwipersReady:()=>{s=!0,l()}};return n[e]=c,c}function uU(n){const e="__uiDomGate",t=n[e];if(t)return t;let i,r=!1;const a={promise:new Promise(o=>{i=o}),isReady:()=>r,markReady:()=>{r||(r=!0,i==null||i())}};return n[e]=a,a}function F9(n,e){const t=n.core;if(!n.baseSwiper||!n.overlaySwiper)return;n.baseSwiper.setSlideMapID(e.mapID),n.overlaySwiper.setSlideMapID(e.mapID);const i=e.officialTitle||e.title||e.label;t.mapDivDocument.querySelector(".map-title span").innerText=n.translate(i)||"",n.checkOverlayID(e.mapID)?n.sliderNew.setEnable(!0):n.sliderNew.setEnable(!1);const r=n.sliderNew.get("slidervalue")*100;t.mapObject.setTransparency(r),n.updateEnvelope(),n.updateUrl()}async function B9(n,e){let t,i,r=!1;const s=new Promise((c,h)=>{t=c,i=h}),a=e.uiHooks;e.uiHooks={...a,onUiConfigure:async c=>{try{await U9(n,e),r||(r=!0,t==null||t())}catch(h){throw r||(r=!0,i==null||i(h)),h}if(a!=null&&a.onUiConfigure)return a.onUiConfigure(c)},onAppdataReady:async c=>{if(await D9(n,e),a!=null&&a.onAppdataReady)return a.onAppdataReady(c)},onUiDomReady:async c=>{if(await s,k9(n),N9(n),Q9(n),O9(n),a!=null&&a.onUiDomReady)return a.onUiDomReady(c)},onCoreReady:async c=>{if(V9(n,e),await P9(n),L9(n,e),a!=null&&a.onCoreReady)return a.onCoreReady(c)}};const o=n.core=new Sc(e),l=Rv(n);o.addEventListener("mapChanged",c=>{const h=c.detail;(async()=>(await l.promise,F9(n,h)))()})}async function D9(n,e){const t=n.core;if(e.icon&&(ts["defaultpin.png"]=e.icon),e.restore)n.setShowBorder(e.restore.showBorder||!1),(e.restore.hideMarker||e.restore.openedMarker)&&t.waitReady.then(()=>{e.restore.hideMarker&&n.setHideMarker(e.restore.hideMarker),e.restore.openedMarker&&n.handleMarkerActionById(e.restore.openedMarker)});else if(e.restoreSession){const r=parseInt(String(localStorage.getItem("epoch")||"0"),10),s=Math.floor(new Date().getTime()/1e3);r&&s-r<3600&&n.setShowBorder(!!parseInt(String(localStorage.getItem("showBorder")||"0"),10)),t.initialRestore.hideMarker&&n.setHideMarker(!0)}else n.setShowBorder(!1);const i=t.mapDivDocument;n.enablePoiHtmlNoScroll=e.enablePoiHtmlNoScroll||!1,e.enableShare&&(i.classList.add("enable_share"),n.enableShare=!0),e.enableHideMarker&&(i.classList.add("enable_hide_marker"),n.enableHideMarker=!0),e.enableBorder&&(i.classList.add("enable_border"),n.enableBorder=!0),e.enableMarkerList&&(i.classList.add("enable_marker_list"),n.enableMarkerList=!0),e.disableNoimage&&(n.disableNoimage=!0),e.stateUrl&&i.classList.add("state_url"),e.alwaysGpsOn&&(n.alwaysGpsOn=!0),t.enableCache&&i.classList.add("enable_cache"),"ontouchstart"in window&&(i.classList.add("ol-touch"),n.isTouch=!0),e.mobileIF&&(e.debug=!0),e.appEnvelope&&(n.appEnvelope=!0),z9(n,e)}function L9(n,e){const t=n.core,i=!e.presentationMode,r=t.mapDivDocument,s=r.querySelector(".modalBase"),a=r.querySelector(".modal_title"),o=r.querySelector(".modal_gpsD_content");t.addEventListener("outOfMap",l=>{console.log("Event: outOfMap"),i&&(a.innerText=n.t("app.out_of_map")||"",o.innerText=n.t("app.out_of_map_area")||"",n.modalSetting("gpsD"),xo(s,{root:r}).show())}),t.addEventListener("gps_error",l=>{console.log("GPS Error:",l);const c={user_gps_deny:"app.user_gps_deny",gps_miss:"app.gps_miss",gps_timeout:"app.gps_timeout"};a.innerText=n.t("app.gps_error")||"",o.innerText=n.t(c[l.detail]||"app.gps_error")||"",n.modalSetting("gpsD"),xo(s,{root:r}).show()}),t.addEventListener("gps_result",l=>{if(console.log("GPS Result:",l),l.detail&&l.detail.error){const c=l.detail.error;if(c==="gps_off"){n.lastGPSError=void 0;return}if(n.lastGPSError=c,n.alwaysGpsOn&&c==="gps_out"||!n.core)return;const h=xo(s,{root:r});if(c==="gps_out")a.innerText=n.t("app.out_of_map")||"",o.innerText=n.t("app.out_of_map_area")||"";else{const u={user_gps_deny:"app.user_gps_deny",gps_miss:"app.gps_miss",gps_timeout:"app.gps_timeout"};a.innerText=n.t("app.gps_error")||"",o.innerText=n.t(u[c]||"app.gps_error")||""}n.modalSetting("gpsD"),h.show()}else n.lastGPSError=void 0})}function kx(n,e){const t=["maroon","deeppink","indigo","olive","royalblue","red","hotpink","green","yellow","navy","saddlebrown","fuchsia","darkslategray","yellowgreen","blue","mediumvioletred","purple","lime","darkorange","teal","crimson","darkviolet","darkolivegreen","steelblue","aqua"],i=[];let r=0;const s=n.core;for(let h=0;h<e.length;h++){const u=e[h];if(u.envelope){n.appEnvelope&&u.envelope.geometry.coordinates[0].map(g=>{i.length===0?(i[0]=i[2]=g[0],i[1]=i[3]=g[1]):(g[0]<i[0]&&(i[0]=g[0]),g[0]>i[2]&&(i[2]=g[0]),g[1]<i[1]&&(i[1]=g[1]),g[1]>i[3]&&(i[3]=g[1]))}),u.envelopeColor=t[r],r++,r===t.length&&(r=0);const d=u.envelope.geometry.coordinates[0];u.envelopeAreaIndex=n.areaIndex(d)}}n.appEnvelope&&console.log(`This app's envelope is: ${i}`),n.splashPromise&&n.splashPromise.then(()=>{const h=s.mapDivDocument.querySelector(".modalBase");xo(h,{root:s.mapDivDocument}).hide()});const a=[],o=[];e.forEach(h=>{fG(h)?a.push(h):o.push(h)});const l=n.baseSwiper=new mr(".base-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,preventClicks:!0,preventClicksPropagation:!0,observer:!0,observeParents:!0,loop:a.length>=2,navigation:{nextEl:".base-next",prevEl:".base-prev"}});l.on("click",h=>{if(!l.clickedSlide)return;const u=l.clickedSlide;s.changeMap(u.getAttribute("data")),delete n._selectCandidateSources,l.setSlideIndexAsSelected(parseInt(u.getAttribute("data-swiper-slide-index")||"0",10))}),a.length<2&&s.mapDivDocument.querySelector(".base-swiper").classList.add("single-map");const c=n.overlaySwiper=new mr(".overlay-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,preventClicks:!0,preventClicksPropagation:!0,observer:!0,observeParents:!0,loop:o.length>=2,navigation:{nextEl:".overlay-next",prevEl:".overlay-prev"}});c.on("click",h=>{if(!c.clickedSlide)return;const u=c.clickedSlide;s.changeMap(u.getAttribute("data")),delete n._selectCandidateSources,c.setSlideIndexAsSelected(parseInt(u.getAttribute("data-swiper-slide-index")||"0",10))}),o.length<2&&s.mapDivDocument.querySelector(".overlay-swiper").classList.add("single-map"),a.forEach(h=>{const u=h.thumbnail?h.thumbnail.split("/").pop():"",d=ts[u]||h.thumbnail;l.appendSlide(`<div class="swiper-slide" data="${h.mapID}"><img crossorigin="anonymous" src="${d}"><div> ${n.translate(h.label)}</div> </div> `)}),o.forEach(h=>{const u=h.envelope?` ${h.envelopeColor}`:"",d=h.thumbnail?h.thumbnail.split("/").pop():"",g=ts[d]||h.thumbnail;c.appendSlide(`<div class="swiper-slide${u}" data="${h.mapID}"><img crossorigin="anonymous" src="${g}"><div> ${n.translate(h.label)}</div> </div> `)}),c.on("slideChange",()=>{n.updateEnvelope()}),l.slideToLoop(0),c.slideToLoop(0),PR(s.mapDivDocument),Rv(n).markSwipersReady()}async function P9(n){const e=n.core;if(e.addEventListener("poi_number",i=>{i.detail?e.mapDivDocument.classList.remove("no_poi"):e.mapDivDocument.classList.add("no_poi")}),e.addEventListener("clickMarkers",i=>{const r=i.detail;if(r.length===1)n.handleMarkerAction(r[0]);else{const s=[];r.forEach(a=>{s.push({icon:a.icon||ts["defaultpin.png"],text:n.translate(a.name),callback:()=>{n.handleMarkerAction(a)}})}),n.showContextMenu(s)}}),!n.baseSwiper){const i=Object.values(e.cacheHash||{});if(i.length){const r=uU(n);r.isReady()?kx(n,i):r.promise.then(()=>{n.baseSwiper||kx(n,i)})}}const t=e.mapObject;t.on("moveend",i=>{n.updateUrl()}),t.getViewport().addEventListener("pointerdown",i=>{n.lastClickPixel=e.mapObject.getEventPixel(i),n.lastClickCoordinate=e.mapObject.getCoordinateFromPixel(n.lastClickPixel)},!0)}function N9(n){let e;const t=n.core,i=t.mapDivDocument,r=i.querySelector(".modalBase");i.addEventListener("click",a=>{const o=a.target,l=o.closest(".share")||o.closest(".share_button");if(!l)return;console.log("Share button clicked:",l);const c=l.getAttribute("data");if(!c)return;const h=c.split("_"),u=n.getShareUrl(h[1]||"app");if(console.log("Share URI:",u),h[0]==="cp"){const d=document.querySelector("body"),g=n.t?n.t("app.copy_toast"):"URL Copied";if(navigator.clipboard)navigator.clipboard.writeText(u).then(()=>{n.showToast(g,l)});else{const f=document.createElement("textarea");f.textContent=u,d.appendChild(f),f.select(),document.execCommand("copy"),d.removeChild(f),n.showToast(g,l)}}else if(h[0]==="tw"){const d=document.title,g=`https://twitter.com/intent/tweet?url=${encodeURIComponent(u)}&text=${encodeURIComponent(d)}&hashtags=Maplat`;window.open(g,"_blank")}else if(h[0]==="fb"){const d=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(u)}&display=popup&ref=plugin&src=like&kid_directed_site=0`;window.open(d,"_blank","width=650,height=450,menubar=no,toolbar=no,scrollbars=yes")}else if(h[0]==="qr"){const d=i.querySelector(".qr_view_poi")||i.querySelector(".qr_view");d&&Ug.toCanvas(u,{width:128,margin:1},(g,f)=>{g||(d.innerHTML="",d.appendChild(f))})}}),i.querySelectorAll(".prevent-default-ui").forEach(a=>{a.addEventListener("touchstart",o=>{o.preventDefault()})}),t.waitReady.then(()=>{t.mapObject.on("click_control",a=>{const o=a.control||a.frameState&&a.frameState.control,l=xo(r);if(o==="help")n.modalSetting("help"),l.show();else if(o==="share"){n.modalSetting("share");const c=r.querySelector(".modal-body"),h=n.getShareUrl("app"),u=n.getShareUrl("view"),d=c.querySelector(".qr_app"),g=c.querySelector(".qr_view");d&&Ug.toCanvas(h,{width:128,margin:1},(f,m)=>{f||(d.innerHTML="",d.appendChild(m))}),g&&Ug.toCanvas(u,{width:128,margin:1},(f,m)=>{f||(g.innerHTML="",g.appendChild(m))}),l.show()}else if(o==="markerList"){n.modalSetting("marker_list"),l.show();const c=r.querySelector(".modal_marker_list_content ul.list-group"),h=()=>{var m,p;c.querySelectorAll(".list_poiitems_div").forEach(A=>{A.classList.remove("open")}),c.querySelectorAll(".list_poicontent_div").forEach(A=>{A.classList.remove("open"),A.innerHTML=""}),(p=(m=n.core).unselectMarker)==null||p.call(m),r.removeEventListener("hidden.bs.modal",h)};r.removeEventListener("hidden.bs.modal",h),r.addEventListener("hidden.bs.modal",h);const u=t.from.mapID;if(e===u)return;e=u,c.innerHTML="",t.listPoiLayers(!1,!0).forEach(g=>{const f=wn(`<li class="list-group-item layer">
                        <div class="row layer_row">
                           <div class="layer_label">
                              <span class="dli-chevron"></span>
                              <img src="${g.icon||ts["defaultpin.png"]}" class="markerlist"> ${n.translate(g.name)}
                           </div>
                           <div class="layer_onoff">
                              <input type="checkbox" class="markerlist" ${g.hide?"":"checked"}>
                              <label class="check"><div></div></label>
                           </div>
                        </div>
                    </li>`)[0],m=f.querySelector("input[type=checkbox]");f.querySelector("label.check").addEventListener("click",C=>{C.stopPropagation(),m.disabled||(m.checked=!m.checked,m.dispatchEvent(new Event("change")))}),m.addEventListener("click",C=>C.stopPropagation()),m.addEventListener("change",C=>{C.target.checked?t.showPoiLayer(g.id):t.hidePoiLayer(g.id)});const A=wn('<ul class="list_poiitems_div"></ul>')[0];f.querySelector(".layer_label").addEventListener("click",()=>{var I,w;const C=A.classList.contains("open");c.querySelectorAll(".list_poiitems_div").forEach(b=>{b!==A&&(b.classList.remove("open"),b.parentElement.querySelectorAll(".list_poicontent_div").forEach(x=>{x.classList.remove("open"),x.innerHTML=""}))}),C?(A.classList.remove("open"),A.querySelectorAll(".list_poicontent_div").forEach(_=>{_.classList.remove("open"),_.innerHTML=""}),(w=(I=n.core).unselectMarker)==null||w.call(I)):A.classList.add("open")}),c.appendChild(f),c.appendChild(A),g.pois&&g.pois.forEach(C=>{const v=wn(`<li class="list-group-item poi">
                                <div class="row poi_row">
                                   <div class="poi_label">
                                      <span class="dli-chevron"></span>
                                      <img src="${C.icon||g.icon||ts["defaultpin.png"]}" class="markerlist"> ${n.translate(C.name)}
                                   </div>
                                </div>
                            </li>`)[0],I=wn('<div class="list_poicontent_div"></div>')[0];v.addEventListener("click",()=>{var _,x,y,E;const w=I.classList.contains("open");A.querySelectorAll(".list_poicontent_div").forEach(S=>{S!==I&&S.classList.contains("open")&&(S.classList.remove("open"),S.innerHTML="")}),w?(I.classList.remove("open"),I.innerHTML="",(x=(_=n.core).unselectMarker)==null||x.call(_)):(I.classList.add("open"),tU(n,I,C,!1),(E=(y=n.core).selectMarker)==null||E.call(y,C.namespaceID))}),A.appendChild(v),A.appendChild(I)})})}else if(o==="copyright"){n.modalSetting("map");const c=t.from,h=i.querySelector(".modal_map .modal_title");if(h){const p=c.get?c.get("title"):c.title;h.innerText=n.translate(p)||""}hU.forEach(p=>{if(p==="title"||p==="officialTitle")return;const A=c.get?c.get(p):c[p],C=i.querySelector(`.modal_map .${p}_div`);if(C)if(A){C.style.display="block";const v=C.querySelector(`.${p}_dd`);if(v)if(p==="license"||p==="dataLicense"){const I=A.toLowerCase().replace(/ /g,"_"),w=ts[`${I}.png`]||`assets/parts/${I}.png`;v.innerHTML=`<img src="${w}" class="license" />`}else v.innerHTML=n.translate(A)||""}else C.style.display="none"});const u=i.querySelector(".modal_cache_content"),d=u.querySelector(".cache_size");let g=u.querySelector(".cache_fetch"),f=u.querySelector(".cache_delete");const m=c.weiwudi;if(t.enableCache&&m&&!c.vector){u.style.display="block",g.style.display="none",f.style.display="none";const p=m.totalTile;let A=!1,C;const v=()=>{const S=n.t?n.t.bind(n):n.translate.bind(n);p?(g.style.display="inline-block",A?(g.innerHTML=S("html.cache_cancel")||"Cancel download",g.classList.remove("btn-default"),g.classList.add("btn-danger"),g.classList.contains("btn-default")||g.classList.add("btn-default"),g.disabled=!1):(g.innerHTML=S("html.cache_fetch")||"Bulk download",g.classList.contains("btn-default")||g.classList.add("btn-default"),g.classList.remove("btn-danger"),C&&C.count===C.total?(g.disabled=!0,g.style.display="inline-block"):(g.disabled=!1,g.style.display="inline-block"))):g.style.display="none",C&&C.size>0?(f.style.display="inline-block",f.disabled=A):(f.style.display="inline-block",f.disabled=!0),A&&(f.disabled=!0)},I=async(S=void 0)=>{S||(S=await m.stats()),C=S;const R=n.t?n.t.bind(n):n.translate.bind(n),M=A?R("html.cache_processing")||"Calculating...":pG(S.size||0);if(p){const T=S.count||0,P=Math.floor(1e3*T/p);d.innerText=`${M} (${T} / ${p} tiles [${P/10}%])`}else d.innerText=`${M} (${S.count||0} tiles)`;v()};I();let w=0,b=null;const _=S=>{S.type==="proceed"?(A=!0,b={size:S.detail.size||(C==null?void 0:C.size)||0,count:S.detail.processed||S.detail.count||0,total:S.detail.total||p||0},w||(w=requestAnimationFrame(()=>{w=0;try{b&&I(b)}catch(R){console.error("Error in showStats:",R)}}))):(S.type==="finish"||S.type==="stop"||S.type==="canceled")&&(w&&(cancelAnimationFrame(w),w=0),A=!1,b=null,I())};m.addEventListener("proceed",_),m.addEventListener("finish",_),m.addEventListener("stop",_),m.addEventListener("canceled",_);const x=()=>{m.removeEventListener("proceed",_),m.removeEventListener("finish",_),m.removeEventListener("stop",_),m.removeEventListener("canceled",_),r.removeEventListener("hidden.bs.modal",x)};r.addEventListener("hidden.bs.modal",x);const y=g.cloneNode(!0);g.parentNode.replaceChild(y,g),g=y,g.addEventListener("click",async()=>{if(A)await m.cancel();else{A=!0,v();try{await m.fetchAll()}catch{A=!1,v()}}await I()});const E=f.cloneNode(!0);f.parentNode.replaceChild(E,f),f=E,f.innerHTML=n.t("html.cache_delete"),f.addEventListener("click",async()=>{A||(await m.clean(),await I())})}else u.style.display="none";l.show()}else if(o==="border")n.setShowBorder(!t.stateBuffer.showBorder);else if(o==="hideMarker"){const c=i.classList.contains("hide-marker");n.setHideMarker(!c)}n.updateUrl()})})}function k9(n){const t=n.core.mapDivDocument,i=function(a){const o=/\$\{([a-zA-Z0-9_\.\/\-]+)\}/g;let l=a,c;for(;(c=o.exec(a))!=null;)l=l.replace(c[0],ts[c[1]]);return l};let r=t.querySelectorAll("[data-i18n], [din]");r.forEach(a=>{const o=a.getAttribute("data-i18n")||a.getAttribute("din");a.innerText=i(n.t(o))}),r=t.querySelectorAll("[data-i18n-html], [dinh]"),r.forEach(a=>{const o=a.getAttribute("data-i18n-html")||a.getAttribute("dinh");a.innerHTML=i(n.t(o))});const s=t.querySelector('[data-i18n="html.app_loading_body"], [din="html.app_loading_body"]');s&&(s.innerHTML=i(n.t("html.app_loading_body")))}function Q9(n){const e=n.core,t=e.mapDivDocument,i=t.querySelector(".modalBase");if(!!e.initialRestore.mapID)return;let s=!1;e.appData.splash&&(s=!0);const a=xo(i,{root:t});t.querySelector(".modal_load_title").innerText=n.translate(e.appData.appName)||"",s&&(t.querySelector(".splash_img").setAttribute("src",`img/${e.appData.splash}`),t.querySelector(".splash_div").classList.remove("hide")),n.modalSetting("load"),a.show();const o=s?1e3:200;n.splashPromise=new Promise(l=>{setTimeout(()=>{l()},o)})}function O9(n){const e=n.core;document.querySelector("title").innerHTML=n.translate(e.appName)||""}function V9(n,e){const t=n.core,i={reverse:!0,tipLabel:n.t("control.trans",{ns:"translation"})},r=t.initialRestore.transparency||(e.restore?e.restore.transparency:void 0);r&&(i.initialValue=r/100),n.sliderNew=new CG(i),t.appData.controls=[new _G({tipLabel:n.t("control.info",{ns:"translation"})}),new yG({tipLabel:n.t("control.compass",{ns:"translation"})}),new MG({tipLabel:n.t("control.zoom",{ns:"translation"})}),new vG({ui:n,tipLabel:n.t("control.gps",{ns:"translation"})}),new IG({tipLabel:n.t("control.home",{ns:"translation"})}),n.sliderNew,new bG({tipLabel:n.t("control.help",{ns:"translation"})})],n.enableShare&&t.appData.controls.push(new wG({tipLabel:n.t("control.share",{ns:"translation"})})),n.enableBorder&&t.appData.controls.push(new EG({tipLabel:n.t("control.border",{ns:"translation"})})),n.enableHideMarker&&t.appData.controls.push(new xG({tipLabel:n.t("control.hide_marker",{ns:"translation"})})),n.enableMarkerList&&t.appData.controls.push(new SG({tipLabel:n.t("control.marker_list",{ns:"translation"})})),n.contextMenu=new QG({eventType:"__dummy__",width:170,defaultItems:!1,items:[]}),t.appData.controls.push(n.contextMenu),t.appData.controls.forEach(s=>{t.mapObject.addControl(s)}),n.sliderNew.on("propertychange",s=>{s.key==="slidervalue"&&(t.setTransparency(n.sliderNew.get(s.key)*100),n.updateUrl())}),Rv(n).markControlsReady()}function z9(n,e){const t=n.core,i=document.createElement("style");i.innerHTML=`
      .custom-toast {
        visibility: hidden;
        min-width: 250px;
        margin-left: -125px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 2px;
        padding: 16px;
        position: fixed;
        z-index: 9999;
        left: 50%;
        bottom: 30px;
        font-size: 17px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .custom-toast.show {
        visibility: visible;
        opacity: 1;
      }
    `,document.head.appendChild(i);let r=e.pwaManifest,s=e.pwaWorker,a=e.pwaScope,o=wn(`<d c="ol-control map-title"><s></s></d>
  <d c="swiper-container ol-control base-swiper prevent-default-ui">
    <d c="swiper-wrapper"> </d>
      <d c="swiper-button-next base-next swiper-button-white"> </d>
        <d c="swiper-button-prev base-prev swiper-button-white"> </d>
          </d>
          <d c="swiper-container ol-control overlay-swiper prevent-default-ui">
            <d c="swiper-wrapper"> </d>
              <d c="swiper-button-next overlay-next swiper-button-white"> </d>
                <d c="swiper-button-prev overlay-prev swiper-button-white"> </d>
                  </d> `);for(let l=o.length-1;l>=0;l--)t.mapDivDocument.insertBefore(o[l],t.mapDivDocument.lastChild);uU(n).markReady(),o=wn(`<d c="modal modalBase" tabindex="-1" role="dialog"
    aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false"
    data-backdrop="static">
  <d c="modal-dialog">
    <d c="modal-content">
      <d c="modal-header">
        <button type="button" c="close" data-dismiss="modal">
          <s aria-hidden="true">&#215;</s><s c="sr-only" din="html.close"></s>
        </button>
        <h4 c="modal-title">

          <s c="modal_title"></s>
          <s c="modal_load_title"></s>
          <s c="modal_gpsW_title" din="html.acquiring_gps"></s>
          <s c="modal_help_title" din="html.help_title"></s>
          <s c="modal_share_title" din="html.share_title"></s>
          <s c="modal_marker_list_title" din="html.marker_list_title"></s>

        </h4>
      </d> 
      <d c="modal-body">

        <d c="modal_help_content">
          <d c="help_content">
            <s dinh="html.help_using_maplat"></s>
            <p c="col-xs-12 help_img"><img src="${ts["fullscreen.png"]}"></p>
            <h4 din="html.help_operation_title"></h4>
            <p dinh="html.help_operation_content" c="recipient"></p>
            <h4 din="html.help_selection_title"></h4>
            <p dinh="html.help_selection_content" c="recipient"></p>
            <h4 din="html.help_gps_title"></h4>
            <p dinh="html.help_gps_content" c="recipient"></p>
            <h4 din="html.help_poi_title"></h4>
            <p dinh="html.help_poi_content" c="recipient"></p>
            <h4 din="html.help_etc_title"></h4>
            <ul>
              <li dinh="html.help_etc_attr" c="recipient"></li>
              <li dinh="html.help_etc_help" c="recipient"></li>
              <s c="share_help"><li dinh="html.help_share_help" c="recipient"></li></s>
              <s c="border_help"><li dinh="html.help_etc_border" c="recipient"></li></s>
              <s c="hide_marker_help"><li dinh="html.help_etc_hide_marker" c="recipient"></li></s>
              <s c="marker_list_help"><li dinh="html.help_etc_marker_list" c="recipient"></li></s>
              <li dinh="html.help_etc_slider" c="recipient"></li>
            </ul>
            <p><a href="https://www.maplat.jp/" target="_blank">Maplat</a>
               2015- Kohei Otsuka, Code for History</p>
          </d> 
        </d> 

        <d c="modal_poi_content">
          <d c="poi_web_div"></d>
          <d c="poi_share_buttons recipient row">
            <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" class="share btn btn-light" data="cp_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M224 0c-35.3 0-64 28.7-64 64V96H96c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384h64c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM288 384H96V160H224c0-17.7 14.3-32 32-32h64V256c0 17.7 14.3 32 32 32h96V384H288z"/></svg>&nbsp;<small din="html.share_copy"></small></button></d>
            <d c="form-group col-xs-4 text-center"><button title="Twitter" class="share btn btn-light" data="tw_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>&nbsp;<small>Twitter</small></button></d>
            <d c="form-group col-xs-4 text-center"><button title="Facebook" class="share btn btn-light" data="fb_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 121.3 87.1 222.4 203 240.5V327.9h-61v-71.9h61V203c0-60.8 35.8-93.7 89.2-93.7 25.5 0 50.4 1.8 56.1 2.6v62.4h-35.4c-29.5 0-37.4 18.2-37.4 42.1v59.6h68.9l-11 71.9h-57.9V496.5C416.9 478.4 504 377.3 504 256z"/></svg>&nbsp;<small>Facebook</small></button></d>
          </d>
          <d c="qr_view_poi center-block" style="width:128px;"></d>
          <d c="modal_share_poi"></d>
          <p><img src="" height="0px" width="0px"></p>
        </d> 

        <d c="modal_share_content">
          <h4 din="html.share_app_title"></h4>
          <d id="___maplat_app_toast_${n.html_id_seed}"></d>
          <d c="recipient row">
            <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" class="share btn btn-light" data="cp_app"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M224 0c-35.3 0-64 28.7-64 64V96H96c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384h64c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM288 384H96V160H224c0-17.7 14.3-32 32-32h64V256c0 17.7 14.3 32 32 32h96V384H288z"/></svg>&nbsp;<small din="html.share_copy"></small></button></d>
            <d c="form-group col-xs-4 text-center"><button title="Twitter" class="share btn btn-light" data="tw_app"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>&nbsp;<small>Twitter</small></button></d>
            <d c="form-group col-xs-4 text-center"><button title="Facebook" class="share btn btn-light" data="fb_app"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 121.3 87.1 222.4 203 240.5V327.9h-61v-71.9h61V203c0-60.8 35.8-93.7 89.2-93.7 25.5 0 50.4 1.8 56.1 2.6v62.4h-35.4c-29.5 0-37.4 18.2-37.4 42.1v59.6h68.9l-11 71.9h-57.9V496.5C416.9 478.4 504 377.3 504 256z"/></svg>&nbsp;<small>Facebook</small></button></d>
          </d>
          <d c="qr_app center-block" style="width:128px;"></d>
          <d c="modal_share_state">
            <h4 din="html.share_state_title"></h4>
            <d id="___maplat_view_toast_${n.html_id_seed}"></d>
            <d c="recipient row">
              <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" c="share btn btn-light" data="cp_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M224 0c-35.3 0-64 28.7-64 64V96H96c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384h64c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM288 384H96V160H224c0-17.7 14.3-32 32-32h64V256c0 17.7 14.3 32 32 32h96V384H288z"/></svg>&nbsp;<small din="html.share_copy"></small></button></d>
              <d c="form-group col-xs-4 text-center"><button title="Twitter" c="share btn btn-light" data="tw_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>&nbsp;<small>Twitter</small></button></d>
              <d c="form-group col-xs-4 text-center"><button title="Facebook" c="share btn btn-light" data="fb_view"><svg style="width:14px;height:14px;vertical-align:text-bottom;" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 121.3 87.1 222.4 203 240.5V327.9h-61v-71.9h61V203c0-60.8 35.8-93.7 89.2-93.7 25.5 0 50.4 1.8 56.1 2.6v62.4h-35.4c-29.5 0-37.4 18.2-37.4 42.1v59.6h68.9l-11 71.9h-57.9V496.5C416.9 478.4 504 377.3 504 256z"/></svg>&nbsp;<small>Facebook</small></button></d>
            </d>
            <d c="qr_view center-block" style="width:128px;"></d>
          </d>
          <p><img src="" height="0px" width="0px"></p>
        </d>

        <d c="modal_map_content">
            ${hU.map(l=>l=="title"||l=="officialTitle"?"":`<d c="recipients ${l}_div"><dl c="dl-horizontal">
                      <dt din="html.${l}"></dt>
                      <dd c="${l}_dd"></dd>
                    </dl></d> `).join("")}
          <d c="recipients modal_cache_content"><dl c="dl-horizontal">
            <dt din="html.cache_handle"></dt>
            <dd><s c="cache_size"></s></dd>
            <dt></dt>
            <dd><s c="pull-right"><button c="cache_fetch btn btn-default" href="#" din="html.cache_fetch"></button>
              <button c="cache_delete btn btn-default" href="#" din="html.cache_delete"></button></s></dd>
          </dl></d> 
        </d>

        <d c="modal_load_content">
          <p c="recipient"><img src="${ts["loading.png"]}"><s din="html.app_loading_body"></s></p>
          <d c="splash_div hide row"><p c="col-xs-12 poi_img"><img c="splash_img" src=""></p></d> 
          <p><img src="" height="0px" width="0px"></p>
        </d> 

        <d c="modal_marker_list_content">
          <ul c="list-group"></ul>
        </d> 

        <p c="modal_gpsD_content" c="recipient"></p>
        <p c="modal_gpsW_content" c="recipient"></p>

      </d> 
    </d> 
  </d> 
</d> `);for(let l=o.length-1;l>=0;l--)t.mapDivDocument.insertBefore(o[l],t.mapDivDocument.firstChild);if(r){r===!0&&(r=`./pwa/${t.appid}_manifest.json`),s||(s="./service-worker.js"),a||(a="./");const l=document.querySelector("head");l&&(l.querySelector('link[rel="manifest"]')||l.appendChild(wn(`<link rel="manifest" href="${r}">`)[0]));try{Weiwudi.registerSW(s,{scope:a})}catch{}l&&!l.querySelector('link[rel="apple-touch-icon"]')&&fetch(r).then(c=>c.json()).then(c=>{c.icons&&c.icons.forEach(h=>{const u=OG(r,h.src),g=`<link rel="apple-touch-icon" sizes="${h.sizes}" href="${u}">`;l.appendChild(wn(g)[0])})}).catch(c=>{console.error("Failed to fetch PWA manifest:",c)})}}mr.use([Yx,Kx]);class Tv extends Bu{constructor(t){super();re(this,"core");re(this,"appOption");re(this,"waitReady");re(this,"waitReadyBridge");re(this,"pathThatSet");re(this,"swipers",{});re(this,"mobile_if",!1);re(this,"ui_func","default");re(this,"datum","default");re(this,"selected_layer","default");re(this,"toms",0);re(this,"cache_messages",{});re(this,"last_toast");re(this,"share_enable");re(this,"sliderNew");re(this,"baseSwiper");re(this,"overlaySwiper");re(this,"sliderCommon");re(this,"contextMenu");re(this,"splashPromise");re(this,"_selectCandidateSources");re(this,"appEnvelope");re(this,"restoring",!1);re(this,"poiSwiper");re(this,"html");re(this,"enablePoiHtmlNoScroll",!1);re(this,"enableShare",!1);re(this,"enableHideMarker",!1);re(this,"enableBorder",!1);re(this,"enableMarkerList",!1);re(this,"disableNoimage",!1);re(this,"alwaysGpsOn",!1);re(this,"isTouch",!1);re(this,"html_id_seed");re(this,"lastClickPixel");re(this,"lastClickCoordinate");re(this,"lastGPSError");re(this,"selectedMarkerNamespaceID");re(this,"lang","ja");re(this,"_t");re(this,"i18n");this.html_id_seed=`${Math.floor(Math.random()*9e3)+1e3}`,this.appOption=t,t.stateUrl?(Ig(async(i,r)=>{let s=i.canonicalPath.split("#!"),a=s.length>1?s[1]:s[0];if(s=a.split("?"),a=s[0],a===this.pathThatSet){delete this.pathThatSet;return}const o={transparency:0,position:{rotation:0}};if(a.split("/").forEach(l=>{if(!l)return;const c=l.split(":");switch(c[0]){case"s":o.mapID=c[1];break;case"b":o.backgroundID=c[1];break;case"t":o.transparency=parseFloat(c[1]);break;case"r":o.position.rotation=parseFloat(c[1]);break;case"z":o.position.zoom=parseFloat(c[1]);break;case"x":o.position.x=parseFloat(c[1]);break;case"y":o.position.y=parseFloat(c[1]);break;case"sb":o.showBorder=!!parseInt(c[1]);break;case"hm":o.hideMarker=!!parseInt(c[1]);break;case"hl":o.hideLayer=c[1];break;case"om":o.openedMarker=c[1];break;case"c":if(this.core){const h=this.core.mapDivDocument.querySelector(".modalBase");new $h(h,{root:this.core.mapDivDocument}).hide()}break;case"mobile_if":this.mobile_if=c[1]==="true";break}}),!this.core)o.mapID&&(t.restore=o,this.restoring=!0),await this.initializer(t),await this.core.waitReady,this.restoring=!1,this.updateUrl();else if(o.mapID){if(this.restoring=!0,await this.core.waitReady,this.core.changeMap(o.mapID,o),this.sliderNew){const c=(o.transparency||0)/100;this.sliderNew.set("slidervalue",c),this.sliderNew.element&&(this.sliderNew.element.value=(1-c).toString())}this.restoring=!1,this.updateUrl()}this.waitReadyBridge&&(this.waitReadyBridge(this),delete this.waitReadyBridge)}),Ig({hashbang:!0}),this.waitReady=()=>new Promise((i,r)=>{this.waitReadyBridge=i})):this.waitReady=async()=>this.initializer(t)}static async createObject(t){return new Tv(t).waitReady()}async initializer(t){return await B9(this,t),this}t(t,i){return this._t?this._t(t,i):t}translate(t){if(!t||typeof t=="string")return t;const i=Object.keys(t);let r=i.reduce((s,a,o,l)=>(a==this.lang?s=[t[a],!0]:(!s||a=="en"&&!s[1])&&(s=[t[a],!1]),o==l.length-1?s[0]:s),void 0);if(r=typeof r=="string"?r:`${r}`,this.i18n.exists(r,{ns:"translation",nsSeparator:"__X__yX__X__"}))return this.t(r,{ns:"translation",nsSeparator:"__X__yX__X__"});for(let s=0;s<i.length;s++){const a=i[s];this.i18n.addResource(a,"translation",r,t[a])}return this.t(r,{ns:"translation",nsSeparator:"__X__yX__X__"})}handleMarkerAction(t){iU(this,t)}showContextMenu(t){X8(this,t)}async xyToMapIDs(t,i=10){return J8(this,t,i)}setShowBorder(t){this.core.requestUpdateState({showBorder:t?1:0}),this.updateEnvelope(),t?this.core.mapDivDocument.classList.add("show-border"):this.core.mapDivDocument.classList.remove("show-border"),this.core.restoreSession&&this.core.requestUpdateState({showBorder:t?1:0})}setHideMarker(t){j8(this,t)}handleMarkerActionById(t){K8(this,t)}updateUrl(){if(!this.appOption.stateUrl||this.restoring)return;const t=this.core.mapObject;if(!t)return;const i=t.getView(),r=i.getCenter(),s=i.getZoom(),a=i.getRotation(),o=this.core.from?this.core.from.mapID:"";if(!o)return;let l="";if(this.baseSwiper){const u=this.baseSwiper.slides[this.baseSwiper.activeIndex];u&&(l=u.getAttribute("data")||"")}const c=this.sliderNew?this.sliderNew.get("slidervalue")*100:0;let h=`s:${o}`;l&&l!==o&&(h+=`/b:${l}`),c>0&&(h+=`/t:${c}`),h+=`/x:${r[0]}`,h+=`/y:${r[1]}`,h+=`/z:${s}`,a!==0&&(h+=`/r:${a*180/Math.PI}`),this.core.stateBuffer.showBorder&&(h+="/sb:1"),this.core.mapDivDocument.classList.contains("hide-marker")&&(h+="/hm:1"),this.enableMarkerList&&this.core.stateBuffer.markerList&&(h+=`/om:${this.core.stateBuffer.markerList}`),this.selectedMarkerNamespaceID&&(h+=`/om:${this.selectedMarkerNamespaceID}`),this.pathThatSet!==h&&(this.pathThatSet=h,Ig(`#!${h}`))}updateEnvelope(){if(this.core.mapObject){if(this.core.mapObject.resetEnvelope(),this._selectCandidateSources)for(const t of Object.keys(this._selectCandidateSources))this.core.mapObject.removeEnvelope&&(console.log(`[Debug] Removing envelope for ${t}`),this.core.mapObject.removeEnvelope(this._selectCandidateSources[t]));if(this._selectCandidateSources={},this.core.stateBuffer.showBorder){if(!this.core.from)return;let t=null;if(this.overlaySwiper){const i=this.overlaySwiper.slides[this.overlaySwiper.activeIndex];i&&(t=i.getAttribute("data"))}Object.keys(this.core.cacheHash).filter(i=>this.core.cacheHash[i].envelope).map(i=>{const r=this.core.cacheHash[i],s=i===t,a=i===this.core.from.mapID&&typeof r.xy2SysCoord=="function"?[[0,0],[r.width,0],[r.width,r.height],[0,r.height],[0,0]].map(o=>Promise.resolve(r.xy2SysCoord(o))):r.envelope.geometry.coordinates[0].map(o=>this.core.from.merc2SysCoordAsync(o));Promise.all(a).then(o=>{const l={color:r.envelopeColor,width:2,lineDash:[6,6]};if(this.core.mapObject.setEnvelope(o,l),s&&this.core.mapObject.setFillEnvelope){console.log(`[Debug] Setting fill envelope for ${i}`);const c=Ro(r.envelopeColor||"#000000");c[3]=.4;const h=this.core.mapObject.setFillEnvelope(o,null,{color:c});this._selectCandidateSources[i]=h}})})}}}resolveRelativeLink(t,i){return DC(t,i)}checkOverlayID(t){return Y8(this,t)}areaIndex(t){return .5*Math.abs([0,1,2,3].reduce((i,r,s)=>{const a=t[s],o=t[s+1];return i+(a[0]-o[0])*(a[1]+o[1])},0))}getShareUrl(t){return t==="view"?window.location.href:window.location.href.split("?")[0].split("#")[0]}showToast(t,i){let r=document.querySelector(".custom-toast");if(r||(r=document.createElement("div"),r.className="custom-toast",document.body.appendChild(r)),r.innerText=t,i){const a=(i.closest(".recipient")||i).getBoundingClientRect();r.style.position="fixed",r.style.left=`${a.left+a.width/2}px`,r.style.top=`${a.top+a.height/2}px`,r.style.transform="translate(-50%, -50%)",r.style.bottom="auto",r.style.margin="0"}else r.style.position="fixed",r.style.left="50%",r.style.bottom="30px",r.style.top="auto",r.style.transform="",r.style.marginLeft="-125px";r.classList.add("show"),setTimeout(()=>{r.classList.remove("show")},1500)}modalSetting(t){const i=this.core.mapDivDocument.querySelector(".modalBase");i.classList.remove("modal_load","modal_poi","modal_share","modal_help","modal_gpsW","modal_gpsD","modal_map","modal_marker_list"),i.classList.add(`modal_${t}`)}ellips(){PR(this.core.mapDivDocument)}remove(){this.core.remove(),delete this.core}}const dU={appid:"maplat",enableCache:!1,restoreSession:!1,stateUrl:!0,enableBorder:!0,northTop:!0,lang:"ja"},G9=window.location.href.split("#!")[0],Qx=G9.slice(window.location.href.indexOf("?")+1).split("&");for(let n=0;n<Qx.length;n++){const e=Qx[n].split("=");dU[e[0]]=e[1]=="true"?!0:e[1]=="false"?!1:e[1]}Tv.createObject(dU).then(n=>{n.addEventListener("clickMarker",e=>{console.log(e)}),n.addEventListener("clickMap",e=>{console.log(e)})});export{l6 as c,Y3 as g};
